[2025-12-22 21:57:48.807] [INF] [] Запуск приложения Restaurant API
[2025-12-22 21:57:51.343] [INF] [] Приложение Restaurant API успешно запущено
[2025-12-22 21:57:51.389] [INF] [Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager] User profile is available. Using 'C:\Users\motya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-12-22 21:57:51.679] [INF] [Microsoft.Hosting.Lifetime] Now listening on: https://localhost:7188
[2025-12-22 21:57:51.682] [INF] [Microsoft.Hosting.Lifetime] Now listening on: http://localhost:5143
[2025-12-22 21:57:51.812] [INF] [Microsoft.Hosting.Lifetime] Application started. Press Ctrl+C to shut down.
[2025-12-22 21:57:51.832] [INF] [Microsoft.Hosting.Lifetime] Hosting environment: Development
[2025-12-22 21:57:51.850] [INF] [Microsoft.Hosting.Lifetime] Content root path: D:\restaurant-project\RestaurantAPI\RestaurantApi
[2025-12-22 21:57:52.729] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger - null null
[2025-12-22 21:57:53.136] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger - 301 0 null 409.0372ms
[2025-12-22 21:57:53.146] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/index.html - null null
[2025-12-22 21:57:53.392] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/index.html - 200 null text/html;charset=utf-8 245.8209ms
[2025-12-22 21:57:53.450] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/swagger-ui.css - null null
[2025-12-22 21:57:53.450] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/swagger-ui-bundle.js - null null
[2025-12-22 21:57:53.450] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/swagger-ui-standalone-preset.js - null null
[2025-12-22 21:57:53.451] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - null null
[2025-12-22 21:57:53.452] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_vs/browserLink - null null
[2025-12-22 21:57:53.481] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 30.0521ms
[2025-12-22 21:57:53.489] [INF] [Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
[2025-12-22 21:57:53.489] [INF] [Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
[2025-12-22 21:57:53.503] [INF] [Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
[2025-12-22 21:57:53.507] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 56.7546ms
[2025-12-22 21:57:53.510] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/swagger-ui.css - 200 152034 text/css 60.1896ms
[2025-12-22 21:57:53.541] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 90.9544ms
[2025-12-22 21:57:53.602] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_vs/browserLink - 200 null text/javascript; charset=UTF-8 150.5001ms
[2025-12-22 21:57:53.737] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - null null
[2025-12-22 21:57:53.867] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 130.2583ms
[2025-12-22 21:59:00.229] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - null null
[2025-12-22 21:59:00.249] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:00.256] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - 204 null null 26.6442ms
[2025-12-22 21:59:00.260] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Auth/login - application/json 44
[2025-12-22 21:59:00.278] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:02.920] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-22 21:59:02.994] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.AuthResponseDto]] Login(RestaurantAPI.DTOs.UserLoginDto) on controller RestaurantAPI.Controllers.AuthController (RestaurantApi).
[2025-12-22 21:59:10.037] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (222ms) [Parameters=[@__dto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Username] = @__dto_Username_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:10.969] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - null null
[2025-12-22 21:59:10.976] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:10.979] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - 204 null null 9.5099ms
[2025-12-22 21:59:10.982] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Auth/login - application/json 44
[2025-12-22 21:59:10.996] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:11.002] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-22 21:59:11.005] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.AuthResponseDto]] Login(RestaurantAPI.DTOs.UserLoginDto) on controller RestaurantAPI.Controllers.AuthController (RestaurantApi).
[2025-12-22 21:59:11.074] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__dto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Username] = @__dto_Username_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:11.986] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [JwtTokens] ([CreatedAt], [ExpiresAt], [Revoked], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
[2025-12-22 21:59:12.058] [INF] [RestaurantAPI.Controllers.AuthController] Пользователь admin успешно вошел в систему
[2025-12-22 21:59:12.067] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'RestaurantAPI.DTOs.AuthResponseDto'.
[2025-12-22 21:59:12.099] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.AuthController.Login (RestaurantApi) in 9087.8421ms
[2025-12-22 21:59:12.106] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-22 21:59:12.126] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Auth/login - 499 null application/json; charset=utf-8 11866.5661ms
[2025-12-22 21:59:12.182] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [JwtTokens] ([CreatedAt], [ExpiresAt], [Revoked], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
[2025-12-22 21:59:12.188] [INF] [RestaurantAPI.Controllers.AuthController] Пользователь admin успешно вошел в систему
[2025-12-22 21:59:12.193] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'RestaurantAPI.DTOs.AuthResponseDto'.
[2025-12-22 21:59:12.198] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.AuthController.Login (RestaurantApi) in 1189.7408ms
[2025-12-22 21:59:12.201] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-22 21:59:12.205] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Auth/login - 200 null application/json; charset=utf-8 1223.0368ms
[2025-12-22 21:59:12.213] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Cart - null null
[2025-12-22 21:59:12.221] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:12.225] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Cart - 204 null null 11.2328ms
[2025-12-22 21:59:12.227] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Cart - null null
[2025-12-22 21:59:12.237] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:12.341] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi)'
[2025-12-22 21:59:12.352] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.CartReadDto]] GetCart() on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 21:59:12.914] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (32ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [s].[Id], [s].[CartId], [s].[CreatedAt], [s].[DishId], [s].[Notes], [s].[Quantity], [s].[UpdatedAt], [s].[Id0], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedBy], [s].[DeletedAt], [s].[DeletedBy], [s].[Description], [s].[IsDeleted], [s].[Name], [s].[Notes0], [s].[Price], [s].[UpdatedAt0], [s].[UpdatedBy]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt], [d].[Id] AS [Id0], [d].[CategoryId], [d].[CreatedAt] AS [CreatedAt0], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes] AS [Notes0], [d].[Price], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UpdatedBy]
    FROM [CartItems] AS [c0]
    INNER JOIN [Dishes] AS [d] ON [c0].[DishId] = [d].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
[2025-12-22 21:59:12.978] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.DTOs.CartReadDto'.
[2025-12-22 21:59:13.011] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi) in 651.5782ms
[2025-12-22 21:59:13.015] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi)'
[2025-12-22 21:59:13.019] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Cart - 200 null application/json; charset=utf-8 792.1445ms
[2025-12-22 21:59:14.931] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 21:59:14.932] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 21:59:14.932] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 21:59:14.971] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:14.975] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:14.981] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:14.983] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 51.8061ms
[2025-12-22 21:59:14.984] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 52.634ms
[2025-12-22 21:59:14.986] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 53.9033ms
[2025-12-22 21:59:14.989] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 21:59:14.989] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 21:59:14.990] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 21:59:15.015] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:15.022] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:15.026] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:15.030] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 21:59:15.030] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 21:59:15.030] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 21:59:15.051] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.CategoryReadDto]]] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-22 21:59:15.052] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.MenuReadDto]]] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-22 21:59:15.052] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 21:59:15.112] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:15.113] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:15.119] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:15.140] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 21:59:15.143] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[CreatedAt], [m].[CreatedBy], [m].[DeletedAt], [m].[DeletedBy], [m].[IsDeleted], [m].[Name], [m].[Notes], [m].[UpdatedAt], [m].[UpdatedBy]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 21:59:15.171] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 21:59:15.250] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-22 21:59:15.250] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 21:59:15.257] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:15.259] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:15.272] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 213.6397ms
[2025-12-22 21:59:15.273] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 219.2888ms
[2025-12-22 21:59:15.275] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 21:59:15.279] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 21:59:15.282] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 293.1328ms
[2025-12-22 21:59:15.284] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 294.3588ms
[2025-12-22 21:59:15.287] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 21:59:15.300] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 21:59:15.302] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:15.307] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:15.308] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 21.432ms
[2025-12-22 21:59:15.311] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 21:59:15.320] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 257.1205ms
[2025-12-22 21:59:15.324] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:15.327] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 21:59:15.332] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 342.11ms
[2025-12-22 21:59:15.333] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 21:59:15.349] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-22 21:59:15.393] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (12ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-22 21:59:15.432] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-22 21:59:15.439] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-22 21:59:15.444] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:15.453] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 97.3774ms
[2025-12-22 21:59:15.457] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 21:59:15.460] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 149.0601ms
[2025-12-22 21:59:16.122] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=c14b7bc6-a42f-4aa6-821e-694beb05a2eb&pageSize=1000 - null null
[2025-12-22 21:59:16.127] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:16.129] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=c14b7bc6-a42f-4aa6-821e-694beb05a2eb&pageSize=1000 - 204 null null 6.9594ms
[2025-12-22 21:59:16.131] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=c14b7bc6-a42f-4aa6-821e-694beb05a2eb&pageSize=1000 - null null
[2025-12-22 21:59:16.140] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:16.142] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-22 21:59:16.156] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishIngredients", controller = "DishIngredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishIngredients(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishIngredientsController (RestaurantApi).
[2025-12-22 21:59:16.202] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DishIngredients] AS [d]
INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
[2025-12-22 21:59:16.240] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[DishId], [s].[Name] AS [DishName], [s].[IngredientId], [i].[Name] AS [IngredientName], [s].[Quantity]
FROM (
    SELECT [d].[Id], [d].[DishId], [d].[IngredientId], [d].[Quantity], [d0].[Name]
    FROM [DishIngredients] AS [d]
    INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
    ORDER BY [d0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Ingredients] AS [i] ON [s].[IngredientId] = [i].[Id]
ORDER BY [s].[Name]
[2025-12-22 21:59:16.248] [INF] [RestaurantAPI.Controllers.DishIngredientsController] Получен список ингредиентов блюд. Количество: 7, Всего: 7, Страница: 1
[2025-12-22 21:59:16.253] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishIngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:16.267] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi) in 104.2174ms
[2025-12-22 21:59:16.269] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-22 21:59:16.273] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=c14b7bc6-a42f-4aa6-821e-694beb05a2eb&pageSize=1000 - 200 null application/json; charset=utf-8 141.0584ms
[2025-12-22 21:59:21.312] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=e50cda14-92f5-44fc-b8f2-f4240ac9e0a9&pageSize=1000 - null null
[2025-12-22 21:59:21.317] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:21.318] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=e50cda14-92f5-44fc-b8f2-f4240ac9e0a9&pageSize=1000 - 204 null null 6.3227ms
[2025-12-22 21:59:21.321] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=e50cda14-92f5-44fc-b8f2-f4240ac9e0a9&pageSize=1000 - null null
[2025-12-22 21:59:21.331] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:21.334] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-22 21:59:21.337] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishIngredients", controller = "DishIngredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishIngredients(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishIngredientsController (RestaurantApi).
[2025-12-22 21:59:21.350] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DishIngredients] AS [d]
INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
[2025-12-22 21:59:21.366] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[DishId], [s].[Name] AS [DishName], [s].[IngredientId], [i].[Name] AS [IngredientName], [s].[Quantity]
FROM (
    SELECT [d].[Id], [d].[DishId], [d].[IngredientId], [d].[Quantity], [d0].[Name]
    FROM [DishIngredients] AS [d]
    INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
    ORDER BY [d0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Ingredients] AS [i] ON [s].[IngredientId] = [i].[Id]
ORDER BY [s].[Name]
[2025-12-22 21:59:21.377] [INF] [RestaurantAPI.Controllers.DishIngredientsController] Получен список ингредиентов блюд. Количество: 4, Всего: 4, Страница: 1
[2025-12-22 21:59:21.382] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishIngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:21.385] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi) in 40.2073ms
[2025-12-22 21:59:21.389] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-22 21:59:21.395] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=e50cda14-92f5-44fc-b8f2-f4240ac9e0a9&pageSize=1000 - 200 null application/json; charset=utf-8 73.7691ms
[2025-12-22 21:59:23.396] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - null null
[2025-12-22 21:59:23.406] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:23.407] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - 204 null null 10.8157ms
[2025-12-22 21:59:23.410] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - null null
[2025-12-22 21:59:23.423] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:23.426] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 21:59:23.430] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-22 21:59:23.439] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-22 21:59:23.451] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-22 21:59:23.457] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 4, Всего: 4, Страница: 1
[2025-12-22 21:59:23.463] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:23.465] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 29.9988ms
[2025-12-22 21:59:23.468] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 21:59:23.474] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - 200 null application/json; charset=utf-8 64.4036ms
[2025-12-22 21:59:25.751] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 21:59:25.757] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:25.759] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 7.2321ms
[2025-12-22 21:59:25.761] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 21:59:25.767] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:25.770] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 21:59:25.774] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-22 21:59:25.790] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-22 21:59:25.806] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-22 21:59:25.810] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-22 21:59:25.814] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:25.816] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 37.8643ms
[2025-12-22 21:59:25.819] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 21:59:25.821] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 60.1736ms
[2025-12-22 21:59:26.598] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Cart/items - null null
[2025-12-22 21:59:26.605] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:26.607] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Cart/items - 204 null null 9.8673ms
[2025-12-22 21:59:26.609] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Cart/items - application/json 75
[2025-12-22 21:59:26.618] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:26.621] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi)'
[2025-12-22 21:59:26.632] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "AddItem", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.CartReadDto]] AddItem(RestaurantAPI.DTOs.CartItemAddDto) on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 21:59:26.706] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
[2025-12-22 21:59:26.738] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__8__locals1_dto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__8__locals1_dto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:26.891] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Guid), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p7='?' (DbType = Guid), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CartItems] ([CartId], [CreatedAt], [DishId], [Notes], [Quantity], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE [Carts] SET [UpdatedAt] = @p6
OUTPUT 1
WHERE [Id] = @p7;
[2025-12-22 21:59:26.923] [INF] [RestaurantAPI.Controllers.CartController] Товар "506c83ad-20ac-42f9-a32e-16f2701bad37" добавлен в корзину пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b"
[2025-12-22 21:59:26.949] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (22ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [s].[Id], [s].[CartId], [s].[CreatedAt], [s].[DishId], [s].[Notes], [s].[Quantity], [s].[UpdatedAt], [s].[Id0], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedBy], [s].[DeletedAt], [s].[DeletedBy], [s].[Description], [s].[IsDeleted], [s].[Name], [s].[Notes0], [s].[Price], [s].[UpdatedAt0], [s].[UpdatedBy]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt], [d].[Id] AS [Id0], [d].[CategoryId], [d].[CreatedAt] AS [CreatedAt0], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes] AS [Notes0], [d].[Price], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UpdatedBy]
    FROM [CartItems] AS [c0]
    INNER JOIN [Dishes] AS [d] ON [c0].[DishId] = [d].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
[2025-12-22 21:59:26.965] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.DTOs.CartReadDto'.
[2025-12-22 21:59:26.971] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi) in 335.2095ms
[2025-12-22 21:59:26.974] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi)'
[2025-12-22 21:59:26.976] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Cart/items - 200 null application/json; charset=utf-8 366.5506ms
[2025-12-22 21:59:28.427] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Cart/items - application/json 75
[2025-12-22 21:59:28.432] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:28.436] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi)'
[2025-12-22 21:59:28.439] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "AddItem", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.CartReadDto]] AddItem(RestaurantAPI.DTOs.CartItemAddDto) on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 21:59:28.456] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
[2025-12-22 21:59:28.472] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__8__locals1_dto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__8__locals1_dto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:28.491] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Guid), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p7='?' (DbType = Guid), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CartItems] ([CartId], [CreatedAt], [DishId], [Notes], [Quantity], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE [Carts] SET [UpdatedAt] = @p6
OUTPUT 1
WHERE [Id] = @p7;
[2025-12-22 21:59:28.499] [INF] [RestaurantAPI.Controllers.CartController] Товар "bc75836d-c978-460e-b72a-7ad8d898f4db" добавлен в корзину пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b"
[2025-12-22 21:59:28.524] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (22ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [s].[Id], [s].[CartId], [s].[CreatedAt], [s].[DishId], [s].[Notes], [s].[Quantity], [s].[UpdatedAt], [s].[Id0], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedBy], [s].[DeletedAt], [s].[DeletedBy], [s].[Description], [s].[IsDeleted], [s].[Name], [s].[Notes0], [s].[Price], [s].[UpdatedAt0], [s].[UpdatedBy]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt], [d].[Id] AS [Id0], [d].[CategoryId], [d].[CreatedAt] AS [CreatedAt0], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes] AS [Notes0], [d].[Price], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UpdatedBy]
    FROM [CartItems] AS [c0]
    INNER JOIN [Dishes] AS [d] ON [c0].[DishId] = [d].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
[2025-12-22 21:59:28.532] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.DTOs.CartReadDto'.
[2025-12-22 21:59:28.535] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi) in 91.0747ms
[2025-12-22 21:59:28.537] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi)'
[2025-12-22 21:59:28.541] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Cart/items - 200 null application/json; charset=utf-8 113.3829ms
[2025-12-22 21:59:32.472] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-22 21:59:32.479] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:32.483] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 11.0306ms
[2025-12-22 21:59:32.486] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 224
[2025-12-22 21:59:32.496] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:32.500] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 21:59:32.515] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 21:59:32.584] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:32.594] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:32.623] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:32.636] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "601d547d-42ee-4d95-abc0-42bf30f4d94b", Notes: null, ItemsCount: 2
[2025-12-22 21:59:32.774] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 21:59:32.805] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:32.813] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "506c83ad-20ac-42f9-a32e-16f2701bad37", Quantity: 1, Notes: null
[2025-12-22 21:59:32.883] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:32.890] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "bc75836d-c978-460e-b72a-7ad8d898f4db", Quantity: 1, Notes: null
[2025-12-22 21:59:32.975] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (55ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p12='?' (DbType = DateTime), @p13='?' (Size = 100), @p14='?' (DbType = DateTime), @p15='?' (Size = 100), @p16='?' (DbType = Guid), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (DbType = Guid), @p20='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (Size = 100), @p25='?' (DbType = Guid), @p24='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, 0),
(@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, 1)) AS i ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
VALUES (i.[CreatedAt], i.[CreatedBy], i.[DeletedAt], i.[DeletedBy], i.[DishId], i.[IsDeleted], i.[Notes], i.[OrderId], i.[Price], i.[Quantity], i.[UpdatedAt], i.[UpdatedBy])
OUTPUT INSERTED.[Id], i._Position;
UPDATE [Orders] SET [Total] = @p24
OUTPUT 1
WHERE [Id] = @p25;
[2025-12-22 21:59:32.991] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "fa8eca9e-6705-4d5a-b854-ad054aa36622" создан пользователем "601d547d-42ee-4d95-abc0-42bf30f4d94b". Сумма: 1100.00, Блюд: 2
[2025-12-22 21:59:33.009] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 21:59:33.055] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 535.229ms
[2025-12-22 21:59:33.057] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 21:59:33.063] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 577.569ms
[2025-12-22 21:59:33.068] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Cart - null null
[2025-12-22 21:59:33.072] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:33.074] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Cart - 204 null null 5.9311ms
[2025-12-22 21:59:33.077] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 DELETE https://localhost:7188/api/Cart - null null
[2025-12-22 21:59:33.091] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:33.096] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.ClearCart (RestaurantApi)'
[2025-12-22 21:59:33.110] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "ClearCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] ClearCart() on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 21:59:33.133] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
[2025-12-22 21:59:33.176] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p3='?' (DbType = Guid), @p2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p0;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [Carts] SET [UpdatedAt] = @p2
OUTPUT 1
WHERE [Id] = @p3;
[2025-12-22 21:59:33.195] [INF] [RestaurantAPI.Controllers.CartController] Корзина пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b" очищена
[2025-12-22 21:59:33.205] [INF] [Microsoft.AspNetCore.Mvc.StatusCodeResult] Executing StatusCodeResult, setting HTTP status code 204
[2025-12-22 21:59:33.207] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.ClearCart (RestaurantApi) in 85.9263ms
[2025-12-22 21:59:33.212] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.ClearCart (RestaurantApi)'
[2025-12-22 21:59:33.216] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 DELETE https://localhost:7188/api/Cart - 204 null null 139.2987ms
[2025-12-22 21:59:37.038] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - null null
[2025-12-22 21:59:37.054] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:37.056] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - 204 null null 18.0031ms
[2025-12-22 21:59:37.058] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - null null
[2025-12-22 21:59:37.069] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:37.072] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-22 21:59:37.084] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.OrderReadDto]]] GetMyOrders(Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 21:59:37.105] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_Value_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:37.133] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[UserId] = @__userId_Value_0 AND [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 21:59:37.142] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b". Количество: 16, Всего: 16, Страница: 1
[2025-12-22 21:59:37.146] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:37.152] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 63.7521ms
[2025-12-22 21:59:37.155] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-22 21:59:37.157] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - 200 null application/json; charset=utf-8 98.5377ms
[2025-12-22 21:59:39.354] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 21:59:39.359] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 21:59:39.367] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:39.372] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 18.8234ms
[2025-12-22 21:59:39.372] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:39.375] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 21:59:39.379] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 204 null null 20.8157ms
[2025-12-22 21:59:39.381] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 21:59:39.385] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:39.393] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:39.396] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 21:59:39.397] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 21:59:39.403] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 21:59:39.404] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 21:59:39.451] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:39.453] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 21:59:39.472] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:39.473] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 21:59:39.488] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:39.488] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:39.502] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:39.502] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:39.560] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 21:59:39.561] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 21:59:39.566] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 267266.34, Заказов: 44
[2025-12-22 21:59:39.570] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 21:59:39.574] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 21:59:39.576] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 21:59:39.592] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 178.5063ms
[2025-12-22 21:59:39.592] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 182.6867ms
[2025-12-22 21:59:39.594] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 21:59:39.597] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 21:59:39.600] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 218.2764ms
[2025-12-22 21:59:39.602] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 227.3548ms
[2025-12-22 21:59:39.620] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 21:59:39.620] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 21:59:39.624] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:39.628] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:39.629] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 204 null null 8.8089ms
[2025-12-22 21:59:39.630] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 204 null null 9.465ms
[2025-12-22 21:59:39.632] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 21:59:39.632] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 21:59:39.645] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:39.651] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:39.652] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 21:59:39.653] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 21:59:39.657] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 21:59:39.664] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 21:59:39.667] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 21:59:39.675] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 21:59:39.682] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:39.688] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:39.696] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 21:59:39.698] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 21:59:39.700] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 265860.00, Заказов: 38
[2025-12-22 21:59:39.706] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 21:59:39.710] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 46.6289ms
[2025-12-22 21:59:39.712] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 21:59:39.715] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 82.7692ms
[2025-12-22 21:59:39.717] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:39.729] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 61.0861ms
[2025-12-22 21:59:39.731] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 21:59:39.734] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 101.917ms
[2025-12-22 21:59:39.738] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 21:59:39.738] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 21:59:39.745] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:39.750] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:39.751] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 204 null null 13.1505ms
[2025-12-22 21:59:39.753] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 21:59:39.753] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 21:59:39.759] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 21:59:39.764] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:39.768] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 21:59:39.771] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 21:59:39.771] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 21:59:39.778] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 21:59:39.780] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 21:59:39.783] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:39.787] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:39.793] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:39.794] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 15.9502ms
[2025-12-22 21:59:39.798] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 21:59:39.799] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 21:59:39.803] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 21:59:39.806] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 52.4147ms
[2025-12-22 21:59:39.808] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 21:59:39.816] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 49.1852ms
[2025-12-22 21:59:39.818] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 21:59:39.821] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 83.2067ms
[2025-12-22 21:59:39.827] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - null null
[2025-12-22 21:59:39.827] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - null null
[2025-12-22 21:59:39.832] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:39.838] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:39.839] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - 204 null null 12.4762ms
[2025-12-22 21:59:39.840] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - 204 null null 12.928ms
[2025-12-22 21:59:39.842] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - null null
[2025-12-22 21:59:39.842] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - null null
[2025-12-22 21:59:39.855] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:39.860] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:39.862] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 21:59:39.862] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 21:59:39.864] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 21:59:39.866] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 21:59:39.874] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 21:59:39.877] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 21:59:39.880] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 21:59:39.885] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 21:59:39.888] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:39.893] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:39.897] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:39.901] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:39.906] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 21:59:39.909] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 21:59:39.911] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 21:59:39.915] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 21:59:39.917] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 21:59:39.921] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 21:59:39.923] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 54.0875ms
[2025-12-22 21:59:39.926] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 53.144ms
[2025-12-22 21:59:39.928] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 21:59:39.930] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 21:59:39.933] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - 200 null application/json; charset=utf-8 91.3912ms
[2025-12-22 21:59:39.935] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - 200 null application/json; charset=utf-8 93.3357ms
[2025-12-22 21:59:39.943] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 21:59:39.949] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:39.951] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 8.5948ms
[2025-12-22 21:59:39.953] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 21:59:39.963] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:39.966] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 21:59:39.975] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 21:59:40.055] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (32ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 21:59:40.059] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 21:59:40.063] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:40.071] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 93.4839ms
[2025-12-22 21:59:40.074] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 21:59:40.076] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 122.1491ms
[2025-12-22 21:59:40.081] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 21:59:40.086] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:40.089] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 7.8932ms
[2025-12-22 21:59:40.091] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 21:59:40.099] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:40.101] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 21:59:40.111] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 21:59:40.155] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 21:59:40.162] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:40.171] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 54.4954ms
[2025-12-22 21:59:40.173] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 21:59:40.176] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 84.9972ms
[2025-12-22 21:59:40.210] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 21:59:40.214] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:40.215] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 5.1778ms
[2025-12-22 21:59:40.218] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 21:59:40.225] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:40.228] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 21:59:40.231] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 21:59:40.247] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 21:59:40.253] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:40.257] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 23.0574ms
[2025-12-22 21:59:40.260] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 21:59:40.262] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 44.7321ms
[2025-12-22 21:59:47.633] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 21:59:47.633] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories - null null
[2025-12-22 21:59:47.634] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Ingredients?pageSize=1000 - null null
[2025-12-22 21:59:47.639] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:47.643] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:47.648] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:47.649] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 15.9777ms
[2025-12-22 21:59:47.650] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories - 204 null null 16.8583ms
[2025-12-22 21:59:47.652] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Ingredients?pageSize=1000 - 204 null null 17.7958ms
[2025-12-22 21:59:47.652] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 21:59:47.655] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories - null null
[2025-12-22 21:59:47.656] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - null null
[2025-12-22 21:59:47.672] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:47.675] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:47.679] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:47.680] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 21:59:47.681] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 21:59:47.682] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-22 21:59:47.684] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 21:59:47.686] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.CategoryReadDto]]] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-22 21:59:47.692] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:47.696] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetIngredients", controller = "Ingredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.IngredientReadDto]]] GetIngredients(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.IngredientsController (RestaurantApi).
[2025-12-22 21:59:47.699] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:47.708] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 21:59:47.714] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 21:59:47.717] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 21:59:47.722] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 21:59:47.722] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:47.726] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:47.728] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:47.736] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 46.1927ms
[2025-12-22 21:59:47.739] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 44.9167ms
[2025-12-22 21:59:47.740] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 21:59:47.743] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 21:59:47.744] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 91.6118ms
[2025-12-22 21:59:47.751] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories - 200 null application/json; charset=utf-8 96.2248ms
[2025-12-22 21:59:47.759] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[CreatedAt], [i].[CreatedBy], [i].[DeletedAt], [i].[DeletedBy], [i].[IsDeleted], [i].[Name], [i].[Notes], [i].[UpdatedAt], [i].[UpdatedBy]
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
ORDER BY [i].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 21:59:47.806] [INF] [RestaurantAPI.Controllers.IngredientsController] Получен список ингредиентов. Количество: 24, Всего: 24, Страница: 1
[2025-12-22 21:59:47.808] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.IngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:47.817] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi) in 113.4036ms
[2025-12-22 21:59:47.819] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-22 21:59:47.821] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - 200 null application/json; charset=utf-8 165.0064ms
[2025-12-22 21:59:49.501] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=1000 - null null
[2025-12-22 21:59:49.506] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:49.508] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=1000 - 204 null null 6.7803ms
[2025-12-22 21:59:49.510] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=1000 - null null
[2025-12-22 21:59:49.519] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:49.521] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 21:59:49.523] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.MenuReadDto]]] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-22 21:59:49.531] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:49.542] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[CreatedAt], [m].[CreatedBy], [m].[DeletedAt], [m].[DeletedBy], [m].[IsDeleted], [m].[Name], [m].[Notes], [m].[UpdatedAt], [m].[UpdatedBy]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 21:59:49.546] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-22 21:59:49.550] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:49.552] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 26.7955ms
[2025-12-22 21:59:49.555] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 21:59:49.558] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=1000 - 200 null application/json; charset=utf-8 48.0815ms
[2025-12-22 21:59:50.079] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - null null
[2025-12-22 21:59:50.082] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:50.083] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-22 21:59:50.085] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetIngredients", controller = "Ingredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.IngredientReadDto]]] GetIngredients(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.IngredientsController (RestaurantApi).
[2025-12-22 21:59:50.091] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:50.097] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[CreatedAt], [i].[CreatedBy], [i].[DeletedAt], [i].[DeletedBy], [i].[IsDeleted], [i].[Name], [i].[Notes], [i].[UpdatedAt], [i].[UpdatedBy]
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
ORDER BY [i].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 21:59:50.101] [INF] [RestaurantAPI.Controllers.IngredientsController] Получен список ингредиентов. Количество: 24, Всего: 24, Страница: 1
[2025-12-22 21:59:50.103] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.IngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:50.104] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi) in 16.0399ms
[2025-12-22 21:59:50.106] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-22 21:59:50.108] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - 200 null application/json; charset=utf-8 28.6111ms
[2025-12-22 21:59:50.625] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=1000 - null null
[2025-12-22 21:59:50.630] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:50.632] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=1000 - 204 null null 6.3248ms
[2025-12-22 21:59:50.634] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=1000 - null null
[2025-12-22 21:59:50.641] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:50.642] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 21:59:50.645] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.CategoryReadDto]]] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-22 21:59:50.650] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:50.655] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 21:59:50.661] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 21:59:50.663] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:50.665] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 17.4744ms
[2025-12-22 21:59:50.667] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 21:59:50.671] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=1000 - 200 null application/json; charset=utf-8 36.6009ms
[2025-12-22 21:59:51.048] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 21:59:51.051] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Roles - null null
[2025-12-22 21:59:51.054] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:51.058] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:51.060] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 12.0619ms
[2025-12-22 21:59:51.061] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Roles - 204 null null 9.9957ms
[2025-12-22 21:59:51.062] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 21:59:51.063] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Roles - null null
[2025-12-22 21:59:51.080] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:51.083] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:51.085] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 21:59:51.086] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi)'
[2025-12-22 21:59:51.095] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRoles", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.RoleReadDto]]] GetRoles(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.RolesController (RestaurantApi).
[2025-12-22 21:59:51.095] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.UserReadDto]]] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-22 21:59:51.122] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:51.137] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Roles] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:51.155] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[IsDeleted], [u0].[Notes], [u0].[PasswordHash], [u0].[RoleId], [u0].[UpdatedAt], [u0].[UpdatedBy], [u0].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM (
    SELECT [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-22 21:59:51.164] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 21:59:51.166] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:51.169] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Roles] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
ORDER BY [r].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 21:59:51.173] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 65.7939ms
[2025-12-22 21:59:51.175] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 21:59:51.178] [INF] [RestaurantAPI.Controllers.RolesController] Получен список ролей. Количество: 3, Всего: 3, Страница: 1
[2025-12-22 21:59:51.178] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 115.6462ms
[2025-12-22 21:59:51.180] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.RoleReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:51.189] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi) in 89.8744ms
[2025-12-22 21:59:51.191] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi)'
[2025-12-22 21:59:51.192] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Roles - 200 null application/json; charset=utf-8 129.5866ms
[2025-12-22 21:59:51.617] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 21:59:51.623] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:51.626] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 21:59:51.629] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.UserReadDto]]] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-22 21:59:51.633] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:51.638] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[IsDeleted], [u0].[Notes], [u0].[PasswordHash], [u0].[RoleId], [u0].[UpdatedAt], [u0].[UpdatedBy], [u0].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM (
    SELECT [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-22 21:59:51.643] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 21:59:51.647] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:51.650] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 18.7153ms
[2025-12-22 21:59:51.652] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 21:59:51.654] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 37.5198ms
[2025-12-22 21:59:51.658] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 21:59:51.667] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:51.670] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 21:59:51.673] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 21:59:51.678] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:51.687] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 21:59:51.692] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 21:59:51.696] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:51.700] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 23.514ms
[2025-12-22 21:59:51.701] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 21:59:51.703] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 45.5109ms
[2025-12-22 21:59:51.708] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 21:59:51.711] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:51.713] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 4.5932ms
[2025-12-22 21:59:51.715] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 21:59:51.720] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 21:59:51.722] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 21:59:51.730] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 21:59:51.742] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 21:59:51.771] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 21:59:51.777] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 20, Всего: 44, Страница: 1
[2025-12-22 21:59:51.780] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 21:59:51.787] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 54.5695ms
[2025-12-22 21:59:51.790] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 21:59:51.791] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 76.2765ms
[2025-12-22 22:01:21.909] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - null null
[2025-12-22 22:01:21.913] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:01:21.915] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - 204 null null 6.1324ms
[2025-12-22 22:01:21.917] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Auth/login - application/json 44
[2025-12-22 22:01:21.930] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:01:21.932] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-22 22:01:21.936] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.AuthResponseDto]] Login(RestaurantAPI.DTOs.UserLoginDto) on controller RestaurantAPI.Controllers.AuthController (RestaurantApi).
[2025-12-22 22:01:21.964] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (17ms) [Parameters=[@__dto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Username] = @__dto_Username_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:01:22.379] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [JwtTokens] ([CreatedAt], [ExpiresAt], [Revoked], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
[2025-12-22 22:01:22.385] [INF] [RestaurantAPI.Controllers.AuthController] Пользователь admin успешно вошел в систему
[2025-12-22 22:01:22.387] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'RestaurantAPI.DTOs.AuthResponseDto'.
[2025-12-22 22:01:22.391] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.AuthController.Login (RestaurantApi) in 448.3445ms
[2025-12-22 22:01:22.393] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-22 22:01:22.395] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Auth/login - 200 null application/json; charset=utf-8 478.1622ms
[2025-12-22 22:01:22.401] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Cart - null null
[2025-12-22 22:01:22.410] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:01:22.413] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Cart - 204 null null 11.5622ms
[2025-12-22 22:01:22.416] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Cart - null null
[2025-12-22 22:01:22.427] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:01:22.430] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi)'
[2025-12-22 22:01:22.432] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.CartReadDto]] GetCart() on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 22:01:22.460] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (21ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [s].[Id], [s].[CartId], [s].[CreatedAt], [s].[DishId], [s].[Notes], [s].[Quantity], [s].[UpdatedAt], [s].[Id0], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedBy], [s].[DeletedAt], [s].[DeletedBy], [s].[Description], [s].[IsDeleted], [s].[Name], [s].[Notes0], [s].[Price], [s].[UpdatedAt0], [s].[UpdatedBy]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt], [d].[Id] AS [Id0], [d].[CategoryId], [d].[CreatedAt] AS [CreatedAt0], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes] AS [Notes0], [d].[Price], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UpdatedBy]
    FROM [CartItems] AS [c0]
    INNER JOIN [Dishes] AS [d] ON [c0].[DishId] = [d].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
[2025-12-22 22:01:22.466] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.DTOs.CartReadDto'.
[2025-12-22 22:01:22.469] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi) in 32.5379ms
[2025-12-22 22:01:22.471] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi)'
[2025-12-22 22:01:22.474] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Cart - 200 null application/json; charset=utf-8 58.5719ms
[2025-12-22 22:02:08.059] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Cart - null null
[2025-12-22 22:02:08.072] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:02:08.073] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Cart - 204 null null 14.1854ms
[2025-12-22 22:02:08.077] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Cart - null null
[2025-12-22 22:02:08.092] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:02:08.094] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi)'
[2025-12-22 22:02:08.102] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.CartReadDto]] GetCart() on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 22:02:08.133] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (26ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [s].[Id], [s].[CartId], [s].[CreatedAt], [s].[DishId], [s].[Notes], [s].[Quantity], [s].[UpdatedAt], [s].[Id0], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedBy], [s].[DeletedAt], [s].[DeletedBy], [s].[Description], [s].[IsDeleted], [s].[Name], [s].[Notes0], [s].[Price], [s].[UpdatedAt0], [s].[UpdatedBy]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt], [d].[Id] AS [Id0], [d].[CategoryId], [d].[CreatedAt] AS [CreatedAt0], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes] AS [Notes0], [d].[Price], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UpdatedBy]
    FROM [CartItems] AS [c0]
    INNER JOIN [Dishes] AS [d] ON [c0].[DishId] = [d].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
[2025-12-22 22:02:08.151] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.DTOs.CartReadDto'.
[2025-12-22 22:02:08.156] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi) in 49.8817ms
[2025-12-22 22:02:08.162] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi)'
[2025-12-22 22:02:08.170] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Cart - 200 null application/json; charset=utf-8 93.4224ms
[2025-12-22 22:03:40.968] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Cart - null null
[2025-12-22 22:03:40.972] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:03:40.975] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Cart - 204 null null 6.2775ms
[2025-12-22 22:03:40.983] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Cart - null null
[2025-12-22 22:03:40.988] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:03:40.991] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi)'
[2025-12-22 22:03:40.995] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.CartReadDto]] GetCart() on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 22:03:41.026] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (22ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [s].[Id], [s].[CartId], [s].[CreatedAt], [s].[DishId], [s].[Notes], [s].[Quantity], [s].[UpdatedAt], [s].[Id0], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedBy], [s].[DeletedAt], [s].[DeletedBy], [s].[Description], [s].[IsDeleted], [s].[Name], [s].[Notes0], [s].[Price], [s].[UpdatedAt0], [s].[UpdatedBy]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt], [d].[Id] AS [Id0], [d].[CategoryId], [d].[CreatedAt] AS [CreatedAt0], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes] AS [Notes0], [d].[Price], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UpdatedBy]
    FROM [CartItems] AS [c0]
    INNER JOIN [Dishes] AS [d] ON [c0].[DishId] = [d].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
[2025-12-22 22:03:41.030] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.DTOs.CartReadDto'.
[2025-12-22 22:03:41.034] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi) in 33.6223ms
[2025-12-22 22:03:41.037] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi)'
[2025-12-22 22:03:41.040] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Cart - 200 null application/json; charset=utf-8 57.0749ms
[2025-12-22 22:03:50.385] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:03:50.387] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:03:50.389] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:03:50.389] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:03:50.396] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:03:50.399] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:03:50.402] [INF] [Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
[2025-12-22 22:03:50.402] [INF] [Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
[2025-12-22 22:03:50.402] [INF] [Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
[2025-12-22 22:03:50.416] [INF] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] AuthenticationScheme: Bearer was challenged.
[2025-12-22 22:03:50.416] [INF] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] AuthenticationScheme: Bearer was challenged.
[2025-12-22 22:03:50.416] [INF] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] AuthenticationScheme: Bearer was challenged.
[2025-12-22 22:03:50.419] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 401 null application/json 29.9671ms
[2025-12-22 22:03:50.420] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 401 null application/json 35.0684ms
[2025-12-22 22:03:50.422] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 401 null application/json 35.0841ms
[2025-12-22 22:03:54.990] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:03:54.991] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:03:54.998] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:03:54.995] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:03:54.991] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:03:55.000] [INF] [Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
[2025-12-22 22:03:55.001] [INF] [Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
[2025-12-22 22:03:55.006] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:03:55.008] [INF] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] AuthenticationScheme: Bearer was challenged.
[2025-12-22 22:03:55.009] [INF] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] AuthenticationScheme: Bearer was challenged.
[2025-12-22 22:03:55.011] [INF] [Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
[2025-12-22 22:03:55.013] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 401 null application/json 22.0737ms
[2025-12-22 22:03:55.015] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 401 null application/json 25.2867ms
[2025-12-22 22:03:55.016] [INF] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] AuthenticationScheme: Bearer was challenged.
[2025-12-22 22:03:55.027] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 401 null application/json 35.5264ms
[2025-12-22 22:03:56.512] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:03:56.515] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:03:56.515] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:03:56.582] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:03:56.588] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:03:56.606] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:03:56.612] [INF] [Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
[2025-12-22 22:03:56.619] [INF] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] AuthenticationScheme: Bearer was challenged.
[2025-12-22 22:03:56.617] [INF] [Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
[2025-12-22 22:03:56.614] [INF] [Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
[2025-12-22 22:03:56.624] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 401 null application/json 111.9334ms
[2025-12-22 22:03:56.625] [INF] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] AuthenticationScheme: Bearer was challenged.
[2025-12-22 22:03:56.626] [INF] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] AuthenticationScheme: Bearer was challenged.
[2025-12-22 22:03:56.632] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 401 null application/json 117.4437ms
[2025-12-22 22:03:56.634] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 401 null application/json 119.3448ms
[2025-12-22 22:03:58.460] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:03:58.460] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:03:58.460] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:03:58.469] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:03:58.466] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:03:58.464] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:03:58.471] [INF] [Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
[2025-12-22 22:03:58.472] [INF] [Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
[2025-12-22 22:03:58.472] [INF] [Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
[2025-12-22 22:03:58.474] [INF] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] AuthenticationScheme: Bearer was challenged.
[2025-12-22 22:03:58.476] [INF] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] AuthenticationScheme: Bearer was challenged.
[2025-12-22 22:03:58.480] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 401 null application/json 19.9011ms
[2025-12-22 22:03:58.478] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 401 null application/json 17.7154ms
[2025-12-22 22:03:58.477] [INF] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] AuthenticationScheme: Bearer was challenged.
[2025-12-22 22:03:58.491] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 401 null application/json 30.8934ms
[2025-12-22 22:04:00.218] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:04:00.220] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:04:00.220] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:04:00.222] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:00.224] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:00.227] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:00.228] [INF] [Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
[2025-12-22 22:04:00.228] [INF] [Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
[2025-12-22 22:04:00.229] [INF] [Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
[2025-12-22 22:04:00.230] [INF] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] AuthenticationScheme: Bearer was challenged.
[2025-12-22 22:04:00.231] [INF] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] AuthenticationScheme: Bearer was challenged.
[2025-12-22 22:04:00.233] [INF] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] AuthenticationScheme: Bearer was challenged.
[2025-12-22 22:04:00.237] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 401 null application/json 16.79ms
[2025-12-22 22:04:00.236] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 401 null application/json 15.7607ms
[2025-12-22 22:04:00.234] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 401 null application/json 16.3393ms
[2025-12-22 22:04:03.258] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - null null
[2025-12-22 22:04:03.262] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:03.264] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - 204 null null 5.9433ms
[2025-12-22 22:04:03.266] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Auth/login - application/json 44
[2025-12-22 22:04:03.276] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:03.279] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-22 22:04:03.283] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.AuthResponseDto]] Login(RestaurantAPI.DTOs.UserLoginDto) on controller RestaurantAPI.Controllers.AuthController (RestaurantApi).
[2025-12-22 22:04:03.300] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__dto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Username] = @__dto_Username_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:03.752] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [JwtTokens] ([CreatedAt], [ExpiresAt], [Revoked], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
[2025-12-22 22:04:03.756] [INF] [RestaurantAPI.Controllers.AuthController] Пользователь admin успешно вошел в систему
[2025-12-22 22:04:03.760] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'RestaurantAPI.DTOs.AuthResponseDto'.
[2025-12-22 22:04:03.765] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.AuthController.Login (RestaurantApi) in 477.5513ms
[2025-12-22 22:04:03.768] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-22 22:04:03.770] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Auth/login - 200 null application/json; charset=utf-8 503.9696ms
[2025-12-22 22:04:03.775] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Cart - null null
[2025-12-22 22:04:03.780] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:03.783] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Cart - 204 null null 7.5399ms
[2025-12-22 22:04:03.785] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Cart - null null
[2025-12-22 22:04:03.792] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:03.797] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi)'
[2025-12-22 22:04:03.801] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.CartReadDto]] GetCart() on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 22:04:03.818] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (12ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [s].[Id], [s].[CartId], [s].[CreatedAt], [s].[DishId], [s].[Notes], [s].[Quantity], [s].[UpdatedAt], [s].[Id0], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedBy], [s].[DeletedAt], [s].[DeletedBy], [s].[Description], [s].[IsDeleted], [s].[Name], [s].[Notes0], [s].[Price], [s].[UpdatedAt0], [s].[UpdatedBy]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt], [d].[Id] AS [Id0], [d].[CategoryId], [d].[CreatedAt] AS [CreatedAt0], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes] AS [Notes0], [d].[Price], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UpdatedBy]
    FROM [CartItems] AS [c0]
    INNER JOIN [Dishes] AS [d] ON [c0].[DishId] = [d].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
[2025-12-22 22:04:03.822] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.DTOs.CartReadDto'.
[2025-12-22 22:04:03.827] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi) in 22.5069ms
[2025-12-22 22:04:03.830] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi)'
[2025-12-22 22:04:03.832] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Cart - 200 null application/json; charset=utf-8 46.9491ms
[2025-12-22 22:04:06.183] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - null null
[2025-12-22 22:04:06.198] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:06.200] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - 204 null null 17.0183ms
[2025-12-22 22:04:06.202] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - null null
[2025-12-22 22:04:06.214] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:06.216] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-22 22:04:06.218] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.OrderReadDto]]] GetMyOrders(Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 22:04:06.229] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_Value_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:06.240] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[UserId] = @__userId_Value_0 AND [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 22:04:06.246] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b". Количество: 16, Всего: 16, Страница: 1
[2025-12-22 22:04:06.248] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:04:06.251] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 29.1032ms
[2025-12-22 22:04:06.254] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-22 22:04:06.255] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - 200 null application/json; charset=utf-8 53.4859ms
[2025-12-22 22:04:06.937] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/fa8eca9e-6705-4d5a-b854-ad054aa36622 - null null
[2025-12-22 22:04:06.944] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:06.947] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/fa8eca9e-6705-4d5a-b854-ad054aa36622 - 204 null null 9.4449ms
[2025-12-22 22:04:06.949] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/fa8eca9e-6705-4d5a-b854-ad054aa36622 - null null
[2025-12-22 22:04:06.955] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:06.958] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-22 22:04:06.973] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-22 22:04:07.003] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:07.036] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-22 22:04:07.047] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:04:07.057] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 78.8944ms
[2025-12-22 22:04:07.062] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-22 22:04:07.070] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/fa8eca9e-6705-4d5a-b854-ad054aa36622 - 200 null application/json; charset=utf-8 121.3705ms
[2025-12-22 22:04:11.531] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Cart/items - null null
[2025-12-22 22:04:11.537] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:11.541] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Cart/items - 204 null null 10.1458ms
[2025-12-22 22:04:11.543] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Cart/items - application/json 75
[2025-12-22 22:04:11.553] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:11.554] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi)'
[2025-12-22 22:04:11.557] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "AddItem", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.CartReadDto]] AddItem(RestaurantAPI.DTOs.CartItemAddDto) on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 22:04:11.574] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
[2025-12-22 22:04:11.590] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__8__locals1_dto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__8__locals1_dto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:11.610] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Guid), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p7='?' (DbType = Guid), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CartItems] ([CartId], [CreatedAt], [DishId], [Notes], [Quantity], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE [Carts] SET [UpdatedAt] = @p6
OUTPUT 1
WHERE [Id] = @p7;
[2025-12-22 22:04:11.632] [INF] [RestaurantAPI.Controllers.CartController] Товар "506c83ad-20ac-42f9-a32e-16f2701bad37" добавлен в корзину пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b"
[2025-12-22 22:04:11.655] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (18ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [s].[Id], [s].[CartId], [s].[CreatedAt], [s].[DishId], [s].[Notes], [s].[Quantity], [s].[UpdatedAt], [s].[Id0], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedBy], [s].[DeletedAt], [s].[DeletedBy], [s].[Description], [s].[IsDeleted], [s].[Name], [s].[Notes0], [s].[Price], [s].[UpdatedAt0], [s].[UpdatedBy]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt], [d].[Id] AS [Id0], [d].[CategoryId], [d].[CreatedAt] AS [CreatedAt0], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes] AS [Notes0], [d].[Price], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UpdatedBy]
    FROM [CartItems] AS [c0]
    INNER JOIN [Dishes] AS [d] ON [c0].[DishId] = [d].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
[2025-12-22 22:04:11.665] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.DTOs.CartReadDto'.
[2025-12-22 22:04:11.668] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi) in 101.3939ms
[2025-12-22 22:04:11.671] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi)'
[2025-12-22 22:04:11.674] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Cart/items - 200 null application/json; charset=utf-8 131.5627ms
[2025-12-22 22:04:11.679] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Cart/items - application/json 75
[2025-12-22 22:04:11.688] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:11.691] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi)'
[2025-12-22 22:04:11.693] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "AddItem", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.CartReadDto]] AddItem(RestaurantAPI.DTOs.CartItemAddDto) on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 22:04:11.705] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
[2025-12-22 22:04:11.712] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__8__locals1_dto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__8__locals1_dto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:11.717] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Guid), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p7='?' (DbType = Guid), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CartItems] ([CartId], [CreatedAt], [DishId], [Notes], [Quantity], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE [Carts] SET [UpdatedAt] = @p6
OUTPUT 1
WHERE [Id] = @p7;
[2025-12-22 22:04:11.722] [INF] [RestaurantAPI.Controllers.CartController] Товар "bc75836d-c978-460e-b72a-7ad8d898f4db" добавлен в корзину пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b"
[2025-12-22 22:04:11.728] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [s].[Id], [s].[CartId], [s].[CreatedAt], [s].[DishId], [s].[Notes], [s].[Quantity], [s].[UpdatedAt], [s].[Id0], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedBy], [s].[DeletedAt], [s].[DeletedBy], [s].[Description], [s].[IsDeleted], [s].[Name], [s].[Notes0], [s].[Price], [s].[UpdatedAt0], [s].[UpdatedBy]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt], [d].[Id] AS [Id0], [d].[CategoryId], [d].[CreatedAt] AS [CreatedAt0], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes] AS [Notes0], [d].[Price], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UpdatedBy]
    FROM [CartItems] AS [c0]
    INNER JOIN [Dishes] AS [d] ON [c0].[DishId] = [d].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
[2025-12-22 22:04:11.735] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.DTOs.CartReadDto'.
[2025-12-22 22:04:11.740] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi) in 41.6975ms
[2025-12-22 22:04:11.742] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi)'
[2025-12-22 22:04:11.744] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Cart/items - 200 null application/json; charset=utf-8 65.3824ms
[2025-12-22 22:04:11.828] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:04:11.842] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:04:11.843] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:04:11.846] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:11.855] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:11.858] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:11.860] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 32.0605ms
[2025-12-22 22:04:11.861] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 19.0173ms
[2025-12-22 22:04:11.862] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:04:11.862] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 19.3491ms
[2025-12-22 22:04:11.863] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:04:11.867] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:04:11.878] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:11.886] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:11.891] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:11.893] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:04:11.896] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:04:11.899] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:04:11.901] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.MenuReadDto]]] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-22 22:04:11.903] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.CategoryReadDto]]] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-22 22:04:11.906] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 22:04:11.918] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:11.920] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:11.925] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:11.931] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[CreatedAt], [m].[CreatedBy], [m].[DeletedAt], [m].[DeletedBy], [m].[IsDeleted], [m].[Name], [m].[Notes], [m].[UpdatedAt], [m].[UpdatedBy]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:04:11.935] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:04:11.937] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-22 22:04:11.940] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 22:04:11.942] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 22:04:11.945] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:04:11.951] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 22:04:11.953] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:04:11.956] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 44.8013ms
[2025-12-22 22:04:11.958] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:04:11.961] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 46.0234ms
[2025-12-22 22:04:11.962] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:04:11.964] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 44.4785ms
[2025-12-22 22:04:11.966] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:04:11.967] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 105.6212ms
[2025-12-22 22:04:11.969] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:04:11.970] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 106.8697ms
[2025-12-22 22:04:11.971] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:04:11.976] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 109.3632ms
[2025-12-22 22:04:11.985] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:11.988] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 16.8308ms
[2025-12-22 22:04:11.992] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:04:11.996] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:11.997] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:04:11.998] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-22 22:04:12.009] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-22 22:04:12.020] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-22 22:04:12.025] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-22 22:04:12.028] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:04:12.031] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 30.181ms
[2025-12-22 22:04:12.033] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:04:12.035] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 43.1344ms
[2025-12-22 22:04:16.375] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - null null
[2025-12-22 22:04:16.378] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:16.379] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - 204 null null 4.6562ms
[2025-12-22 22:04:16.381] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - null null
[2025-12-22 22:04:16.388] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:16.390] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-22 22:04:16.393] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.OrderReadDto]]] GetMyOrders(Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 22:04:16.399] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_Value_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:16.406] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[UserId] = @__userId_Value_0 AND [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 22:04:16.412] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b". Количество: 16, Всего: 16, Страница: 1
[2025-12-22 22:04:16.414] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:04:16.417] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 20.5889ms
[2025-12-22 22:04:16.419] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-22 22:04:16.420] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - 200 null application/json; charset=utf-8 38.4828ms
[2025-12-22 22:04:24.059] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:04:24.060] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:04:24.070] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.073] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.076] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 17.4614ms
[2025-12-22 22:04:24.077] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 204 null null 16.3493ms
[2025-12-22 22:04:24.080] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:04:24.080] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:04:24.096] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.105] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.108] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:04:24.110] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:04:24.111] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:04:24.114] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:04:24.125] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:04:24.129] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:24.132] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:04:24.137] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:24.139] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:24.143] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:24.146] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:24.150] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:24.159] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:04:24.159] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 22:04:24.162] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:04:24.163] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 267266.34, Заказов: 44
[2025-12-22 22:04:24.165] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:04:24.166] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:04:24.168] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 49.209ms
[2025-12-22 22:04:24.169] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 44.9681ms
[2025-12-22 22:04:24.171] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:04:24.173] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:04:24.174] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 93.802ms
[2025-12-22 22:04:24.176] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 95.1987ms
[2025-12-22 22:04:24.183] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:04:24.183] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:04:24.193] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.199] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.201] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 204 null null 18.356ms
[2025-12-22 22:04:24.202] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 204 null null 18.8266ms
[2025-12-22 22:04:24.204] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:04:24.204] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:04:24.214] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.216] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.218] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:04:24.218] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:04:24.221] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:04:24.224] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:04:24.231] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:04:24.237] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:04:24.237] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:04:24.244] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:24.246] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:04:24.251] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:24.253] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 22.0563ms
[2025-12-22 22:04:24.260] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:04:24.261] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:04:24.267] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 265860.00, Заказов: 38
[2025-12-22 22:04:24.270] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 65.7863ms
[2025-12-22 22:04:24.272] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:04:24.285] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 57.6062ms
[2025-12-22 22:04:24.288] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:04:24.291] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 86.6348ms
[2025-12-22 22:04:24.295] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:04:24.296] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:04:24.301] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.306] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.307] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 204 null null 12.3282ms
[2025-12-22 22:04:24.309] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:04:24.310] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:04:24.314] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:04:24.320] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.325] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:04:24.326] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:04:24.327] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:04:24.333] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:04:24.337] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:04:24.337] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:24.343] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:04:24.347] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:24.349] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 14.5359ms
[2025-12-22 22:04:24.353] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:04:24.355] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:04:24.359] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:04:24.360] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 49.9476ms
[2025-12-22 22:04:24.363] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:04:24.372] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 49.1249ms
[2025-12-22 22:04:24.374] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:04:24.377] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 81.6823ms
[2025-12-22 22:04:24.385] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - null null
[2025-12-22 22:04:24.385] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - null null
[2025-12-22 22:04:24.388] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.393] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.396] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - 204 null null 11.7321ms
[2025-12-22 22:04:24.398] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - 204 null null 12.7141ms
[2025-12-22 22:04:24.399] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - null null
[2025-12-22 22:04:24.399] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - null null
[2025-12-22 22:04:24.413] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.416] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.417] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:04:24.419] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:04:24.420] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:04:24.423] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:04:24.429] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:04:24.433] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:04:24.436] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:04:24.440] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:04:24.444] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:24.448] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:24.451] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:24.456] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:24.460] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:04:24.463] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:04:24.465] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:04:24.470] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:04:24.472] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:04:24.475] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:04:24.477] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 50.9541ms
[2025-12-22 22:04:24.479] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 48.938ms
[2025-12-22 22:04:24.480] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:04:24.484] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:04:24.486] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - 200 null application/json; charset=utf-8 86.479ms
[2025-12-22 22:04:24.487] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - 200 null application/json; charset=utf-8 87.7503ms
[2025-12-22 22:04:24.491] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:04:24.505] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.507] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 15.3981ms
[2025-12-22 22:04:24.510] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:04:24.516] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.518] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:04:24.521] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:04:24.550] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (24ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 22:04:24.554] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 22:04:24.557] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:04:24.561] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 37.3961ms
[2025-12-22 22:04:24.564] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:04:24.566] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 55.9161ms
[2025-12-22 22:04:24.571] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:04:24.576] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.577] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 6.7056ms
[2025-12-22 22:04:24.580] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:04:24.587] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.590] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:04:24.592] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:04:24.622] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 22:04:24.627] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:04:24.631] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 35.5623ms
[2025-12-22 22:04:24.632] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:04:24.634] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 54.0514ms
[2025-12-22 22:04:24.639] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:04:24.646] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.647] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 7.5148ms
[2025-12-22 22:04:24.649] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:04:24.659] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.662] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:04:24.664] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:04:24.675] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 22:04:24.679] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:04:24.683] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 15.2872ms
[2025-12-22 22:04:24.685] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:04:24.690] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 41.0497ms
[2025-12-22 22:04:24.863] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 22:04:24.870] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.871] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 7.7641ms
[2025-12-22 22:04:24.873] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 22:04:24.878] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.880] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 22:04:24.882] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.UserReadDto]]] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-22 22:04:24.887] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:24.898] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[IsDeleted], [u0].[Notes], [u0].[PasswordHash], [u0].[RoleId], [u0].[UpdatedAt], [u0].[UpdatedBy], [u0].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM (
    SELECT [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-22 22:04:24.901] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 22:04:24.903] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:04:24.908] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 23.9189ms
[2025-12-22 22:04:24.911] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 22:04:24.913] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 39.3949ms
[2025-12-22 22:04:24.916] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:04:24.926] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.929] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 12.7132ms
[2025-12-22 22:04:24.931] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:04:24.943] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.946] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:04:24.947] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 22:04:24.953] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:24.956] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 22:04:24.958] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 22:04:24.960] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:04:24.961] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 11.5575ms
[2025-12-22 22:04:24.963] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:04:24.964] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 32.9024ms
[2025-12-22 22:04:24.969] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 22:04:24.972] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.973] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 4.0309ms
[2025-12-22 22:04:24.975] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 22:04:24.980] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:04:24.982] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 22:04:24.985] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 22:04:24.990] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:04:25.000] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 22:04:25.004] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 20, Всего: 44, Страница: 1
[2025-12-22 22:04:25.007] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:04:25.011] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 22.9823ms
[2025-12-22 22:04:25.013] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 22:04:25.015] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 39.7454ms
[2025-12-22 22:07:09.232] [INF] [] Запуск приложения Restaurant API
[2025-12-22 22:07:09.516] [INF] [] Приложение Restaurant API успешно запущено
[2025-12-22 22:07:09.541] [INF] [Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager] User profile is available. Using 'C:\Users\motya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-12-22 22:07:09.654] [INF] [Microsoft.Hosting.Lifetime] Now listening on: https://localhost:7188
[2025-12-22 22:07:09.658] [INF] [Microsoft.Hosting.Lifetime] Now listening on: http://localhost:5143
[2025-12-22 22:07:09.769] [INF] [Microsoft.Hosting.Lifetime] Application started. Press Ctrl+C to shut down.
[2025-12-22 22:07:09.770] [INF] [Microsoft.Hosting.Lifetime] Hosting environment: Development
[2025-12-22 22:07:09.772] [INF] [Microsoft.Hosting.Lifetime] Content root path: D:\restaurant-project\RestaurantAPI\RestaurantApi
[2025-12-22 22:07:10.109] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/index.html - null null
[2025-12-22 22:07:10.266] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/index.html - 200 null text/html;charset=utf-8 157.5282ms
[2025-12-22 22:07:10.306] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_vs/browserLink - null null
[2025-12-22 22:07:10.306] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - null null
[2025-12-22 22:07:10.318] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 11.552ms
[2025-12-22 22:07:10.340] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.8699ms
[2025-12-22 22:07:10.960] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - null null
[2025-12-22 22:07:10.987] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/favicon-32x32.png - null null
[2025-12-22 22:07:11.003] [INF] [Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
[2025-12-22 22:07:11.007] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/favicon-32x32.png - 200 628 image/png 19.9424ms
[2025-12-22 22:07:11.022] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 61.6325ms
[2025-12-22 22:07:25.824] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:07:25.824] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:07:25.824] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:07:25.837] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:25.838] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:25.841] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:25.893] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:07:25.893] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:07:25.893] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:07:25.936] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.CategoryReadDto]]] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-22 22:07:25.936] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 22:07:25.936] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.MenuReadDto]]] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-22 22:07:29.533] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (92ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:07:29.533] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (92ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:07:29.533] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (92ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:07:29.771] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (35ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[CreatedAt], [m].[CreatedBy], [m].[DeletedAt], [m].[DeletedBy], [m].[IsDeleted], [m].[Name], [m].[Notes], [m].[UpdatedAt], [m].[UpdatedBy]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:07:29.770] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (36ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:07:29.791] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 22:07:29.960] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-22 22:07:29.962] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 22:07:29.971] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:07:29.971] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:07:29.994] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 22:07:30.002] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:07:30.013] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 4063.9021ms
[2025-12-22 22:07:30.013] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 4057.7765ms
[2025-12-22 22:07:30.018] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:07:30.021] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:07:30.029] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 4085.2417ms
[2025-12-22 22:07:30.033] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:07:30.034] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:07:30.037] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 4212.7924ms
[2025-12-22 22:07:30.037] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 4212.8596ms
[2025-12-22 22:07:30.044] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 4219.9619ms
[2025-12-22 22:07:30.047] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:30.079] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:07:30.095] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-22 22:07:30.332] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (23ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-22 22:07:30.383] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-22 22:07:30.389] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-22 22:07:30.394] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:07:30.404] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 303.4191ms
[2025-12-22 22:07:30.407] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:07:30.411] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 377.6475ms
[2025-12-22 22:07:34.992] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - null null
[2025-12-22 22:07:35.000] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:35.006] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - 204 null null 13.8031ms
[2025-12-22 22:07:35.008] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Auth/login - application/json 44
[2025-12-22 22:07:35.029] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:35.034] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-22 22:07:35.048] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.AuthResponseDto]] Login(RestaurantAPI.DTOs.UserLoginDto) on controller RestaurantAPI.Controllers.AuthController (RestaurantApi).
[2025-12-22 22:07:35.169] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (12ms) [Parameters=[@__dto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Username] = @__dto_Username_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:07:36.800] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (25ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [JwtTokens] ([CreatedAt], [ExpiresAt], [Revoked], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
[2025-12-22 22:07:36.862] [INF] [RestaurantAPI.Controllers.AuthController] Пользователь admin успешно вошел в систему
[2025-12-22 22:07:36.866] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'RestaurantAPI.DTOs.AuthResponseDto'.
[2025-12-22 22:07:36.883] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.AuthController.Login (RestaurantApi) in 1825.4305ms
[2025-12-22 22:07:36.887] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-22 22:07:36.893] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Auth/login - 200 null application/json; charset=utf-8 1885.18ms
[2025-12-22 22:07:36.899] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Cart - null null
[2025-12-22 22:07:36.909] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:36.913] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Cart - 204 null null 13.746ms
[2025-12-22 22:07:36.916] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Cart - null null
[2025-12-22 22:07:36.929] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:37.021] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi)'
[2025-12-22 22:07:37.034] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.CartReadDto]] GetCart() on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 22:07:37.175] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (27ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [s].[Id], [s].[CartId], [s].[CreatedAt], [s].[DishId], [s].[Notes], [s].[Quantity], [s].[UpdatedAt], [s].[Id0], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedBy], [s].[DeletedAt], [s].[DeletedBy], [s].[Description], [s].[IsDeleted], [s].[Name], [s].[Notes0], [s].[Price], [s].[UpdatedAt0], [s].[UpdatedBy]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt], [d].[Id] AS [Id0], [d].[CategoryId], [d].[CreatedAt] AS [CreatedAt0], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes] AS [Notes0], [d].[Price], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UpdatedBy]
    FROM [CartItems] AS [c0]
    INNER JOIN [Dishes] AS [d] ON [c0].[DishId] = [d].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
[2025-12-22 22:07:37.272] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.DTOs.CartReadDto'.
[2025-12-22 22:07:37.287] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi) in 247.7544ms
[2025-12-22 22:07:37.290] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi)'
[2025-12-22 22:07:37.294] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Cart - 200 null application/json; charset=utf-8 378.5556ms
[2025-12-22 22:07:38.475] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:07:38.479] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:07:38.479] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:07:38.481] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:38.486] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:38.490] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:38.493] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 17.5329ms
[2025-12-22 22:07:38.494] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 15.2811ms
[2025-12-22 22:07:38.495] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 15.6347ms
[2025-12-22 22:07:38.496] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:07:38.497] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:07:38.497] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:07:38.514] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:38.519] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:38.527] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:38.533] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:07:38.535] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:07:38.538] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:07:38.538] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.MenuReadDto]]] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-22 22:07:38.541] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.CategoryReadDto]]] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-22 22:07:38.543] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 22:07:38.551] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:07:38.551] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:07:38.555] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:07:38.558] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:07:38.562] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[CreatedAt], [m].[CreatedBy], [m].[DeletedAt], [m].[DeletedBy], [m].[IsDeleted], [m].[Name], [m].[Notes], [m].[UpdatedAt], [m].[UpdatedBy]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:07:38.566] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 22:07:38.567] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 22:07:38.572] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-22 22:07:38.575] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 22:07:38.577] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:07:38.578] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:07:38.581] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:07:38.584] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 37.0729ms
[2025-12-22 22:07:38.586] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 41.4955ms
[2025-12-22 22:07:38.588] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 37.6447ms
[2025-12-22 22:07:38.589] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:07:38.592] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:07:38.594] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:07:38.595] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 98.4606ms
[2025-12-22 22:07:38.597] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 101.4892ms
[2025-12-22 22:07:38.599] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 101.6635ms
[2025-12-22 22:07:38.601] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:07:38.620] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:38.622] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 21.2446ms
[2025-12-22 22:07:38.624] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:07:38.631] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:38.633] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:07:38.637] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-22 22:07:38.643] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-22 22:07:38.652] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-22 22:07:38.656] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-22 22:07:38.657] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:07:38.659] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 18.5453ms
[2025-12-22 22:07:38.661] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:07:38.663] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 38.822ms
[2025-12-22 22:07:43.446] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:07:43.447] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:07:43.455] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:43.451] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:43.447] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:07:43.457] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:07:43.459] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:07:43.463] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:43.464] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.CategoryReadDto]]] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-22 22:07:43.465] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.MenuReadDto]]] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-22 22:07:43.468] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:07:43.476] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 22:07:43.476] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:07:43.477] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:07:43.483] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:07:43.483] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:07:43.488] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[CreatedAt], [m].[CreatedBy], [m].[DeletedAt], [m].[DeletedBy], [m].[IsDeleted], [m].[Name], [m].[Notes], [m].[UpdatedAt], [m].[UpdatedBy]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:07:43.491] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 22:07:43.492] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 22:07:43.495] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-22 22:07:43.498] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 22:07:43.499] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:07:43.502] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:07:43.505] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:07:43.508] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 35.6701ms
[2025-12-22 22:07:43.509] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 35.2786ms
[2025-12-22 22:07:43.511] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 31.2169ms
[2025-12-22 22:07:43.512] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:07:43.514] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:07:43.516] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:07:43.524] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 76.3661ms
[2025-12-22 22:07:43.521] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 74.9595ms
[2025-12-22 22:07:43.519] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 71.7624ms
[2025-12-22 22:07:43.526] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:07:43.541] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:43.543] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:07:43.544] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-22 22:07:43.550] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-22 22:07:43.557] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-22 22:07:43.559] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-22 22:07:43.561] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:07:43.564] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 15.9073ms
[2025-12-22 22:07:43.565] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:07:43.567] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 41.4494ms
[2025-12-22 22:07:44.150] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - null null
[2025-12-22 22:07:44.161] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:44.164] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-22 22:07:44.180] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishIngredients", controller = "DishIngredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishIngredients(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishIngredientsController (RestaurantApi).
[2025-12-22 22:07:44.235] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DishIngredients] AS [d]
INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
[2025-12-22 22:07:44.267] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (11ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[DishId], [s].[Name] AS [DishName], [s].[IngredientId], [i].[Name] AS [IngredientName], [s].[Quantity]
FROM (
    SELECT [d].[Id], [d].[DishId], [d].[IngredientId], [d].[Quantity], [d0].[Name]
    FROM [DishIngredients] AS [d]
    INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
    ORDER BY [d0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Ingredients] AS [i] ON [s].[IngredientId] = [i].[Id]
ORDER BY [s].[Name]
[2025-12-22 22:07:44.276] [INF] [RestaurantAPI.Controllers.DishIngredientsController] Получен список ингредиентов блюд. Количество: 5, Всего: 5, Страница: 1
[2025-12-22 22:07:44.281] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishIngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:07:44.291] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi) in 103.9506ms
[2025-12-22 22:07:44.294] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-22 22:07:44.297] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - 200 null application/json; charset=utf-8 147.6203ms
[2025-12-22 22:07:50.260] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - null null
[2025-12-22 22:07:50.263] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:50.264] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - 204 null null 4.2092ms
[2025-12-22 22:07:50.267] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Auth/login - application/json 44
[2025-12-22 22:07:50.274] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:50.276] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-22 22:07:50.281] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.AuthResponseDto]] Login(RestaurantAPI.DTOs.UserLoginDto) on controller RestaurantAPI.Controllers.AuthController (RestaurantApi).
[2025-12-22 22:07:50.292] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__dto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Username] = @__dto_Username_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:07:50.943] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [JwtTokens] ([CreatedAt], [ExpiresAt], [Revoked], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
[2025-12-22 22:07:50.953] [INF] [RestaurantAPI.Controllers.AuthController] Пользователь admin успешно вошел в систему
[2025-12-22 22:07:50.955] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'RestaurantAPI.DTOs.AuthResponseDto'.
[2025-12-22 22:07:50.960] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.AuthController.Login (RestaurantApi) in 675.2826ms
[2025-12-22 22:07:50.962] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-22 22:07:50.965] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Auth/login - 200 null application/json; charset=utf-8 698.2086ms
[2025-12-22 22:07:50.971] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Cart - null null
[2025-12-22 22:07:50.981] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:50.983] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Cart - 204 null null 12.0102ms
[2025-12-22 22:07:50.986] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Cart - null null
[2025-12-22 22:07:51.000] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:51.006] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi)'
[2025-12-22 22:07:51.009] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.CartReadDto]] GetCart() on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 22:07:51.018] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [s].[Id], [s].[CartId], [s].[CreatedAt], [s].[DishId], [s].[Notes], [s].[Quantity], [s].[UpdatedAt], [s].[Id0], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedBy], [s].[DeletedAt], [s].[DeletedBy], [s].[Description], [s].[IsDeleted], [s].[Name], [s].[Notes0], [s].[Price], [s].[UpdatedAt0], [s].[UpdatedBy]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt], [d].[Id] AS [Id0], [d].[CategoryId], [d].[CreatedAt] AS [CreatedAt0], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes] AS [Notes0], [d].[Price], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UpdatedBy]
    FROM [CartItems] AS [c0]
    INNER JOIN [Dishes] AS [d] ON [c0].[DishId] = [d].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
[2025-12-22 22:07:51.025] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.DTOs.CartReadDto'.
[2025-12-22 22:07:51.029] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi) in 15.256ms
[2025-12-22 22:07:51.032] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi)'
[2025-12-22 22:07:51.036] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Cart - 200 null application/json; charset=utf-8 49.6798ms
[2025-12-22 22:07:52.512] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:07:52.514] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:07:52.515] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:07:52.534] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:52.528] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:52.522] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:52.537] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 22.2306ms
[2025-12-22 22:07:52.542] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:07:52.544] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 29.664ms
[2025-12-22 22:07:52.546] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 33.5452ms
[2025-12-22 22:07:52.547] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:07:52.548] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:07:52.562] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:52.593] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:52.600] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:52.603] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:07:52.604] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:07:52.606] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:07:52.606] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 22:07:52.607] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.CategoryReadDto]]] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-22 22:07:52.609] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.MenuReadDto]]] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-22 22:07:52.613] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:07:52.616] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:07:52.618] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:07:52.621] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 22:07:52.626] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:07:52.630] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[CreatedAt], [m].[CreatedBy], [m].[DeletedAt], [m].[DeletedBy], [m].[IsDeleted], [m].[Name], [m].[Notes], [m].[UpdatedAt], [m].[UpdatedBy]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:07:52.636] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 22:07:52.640] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 22:07:52.646] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-22 22:07:52.650] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:07:52.654] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:07:52.657] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:07:52.660] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 48.9946ms
[2025-12-22 22:07:52.663] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 49.3589ms
[2025-12-22 22:07:52.666] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 50.4693ms
[2025-12-22 22:07:52.668] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:07:52.673] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 131.246ms
[2025-12-22 22:07:52.671] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:07:52.669] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:07:52.681] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 132.2577ms
[2025-12-22 22:07:52.682] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 134.9112ms
[2025-12-22 22:07:52.684] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:07:52.691] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:52.692] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 8.2433ms
[2025-12-22 22:07:52.695] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:07:52.702] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:07:52.704] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:07:52.705] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-22 22:07:52.711] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-22 22:07:52.716] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-22 22:07:52.721] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-22 22:07:52.723] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:07:52.726] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 18.1315ms
[2025-12-22 22:07:52.728] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:07:52.731] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 36.2473ms
[2025-12-22 22:14:09.289] [INF] [] Запуск приложения Restaurant API
[2025-12-22 22:14:09.625] [INF] [] Приложение Restaurant API успешно запущено
[2025-12-22 22:14:09.652] [INF] [Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager] User profile is available. Using 'C:\Users\motya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-12-22 22:14:09.851] [INF] [Microsoft.Hosting.Lifetime] Now listening on: https://localhost:7188
[2025-12-22 22:14:09.880] [INF] [Microsoft.Hosting.Lifetime] Now listening on: http://localhost:5143
[2025-12-22 22:14:09.988] [INF] [Microsoft.Hosting.Lifetime] Application started. Press Ctrl+C to shut down.
[2025-12-22 22:14:09.990] [INF] [Microsoft.Hosting.Lifetime] Hosting environment: Development
[2025-12-22 22:14:09.991] [INF] [Microsoft.Hosting.Lifetime] Content root path: D:\restaurant-project\RestaurantAPI\RestaurantApi
[2025-12-22 22:14:10.305] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/index.html - null null
[2025-12-22 22:14:10.498] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/index.html - 200 null text/html;charset=utf-8 195.9263ms
[2025-12-22 22:14:10.541] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_vs/browserLink - null null
[2025-12-22 22:14:10.541] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - null null
[2025-12-22 22:14:10.556] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 14.9161ms
[2025-12-22 22:14:10.576] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.9509ms
[2025-12-22 22:14:10.897] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - null null
[2025-12-22 22:14:10.950] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 53.0577ms
[2025-12-22 22:14:14.900] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:14:14.900] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:14:14.900] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:14:14.914] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:14.914] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:14.916] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:14.967] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:14:14.967] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:14:14.967] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:14:15.011] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.MenuReadDto]]] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-22 22:14:15.012] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.CategoryReadDto]]] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-22 22:14:15.012] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 22:14:18.841] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (107ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:18.841] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (107ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:18.841] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (107ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:19.109] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (52ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:14:19.109] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (52ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[CreatedAt], [m].[CreatedBy], [m].[DeletedAt], [m].[DeletedBy], [m].[IsDeleted], [m].[Name], [m].[Notes], [m].[UpdatedAt], [m].[UpdatedBy]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:14:19.109] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 22:14:19.298] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-22 22:14:19.299] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 22:14:19.321] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:14:19.321] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:14:19.323] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 22:14:19.336] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:14:19.361] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 4336.9851ms
[2025-12-22 22:14:19.361] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 4338.7822ms
[2025-12-22 22:14:19.364] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 4343.3178ms
[2025-12-22 22:14:19.365] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:14:19.367] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:14:19.370] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:14:19.380] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:14:19.387] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 4486.7498ms
[2025-12-22 22:14:19.387] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 4486.7102ms
[2025-12-22 22:14:19.387] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 4486.6236ms
[2025-12-22 22:14:19.391] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:19.413] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:14:19.426] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-22 22:14:19.659] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (14ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-22 22:14:19.709] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-22 22:14:19.720] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-22 22:14:19.729] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:14:19.741] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 309.02ms
[2025-12-22 22:14:19.744] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:14:19.753] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 372.4743ms
[2025-12-22 22:14:21.111] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - null null
[2025-12-22 22:14:21.119] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:21.122] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-22 22:14:21.138] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishIngredients", controller = "DishIngredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishIngredients(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishIngredientsController (RestaurantApi).
[2025-12-22 22:14:21.192] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (21ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DishIngredients] AS [d]
INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
[2025-12-22 22:14:21.232] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (11ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[DishId], [s].[Name] AS [DishName], [s].[IngredientId], [i].[Name] AS [IngredientName], [s].[Quantity]
FROM (
    SELECT [d].[Id], [d].[DishId], [d].[IngredientId], [d].[Quantity], [d0].[Name]
    FROM [DishIngredients] AS [d]
    INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
    ORDER BY [d0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Ingredients] AS [i] ON [s].[IngredientId] = [i].[Id]
ORDER BY [s].[Name]
[2025-12-22 22:14:21.239] [INF] [RestaurantAPI.Controllers.DishIngredientsController] Получен список ингредиентов блюд. Количество: 5, Всего: 5, Страница: 1
[2025-12-22 22:14:21.244] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishIngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:14:21.257] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi) in 113.1361ms
[2025-12-22 22:14:21.260] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-22 22:14:21.263] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - 200 null application/json; charset=utf-8 151.2586ms
[2025-12-22 22:14:25.049] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - null null
[2025-12-22 22:14:25.053] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:25.057] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - 204 null null 7.6753ms
[2025-12-22 22:14:25.059] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Auth/login - application/json 44
[2025-12-22 22:14:25.075] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:25.080] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-22 22:14:25.089] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.AuthResponseDto]] Login(RestaurantAPI.DTOs.UserLoginDto) on controller RestaurantAPI.Controllers.AuthController (RestaurantApi).
[2025-12-22 22:14:25.217] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (25ms) [Parameters=[@__dto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Username] = @__dto_Username_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:26.735] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (23ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [JwtTokens] ([CreatedAt], [ExpiresAt], [Revoked], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
[2025-12-22 22:14:26.791] [INF] [RestaurantAPI.Controllers.AuthController] Пользователь admin успешно вошел в систему
[2025-12-22 22:14:26.794] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'RestaurantAPI.DTOs.AuthResponseDto'.
[2025-12-22 22:14:26.806] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.AuthController.Login (RestaurantApi) in 1707.9805ms
[2025-12-22 22:14:26.810] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-22 22:14:26.814] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Auth/login - 200 null application/json; charset=utf-8 1754.6003ms
[2025-12-22 22:14:26.822] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Cart - null null
[2025-12-22 22:14:26.827] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:26.829] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Cart - 204 null null 6.6648ms
[2025-12-22 22:14:26.833] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Cart - null null
[2025-12-22 22:14:26.853] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:26.923] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Cart/items - null null
[2025-12-22 22:14:26.930] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:26.933] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Cart/items - 204 null null 9.9409ms
[2025-12-22 22:14:26.935] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Cart/items - application/json 112
[2025-12-22 22:14:26.942] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi)'
[2025-12-22 22:14:26.944] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:26.953] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi)'
[2025-12-22 22:14:26.954] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.CartReadDto]] GetCart() on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 22:14:26.964] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "AddItem", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.CartReadDto]] AddItem(RestaurantAPI.DTOs.CartItemAddDto) on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 22:14:27.085] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (25ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
[2025-12-22 22:14:27.095] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (36ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [s].[Id], [s].[CartId], [s].[CreatedAt], [s].[DishId], [s].[Notes], [s].[Quantity], [s].[UpdatedAt], [s].[Id0], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedBy], [s].[DeletedAt], [s].[DeletedBy], [s].[Description], [s].[IsDeleted], [s].[Name], [s].[Notes0], [s].[Price], [s].[UpdatedAt0], [s].[UpdatedBy]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt], [d].[Id] AS [Id0], [d].[CategoryId], [d].[CreatedAt] AS [CreatedAt0], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes] AS [Notes0], [d].[Price], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UpdatedBy]
    FROM [CartItems] AS [c0]
    INNER JOIN [Dishes] AS [d] ON [c0].[DishId] = [d].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
[2025-12-22 22:14:27.172] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.DTOs.CartReadDto'.
[2025-12-22 22:14:27.173] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__8__locals1_dto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__8__locals1_dto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:27.185] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi) in 223.5358ms
[2025-12-22 22:14:27.188] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi)'
[2025-12-22 22:14:27.191] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Cart - 200 null application/json; charset=utf-8 358.7554ms
[2025-12-22 22:14:27.284] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Guid), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p7='?' (DbType = Guid), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CartItems] ([CartId], [CreatedAt], [DishId], [Notes], [Quantity], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE [Carts] SET [UpdatedAt] = @p6
OUTPUT 1
WHERE [Id] = @p7;
[2025-12-22 22:14:27.333] [INF] [RestaurantAPI.Controllers.CartController] Товар "506c83ad-20ac-42f9-a32e-16f2701bad37" добавлен в корзину пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b"
[2025-12-22 22:14:27.347] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [s].[Id], [s].[CartId], [s].[CreatedAt], [s].[DishId], [s].[Notes], [s].[Quantity], [s].[UpdatedAt], [s].[Id0], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedBy], [s].[DeletedAt], [s].[DeletedBy], [s].[Description], [s].[IsDeleted], [s].[Name], [s].[Notes0], [s].[Price], [s].[UpdatedAt0], [s].[UpdatedBy]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt], [d].[Id] AS [Id0], [d].[CategoryId], [d].[CreatedAt] AS [CreatedAt0], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes] AS [Notes0], [d].[Price], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UpdatedBy]
    FROM [CartItems] AS [c0]
    INNER JOIN [Dishes] AS [d] ON [c0].[DishId] = [d].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
[2025-12-22 22:14:27.352] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.DTOs.CartReadDto'.
[2025-12-22 22:14:27.355] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi) in 386.3261ms
[2025-12-22 22:14:27.358] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi)'
[2025-12-22 22:14:27.362] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Cart/items - 200 null application/json; charset=utf-8 426.6481ms
[2025-12-22 22:14:31.349] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Cart/items - application/json 75
[2025-12-22 22:14:31.361] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:31.364] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi)'
[2025-12-22 22:14:31.372] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "AddItem", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.CartReadDto]] AddItem(RestaurantAPI.DTOs.CartItemAddDto) on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 22:14:31.383] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
[2025-12-22 22:14:31.396] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__8__locals1_dto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__8__locals1_dto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:31.415] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p4='?' (DbType = Guid), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [CartItems] SET [Quantity] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
UPDATE [Carts] SET [UpdatedAt] = @p3
OUTPUT 1
WHERE [Id] = @p4;
[2025-12-22 22:14:31.434] [INF] [RestaurantAPI.Controllers.CartController] Товар "506c83ad-20ac-42f9-a32e-16f2701bad37" добавлен в корзину пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b"
[2025-12-22 22:14:31.443] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [s].[Id], [s].[CartId], [s].[CreatedAt], [s].[DishId], [s].[Notes], [s].[Quantity], [s].[UpdatedAt], [s].[Id0], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedBy], [s].[DeletedAt], [s].[DeletedBy], [s].[Description], [s].[IsDeleted], [s].[Name], [s].[Notes0], [s].[Price], [s].[UpdatedAt0], [s].[UpdatedBy]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt], [d].[Id] AS [Id0], [d].[CategoryId], [d].[CreatedAt] AS [CreatedAt0], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes] AS [Notes0], [d].[Price], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UpdatedBy]
    FROM [CartItems] AS [c0]
    INNER JOIN [Dishes] AS [d] ON [c0].[DishId] = [d].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
[2025-12-22 22:14:31.454] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.DTOs.CartReadDto'.
[2025-12-22 22:14:31.461] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi) in 83.1141ms
[2025-12-22 22:14:31.464] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi)'
[2025-12-22 22:14:31.471] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Cart/items - 200 null application/json; charset=utf-8 122.2674ms
[2025-12-22 22:14:32.961] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Cart/items - null null
[2025-12-22 22:14:32.968] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:32.971] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Cart/items - 204 null null 10.2833ms
[2025-12-22 22:14:32.973] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Cart/items - application/json 75
[2025-12-22 22:14:32.985] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:32.988] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi)'
[2025-12-22 22:14:32.992] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "AddItem", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.CartReadDto]] AddItem(RestaurantAPI.DTOs.CartItemAddDto) on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 22:14:33.003] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
[2025-12-22 22:14:33.011] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__8__locals1_dto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__8__locals1_dto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:33.037] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p4='?' (DbType = Guid), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [CartItems] SET [Quantity] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
UPDATE [Carts] SET [UpdatedAt] = @p3
OUTPUT 1
WHERE [Id] = @p4;
[2025-12-22 22:14:33.045] [INF] [RestaurantAPI.Controllers.CartController] Товар "506c83ad-20ac-42f9-a32e-16f2701bad37" добавлен в корзину пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b"
[2025-12-22 22:14:33.051] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [s].[Id], [s].[CartId], [s].[CreatedAt], [s].[DishId], [s].[Notes], [s].[Quantity], [s].[UpdatedAt], [s].[Id0], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedBy], [s].[DeletedAt], [s].[DeletedBy], [s].[Description], [s].[IsDeleted], [s].[Name], [s].[Notes0], [s].[Price], [s].[UpdatedAt0], [s].[UpdatedBy]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt], [d].[Id] AS [Id0], [d].[CategoryId], [d].[CreatedAt] AS [CreatedAt0], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes] AS [Notes0], [d].[Price], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UpdatedBy]
    FROM [CartItems] AS [c0]
    INNER JOIN [Dishes] AS [d] ON [c0].[DishId] = [d].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
[2025-12-22 22:14:33.059] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.DTOs.CartReadDto'.
[2025-12-22 22:14:33.063] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi) in 65.0179ms
[2025-12-22 22:14:33.066] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi)'
[2025-12-22 22:14:33.068] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Cart/items - 200 null application/json; charset=utf-8 95.1984ms
[2025-12-22 22:14:33.913] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Cart/items/200ed0dc-465f-4100-9ca2-b238e2b67eb9 - null null
[2025-12-22 22:14:33.920] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:33.922] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Cart/items/200ed0dc-465f-4100-9ca2-b238e2b67eb9 - 204 null null 9.3105ms
[2025-12-22 22:14:33.924] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 PUT https://localhost:7188/api/Cart/items/200ed0dc-465f-4100-9ca2-b238e2b67eb9 - application/json 27
[2025-12-22 22:14:33.932] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:33.947] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.UpdateItem (RestaurantApi)'
[2025-12-22 22:14:33.958] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "UpdateItem", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.CartReadDto]] UpdateItem(System.Guid, RestaurantAPI.DTOs.CartItemUpdateDto) on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 22:14:33.975] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
[2025-12-22 22:14:33.985] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p4='?' (DbType = Guid), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [CartItems] SET [Quantity] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
UPDATE [Carts] SET [UpdatedAt] = @p3
OUTPUT 1
WHERE [Id] = @p4;
[2025-12-22 22:14:33.995] [INF] [RestaurantAPI.Controllers.CartController] Элемент корзины "200ed0dc-465f-4100-9ca2-b238e2b67eb9" обновлен пользователем "601d547d-42ee-4d95-abc0-42bf30f4d94b"
[2025-12-22 22:14:34.002] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [s].[Id], [s].[CartId], [s].[CreatedAt], [s].[DishId], [s].[Notes], [s].[Quantity], [s].[UpdatedAt], [s].[Id0], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedBy], [s].[DeletedAt], [s].[DeletedBy], [s].[Description], [s].[IsDeleted], [s].[Name], [s].[Notes0], [s].[Price], [s].[UpdatedAt0], [s].[UpdatedBy]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt], [d].[Id] AS [Id0], [d].[CategoryId], [d].[CreatedAt] AS [CreatedAt0], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes] AS [Notes0], [d].[Price], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UpdatedBy]
    FROM [CartItems] AS [c0]
    INNER JOIN [Dishes] AS [d] ON [c0].[DishId] = [d].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
[2025-12-22 22:14:34.008] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.DTOs.CartReadDto'.
[2025-12-22 22:14:34.011] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.UpdateItem (RestaurantApi) in 47.183ms
[2025-12-22 22:14:34.014] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.UpdateItem (RestaurantApi)'
[2025-12-22 22:14:34.019] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 PUT https://localhost:7188/api/Cart/items/200ed0dc-465f-4100-9ca2-b238e2b67eb9 - 200 null application/json; charset=utf-8 94.3797ms
[2025-12-22 22:14:34.069] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 PUT https://localhost:7188/api/Cart/items/200ed0dc-465f-4100-9ca2-b238e2b67eb9 - application/json 27
[2025-12-22 22:14:34.074] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:34.076] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.UpdateItem (RestaurantApi)'
[2025-12-22 22:14:34.080] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "UpdateItem", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.CartReadDto]] UpdateItem(System.Guid, RestaurantAPI.DTOs.CartItemUpdateDto) on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 22:14:34.088] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
[2025-12-22 22:14:34.098] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p4='?' (DbType = Guid), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [CartItems] SET [Quantity] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
UPDATE [Carts] SET [UpdatedAt] = @p3
OUTPUT 1
WHERE [Id] = @p4;
[2025-12-22 22:14:34.106] [INF] [RestaurantAPI.Controllers.CartController] Элемент корзины "200ed0dc-465f-4100-9ca2-b238e2b67eb9" обновлен пользователем "601d547d-42ee-4d95-abc0-42bf30f4d94b"
[2025-12-22 22:14:34.112] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [s].[Id], [s].[CartId], [s].[CreatedAt], [s].[DishId], [s].[Notes], [s].[Quantity], [s].[UpdatedAt], [s].[Id0], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedBy], [s].[DeletedAt], [s].[DeletedBy], [s].[Description], [s].[IsDeleted], [s].[Name], [s].[Notes0], [s].[Price], [s].[UpdatedAt0], [s].[UpdatedBy]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt], [d].[Id] AS [Id0], [d].[CategoryId], [d].[CreatedAt] AS [CreatedAt0], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes] AS [Notes0], [d].[Price], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UpdatedBy]
    FROM [CartItems] AS [c0]
    INNER JOIN [Dishes] AS [d] ON [c0].[DishId] = [d].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
[2025-12-22 22:14:34.119] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.DTOs.CartReadDto'.
[2025-12-22 22:14:34.122] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.UpdateItem (RestaurantApi) in 37.8393ms
[2025-12-22 22:14:34.125] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.UpdateItem (RestaurantApi)'
[2025-12-22 22:14:34.128] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 PUT https://localhost:7188/api/Cart/items/200ed0dc-465f-4100-9ca2-b238e2b67eb9 - 200 null application/json; charset=utf-8 58.8845ms
[2025-12-22 22:14:36.046] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:14:36.047] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:14:36.051] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:36.058] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:36.058] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 11.7611ms
[2025-12-22 22:14:36.061] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 204 null null 14.0538ms
[2025-12-22 22:14:36.063] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:14:36.064] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:14:36.079] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:36.083] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:36.084] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:14:36.085] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:14:36.091] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:14:36.092] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:14:36.136] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:36.136] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:14:36.152] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:36.152] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:14:36.167] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:36.167] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:36.180] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:36.181] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:36.227] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 22:14:36.228] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:14:36.231] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 267266.34, Заказов: 44
[2025-12-22 22:14:36.233] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:14:36.235] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:14:36.237] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:14:36.250] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 154.5877ms
[2025-12-22 22:14:36.250] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 152.6577ms
[2025-12-22 22:14:36.252] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:14:36.255] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:14:36.256] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 193.5952ms
[2025-12-22 22:14:36.258] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 194.1012ms
[2025-12-22 22:14:36.264] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:14:36.265] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:14:36.277] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:36.282] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:36.284] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 204 null null 19.4871ms
[2025-12-22 22:14:36.285] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 204 null null 19.9672ms
[2025-12-22 22:14:36.287] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:14:36.288] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:14:36.303] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:36.308] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:36.310] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:14:36.312] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:14:36.317] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:14:36.322] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:14:36.325] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:14:36.332] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:14:36.340] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:36.346] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:36.355] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:14:36.358] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:14:36.361] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 265860.00, Заказов: 38
[2025-12-22 22:14:36.368] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:14:36.371] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 50.5869ms
[2025-12-22 22:14:36.374] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:14:36.376] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:14:36.377] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 88.7222ms
[2025-12-22 22:14:36.383] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 55.6667ms
[2025-12-22 22:14:36.388] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:14:36.391] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 103.6477ms
[2025-12-22 22:14:36.395] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:14:36.395] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:14:36.402] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:36.406] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:36.408] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 204 null null 12.3934ms
[2025-12-22 22:14:36.409] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:14:36.410] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:14:36.417] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:14:36.422] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:36.428] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:14:36.430] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:14:36.430] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:14:36.438] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:14:36.440] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:14:36.444] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:14:36.449] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:36.451] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 16.0541ms
[2025-12-22 22:14:36.455] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:36.457] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:14:36.463] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:14:36.463] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 52.4327ms
[2025-12-22 22:14:36.466] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:14:36.476] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:14:36.480] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 54.1078ms
[2025-12-22 22:14:36.482] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:14:36.484] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 88.8525ms
[2025-12-22 22:14:36.489] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - null null
[2025-12-22 22:14:36.489] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - null null
[2025-12-22 22:14:36.495] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:36.499] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:36.501] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - 204 null null 11.9614ms
[2025-12-22 22:14:36.503] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - 204 null null 13.7867ms
[2025-12-22 22:14:36.505] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - null null
[2025-12-22 22:14:36.506] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - null null
[2025-12-22 22:14:36.523] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:36.527] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:36.529] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:14:36.532] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:14:36.533] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:14:36.535] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:14:36.543] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:14:36.547] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:14:36.549] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:14:36.555] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:14:36.560] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:36.565] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:36.567] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:36.573] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:36.578] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:14:36.583] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:14:36.588] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:14:36.594] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:14:36.596] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:14:36.598] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:14:36.601] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 61.1661ms
[2025-12-22 22:14:36.604] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 60.348ms
[2025-12-22 22:14:36.606] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:14:36.609] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:14:36.612] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - 200 null application/json; charset=utf-8 106.751ms
[2025-12-22 22:14:36.614] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - 200 null application/json; charset=utf-8 107.8759ms
[2025-12-22 22:14:36.618] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:14:36.630] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:36.632] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 13.2325ms
[2025-12-22 22:14:36.634] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:14:36.642] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:36.646] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:14:36.657] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:14:36.730] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (27ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 22:14:36.738] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 22:14:36.742] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:14:36.752] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 89.943ms
[2025-12-22 22:14:36.755] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:14:36.759] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 124.3432ms
[2025-12-22 22:14:36.765] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:14:36.773] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:36.776] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 10.5382ms
[2025-12-22 22:14:36.778] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:14:36.788] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:36.792] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:14:36.801] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:14:36.846] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 22:14:36.852] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:14:36.854] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 22:14:36.858] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 53.5515ms
[2025-12-22 22:14:36.861] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:36.863] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:14:36.864] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 10.5098ms
[2025-12-22 22:14:36.867] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 88.7924ms
[2025-12-22 22:14:36.868] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 22:14:36.873] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:14:36.887] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:36.891] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:36.894] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 22:14:36.896] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 23.0066ms
[2025-12-22 22:14:36.898] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:14:36.907] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.UserReadDto]]] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-22 22:14:36.908] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:36.915] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:14:36.920] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:14:36.930] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:36.936] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 22:14:36.940] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:14:36.945] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 20.3928ms
[2025-12-22 22:14:36.947] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:14:36.949] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 51.1415ms
[2025-12-22 22:14:36.958] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[IsDeleted], [u0].[Notes], [u0].[PasswordHash], [u0].[RoleId], [u0].[UpdatedAt], [u0].[UpdatedBy], [u0].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM (
    SELECT [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-22 22:14:36.971] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 22:14:36.975] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:14:36.983] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 70.5941ms
[2025-12-22 22:14:36.985] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 22:14:36.987] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 118.9376ms
[2025-12-22 22:14:36.990] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:14:36.996] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:36.997] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 6.4474ms
[2025-12-22 22:14:36.999] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:14:37.007] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:37.009] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:14:37.011] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 22:14:37.018] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:37.024] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 22:14:37.028] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 22:14:37.032] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:14:37.033] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 19.6368ms
[2025-12-22 22:14:37.037] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:14:37.040] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 40.4319ms
[2025-12-22 22:14:37.045] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 22:14:37.053] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:37.054] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 8.4039ms
[2025-12-22 22:14:37.056] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 22:14:37.068] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:37.070] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 22:14:37.082] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 22:14:37.106] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:37.144] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 22:14:37.217] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 20, Всего: 44, Страница: 1
[2025-12-22 22:14:37.221] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:14:37.236] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 150.022ms
[2025-12-22 22:14:37.240] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 22:14:37.243] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 186.7266ms
[2025-12-22 22:14:38.436] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - null null
[2025-12-22 22:14:38.440] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:38.441] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - 204 null null 5.4617ms
[2025-12-22 22:14:38.445] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - null null
[2025-12-22 22:14:38.457] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:14:38.462] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-22 22:14:38.471] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.OrderReadDto]]] GetMyOrders(Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 22:14:38.490] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_Value_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:14:38.517] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[UserId] = @__userId_Value_0 AND [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 22:14:38.520] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b". Количество: 16, Всего: 16, Страница: 1
[2025-12-22 22:14:38.522] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:14:38.524] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 49.1406ms
[2025-12-22 22:14:38.528] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-22 22:14:38.530] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - 200 null application/json; charset=utf-8 85.0055ms
[2025-12-22 22:19:43.713] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:19:43.713] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:19:43.720] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:19:43.725] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:19:43.727] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 14.0588ms
[2025-12-22 22:19:43.728] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 204 null null 15.4071ms
[2025-12-22 22:19:43.731] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:19:43.731] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:19:43.765] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:19:43.774] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:19:43.779] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:19:43.781] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:19:43.786] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:19:43.789] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:19:43.806] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:19:43.809] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:19:43.816] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:19:43.822] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:19:43.826] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:19:43.828] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:19:43.836] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:19:43.839] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:19:43.848] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 22:19:43.851] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:19:43.857] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 267266.34, Заказов: 44
[2025-12-22 22:19:43.864] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:19:43.867] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:19:43.870] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:19:43.874] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 82.1281ms
[2025-12-22 22:19:43.877] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 78.9341ms
[2025-12-22 22:19:43.879] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:19:43.881] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:19:43.882] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 150.9352ms
[2025-12-22 22:19:43.885] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 153.1683ms
[2025-12-22 22:19:43.893] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:19:43.893] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:19:43.902] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:19:43.908] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:19:43.909] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 204 null null 16.6429ms
[2025-12-22 22:19:43.912] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 204 null null 19.4516ms
[2025-12-22 22:19:43.913] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:19:43.915] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:19:43.933] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:19:43.939] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:19:43.942] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:19:43.944] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:19:43.945] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:19:43.948] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:19:43.959] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:19:43.960] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:19:43.966] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:19:43.968] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:19:43.975] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:19:43.976] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 23.7652ms
[2025-12-22 22:19:43.983] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:19:43.984] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:19:43.992] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:19:43.993] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 79.72ms
[2025-12-22 22:19:43.999] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 265860.00, Заказов: 38
[2025-12-22 22:19:44.012] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:19:44.016] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 60.9826ms
[2025-12-22 22:19:44.066] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:19:44.072] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 156.821ms
[2025-12-22 22:19:44.077] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:19:44.078] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:19:44.090] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:19:44.100] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:19:44.102] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 204 null null 24.7345ms
[2025-12-22 22:19:44.105] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:19:44.105] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:19:44.118] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:19:44.125] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:19:44.134] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:19:44.134] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:19:44.141] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:19:44.143] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:19:44.151] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:19:44.158] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:19:44.160] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:19:44.164] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:19:44.172] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:19:44.173] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 18.8301ms
[2025-12-22 22:19:44.177] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:19:44.182] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:19:44.185] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:19:44.188] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 83.0035ms
[2025-12-22 22:19:44.190] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 60.3544ms
[2025-12-22 22:19:44.198] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - null null
[2025-12-22 22:19:44.220] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:19:44.227] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:19:44.230] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 152.1361ms
[2025-12-22 22:19:44.232] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - 204 null null 34.4545ms
[2025-12-22 22:19:44.235] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - null null
[2025-12-22 22:19:44.236] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - null null
[2025-12-22 22:19:44.236] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - null null
[2025-12-22 22:19:44.255] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:19:44.263] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:19:44.273] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:19:44.274] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - 204 null null 39.0304ms
[2025-12-22 22:19:44.276] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-22 22:19:44.277] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - null null
[2025-12-22 22:19:44.278] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - 204 null null 41.2779ms
[2025-12-22 22:19:44.281] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - null null
[2025-12-22 22:19:44.289] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.OrderReadDto]]] GetMyOrders(Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 22:19:44.296] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:19:44.309] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:19:44.315] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:19:44.316] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:19:44.320] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:19:44.321] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_Value_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:19:44.323] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:19:44.333] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:19:44.343] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:19:44.344] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[UserId] = @__userId_Value_0 AND [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 22:19:44.345] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:19:44.352] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:19:44.355] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b". Количество: 16, Всего: 16, Страница: 1
[2025-12-22 22:19:44.360] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:19:44.367] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:19:44.368] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:19:44.374] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:19:44.379] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:19:44.381] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 67.8735ms
[2025-12-22 22:19:44.388] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:19:44.393] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:19:44.394] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-22 22:19:44.400] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:19:44.412] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:19:44.408] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - 200 null application/json; charset=utf-8 171.9137ms
[2025-12-22 22:19:44.405] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:19:44.415] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 86.8759ms
[2025-12-22 22:19:44.426] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:19:44.430] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:19:44.434] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 95.2604ms
[2025-12-22 22:19:44.437] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - 200 null application/json; charset=utf-8 160.5531ms
[2025-12-22 22:19:44.440] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:19:44.449] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - 200 null application/json; charset=utf-8 168.4562ms
[2025-12-22 22:19:44.454] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:19:44.466] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:19:44.468] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 14.0086ms
[2025-12-22 22:19:44.472] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:19:44.484] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:19:44.487] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:19:44.491] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:19:44.537] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (40ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 22:19:44.543] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 22:19:44.546] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:19:44.550] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 55.104ms
[2025-12-22 22:19:44.556] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:19:44.559] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 87.0615ms
[2025-12-22 22:19:44.564] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:19:44.572] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:19:44.574] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 10.4132ms
[2025-12-22 22:19:44.577] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:19:44.588] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:19:44.590] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:19:44.593] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:19:44.624] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 22:19:44.631] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:19:44.634] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 36.3159ms
[2025-12-22 22:19:44.638] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:19:44.641] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 63.7897ms
[2025-12-22 22:19:44.646] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:19:44.656] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:19:44.659] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 12.3109ms
[2025-12-22 22:19:44.662] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:19:44.674] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:19:44.677] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:19:44.680] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:19:44.693] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 22:19:44.698] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:19:44.703] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 16.9313ms
[2025-12-22 22:19:44.706] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:19:44.709] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 46.9523ms
[2025-12-22 22:34:29.245] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:34:29.245] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:34:29.245] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:34:29.249] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:29.251] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:29.254] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:29.255] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 9.288ms
[2025-12-22 22:34:29.255] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 9.9017ms
[2025-12-22 22:34:29.256] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 10.5973ms
[2025-12-22 22:34:29.258] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:34:29.258] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:34:29.258] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:34:29.269] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:29.271] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:29.274] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:34:29.273] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:29.275] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:34:29.275] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 22:34:29.276] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:34:29.277] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.CategoryReadDto]]] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-22 22:34:29.280] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.MenuReadDto]]] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-22 22:34:29.349] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:29.349] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:29.352] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:29.355] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 22:34:29.357] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:34:29.359] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[CreatedAt], [m].[CreatedBy], [m].[DeletedAt], [m].[DeletedBy], [m].[IsDeleted], [m].[Name], [m].[Notes], [m].[UpdatedAt], [m].[UpdatedBy]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:34:29.359] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 22:34:29.361] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 22:34:29.362] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-22 22:34:29.364] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:29.365] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:29.366] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:29.367] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 88.1418ms
[2025-12-22 22:34:29.368] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 86.2308ms
[2025-12-22 22:34:29.369] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 85.6353ms
[2025-12-22 22:34:29.370] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:34:29.371] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:34:29.372] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:34:29.373] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 115.1331ms
[2025-12-22 22:34:29.374] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 115.7955ms
[2025-12-22 22:34:29.375] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 116.5298ms
[2025-12-22 22:34:29.377] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:34:29.385] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:29.386] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 8.5392ms
[2025-12-22 22:34:29.388] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:34:29.390] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:29.391] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:34:29.392] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-22 22:34:29.399] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-22 22:34:29.404] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-22 22:34:29.406] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-22 22:34:29.407] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:29.409] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 15.2004ms
[2025-12-22 22:34:29.410] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:34:29.410] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 22.4974ms
[2025-12-22 22:34:30.375] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:34:30.376] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:34:30.378] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:30.380] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:30.381] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 6.2853ms
[2025-12-22 22:34:30.382] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 204 null null 5.4416ms
[2025-12-22 22:34:30.384] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:34:30.384] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:34:30.389] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:30.391] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:30.392] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:34:30.393] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:34:30.393] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:34:30.394] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:34:30.412] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:30.412] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (14ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:34:30.416] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:30.418] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:34:30.420] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:30.420] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:30.422] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:30.424] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:30.428] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:34:30.428] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 22:34:30.429] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:34:30.431] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 267266.34, Заказов: 44
[2025-12-22 22:34:30.432] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:34:30.432] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:34:30.433] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 36.8013ms
[2025-12-22 22:34:30.434] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 39.1998ms
[2025-12-22 22:34:30.435] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:34:30.436] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:34:30.437] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 52.5641ms
[2025-12-22 22:34:30.438] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 53.9007ms
[2025-12-22 22:34:30.441] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:34:30.441] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:34:30.444] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:30.446] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:30.446] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 204 null null 5.5698ms
[2025-12-22 22:34:30.447] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 204 null null 6.0218ms
[2025-12-22 22:34:30.449] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:34:30.449] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:34:30.454] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:30.456] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:30.457] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:34:30.458] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:34:30.458] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:34:30.459] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:34:30.462] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:34:30.463] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:34:30.465] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:34:30.466] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:30.468] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:30.469] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 8.6471ms
[2025-12-22 22:34:30.471] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:30.471] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:34:30.473] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:34:30.473] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 24.5745ms
[2025-12-22 22:34:30.475] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 265860.00, Заказов: 38
[2025-12-22 22:34:30.477] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:34:30.478] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 17.1322ms
[2025-12-22 22:34:30.479] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:34:30.480] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 31.2217ms
[2025-12-22 22:34:30.483] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:34:30.483] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:34:30.485] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:30.487] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:30.487] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 204 null null 4.4943ms
[2025-12-22 22:34:30.488] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:34:30.489] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:34:30.491] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:34:30.492] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:30.494] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:34:30.495] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:34:30.496] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:34:30.499] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:34:30.500] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:34:30.501] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:30.502] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:30.504] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:30.505] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.5151ms
[2025-12-22 22:34:30.507] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:34:30.507] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:34:30.508] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:34:30.509] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 20.4215ms
[2025-12-22 22:34:30.510] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:34:30.513] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.4224ms
[2025-12-22 22:34:30.514] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:34:30.515] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 32.0787ms
[2025-12-22 22:34:30.518] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - null null
[2025-12-22 22:34:30.518] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - null null
[2025-12-22 22:34:30.519] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:30.521] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:30.522] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - 204 null null 3.7843ms
[2025-12-22 22:34:30.522] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - 204 null null 4.4735ms
[2025-12-22 22:34:30.523] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - null null
[2025-12-22 22:34:30.523] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - null null
[2025-12-22 22:34:30.528] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:30.530] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:30.531] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:34:30.532] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:34:30.532] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:34:30.533] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:34:30.536] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:34:30.537] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:34:30.539] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:34:30.540] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:34:30.541] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:30.543] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:30.545] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:30.546] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:30.549] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:34:30.551] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:34:30.551] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:34:30.552] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:34:30.553] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:34:30.554] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:34:30.555] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 21.0349ms
[2025-12-22 22:34:30.556] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.4558ms
[2025-12-22 22:34:30.557] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:34:30.558] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:34:30.559] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - 200 null application/json; charset=utf-8 35.6209ms
[2025-12-22 22:34:30.560] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - 200 null application/json; charset=utf-8 36.2066ms
[2025-12-22 22:34:30.562] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:34:30.566] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:30.567] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 4.229ms
[2025-12-22 22:34:30.568] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:34:30.571] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:30.571] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:34:30.572] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:34:30.587] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 22:34:30.589] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 22:34:30.589] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:30.590] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 17.0696ms
[2025-12-22 22:34:30.591] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:34:30.592] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 24.112ms
[2025-12-22 22:34:30.595] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:34:30.597] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:30.598] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.771ms
[2025-12-22 22:34:30.600] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:34:30.603] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:30.604] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:34:30.605] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:34:30.612] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 22:34:30.615] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:30.616] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 10.0451ms
[2025-12-22 22:34:30.617] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:34:30.619] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 18.8339ms
[2025-12-22 22:34:30.621] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:34:30.623] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:30.624] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.5891ms
[2025-12-22 22:34:30.626] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:34:30.629] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:30.630] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:34:30.631] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:34:30.635] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 22:34:30.637] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:30.638] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.9048ms
[2025-12-22 22:34:30.639] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:34:30.640] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 14.3719ms
[2025-12-22 22:34:33.260] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:34:33.262] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:34:33.262] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:34:33.263] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:33.265] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:33.268] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:33.269] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:34:33.270] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:34:33.270] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:34:33.271] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.MenuReadDto]]] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-22 22:34:33.272] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.CategoryReadDto]]] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-22 22:34:33.273] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 22:34:33.276] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:33.277] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:33.279] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:33.280] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[CreatedAt], [m].[CreatedBy], [m].[DeletedAt], [m].[DeletedBy], [m].[IsDeleted], [m].[Name], [m].[Notes], [m].[UpdatedAt], [m].[UpdatedBy]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:34:33.282] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:34:33.284] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 22:34:33.284] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-22 22:34:33.286] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 22:34:33.288] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 22:34:33.289] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:33.290] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:33.291] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:33.292] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 17.7697ms
[2025-12-22 22:34:33.293] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 17.1612ms
[2025-12-22 22:34:33.294] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 17.1186ms
[2025-12-22 22:34:33.295] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:34:33.297] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:34:33.298] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:34:33.299] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 38.3809ms
[2025-12-22 22:34:33.300] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 37.8014ms
[2025-12-22 22:34:33.300] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 38.3814ms
[2025-12-22 22:34:33.301] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:34:33.308] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:33.309] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:34:33.310] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-22 22:34:33.312] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-22 22:34:33.315] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-22 22:34:33.317] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-22 22:34:33.318] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:33.319] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 8.5196ms
[2025-12-22 22:34:33.320] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:34:33.321] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 19.5606ms
[2025-12-22 22:34:38.450] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - null null
[2025-12-22 22:34:38.452] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:38.453] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - 204 null null 3.0223ms
[2025-12-22 22:34:38.455] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Auth/login - application/json 44
[2025-12-22 22:34:38.458] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:38.459] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-22 22:34:38.460] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.AuthResponseDto]] Login(RestaurantAPI.DTOs.UserLoginDto) on controller RestaurantAPI.Controllers.AuthController (RestaurantApi).
[2025-12-22 22:34:38.467] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__dto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Username] = @__dto_Username_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:38.662] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [JwtTokens] ([CreatedAt], [ExpiresAt], [Revoked], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
[2025-12-22 22:34:38.665] [INF] [RestaurantAPI.Controllers.AuthController] Пользователь admin успешно вошел в систему
[2025-12-22 22:34:38.666] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'RestaurantAPI.DTOs.AuthResponseDto'.
[2025-12-22 22:34:38.668] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.AuthController.Login (RestaurantApi) in 206.976ms
[2025-12-22 22:34:38.671] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-22 22:34:38.673] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Auth/login - 200 null application/json; charset=utf-8 217.4861ms
[2025-12-22 22:34:38.676] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Cart - null null
[2025-12-22 22:34:38.678] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:38.679] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Cart - 204 null null 2.8776ms
[2025-12-22 22:34:38.681] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Cart - null null
[2025-12-22 22:34:38.687] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:38.689] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi)'
[2025-12-22 22:34:38.691] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.CartReadDto]] GetCart() on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 22:34:38.706] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (12ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [s].[Id], [s].[CartId], [s].[CreatedAt], [s].[DishId], [s].[Notes], [s].[Quantity], [s].[UpdatedAt], [s].[Id0], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedBy], [s].[DeletedAt], [s].[DeletedBy], [s].[Description], [s].[IsDeleted], [s].[Name], [s].[Notes0], [s].[Price], [s].[UpdatedAt0], [s].[UpdatedBy]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt], [d].[Id] AS [Id0], [d].[CategoryId], [d].[CreatedAt] AS [CreatedAt0], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes] AS [Notes0], [d].[Price], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UpdatedBy]
    FROM [CartItems] AS [c0]
    INNER JOIN [Dishes] AS [d] ON [c0].[DishId] = [d].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
[2025-12-22 22:34:38.709] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.DTOs.CartReadDto'.
[2025-12-22 22:34:38.710] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi) in 17.8041ms
[2025-12-22 22:34:38.711] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi)'
[2025-12-22 22:34:38.712] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Cart - 200 null application/json; charset=utf-8 30.9179ms
[2025-12-22 22:34:39.797] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:34:39.799] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:34:39.800] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:39.802] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:39.803] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 6.1006ms
[2025-12-22 22:34:39.804] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 204 null null 4.8065ms
[2025-12-22 22:34:39.806] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:34:39.806] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:34:39.812] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:39.814] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:39.815] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:34:39.816] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:34:39.816] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:34:39.817] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:34:39.822] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:39.822] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:34:39.825] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:39.827] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:34:39.829] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:39.830] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:39.833] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:39.833] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:39.838] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 22:34:39.839] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:34:39.840] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 267266.34, Заказов: 44
[2025-12-22 22:34:39.841] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:34:39.842] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:34:39.843] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:34:39.844] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 25.5938ms
[2025-12-22 22:34:39.845] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 25.2279ms
[2025-12-22 22:34:39.846] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:34:39.848] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:34:39.849] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 43.1652ms
[2025-12-22 22:34:39.850] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 43.9422ms
[2025-12-22 22:34:39.853] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:34:39.853] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:34:39.857] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:39.858] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:39.859] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 204 null null 5.8452ms
[2025-12-22 22:34:39.859] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 204 null null 6.2278ms
[2025-12-22 22:34:39.861] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:34:39.861] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:34:39.866] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:39.868] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:39.869] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:34:39.870] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:34:39.871] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:34:39.872] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:34:39.875] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:34:39.876] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:34:39.878] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:34:39.879] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:39.882] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:39.882] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 9.1916ms
[2025-12-22 22:34:39.885] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:39.885] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:34:39.887] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 26.3857ms
[2025-12-22 22:34:39.887] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:34:39.891] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 265860.00, Заказов: 38
[2025-12-22 22:34:39.892] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:34:39.894] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.4443ms
[2025-12-22 22:34:39.895] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:34:39.896] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 34.5971ms
[2025-12-22 22:34:39.899] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:34:39.900] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:34:39.901] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:39.903] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:39.903] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 204 null null 3.966ms
[2025-12-22 22:34:39.904] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:34:39.905] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:34:39.907] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:34:39.909] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:39.911] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:34:39.912] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:34:39.912] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:34:39.916] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:34:39.918] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:34:39.918] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:39.920] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:39.921] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:39.922] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.9144ms
[2025-12-22 22:34:39.925] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:34:39.925] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:34:39.926] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 20.9926ms
[2025-12-22 22:34:39.927] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:34:39.931] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:34:39.932] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 21.644ms
[2025-12-22 22:34:39.933] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:34:39.934] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 34.3326ms
[2025-12-22 22:34:39.936] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - null null
[2025-12-22 22:34:39.937] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - null null
[2025-12-22 22:34:39.938] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:39.940] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:39.941] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - 204 null null 4.3829ms
[2025-12-22 22:34:39.941] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - 204 null null 4.8517ms
[2025-12-22 22:34:39.943] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - null null
[2025-12-22 22:34:39.943] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - null null
[2025-12-22 22:34:39.948] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:39.950] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:39.951] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:34:39.951] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:34:39.952] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:34:39.953] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:34:39.956] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:34:39.957] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:34:39.958] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:34:39.960] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:34:39.961] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:39.962] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:39.965] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:39.966] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:39.968] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:34:39.969] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:34:39.970] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:34:39.971] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:34:39.972] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:34:39.973] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:34:39.974] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.7289ms
[2025-12-22 22:34:39.975] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.6446ms
[2025-12-22 22:34:39.976] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:34:39.977] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:34:39.978] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - 200 null application/json; charset=utf-8 35.3432ms
[2025-12-22 22:34:39.979] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - 200 null application/json; charset=utf-8 36.2614ms
[2025-12-22 22:34:39.982] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:34:39.986] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:39.987] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 4.5564ms
[2025-12-22 22:34:39.988] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:34:39.991] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:39.991] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:34:39.992] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:34:40.004] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 22:34:40.006] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 22:34:40.007] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:40.008] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 14.8923ms
[2025-12-22 22:34:40.009] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:34:40.010] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 21.9736ms
[2025-12-22 22:34:40.012] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:34:40.015] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:40.015] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.9451ms
[2025-12-22 22:34:40.017] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:34:40.020] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:40.021] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:34:40.022] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:34:40.033] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 22:34:40.036] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:40.037] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 13.9507ms
[2025-12-22 22:34:40.038] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:34:40.039] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 21.77ms
[2025-12-22 22:34:40.042] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:34:40.044] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:40.044] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.7332ms
[2025-12-22 22:34:40.046] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:34:40.050] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:40.051] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:34:40.052] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:34:40.057] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 22:34:40.059] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:40.060] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 6.2323ms
[2025-12-22 22:34:40.061] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:34:40.063] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 16.6595ms
[2025-12-22 22:34:40.485] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:34:40.486] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:34:40.486] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:34:40.488] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:40.491] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:40.494] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:40.494] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 9.6711ms
[2025-12-22 22:34:40.495] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 8.5607ms
[2025-12-22 22:34:40.496] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 9.2936ms
[2025-12-22 22:34:40.499] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:34:40.499] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:34:40.501] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:34:40.514] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:40.517] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:40.519] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:40.520] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:34:40.520] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:34:40.521] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:34:40.522] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 22:34:40.522] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.MenuReadDto]]] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-22 22:34:40.523] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.CategoryReadDto]]] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-22 22:34:40.529] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:40.529] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:40.530] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:40.535] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[CreatedAt], [m].[CreatedBy], [m].[DeletedAt], [m].[DeletedBy], [m].[IsDeleted], [m].[Name], [m].[Notes], [m].[UpdatedAt], [m].[UpdatedBy]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:34:40.538] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-22 22:34:40.538] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:34:40.539] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 22:34:40.539] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:40.542] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 22:34:40.544] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 22:34:40.545] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 18.4669ms
[2025-12-22 22:34:40.546] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:40.549] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:40.550] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:34:40.551] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 24.0528ms
[2025-12-22 22:34:40.552] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 27.4649ms
[2025-12-22 22:34:40.555] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:34:40.554] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:34:40.553] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 53.5943ms
[2025-12-22 22:34:40.555] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:34:40.557] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:40.558] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 57.7054ms
[2025-12-22 22:34:40.562] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 62.0214ms
[2025-12-22 22:34:40.562] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 7.028ms
[2025-12-22 22:34:40.566] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:34:40.576] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:40.577] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:34:40.578] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-22 22:34:40.585] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-22 22:34:40.592] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-22 22:34:40.594] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-22 22:34:40.596] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:40.598] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 17.4045ms
[2025-12-22 22:34:40.599] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:34:40.600] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 34.009ms
[2025-12-22 22:34:47.021] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:34:47.022] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:34:47.023] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:34:47.024] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:47.026] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:47.029] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:47.030] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:34:47.030] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:34:47.031] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:34:47.032] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.MenuReadDto]]] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-22 22:34:47.033] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.CategoryReadDto]]] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-22 22:34:47.034] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 22:34:47.039] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:47.039] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:47.040] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:34:47.043] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[CreatedAt], [m].[CreatedBy], [m].[DeletedAt], [m].[DeletedBy], [m].[IsDeleted], [m].[Name], [m].[Notes], [m].[UpdatedAt], [m].[UpdatedBy]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:34:47.044] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:34:47.046] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-22 22:34:47.048] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 22:34:47.048] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 22:34:47.049] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:47.050] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:47.052] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 22:34:47.052] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 17.039ms
[2025-12-22 22:34:47.053] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 16.7659ms
[2025-12-22 22:34:47.055] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:47.055] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:34:47.056] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:34:47.057] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 20.054ms
[2025-12-22 22:34:47.058] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 37.1207ms
[2025-12-22 22:34:47.059] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 36.4766ms
[2025-12-22 22:34:47.060] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:34:47.061] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:34:47.066] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 43.0944ms
[2025-12-22 22:34:47.068] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:34:47.071] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:34:47.071] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-22 22:34:47.075] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-22 22:34:47.080] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-22 22:34:47.082] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-22 22:34:47.083] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:34:47.084] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 11.8054ms
[2025-12-22 22:34:47.085] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:34:47.086] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 25.5016ms
[2025-12-22 22:43:08.241] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:43:08.241] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:43:08.241] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:43:08.244] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:08.247] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:08.249] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:08.249] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:43:08.250] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:43:08.251] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:43:08.252] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.MenuReadDto]]] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-22 22:43:08.252] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 22:43:08.253] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.CategoryReadDto]]] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-22 22:43:08.317] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:08.317] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:08.317] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:08.321] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:43:08.323] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 22:43:08.323] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 22:43:08.324] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[CreatedAt], [m].[CreatedBy], [m].[DeletedAt], [m].[DeletedBy], [m].[IsDeleted], [m].[Name], [m].[Notes], [m].[UpdatedAt], [m].[UpdatedBy]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:43:08.326] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 22:43:08.327] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:43:08.328] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-22 22:43:08.329] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:43:08.330] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 71.3858ms
[2025-12-22 22:43:08.331] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:43:08.332] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 75.2988ms
[2025-12-22 22:43:08.333] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:43:08.334] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 78.8144ms
[2025-12-22 22:43:08.335] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:43:08.336] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 95.3217ms
[2025-12-22 22:43:08.337] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:43:08.338] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 97.5286ms
[2025-12-22 22:43:08.343] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:43:08.341] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 100.3901ms
[2025-12-22 22:43:08.346] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:08.349] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:43:08.350] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-22 22:43:08.356] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-22 22:43:08.361] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-22 22:43:08.363] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-22 22:43:08.364] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:43:08.365] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 13.4147ms
[2025-12-22 22:43:08.366] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:43:08.367] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 23.1871ms
[2025-12-22 22:43:12.731] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - null null
[2025-12-22 22:43:12.734] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:12.735] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - 204 null null 3.5611ms
[2025-12-22 22:43:12.737] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Auth/login - application/json 44
[2025-12-22 22:43:12.740] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:12.740] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-22 22:43:12.741] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.AuthResponseDto]] Login(RestaurantAPI.DTOs.UserLoginDto) on controller RestaurantAPI.Controllers.AuthController (RestaurantApi).
[2025-12-22 22:43:12.750] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__dto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Username] = @__dto_Username_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:12.938] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [JwtTokens] ([CreatedAt], [ExpiresAt], [Revoked], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
[2025-12-22 22:43:12.940] [INF] [RestaurantAPI.Controllers.AuthController] Пользователь admin успешно вошел в систему
[2025-12-22 22:43:12.941] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'RestaurantAPI.DTOs.AuthResponseDto'.
[2025-12-22 22:43:12.942] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.AuthController.Login (RestaurantApi) in 199.0102ms
[2025-12-22 22:43:12.943] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-22 22:43:12.944] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Auth/login - 200 null application/json; charset=utf-8 207.3114ms
[2025-12-22 22:43:12.950] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Cart - null null
[2025-12-22 22:43:12.952] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:12.953] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Cart - 204 null null 2.7644ms
[2025-12-22 22:43:12.955] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Cart - null null
[2025-12-22 22:43:12.958] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:12.958] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi)'
[2025-12-22 22:43:12.959] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.CartReadDto]] GetCart() on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 22:43:12.971] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [s].[Id], [s].[CartId], [s].[CreatedAt], [s].[DishId], [s].[Notes], [s].[Quantity], [s].[UpdatedAt], [s].[Id0], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedBy], [s].[DeletedAt], [s].[DeletedBy], [s].[Description], [s].[IsDeleted], [s].[Name], [s].[Notes0], [s].[Price], [s].[UpdatedAt0], [s].[UpdatedBy]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt], [d].[Id] AS [Id0], [d].[CategoryId], [d].[CreatedAt] AS [CreatedAt0], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes] AS [Notes0], [d].[Price], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UpdatedBy]
    FROM [CartItems] AS [c0]
    INNER JOIN [Dishes] AS [d] ON [c0].[DishId] = [d].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
[2025-12-22 22:43:12.974] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.DTOs.CartReadDto'.
[2025-12-22 22:43:12.975] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi) in 14.3884ms
[2025-12-22 22:43:12.976] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi)'
[2025-12-22 22:43:12.978] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Cart - 200 null application/json; charset=utf-8 22.552ms
[2025-12-22 22:43:13.840] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:43:13.841] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:43:13.843] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:13.845] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:13.846] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 6.2423ms
[2025-12-22 22:43:13.847] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 204 null null 6.0462ms
[2025-12-22 22:43:13.849] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:43:13.849] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:43:13.855] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:13.857] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:13.858] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:43:13.858] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:43:13.859] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:43:13.860] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:43:13.877] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (14ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:43:13.877] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:13.881] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:43:13.882] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:13.956] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:13.958] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:13.959] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:13.961] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:13.967] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:43:13.973] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 22:43:13.975] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 267266.34, Заказов: 44
[2025-12-22 22:43:13.979] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:43:13.974] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:43:13.981] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 119.2008ms
[2025-12-22 22:43:13.982] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:43:13.983] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:43:13.985] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 122.0938ms
[2025-12-22 22:43:13.986] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 136.7999ms
[2025-12-22 22:43:13.987] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:43:13.989] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 140.1485ms
[2025-12-22 22:43:13.992] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:43:13.992] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:43:13.994] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:13.997] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:13.997] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 204 null null 5.1441ms
[2025-12-22 22:43:13.998] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 204 null null 5.6142ms
[2025-12-22 22:43:14.000] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:43:14.001] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:43:14.005] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:14.007] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:14.008] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:43:14.008] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:43:14.009] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:43:14.010] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:43:14.014] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:43:14.014] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:43:14.016] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:43:14.018] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:43:14.018] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 7.4177ms
[2025-12-22 22:43:14.021] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:14.021] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:43:14.023] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:14.023] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 23.3416ms
[2025-12-22 22:43:14.026] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:43:14.029] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 265860.00, Заказов: 38
[2025-12-22 22:43:14.030] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:43:14.031] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 18.0928ms
[2025-12-22 22:43:14.032] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:43:14.033] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 32.1829ms
[2025-12-22 22:43:14.035] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:43:14.035] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:43:14.037] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:14.039] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:14.039] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 204 null null 4.434ms
[2025-12-22 22:43:14.040] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:43:14.041] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:43:14.043] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:43:14.045] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:14.047] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:43:14.048] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:43:14.048] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:43:14.050] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:43:14.052] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:43:14.053] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:14.055] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:43:14.057] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:14.058] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 6.492ms
[2025-12-22 22:43:14.060] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:43:14.060] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:43:14.061] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 20.4784ms
[2025-12-22 22:43:14.063] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:43:14.066] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:43:14.067] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.4371ms
[2025-12-22 22:43:14.068] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:43:14.069] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 33.8206ms
[2025-12-22 22:43:14.072] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - null null
[2025-12-22 22:43:14.072] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - null null
[2025-12-22 22:43:14.073] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:14.076] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:14.077] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - 204 null null 5.2926ms
[2025-12-22 22:43:14.077] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - 204 null null 5.81ms
[2025-12-22 22:43:14.079] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - null null
[2025-12-22 22:43:14.079] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - null null
[2025-12-22 22:43:14.084] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:14.086] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:14.087] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:43:14.087] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:43:14.088] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:43:14.089] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:43:14.091] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:43:14.092] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:43:14.094] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:43:14.096] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:43:14.097] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:14.099] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:14.100] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:14.101] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:14.103] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:43:14.105] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:43:14.106] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:43:14.107] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:43:14.108] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:43:14.109] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:43:14.110] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.2277ms
[2025-12-22 22:43:14.111] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.9252ms
[2025-12-22 22:43:14.112] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:43:14.113] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:43:14.114] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - 200 null application/json; charset=utf-8 34.66ms
[2025-12-22 22:43:14.114] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - 200 null application/json; charset=utf-8 35.099ms
[2025-12-22 22:43:14.117] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:43:14.121] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:14.122] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 4.9837ms
[2025-12-22 22:43:14.124] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:43:14.127] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:14.128] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:43:14.129] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:43:14.144] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 22:43:14.146] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 22:43:14.147] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:43:14.148] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 17.5676ms
[2025-12-22 22:43:14.149] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:43:14.149] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 25.6595ms
[2025-12-22 22:43:14.152] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:43:14.154] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:14.154] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.2731ms
[2025-12-22 22:43:14.156] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:43:14.159] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:14.160] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:43:14.161] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:43:14.169] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 22:43:14.171] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:43:14.172] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 10.4925ms
[2025-12-22 22:43:14.173] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:43:14.174] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 18.3213ms
[2025-12-22 22:43:14.178] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:43:14.180] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:14.181] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.7978ms
[2025-12-22 22:43:14.183] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:43:14.186] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:14.186] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:43:14.187] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:43:14.190] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 22:43:14.192] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:43:14.193] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.1148ms
[2025-12-22 22:43:14.195] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:43:14.196] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 12.981ms
[2025-12-22 22:43:15.774] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:43:15.776] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:43:15.776] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:43:15.777] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:15.780] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:15.782] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:15.783] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 8.6137ms
[2025-12-22 22:43:15.783] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 7.3158ms
[2025-12-22 22:43:15.784] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 7.8749ms
[2025-12-22 22:43:15.785] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:43:15.786] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:43:15.786] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:43:15.793] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:15.796] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:15.798] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:15.799] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:43:15.799] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:43:15.800] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:43:15.801] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.MenuReadDto]]] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-22 22:43:15.802] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.CategoryReadDto]]] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-22 22:43:15.803] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 22:43:15.806] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:15.808] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:15.810] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:15.812] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[CreatedAt], [m].[CreatedBy], [m].[DeletedAt], [m].[DeletedBy], [m].[IsDeleted], [m].[Name], [m].[Notes], [m].[UpdatedAt], [m].[UpdatedBy]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:43:15.813] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:43:15.815] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 22:43:15.816] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-22 22:43:15.818] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 22:43:15.820] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 22:43:15.821] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:43:15.822] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:43:15.823] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:43:15.824] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 19.5104ms
[2025-12-22 22:43:15.826] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 18.9607ms
[2025-12-22 22:43:15.826] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 17.6413ms
[2025-12-22 22:43:15.828] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:43:15.829] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:43:15.830] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:43:15.831] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 45.8359ms
[2025-12-22 22:43:15.832] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 46.0595ms
[2025-12-22 22:43:15.832] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 46.8184ms
[2025-12-22 22:43:15.833] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:43:15.844] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:15.845] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 11.2396ms
[2025-12-22 22:43:15.847] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:43:15.850] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:15.851] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:43:15.852] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-22 22:43:15.855] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-22 22:43:15.860] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-22 22:43:15.861] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-22 22:43:15.863] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:43:15.864] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 10.2117ms
[2025-12-22 22:43:15.866] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:43:15.867] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 19.804ms
[2025-12-22 22:43:26.383] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - null null
[2025-12-22 22:43:26.386] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:26.387] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - 204 null null 4.1741ms
[2025-12-22 22:43:26.388] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - null null
[2025-12-22 22:43:26.392] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:26.393] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-22 22:43:26.394] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.OrderReadDto]]] GetMyOrders(Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 22:43:26.401] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_Value_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:26.408] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[UserId] = @__userId_Value_0 AND [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 22:43:26.410] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b". Количество: 16, Всего: 16, Страница: 1
[2025-12-22 22:43:26.412] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:43:26.414] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 17.7175ms
[2025-12-22 22:43:26.416] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-22 22:43:26.417] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - 200 null application/json; charset=utf-8 28.6524ms
[2025-12-22 22:43:27.589] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:43:27.591] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:43:27.592] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:43:27.592] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:27.607] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:27.607] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:27.607] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 17.4296ms
[2025-12-22 22:43:27.607] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 16.4602ms
[2025-12-22 22:43:27.608] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 16.284ms
[2025-12-22 22:43:27.610] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:43:27.611] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:43:27.612] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:43:27.620] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:27.621] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:27.624] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:27.625] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:43:27.625] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:43:27.626] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:43:27.627] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.MenuReadDto]]] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-22 22:43:27.627] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.CategoryReadDto]]] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-22 22:43:27.628] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 22:43:27.634] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:27.635] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:27.636] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:27.638] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[CreatedAt], [m].[CreatedBy], [m].[DeletedAt], [m].[DeletedBy], [m].[IsDeleted], [m].[Name], [m].[Notes], [m].[UpdatedAt], [m].[UpdatedBy]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:43:27.640] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:43:27.641] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-22 22:43:27.642] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 22:43:27.643] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 22:43:27.644] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:43:27.645] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:43:27.646] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 22:43:27.647] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 18.0798ms
[2025-12-22 22:43:27.648] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 16.5711ms
[2025-12-22 22:43:27.650] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:43:27.651] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:43:27.652] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:43:27.653] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 20.3153ms
[2025-12-22 22:43:27.654] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 44.3143ms
[2025-12-22 22:43:27.655] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 44.0409ms
[2025-12-22 22:43:27.657] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:43:27.658] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:43:27.665] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:27.666] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 54.2078ms
[2025-12-22 22:43:27.667] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 9.3742ms
[2025-12-22 22:43:27.669] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:43:27.674] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:27.675] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:43:27.676] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-22 22:43:27.682] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-22 22:43:27.688] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-22 22:43:27.691] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-22 22:43:27.692] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:43:27.693] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 15.5967ms
[2025-12-22 22:43:27.694] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:43:27.695] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 26.4084ms
[2025-12-22 22:43:31.441] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:43:31.444] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:43:31.448] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:31.451] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:31.452] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 10.2973ms
[2025-12-22 22:43:31.453] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 204 null null 9.0342ms
[2025-12-22 22:43:31.455] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:43:31.455] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:43:31.460] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:31.462] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:31.462] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:43:31.463] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:43:31.464] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:43:31.465] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:43:31.470] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:31.471] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:43:31.474] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:31.476] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:43:31.478] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:31.478] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:31.483] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:31.483] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:31.488] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 22:43:31.489] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 267266.34, Заказов: 44
[2025-12-22 22:43:31.489] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:43:31.490] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:43:31.492] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:43:31.493] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 26.1276ms
[2025-12-22 22:43:31.494] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:43:31.495] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:43:31.496] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 28.0983ms
[2025-12-22 22:43:31.496] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 41.6522ms
[2025-12-22 22:43:31.499] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:43:31.503] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 47.2582ms
[2025-12-22 22:43:31.507] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:43:31.507] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:43:31.509] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:31.511] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:31.512] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 204 null null 4.9481ms
[2025-12-22 22:43:31.512] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 204 null null 4.5511ms
[2025-12-22 22:43:31.515] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:43:31.515] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:43:31.520] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:31.522] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:31.523] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:43:31.523] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:43:31.524] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:43:31.525] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:43:31.528] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:43:31.529] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:43:31.532] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:43:31.533] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:43:31.536] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 10.2598ms
[2025-12-22 22:43:31.537] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:31.537] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:43:31.540] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:31.540] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 24.6671ms
[2025-12-22 22:43:31.542] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:43:31.546] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 265860.00, Заказов: 38
[2025-12-22 22:43:31.547] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:43:31.548] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.8548ms
[2025-12-22 22:43:31.550] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:43:31.551] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 35.6358ms
[2025-12-22 22:43:31.553] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:43:31.554] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:43:31.555] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:31.557] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:31.558] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 204 null null 4.7208ms
[2025-12-22 22:43:31.559] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:43:31.560] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:43:31.562] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:43:31.564] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:31.567] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:43:31.567] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:43:31.568] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:43:31.570] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:43:31.572] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:43:31.573] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:31.574] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:43:31.576] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:31.577] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.9214ms
[2025-12-22 22:43:31.579] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:43:31.579] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:43:31.581] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:43:31.582] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 22.2543ms
[2025-12-22 22:43:31.583] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:43:31.586] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.7119ms
[2025-12-22 22:43:31.588] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:43:31.588] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 34.8486ms
[2025-12-22 22:43:31.591] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - null null
[2025-12-22 22:43:31.591] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - null null
[2025-12-22 22:43:31.593] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:31.595] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:31.595] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - 204 null null 4.2593ms
[2025-12-22 22:43:31.596] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - 204 null null 5.1358ms
[2025-12-22 22:43:31.598] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - null null
[2025-12-22 22:43:31.598] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - null null
[2025-12-22 22:43:31.604] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:31.606] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:31.607] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:43:31.607] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:43:31.608] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:43:31.609] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:43:31.611] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:43:31.613] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:43:31.615] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:43:31.616] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:43:31.618] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:31.619] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:31.621] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:31.622] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:31.624] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:43:31.625] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:43:31.627] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:43:31.629] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:43:31.630] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:43:31.631] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:43:31.632] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 21.7796ms
[2025-12-22 22:43:31.633] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 21.4383ms
[2025-12-22 22:43:31.634] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:43:31.635] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:43:31.636] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - 200 null application/json; charset=utf-8 38.0042ms
[2025-12-22 22:43:31.637] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - 200 null application/json; charset=utf-8 38.9236ms
[2025-12-22 22:43:31.639] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:43:31.643] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:31.644] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 4.4173ms
[2025-12-22 22:43:31.645] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:43:31.649] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:31.649] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:43:31.650] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:43:31.661] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 22:43:31.663] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 22:43:31.664] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:43:31.665] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 14.1208ms
[2025-12-22 22:43:31.666] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:43:31.667] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 21.983ms
[2025-12-22 22:43:31.670] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:43:31.671] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:31.672] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.2624ms
[2025-12-22 22:43:31.673] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:43:31.677] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:31.678] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:43:31.678] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:43:31.687] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 22:43:31.690] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:43:31.692] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 11.9153ms
[2025-12-22 22:43:31.693] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:43:31.694] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 20.8931ms
[2025-12-22 22:43:31.697] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:43:31.700] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:31.700] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 3.0274ms
[2025-12-22 22:43:31.702] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:43:31.706] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:31.707] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:43:31.707] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:43:31.711] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 22:43:31.713] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:43:31.714] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.4013ms
[2025-12-22 22:43:31.715] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:43:31.716] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 14.1007ms
[2025-12-22 22:43:33.896] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - null null
[2025-12-22 22:43:33.900] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:33.901] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - 204 null null 4.4777ms
[2025-12-22 22:43:33.902] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - null null
[2025-12-22 22:43:33.906] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:43:33.907] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-22 22:43:33.911] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.OrderReadDto]]] GetMyOrders(Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 22:43:33.916] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_Value_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:43:33.922] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[UserId] = @__userId_Value_0 AND [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 22:43:33.924] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b". Количество: 16, Всего: 16, Страница: 1
[2025-12-22 22:43:33.925] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:43:33.927] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 13.8706ms
[2025-12-22 22:43:33.927] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-22 22:43:33.928] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - 200 null application/json; charset=utf-8 25.8826ms
[2025-12-22 22:47:43.520] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:47:43.521] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:47:43.524] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:47:43.528] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:47:43.529] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 8.8022ms
[2025-12-22 22:47:43.530] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 204 null null 9.1795ms
[2025-12-22 22:47:43.532] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:47:43.532] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:47:43.538] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:47:43.539] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:47:43.540] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:47:43.541] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:47:43.541] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:47:43.542] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:47:43.548] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:47:43.549] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:47:43.552] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:47:43.553] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:47:43.556] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:47:43.556] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:47:43.560] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:47:43.560] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:47:43.564] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 22:47:43.565] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:47:43.565] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 267266.34, Заказов: 44
[2025-12-22 22:47:43.567] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:47:43.568] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:47:43.568] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:47:43.569] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 24.9896ms
[2025-12-22 22:47:43.570] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 24.5487ms
[2025-12-22 22:47:43.571] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:47:43.572] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:47:43.573] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 40.9234ms
[2025-12-22 22:47:43.574] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 41.6498ms
[2025-12-22 22:47:43.577] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:47:43.577] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:47:43.581] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:47:43.583] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:47:43.584] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 204 null null 6.7646ms
[2025-12-22 22:47:43.585] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 204 null null 7.372ms
[2025-12-22 22:47:43.586] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:47:43.586] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:47:43.591] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:47:43.593] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:47:43.594] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:47:43.594] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:47:43.595] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:47:43.596] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:47:43.598] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:47:43.600] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:47:43.601] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:47:43.603] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:47:43.604] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:47:43.606] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:47:43.607] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 8.0922ms
[2025-12-22 22:47:43.609] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:47:43.610] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:47:43.610] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 23.9963ms
[2025-12-22 22:47:43.612] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 265860.00, Заказов: 38
[2025-12-22 22:47:43.614] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:47:43.615] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 18.5377ms
[2025-12-22 22:47:43.616] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:47:43.617] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 30.8564ms
[2025-12-22 22:47:43.619] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:47:43.620] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:47:43.621] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:47:43.623] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:47:43.624] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 204 null null 4.3106ms
[2025-12-22 22:47:43.624] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:47:43.626] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:47:43.628] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:47:43.629] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:47:43.631] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:47:43.632] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:47:43.632] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:47:43.634] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:47:43.636] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:47:43.637] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:47:43.638] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:47:43.640] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:47:43.640] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.1586ms
[2025-12-22 22:47:43.643] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:47:43.644] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:47:43.645] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:47:43.646] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 20.3151ms
[2025-12-22 22:47:43.647] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:47:43.650] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.3769ms
[2025-12-22 22:47:43.651] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:47:43.652] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 31.9551ms
[2025-12-22 22:47:43.654] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - null null
[2025-12-22 22:47:43.654] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - null null
[2025-12-22 22:47:43.656] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:47:43.658] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:47:43.658] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - 204 null null 4.4965ms
[2025-12-22 22:47:43.659] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - 204 null null 5.089ms
[2025-12-22 22:47:43.661] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - null null
[2025-12-22 22:47:43.661] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - null null
[2025-12-22 22:47:43.667] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:47:43.669] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:47:43.670] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:47:43.670] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:47:43.671] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:47:43.672] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:47:43.674] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:47:43.676] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:47:43.677] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:47:43.680] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:47:43.681] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:47:43.682] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:47:43.684] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:47:43.685] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:47:43.687] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:47:43.688] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:47:43.689] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:47:43.691] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:47:43.692] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:47:43.693] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:47:43.694] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.8783ms
[2025-12-22 22:47:43.695] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.7188ms
[2025-12-22 22:47:43.696] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:47:43.697] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:47:43.697] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - 200 null application/json; charset=utf-8 36.8234ms
[2025-12-22 22:47:43.698] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - 200 null application/json; charset=utf-8 37.087ms
[2025-12-22 22:47:43.701] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:47:43.704] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:47:43.705] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 3.9978ms
[2025-12-22 22:47:43.706] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:47:43.710] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:47:43.711] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:47:43.711] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:47:43.722] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 22:47:43.724] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 22:47:43.724] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:47:43.726] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 13.336ms
[2025-12-22 22:47:43.727] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:47:43.728] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 21.6304ms
[2025-12-22 22:47:43.731] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:47:43.733] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:47:43.733] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.2562ms
[2025-12-22 22:47:43.735] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:47:43.737] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:47:43.738] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:47:43.739] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:47:43.748] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 22:47:43.749] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:47:43.750] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 10.0815ms
[2025-12-22 22:47:43.751] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:47:43.752] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 17.3489ms
[2025-12-22 22:47:43.755] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:47:43.756] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:47:43.757] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.3602ms
[2025-12-22 22:47:43.759] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:47:43.761] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:47:43.762] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:47:43.763] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:47:43.767] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 22:47:43.769] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:47:43.770] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.2754ms
[2025-12-22 22:47:43.771] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:47:43.772] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 13.0386ms
[2025-12-22 22:48:02.104] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Cart - null null
[2025-12-22 22:48:02.145] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:02.146] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Cart - 204 null null 41.3532ms
[2025-12-22 22:48:02.148] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Cart - null null
[2025-12-22 22:48:02.151] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:02.152] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi)'
[2025-12-22 22:48:02.153] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.CartReadDto]] GetCart() on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 22:48:02.164] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [s].[Id], [s].[CartId], [s].[CreatedAt], [s].[DishId], [s].[Notes], [s].[Quantity], [s].[UpdatedAt], [s].[Id0], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedBy], [s].[DeletedAt], [s].[DeletedBy], [s].[Description], [s].[IsDeleted], [s].[Name], [s].[Notes0], [s].[Price], [s].[UpdatedAt0], [s].[UpdatedBy]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt], [d].[Id] AS [Id0], [d].[CategoryId], [d].[CreatedAt] AS [CreatedAt0], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes] AS [Notes0], [d].[Price], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UpdatedBy]
    FROM [CartItems] AS [c0]
    INNER JOIN [Dishes] AS [d] ON [c0].[DishId] = [d].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
[2025-12-22 22:48:02.167] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.DTOs.CartReadDto'.
[2025-12-22 22:48:02.169] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi) in 14.4514ms
[2025-12-22 22:48:02.171] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi)'
[2025-12-22 22:48:02.172] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:48:02.174] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:02.175] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 3.0719ms
[2025-12-22 22:48:02.172] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:48:02.172] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Cart - 200 null application/json; charset=utf-8 24.2715ms
[2025-12-22 22:48:02.180] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:02.181] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:48:02.184] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 204 null null 11.807ms
[2025-12-22 22:48:02.186] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:02.186] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:48:02.189] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:48:02.190] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:02.192] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:48:02.192] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:48:02.194] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:48:02.197] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:02.198] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:48:02.199] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:02.202] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:48:02.203] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:02.204] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:02.206] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:02.207] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:02.211] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 22:48:02.213] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:48:02.213] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 267266.34, Заказов: 44
[2025-12-22 22:48:02.214] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:48:02.215] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:48:02.216] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:48:02.217] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 23.483ms
[2025-12-22 22:48:02.218] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 21.9541ms
[2025-12-22 22:48:02.219] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:48:02.220] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:48:02.220] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 39.5607ms
[2025-12-22 22:48:02.221] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 35.2523ms
[2025-12-22 22:48:02.225] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:48:02.225] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:48:02.229] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:02.231] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:02.231] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 204 null null 6.3551ms
[2025-12-22 22:48:02.232] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 204 null null 6.9663ms
[2025-12-22 22:48:02.233] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:48:02.233] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:48:02.238] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:02.240] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:02.241] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:48:02.242] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:48:02.243] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:48:02.244] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:48:02.249] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:48:02.249] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:48:02.251] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:48:02.253] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:48:02.255] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:02.256] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 10.1794ms
[2025-12-22 22:48:02.258] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:02.259] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:48:02.262] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 28.7236ms
[2025-12-22 22:48:02.262] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:48:02.265] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 265860.00, Заказов: 38
[2025-12-22 22:48:02.266] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:48:02.267] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.0021ms
[2025-12-22 22:48:02.268] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:48:02.269] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 35.6394ms
[2025-12-22 22:48:02.271] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:48:02.271] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:48:02.273] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:02.276] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:02.276] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 204 null null 5.1012ms
[2025-12-22 22:48:02.277] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:48:02.278] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:48:02.280] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:48:02.282] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:02.284] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:48:02.284] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:48:02.285] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:48:02.287] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:48:02.289] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:48:02.290] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:02.291] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:48:02.294] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:02.294] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 6.5268ms
[2025-12-22 22:48:02.297] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:48:02.297] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:48:02.297] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 19.7259ms
[2025-12-22 22:48:02.299] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:48:02.302] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:48:02.303] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.1307ms
[2025-12-22 22:48:02.304] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:48:02.306] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 34.3242ms
[2025-12-22 22:48:02.310] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - null null
[2025-12-22 22:48:02.310] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - null null
[2025-12-22 22:48:02.311] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:02.313] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:02.314] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - 204 null null 4.6191ms
[2025-12-22 22:48:02.315] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - 204 null null 5.1946ms
[2025-12-22 22:48:02.316] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - null null
[2025-12-22 22:48:02.316] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - null null
[2025-12-22 22:48:02.322] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:02.324] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:02.325] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:48:02.326] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:48:02.326] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:48:02.327] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:48:02.330] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:48:02.331] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:48:02.333] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:48:02.335] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:48:02.336] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:02.338] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:02.339] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:02.341] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:02.343] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:48:02.345] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:48:02.345] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:48:02.347] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:48:02.348] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:48:02.348] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:48:02.350] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.824ms
[2025-12-22 22:48:02.351] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.451ms
[2025-12-22 22:48:02.352] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:48:02.352] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:48:02.353] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - 200 null application/json; charset=utf-8 37.0887ms
[2025-12-22 22:48:02.354] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - 200 null application/json; charset=utf-8 37.7088ms
[2025-12-22 22:48:02.357] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:48:02.361] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:02.361] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 4.0668ms
[2025-12-22 22:48:02.363] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:48:02.365] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:02.366] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:48:02.367] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:48:02.379] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 22:48:02.380] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 22:48:02.381] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:48:02.382] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 14.0389ms
[2025-12-22 22:48:02.384] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:48:02.384] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 21.774ms
[2025-12-22 22:48:02.387] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:48:02.389] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:02.390] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.3129ms
[2025-12-22 22:48:02.392] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:48:02.395] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:02.395] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:48:02.396] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:48:02.405] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 22:48:02.407] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:48:02.409] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 11.2039ms
[2025-12-22 22:48:02.410] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:48:02.411] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 19.0247ms
[2025-12-22 22:48:02.415] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:48:02.417] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:02.417] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.2995ms
[2025-12-22 22:48:02.426] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:48:02.428] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:02.429] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:48:02.430] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:48:02.434] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 22:48:02.435] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:48:02.436] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.2397ms
[2025-12-22 22:48:02.437] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:48:02.438] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 12.628ms
[2025-12-22 22:48:07.679] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 22:48:07.688] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:07.690] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 10.9958ms
[2025-12-22 22:48:07.692] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 22:48:07.696] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:07.697] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 22:48:07.699] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.UserReadDto]]] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-22 22:48:07.702] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:07.711] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[IsDeleted], [u0].[Notes], [u0].[PasswordHash], [u0].[RoleId], [u0].[UpdatedAt], [u0].[UpdatedBy], [u0].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM (
    SELECT [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-22 22:48:07.713] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 22:48:07.714] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:48:07.715] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 13.8262ms
[2025-12-22 22:48:07.716] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 22:48:07.717] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 24.7864ms
[2025-12-22 22:48:07.719] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:48:07.721] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:07.722] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 2.839ms
[2025-12-22 22:48:07.723] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:48:07.727] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:07.728] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:48:07.729] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 22:48:07.731] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:07.736] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 22:48:07.738] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 22:48:07.739] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:48:07.740] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 10.4932ms
[2025-12-22 22:48:07.742] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:48:07.744] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 20.3683ms
[2025-12-22 22:48:07.747] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 22:48:07.748] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:07.749] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 2.3039ms
[2025-12-22 22:48:07.750] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 22:48:07.753] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:07.754] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 22:48:07.755] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 22:48:07.757] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:07.762] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 22:48:07.764] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 20, Всего: 44, Страница: 1
[2025-12-22 22:48:07.765] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:48:07.767] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 10.5765ms
[2025-12-22 22:48:07.768] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 22:48:07.768] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 18.0321ms
[2025-12-22 22:48:12.330] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:48:12.332] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:48:12.345] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:48:12.348] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:12.352] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:12.353] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:12.354] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 23.832ms
[2025-12-22 22:48:12.355] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 23.187ms
[2025-12-22 22:48:12.356] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:48:12.365] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 22:48:12.357] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:48:12.356] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:48:12.370] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:12.371] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:12.373] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:12.376] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:48:12.377] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:48:12.378] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 22:48:12.378] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.CategoryReadDto]]] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-22 22:48:12.379] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.MenuReadDto]]] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-22 22:48:12.381] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 22:48:12.384] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:12.385] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:48:12.386] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:12.388] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 19.0747ms
[2025-12-22 22:48:12.390] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:48:12.389] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:48:12.391] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 46.0421ms
[2025-12-22 22:48:12.393] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[CreatedAt], [m].[CreatedBy], [m].[DeletedAt], [m].[DeletedBy], [m].[IsDeleted], [m].[Name], [m].[Notes], [m].[UpdatedAt], [m].[UpdatedBy]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:48:12.393] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 22:48:12.398] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-22 22:48:12.399] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:48:12.401] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:48:12.402] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 20.0554ms
[2025-12-22 22:48:12.403] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 19.7717ms
[2025-12-22 22:48:12.405] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:48:12.406] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:48:12.407] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 49.7175ms
[2025-12-22 22:48:12.408] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 52.0016ms
[2025-12-22 22:48:12.411] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:48:12.416] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:12.416] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 5.0594ms
[2025-12-22 22:48:12.418] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:48:12.421] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:12.422] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:48:12.423] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-22 22:48:12.429] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-22 22:48:12.435] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-22 22:48:12.437] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-22 22:48:12.438] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:48:12.440] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 14.283ms
[2025-12-22 22:48:12.442] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:48:12.443] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 25.4463ms
[2025-12-22 22:48:14.608] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-22 22:48:14.609] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:14.610] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 2.4685ms
[2025-12-22 22:48:14.611] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 337
[2025-12-22 22:48:14.614] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:14.615] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 22:48:14.618] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 22:48:14.655] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:14.659] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:14.661] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:14.668] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:14.670] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "601d547d-42ee-4d95-abc0-42bf30f4d94b", Notes: null, ItemsCount: 3
[2025-12-22 22:48:14.700] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 22:48:14.711] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:14.714] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "506c83ad-20ac-42f9-a32e-16f2701bad37", Quantity: 1, Notes: Удалено: Куриное филе
[2025-12-22 22:48:14.738] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:14.743] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "506c83ad-20ac-42f9-a32e-16f2701bad37", Quantity: 1, Notes: null
[2025-12-22 22:48:14.745] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:14.746] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "bc75836d-c978-460e-b72a-7ad8d898f4db", Quantity: 1, Notes: null
[2025-12-22 22:48:14.765] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p12='?' (DbType = DateTime), @p13='?' (Size = 100), @p14='?' (DbType = DateTime), @p15='?' (Size = 100), @p16='?' (DbType = Guid), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (DbType = Guid), @p20='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (Size = 100), @p24='?' (DbType = DateTime), @p25='?' (Size = 100), @p26='?' (DbType = DateTime), @p27='?' (Size = 100), @p28='?' (DbType = Guid), @p29='?' (DbType = Boolean), @p30='?' (Size = 4000), @p31='?' (DbType = Guid), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = DateTime), @p35='?' (Size = 100), @p37='?' (DbType = Guid), @p36='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, 0),
(@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, 1),
(@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 2)) AS i ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
VALUES (i.[CreatedAt], i.[CreatedBy], i.[DeletedAt], i.[DeletedBy], i.[DishId], i.[IsDeleted], i.[Notes], i.[OrderId], i.[Price], i.[Quantity], i.[UpdatedAt], i.[UpdatedBy])
OUTPUT INSERTED.[Id], i._Position;
UPDATE [Orders] SET [Total] = @p36
OUTPUT 1
WHERE [Id] = @p37;
[2025-12-22 22:48:14.769] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "8a708347-6ea6-4c35-aa66-9effcf7fe40c" создан пользователем "601d547d-42ee-4d95-abc0-42bf30f4d94b". Сумма: 1850.00, Блюд: 3
[2025-12-22 22:48:14.772] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 22:48:14.783] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 163.5011ms
[2025-12-22 22:48:14.785] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 22:48:14.786] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 175.02ms
[2025-12-22 22:48:14.789] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Cart - null null
[2025-12-22 22:48:14.791] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:14.791] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Cart - 204 null null 2.4313ms
[2025-12-22 22:48:14.793] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 DELETE https://localhost:7188/api/Cart - null null
[2025-12-22 22:48:14.796] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:14.796] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.ClearCart (RestaurantApi)'
[2025-12-22 22:48:14.799] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "ClearCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] ClearCart() on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 22:48:14.805] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
[2025-12-22 22:48:14.815] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Guid), @p4='?' (DbType = Guid), @p3='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p0;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p1;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p2;
UPDATE [Carts] SET [UpdatedAt] = @p3
OUTPUT 1
WHERE [Id] = @p4;
[2025-12-22 22:48:14.820] [INF] [RestaurantAPI.Controllers.CartController] Корзина пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b" очищена
[2025-12-22 22:48:14.822] [INF] [Microsoft.AspNetCore.Mvc.StatusCodeResult] Executing StatusCodeResult, setting HTTP status code 204
[2025-12-22 22:48:14.823] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.ClearCart (RestaurantApi) in 21.9624ms
[2025-12-22 22:48:14.824] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.ClearCart (RestaurantApi)'
[2025-12-22 22:48:14.825] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 DELETE https://localhost:7188/api/Cart - 204 null null 31.6572ms
[2025-12-22 22:48:23.712] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - null null
[2025-12-22 22:48:23.714] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:23.715] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - 204 null null 3.3846ms
[2025-12-22 22:48:23.717] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - null null
[2025-12-22 22:48:23.720] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:23.722] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-22 22:48:23.725] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.OrderReadDto]]] GetMyOrders(Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 22:48:23.730] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_Value_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:23.737] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[UserId] = @__userId_Value_0 AND [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 22:48:23.739] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b". Количество: 17, Всего: 17, Страница: 1
[2025-12-22 22:48:23.740] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:48:23.742] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 14.2849ms
[2025-12-22 22:48:23.743] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-22 22:48:23.744] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - 200 null application/json; charset=utf-8 27.0181ms
[2025-12-22 22:48:26.761] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:48:26.764] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:26.764] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:48:26.764] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 3.692ms
[2025-12-22 22:48:26.767] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:26.767] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:48:26.770] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 204 null null 6.0928ms
[2025-12-22 22:48:26.772] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:26.773] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:48:26.776] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:48:26.778] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:26.779] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:48:26.780] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:48:26.782] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:48:26.782] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:26.784] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:48:26.785] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:26.787] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:48:26.788] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:26.789] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:26.792] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:26.794] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:26.795] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 22:48:26.796] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:48:26.797] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 269116.34, Заказов: 45
[2025-12-22 22:48:26.799] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:48:26.800] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:48:26.800] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:48:26.802] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.4367ms
[2025-12-22 22:48:26.803] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.5169ms
[2025-12-22 22:48:26.804] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:48:26.805] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:48:26.805] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 38.3199ms
[2025-12-22 22:48:26.806] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 32.9989ms
[2025-12-22 22:48:26.810] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:48:26.810] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:48:26.813] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:26.815] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:26.816] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 204 null null 5.8544ms
[2025-12-22 22:48:26.816] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 204 null null 6.4606ms
[2025-12-22 22:48:26.819] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:48:26.819] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:48:26.823] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:26.825] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:26.826] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:48:26.827] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:48:26.827] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:48:26.828] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:48:26.831] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:48:26.832] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:48:26.833] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:48:26.835] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:48:26.835] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 6.1888ms
[2025-12-22 22:48:26.837] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:26.838] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:48:26.840] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:26.840] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 21.3981ms
[2025-12-22 22:48:26.843] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:48:26.846] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 267710.00, Заказов: 39
[2025-12-22 22:48:26.847] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:48:26.848] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 17.1032ms
[2025-12-22 22:48:26.849] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:48:26.850] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 31.0119ms
[2025-12-22 22:48:26.852] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:48:26.852] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:48:26.854] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:26.856] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:26.856] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 204 null null 4.2351ms
[2025-12-22 22:48:26.857] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:48:26.858] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:48:26.860] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:48:26.862] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:26.864] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:48:26.865] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:48:26.865] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:48:26.867] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:48:26.869] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:48:26.870] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:26.871] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:48:26.873] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:26.874] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 6.4092ms
[2025-12-22 22:48:26.877] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:48:26.877] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:48:26.878] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:48:26.879] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 21.5176ms
[2025-12-22 22:48:26.880] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:48:26.883] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.7877ms
[2025-12-22 22:48:26.884] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:48:26.885] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 32.8249ms
[2025-12-22 22:48:26.888] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - null null
[2025-12-22 22:48:26.888] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - null null
[2025-12-22 22:48:26.890] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:26.892] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:26.892] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - 204 null null 4.4297ms
[2025-12-22 22:48:26.893] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - 204 null null 4.9505ms
[2025-12-22 22:48:26.895] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - null null
[2025-12-22 22:48:26.896] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - null null
[2025-12-22 22:48:26.900] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:26.902] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:26.902] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:48:26.903] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:48:26.904] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:48:26.904] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:48:26.907] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:48:26.909] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:48:26.909] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:48:26.912] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:48:26.913] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:26.914] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:26.916] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:26.917] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:48:26.919] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:48:26.920] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:48:26.921] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:48:26.923] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:48:26.924] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:48:26.925] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:48:26.926] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.99ms
[2025-12-22 22:48:26.927] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.6785ms
[2025-12-22 22:48:26.928] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:48:26.929] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:48:26.930] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21&endDate=2025-12-22 - 200 null application/json; charset=utf-8 35.0707ms
[2025-12-22 22:48:26.931] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - 200 null application/json; charset=utf-8 34.8246ms
[2025-12-22 22:48:26.933] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:48:26.937] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:26.937] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 4.0503ms
[2025-12-22 22:48:26.939] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:48:26.942] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:26.943] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:48:26.944] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:48:26.948] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 22:48:26.949] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 22:48:26.950] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:48:26.951] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 6.3719ms
[2025-12-22 22:48:26.952] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:48:26.953] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 14.3744ms
[2025-12-22 22:48:26.956] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:48:26.958] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:26.959] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.7239ms
[2025-12-22 22:48:26.960] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:48:26.963] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:26.964] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:48:26.965] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:48:26.968] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 22:48:26.969] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:48:26.970] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 4.3812ms
[2025-12-22 22:48:26.971] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:48:26.972] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 11.6271ms
[2025-12-22 22:48:26.976] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:48:26.978] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:26.979] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 3.1653ms
[2025-12-22 22:48:26.981] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:48:26.984] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:48:26.985] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:48:26.985] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:48:26.988] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 22:48:26.989] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:48:26.990] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 3.7984ms
[2025-12-22 22:48:26.992] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:48:26.993] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 11.6383ms
[2025-12-22 22:49:33.435] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:49:33.435] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:49:33.439] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:33.441] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:33.441] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 6.4314ms
[2025-12-22 22:49:33.442] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 204 null null 6.768ms
[2025-12-22 22:49:33.444] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:49:33.445] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:49:33.449] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:33.451] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:33.452] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:49:33.453] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:49:33.454] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:49:33.455] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:49:33.462] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:33.463] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:49:33.466] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:33.468] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:49:33.469] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:33.470] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:33.474] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:33.475] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:33.480] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 22:49:33.481] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:49:33.482] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 269116.34, Заказов: 45
[2025-12-22 22:49:33.483] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:49:33.484] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:49:33.485] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:49:33.486] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 28.9891ms
[2025-12-22 22:49:33.488] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 28.5273ms
[2025-12-22 22:49:33.489] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:49:33.490] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:49:33.491] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 46.7042ms
[2025-12-22 22:49:33.492] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 47.1337ms
[2025-12-22 22:49:33.497] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:49:33.497] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:49:33.499] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:33.501] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:33.502] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 204 null null 5.2893ms
[2025-12-22 22:49:33.502] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 204 null null 5.816ms
[2025-12-22 22:49:33.504] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:49:33.504] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:49:33.510] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:33.511] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:33.512] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:49:33.512] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:49:33.513] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:49:33.514] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:49:33.518] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:49:33.518] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:49:33.520] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:49:33.521] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:49:33.523] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:33.524] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 8.3732ms
[2025-12-22 22:49:33.527] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:33.527] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:49:33.529] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:49:33.529] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 25.3255ms
[2025-12-22 22:49:33.531] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 267710.00, Заказов: 39
[2025-12-22 22:49:33.535] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:49:33.536] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.3724ms
[2025-12-22 22:49:33.537] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:49:33.538] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 33.7263ms
[2025-12-22 22:49:33.542] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:49:33.543] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:49:33.545] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:33.547] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:33.547] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 204 null null 4.7332ms
[2025-12-22 22:49:33.548] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:49:33.549] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:49:33.552] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:49:33.554] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:33.557] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:49:33.558] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:49:33.558] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:49:33.560] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:49:33.562] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:49:33.563] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:33.564] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:49:33.566] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:33.566] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.8171ms
[2025-12-22 22:49:33.569] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:49:33.570] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:49:33.571] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:49:33.572] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 23.0343ms
[2025-12-22 22:49:33.573] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:49:33.576] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.0417ms
[2025-12-22 22:49:33.577] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:49:33.578] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 35.2502ms
[2025-12-22 22:49:33.582] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 22:49:33.582] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - null null
[2025-12-22 22:49:33.584] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:33.586] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:33.587] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 4.6869ms
[2025-12-22 22:49:33.587] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - 204 null null 5.0802ms
[2025-12-22 22:49:33.589] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 22:49:33.590] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - null null
[2025-12-22 22:49:33.594] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:33.596] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:33.596] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:49:33.597] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:49:33.597] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:49:33.598] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:49:33.601] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:49:33.602] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:49:33.603] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:49:33.605] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:49:33.606] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:33.607] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:33.609] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:33.610] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:33.612] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:49:33.614] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:49:33.615] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 2950.00, Заказов: 2
[2025-12-22 22:49:33.616] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:49:33.617] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:49:33.618] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:49:33.619] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.6563ms
[2025-12-22 22:49:33.620] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.3577ms
[2025-12-22 22:49:33.622] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:49:33.623] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:49:33.624] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 34.469ms
[2025-12-22 22:49:33.624] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-20&endDate=2025-12-21 - 200 null application/json; charset=utf-8 34.6876ms
[2025-12-22 22:49:33.628] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:49:33.631] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:33.632] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 4.2452ms
[2025-12-22 22:49:33.634] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:49:33.637] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:33.637] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:49:33.638] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:49:33.650] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 22:49:33.651] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 22:49:33.652] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:49:33.654] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 14.2633ms
[2025-12-22 22:49:33.655] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:49:33.656] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 21.9083ms
[2025-12-22 22:49:33.663] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:49:33.665] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:33.666] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.4015ms
[2025-12-22 22:49:33.667] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:49:33.670] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:33.671] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:49:33.672] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:49:33.681] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 22:49:33.683] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:49:33.684] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 10.4372ms
[2025-12-22 22:49:33.686] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:49:33.687] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 19.2663ms
[2025-12-22 22:49:33.695] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:49:33.698] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:33.698] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.9309ms
[2025-12-22 22:49:33.700] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:49:33.702] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:33.703] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:49:33.704] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:49:33.709] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 22:49:33.710] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:49:33.712] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.699ms
[2025-12-22 22:49:33.713] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:49:33.714] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 14.0418ms
[2025-12-22 22:49:40.942] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:49:40.942] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:49:40.945] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:40.947] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:40.947] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 5.5757ms
[2025-12-22 22:49:40.948] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 204 null null 5.4244ms
[2025-12-22 22:49:40.950] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:49:40.950] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:49:40.962] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:40.963] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:40.964] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:49:40.963] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:49:40.964] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:49:40.965] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:49:40.967] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:49:40.969] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:49:40.969] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:40.973] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:40.975] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:40.977] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:40.980] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:40.981] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:49:40.983] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:40.983] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:49:40.986] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 22:49:40.988] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:49:40.991] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 269116.34, Заказов: 45
[2025-12-22 22:49:40.995] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 29.7986ms
[2025-12-22 22:49:40.997] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:49:41.000] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:49:41.004] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 36.3936ms
[2025-12-22 22:49:41.012] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 62.1825ms
[2025-12-22 22:49:41.015] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:49:41.019] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 68.7184ms
[2025-12-22 22:49:41.038] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:49:41.038] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:49:41.041] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:41.043] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:41.044] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 204 null null 5.8114ms
[2025-12-22 22:49:41.044] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 204 null null 6.4317ms
[2025-12-22 22:49:41.046] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:49:41.046] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - null null
[2025-12-22 22:49:41.051] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:41.053] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:41.054] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:49:41.055] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:49:41.056] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:49:41.056] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:49:41.059] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:49:41.060] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:49:41.062] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:49:41.064] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:49:41.065] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.6024ms
[2025-12-22 22:49:41.065] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:41.066] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:49:41.070] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 23.7924ms
[2025-12-22 22:49:41.071] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:41.078] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:49:41.079] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 267710.00, Заказов: 39
[2025-12-22 22:49:41.083] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:49:41.085] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 27.1916ms
[2025-12-22 22:49:41.086] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:49:41.087] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-30&endDate=2025-12-31 - 200 null application/json; charset=utf-8 40.5768ms
[2025-12-22 22:49:41.094] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:49:41.094] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:49:41.096] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:41.098] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:41.099] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 204 null null 4.6294ms
[2025-12-22 22:49:41.100] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:49:41.101] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:49:41.102] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:49:41.104] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:41.108] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:49:41.109] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:49:41.110] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:49:41.113] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:49:41.114] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:49:41.116] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:49:41.118] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:41.118] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 6.5869ms
[2025-12-22 22:49:41.120] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:41.120] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:49:41.123] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 22.7164ms
[2025-12-22 22:49:41.124] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:49:41.129] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:49:41.130] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:49:41.131] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 24.0153ms
[2025-12-22 22:49:41.133] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:49:41.134] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 39.1529ms
[2025-12-22 22:49:41.138] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 22:49:41.139] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 22:49:41.142] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:41.145] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:41.145] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 7.119ms
[2025-12-22 22:49:41.146] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 6.8068ms
[2025-12-22 22:49:41.148] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 22:49:41.148] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 22:49:41.153] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:41.155] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:41.157] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:49:41.158] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:49:41.159] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:49:41.160] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:49:41.162] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:49:41.163] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:49:41.164] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:49:41.167] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:49:41.168] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:41.170] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:41.171] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:41.174] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:49:41.178] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:49:41.179] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:49:41.180] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 2950.00, Заказов: 2
[2025-12-22 22:49:41.182] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:49:41.183] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:49:41.184] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:49:41.185] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 23.7022ms
[2025-12-22 22:49:41.187] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 24.5554ms
[2025-12-22 22:49:41.189] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:49:41.191] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:49:41.192] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 43.996ms
[2025-12-22 22:49:41.194] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 45.765ms
[2025-12-22 22:49:41.200] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:49:41.202] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:41.203] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 2.643ms
[2025-12-22 22:49:41.206] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:49:41.209] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:41.210] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:49:41.211] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:49:41.217] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 22:49:41.219] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 22:49:41.220] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:49:41.221] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 8.0944ms
[2025-12-22 22:49:41.222] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:49:41.228] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 22.5846ms
[2025-12-22 22:49:41.233] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:49:41.236] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:41.237] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 3.5728ms
[2025-12-22 22:49:41.239] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:49:41.242] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:41.244] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:49:41.245] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:49:41.249] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 22:49:41.251] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:49:41.252] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 5.0986ms
[2025-12-22 22:49:41.253] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:49:41.254] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 15.1336ms
[2025-12-22 22:49:41.262] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:49:41.264] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:41.265] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 3.0655ms
[2025-12-22 22:49:41.266] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:49:41.270] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:49:41.270] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:49:41.271] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:49:41.276] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 22:49:41.278] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:49:41.279] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.4947ms
[2025-12-22 22:49:41.281] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:49:41.281] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 15.0165ms
[2025-12-22 22:50:01.360] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:50:01.361] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:50:01.368] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:01.370] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:01.374] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 204 null null 13.2778ms
[2025-12-22 22:50:01.371] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 10.1986ms
[2025-12-22 22:50:01.376] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:50:01.377] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:50:01.382] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:01.384] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:01.385] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:01.386] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:01.387] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:01.388] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:01.395] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:01.395] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:01.398] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:01.399] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:01.402] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:01.402] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:01.409] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:01.410] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:01.414] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 22:50:01.417] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 269116.34, Заказов: 45
[2025-12-22 22:50:01.418] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:50:01.419] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:50:01.426] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:50:01.428] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 38.0019ms
[2025-12-22 22:50:01.432] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:50:01.434] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:01.436] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 44.659ms
[2025-12-22 22:50:01.437] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 61.8456ms
[2025-12-22 22:50:01.441] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:01.445] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 68.702ms
[2025-12-22 22:50:01.451] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:50:01.452] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:50:01.454] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:01.457] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:01.458] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 6.905ms
[2025-12-22 22:50:01.459] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 7.6319ms
[2025-12-22 22:50:01.461] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:50:01.461] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:50:01.466] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:01.468] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:01.469] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:50:01.469] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:01.470] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:01.471] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:01.476] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:01.477] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:01.479] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:01.479] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:50:01.483] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 10.8134ms
[2025-12-22 22:50:01.484] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:01.485] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:50:01.487] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:01.487] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 26.1861ms
[2025-12-22 22:50:01.490] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:50:01.494] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 267710.00, Заказов: 39
[2025-12-22 22:50:01.495] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:50:01.496] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 22.2898ms
[2025-12-22 22:50:01.497] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:01.499] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 37.5931ms
[2025-12-22 22:50:01.502] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:50:01.502] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:50:01.504] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:01.507] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:01.508] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 204 null null 6.0167ms
[2025-12-22 22:50:01.509] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:01.510] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - null null
[2025-12-22 22:50:01.512] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:01.514] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:01.516] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:50:01.517] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:01.517] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:01.520] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:01.521] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:01.523] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:50:01.526] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:01.526] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 7.9163ms
[2025-12-22 22:50:01.530] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:01.530] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:50:01.532] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 21.8902ms
[2025-12-22 22:50:01.533] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:50:01.536] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:50:01.537] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:50:01.539] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 23.4995ms
[2025-12-22 22:50:01.543] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:01.544] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-10-31&endDate=2025-11-30 - 200 null application/json; charset=utf-8 42.1056ms
[2025-12-22 22:50:01.548] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 22:50:01.548] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 22:50:01.550] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:01.552] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:01.553] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 4.8988ms
[2025-12-22 22:50:01.554] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 5.6342ms
[2025-12-22 22:50:01.557] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 22:50:01.557] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 22:50:01.562] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:01.565] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:01.565] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:01.566] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:01.567] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:01.568] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:01.571] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:01.573] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:01.575] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:01.577] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:01.578] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:01.579] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:01.581] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:01.583] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:01.585] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:50:01.586] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:50:01.587] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 2950.00, Заказов: 2
[2025-12-22 22:50:01.590] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:50:01.591] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:50:01.592] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:50:01.593] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 24.2033ms
[2025-12-22 22:50:01.595] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 24.0508ms
[2025-12-22 22:50:01.596] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:01.597] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:01.598] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 41.0863ms
[2025-12-22 22:50:01.598] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 41.5867ms
[2025-12-22 22:50:01.602] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:50:01.608] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:01.609] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 6.4578ms
[2025-12-22 22:50:01.610] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:50:01.614] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:01.615] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:50:01.616] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:01.630] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 22:50:01.632] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 22:50:01.634] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:50:01.635] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 18.0902ms
[2025-12-22 22:50:01.636] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:50:01.638] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 27.4094ms
[2025-12-22 22:50:01.646] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:50:01.649] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:01.650] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 3.1866ms
[2025-12-22 22:50:01.652] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:50:01.659] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:01.660] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:50:01.661] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:01.677] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 22:50:01.679] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:50:01.680] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 17.4347ms
[2025-12-22 22:50:01.682] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:50:01.683] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 30.6588ms
[2025-12-22 22:50:01.693] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:50:01.695] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:01.696] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 3.1553ms
[2025-12-22 22:50:01.698] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:50:01.701] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:01.701] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:50:01.702] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:01.709] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 22:50:01.711] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:50:01.713] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 9.78ms
[2025-12-22 22:50:01.715] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:50:01.716] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 18.2008ms
[2025-12-22 22:50:07.899] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:50:07.899] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:50:07.902] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:07.912] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:07.913] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 13.4067ms
[2025-12-22 22:50:07.914] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 14.7059ms
[2025-12-22 22:50:07.917] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:50:07.917] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:50:07.926] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:07.928] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:07.929] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:07.930] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:07.931] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:07.932] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:07.948] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:07.967] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:07.967] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:07.974] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:07.974] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:07.978] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:07.978] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:07.982] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:07.983] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 22:50:07.986] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 269116.34, Заказов: 45
[2025-12-22 22:50:07.987] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:50:07.987] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:50:07.988] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 54.4619ms
[2025-12-22 22:50:07.990] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:50:07.991] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:07.992] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:50:07.993] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 75.5079ms
[2025-12-22 22:50:07.994] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 31.1729ms
[2025-12-22 22:50:07.997] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:07.999] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 81.5615ms
[2025-12-22 22:50:08.004] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:50:08.004] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:50:08.007] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:08.010] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:08.010] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 6.133ms
[2025-12-22 22:50:08.011] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 6.8654ms
[2025-12-22 22:50:08.012] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:50:08.013] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:50:08.018] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:08.020] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:08.021] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:08.022] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:50:08.023] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:08.024] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:08.027] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:08.029] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:08.030] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:08.032] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:08.034] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:50:08.036] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:08.036] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 9.09ms
[2025-12-22 22:50:08.040] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:50:08.040] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:50:08.041] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 28.6935ms
[2025-12-22 22:50:08.043] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 267710.00, Заказов: 39
[2025-12-22 22:50:08.047] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:50:08.049] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 22.9484ms
[2025-12-22 22:50:08.050] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:08.051] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 38.4172ms
[2025-12-22 22:50:08.054] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:50:08.055] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:50:08.059] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:08.061] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:08.061] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 7.3745ms
[2025-12-22 22:50:08.062] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:08.063] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:50:08.066] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:08.068] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:08.070] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:50:08.070] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:08.071] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:08.074] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:08.076] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:08.077] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:08.079] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:50:08.081] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:08.081] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 6.6194ms
[2025-12-22 22:50:08.084] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:50:08.085] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:50:08.085] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 21.9783ms
[2025-12-22 22:50:08.087] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:50:08.091] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:50:08.092] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 23.2445ms
[2025-12-22 22:50:08.094] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:08.095] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 40.0297ms
[2025-12-22 22:50:08.100] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 22:50:08.100] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 22:50:08.102] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:08.104] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:08.106] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 5.9842ms
[2025-12-22 22:50:08.107] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 6.856ms
[2025-12-22 22:50:08.110] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 22:50:08.110] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 22:50:08.115] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:08.117] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:08.117] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:08.118] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:08.119] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:08.120] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:08.124] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:08.126] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:08.127] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:08.129] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:08.130] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:08.132] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:08.134] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:08.136] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:08.139] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:50:08.140] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:50:08.141] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 2950.00, Заказов: 2
[2025-12-22 22:50:08.143] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:50:08.144] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:50:08.145] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:50:08.146] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 24.3382ms
[2025-12-22 22:50:08.148] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 23.7556ms
[2025-12-22 22:50:08.149] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:08.150] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:08.151] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 41.1183ms
[2025-12-22 22:50:08.152] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 42.026ms
[2025-12-22 22:50:08.158] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:50:08.161] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:08.161] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 3.2454ms
[2025-12-22 22:50:08.163] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:50:08.166] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:08.167] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:50:08.168] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:08.184] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 22:50:08.186] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 22:50:08.187] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:50:08.190] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 21.4542ms
[2025-12-22 22:50:08.192] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:50:08.193] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 30.116ms
[2025-12-22 22:50:08.197] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:50:08.199] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:08.201] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 3.1219ms
[2025-12-22 22:50:08.203] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:50:08.209] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:08.210] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:50:08.211] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:08.223] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 22:50:08.225] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:50:08.227] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 14.1887ms
[2025-12-22 22:50:08.229] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:50:08.230] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 27.3124ms
[2025-12-22 22:50:08.236] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:50:08.238] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:08.240] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 4.0788ms
[2025-12-22 22:50:08.242] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:50:08.245] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:08.245] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:50:08.246] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:08.250] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 22:50:08.252] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:50:08.254] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 6.1924ms
[2025-12-22 22:50:08.256] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:50:08.258] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 15.6785ms
[2025-12-22 22:50:51.153] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - null null
[2025-12-22 22:50:51.158] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:51.159] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - 204 null null 5.4512ms
[2025-12-22 22:50:51.161] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - null null
[2025-12-22 22:50:51.164] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:51.166] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-22 22:50:51.167] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.OrderReadDto]]] GetMyOrders(Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 22:50:51.177] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_Value_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:51.185] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[UserId] = @__userId_Value_0 AND [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 22:50:51.189] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b". Количество: 17, Всего: 17, Страница: 1
[2025-12-22 22:50:51.191] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:50:51.192] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 20.9875ms
[2025-12-22 22:50:51.194] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-22 22:50:51.195] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - 200 null application/json; charset=utf-8 33.9562ms
[2025-12-22 22:50:51.502] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:50:51.505] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:50:51.506] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:51.508] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:51.509] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 4.5108ms
[2025-12-22 22:50:51.508] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 6.3841ms
[2025-12-22 22:50:51.512] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:50:51.512] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:50:51.518] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:51.520] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:51.520] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:51.523] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:51.524] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:51.525] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:51.531] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:51.531] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:51.534] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:51.537] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:51.539] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:51.541] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:51.545] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:51.545] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:51.550] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:50:51.550] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 22:50:51.552] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:50:51.554] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 269116.34, Заказов: 45
[2025-12-22 22:50:51.555] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:50:51.556] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:50:51.557] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 29.03ms
[2025-12-22 22:50:51.559] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 31.796ms
[2025-12-22 22:50:51.560] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:51.561] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:51.561] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 48.9928ms
[2025-12-22 22:50:51.562] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 50.6746ms
[2025-12-22 22:50:51.566] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:50:51.566] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:50:51.569] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:51.571] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:51.572] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 6.3851ms
[2025-12-22 22:50:51.573] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 7.5364ms
[2025-12-22 22:50:51.574] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:50:51.575] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:50:51.581] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:51.583] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:51.584] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:50:51.585] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:51.585] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:51.586] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:51.591] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:51.591] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:51.594] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:51.595] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:50:51.597] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:51.597] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 9.7387ms
[2025-12-22 22:50:51.599] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:51.600] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:50:51.602] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:50:51.604] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 267710.00, Заказов: 39
[2025-12-22 22:50:51.602] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 27.7587ms
[2025-12-22 22:50:51.605] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:50:51.608] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.2937ms
[2025-12-22 22:50:51.609] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:51.610] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 34.9318ms
[2025-12-22 22:50:51.613] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:50:51.613] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:50:51.615] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:51.617] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:51.618] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 4.9378ms
[2025-12-22 22:50:51.619] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:51.619] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:50:51.622] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:51.624] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:51.626] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:50:51.626] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:51.627] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:51.629] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:51.631] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:51.632] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:51.633] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:50:51.635] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:51.636] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 6.0033ms
[2025-12-22 22:50:51.640] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:50:51.640] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:50:51.641] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 21.4745ms
[2025-12-22 22:50:51.643] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1406.34, Заказов: 6
[2025-12-22 22:50:51.646] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:50:51.648] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 22.486ms
[2025-12-22 22:50:51.649] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:51.649] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 36.4481ms
[2025-12-22 22:50:51.652] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 22:50:51.652] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 22:50:51.655] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:51.657] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:51.658] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 5.462ms
[2025-12-22 22:50:51.658] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 5.9974ms
[2025-12-22 22:50:51.661] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 22:50:51.661] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 22:50:51.666] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:51.668] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:51.668] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:51.669] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:51.670] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:51.671] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:51.674] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:51.676] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:51.677] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:51.678] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:50:51.680] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:51.682] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:51.683] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:51.685] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:50:51.687] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:50:51.690] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:50:51.690] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 2950.00, Заказов: 2
[2025-12-22 22:50:51.692] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:50:51.693] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:50:51.693] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:50:51.695] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 22.2946ms
[2025-12-22 22:50:51.696] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 21.8293ms
[2025-12-22 22:50:51.697] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:51.698] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:50:51.699] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 37.8578ms
[2025-12-22 22:50:51.700] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 38.6063ms
[2025-12-22 22:50:51.703] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:50:51.708] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:51.708] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 5.8983ms
[2025-12-22 22:50:51.710] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:50:51.713] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:51.714] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:50:51.715] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:51.729] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 22:50:51.731] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 22:50:51.732] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:50:51.733] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 16.8843ms
[2025-12-22 22:50:51.735] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:50:51.736] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 25.3778ms
[2025-12-22 22:50:51.739] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:50:51.741] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:51.742] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 3.2128ms
[2025-12-22 22:50:51.744] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:50:51.747] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:51.748] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:50:51.749] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:51.760] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 22:50:51.762] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:50:51.764] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 13.5402ms
[2025-12-22 22:50:51.765] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:50:51.766] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 21.4066ms
[2025-12-22 22:50:51.769] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:50:51.771] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:51.772] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 3.7799ms
[2025-12-22 22:50:51.774] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:50:51.778] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:50:51.779] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:50:51.779] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:50:51.783] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 22:50:51.785] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:50:51.786] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.7518ms
[2025-12-22 22:50:51.788] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:50:51.789] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 14.5477ms
[2025-12-22 22:53:14.730] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 22:53:14.732] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:53:14.733] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 3.2808ms
[2025-12-22 22:53:14.737] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 22:53:14.742] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:53:14.743] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 22:53:14.744] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.UserReadDto]]] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-22 22:53:14.748] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:53:14.754] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[IsDeleted], [u0].[Notes], [u0].[PasswordHash], [u0].[RoleId], [u0].[UpdatedAt], [u0].[UpdatedBy], [u0].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM (
    SELECT [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-22 22:53:14.757] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 22:53:14.758] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:53:14.759] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 13.9037ms
[2025-12-22 22:53:14.760] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 22:53:14.761] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 24.0875ms
[2025-12-22 22:53:14.763] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:53:14.765] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:53:14.766] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 2.5448ms
[2025-12-22 22:53:14.767] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:53:14.771] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:53:14.772] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:53:14.772] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 22:53:14.776] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:53:14.780] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 22:53:14.782] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 22:53:14.783] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:53:14.785] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 11.0778ms
[2025-12-22 22:53:14.786] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:53:14.787] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 19.8868ms
[2025-12-22 22:53:14.790] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 22:53:14.792] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:53:14.792] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 2.262ms
[2025-12-22 22:53:14.794] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 22:53:14.796] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:53:14.797] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 22:53:14.798] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 22:53:14.802] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:53:14.807] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 22:53:14.809] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 20, Всего: 45, Страница: 1
[2025-12-22 22:53:14.810] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:53:14.811] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 12.1661ms
[2025-12-22 22:53:14.812] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 22:53:14.813] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 18.9916ms
[2025-12-22 22:54:30.376] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - null null
[2025-12-22 22:54:30.378] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:30.379] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - 204 null null 3.374ms
[2025-12-22 22:54:30.381] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - null null
[2025-12-22 22:54:30.385] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:30.386] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-22 22:54:30.387] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.OrderReadDto]]] GetMyOrders(Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 22:54:30.392] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_Value_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:30.397] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[UserId] = @__userId_Value_0 AND [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 22:54:30.399] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b". Количество: 0, Всего: 0, Страница: 1
[2025-12-22 22:54:30.401] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:30.402] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 13.6277ms
[2025-12-22 22:54:30.404] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-22 22:54:30.404] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - 200 null application/json; charset=utf-8 23.435ms
[2025-12-22 22:54:31.735] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:54:31.737] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:54:31.737] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:54:31.738] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:31.740] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:31.741] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:31.742] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 6.9444ms
[2025-12-22 22:54:31.743] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 6.1299ms
[2025-12-22 22:54:31.744] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 6.8056ms
[2025-12-22 22:54:31.747] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:54:31.747] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:54:31.747] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:54:31.755] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:31.756] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:31.758] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:31.759] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:54:31.759] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:54:31.760] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:54:31.761] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.MenuReadDto]]] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-22 22:54:31.761] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.CategoryReadDto]]] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-22 22:54:31.762] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 22:54:31.766] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:31.771] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[CreatedAt], [m].[CreatedBy], [m].[DeletedAt], [m].[DeletedBy], [m].[IsDeleted], [m].[Name], [m].[Notes], [m].[UpdatedAt], [m].[UpdatedBy]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:54:31.773] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:31.773] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-22 22:54:31.776] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:31.776] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:31.777] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 13.5515ms
[2025-12-22 22:54:31.777] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:54:31.779] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:54:31.781] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 22:54:31.782] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 34.6139ms
[2025-12-22 22:54:31.783] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 22:54:31.784] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:31.787] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:54:31.791] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 22:54:31.791] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 26.7099ms
[2025-12-22 22:54:31.793] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:31.794] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:31.795] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:54:31.795] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 8.4189ms
[2025-12-22 22:54:31.796] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 29.6238ms
[2025-12-22 22:54:31.797] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:54:31.797] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 49.9812ms
[2025-12-22 22:54:31.800] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:54:31.802] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:31.805] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 57.5322ms
[2025-12-22 22:54:31.806] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:54:31.808] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-22 22:54:31.813] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-22 22:54:31.818] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-22 22:54:31.820] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-22 22:54:31.821] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:31.822] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 12.3812ms
[2025-12-22 22:54:31.823] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:54:31.824] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 27.1637ms
[2025-12-22 22:54:36.001] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - null null
[2025-12-22 22:54:36.003] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:36.003] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - 204 null null 2.5862ms
[2025-12-22 22:54:36.005] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - null null
[2025-12-22 22:54:36.008] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:36.008] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-22 22:54:36.009] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishIngredients", controller = "DishIngredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishIngredients(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishIngredientsController (RestaurantApi).
[2025-12-22 22:54:36.028] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (16ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DishIngredients] AS [d]
INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
[2025-12-22 22:54:36.034] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[DishId], [s].[Name] AS [DishName], [s].[IngredientId], [i].[Name] AS [IngredientName], [s].[Quantity]
FROM (
    SELECT [d].[Id], [d].[DishId], [d].[IngredientId], [d].[Quantity], [d0].[Name]
    FROM [DishIngredients] AS [d]
    INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
    ORDER BY [d0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Ingredients] AS [i] ON [s].[IngredientId] = [i].[Id]
ORDER BY [s].[Name]
[2025-12-22 22:54:36.037] [INF] [RestaurantAPI.Controllers.DishIngredientsController] Получен список ингредиентов блюд. Количество: 5, Всего: 5, Страница: 1
[2025-12-22 22:54:36.038] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishIngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:36.040] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi) in 28.8348ms
[2025-12-22 22:54:36.041] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-22 22:54:36.041] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - 200 null application/json; charset=utf-8 35.9997ms
[2025-12-22 22:54:37.356] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Cart/items - null null
[2025-12-22 22:54:37.358] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:37.359] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Cart/items - 204 null null 2.2547ms
[2025-12-22 22:54:37.360] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Cart/items - application/json 75
[2025-12-22 22:54:37.363] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:37.363] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi)'
[2025-12-22 22:54:37.364] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "AddItem", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.CartReadDto]] AddItem(RestaurantAPI.DTOs.CartItemAddDto) on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 22:54:37.369] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
[2025-12-22 22:54:37.372] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__8__locals1_dto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__8__locals1_dto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:37.377] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Guid), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p7='?' (DbType = Guid), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CartItems] ([CartId], [CreatedAt], [DishId], [Notes], [Quantity], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE [Carts] SET [UpdatedAt] = @p6
OUTPUT 1
WHERE [Id] = @p7;
[2025-12-22 22:54:37.392] [INF] [RestaurantAPI.Controllers.CartController] Товар "506c83ad-20ac-42f9-a32e-16f2701bad37" добавлен в корзину пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b"
[2025-12-22 22:54:37.398] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [s].[Id], [s].[CartId], [s].[CreatedAt], [s].[DishId], [s].[Notes], [s].[Quantity], [s].[UpdatedAt], [s].[Id0], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedBy], [s].[DeletedAt], [s].[DeletedBy], [s].[Description], [s].[IsDeleted], [s].[Name], [s].[Notes0], [s].[Price], [s].[UpdatedAt0], [s].[UpdatedBy]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt], [d].[Id] AS [Id0], [d].[CategoryId], [d].[CreatedAt] AS [CreatedAt0], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes] AS [Notes0], [d].[Price], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UpdatedBy]
    FROM [CartItems] AS [c0]
    INNER JOIN [Dishes] AS [d] ON [c0].[DishId] = [d].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
[2025-12-22 22:54:37.401] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.DTOs.CartReadDto'.
[2025-12-22 22:54:37.401] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi) in 36.2224ms
[2025-12-22 22:54:37.402] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi)'
[2025-12-22 22:54:37.403] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Cart/items - 200 null application/json; charset=utf-8 43.4771ms
[2025-12-22 22:54:39.209] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-22 22:54:39.211] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:39.212] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 2.4666ms
[2025-12-22 22:54:39.213] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 148
[2025-12-22 22:54:39.216] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:39.217] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 22:54:39.218] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 22:54:39.225] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:39.228] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:39.230] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "601d547d-42ee-4d95-abc0-42bf30f4d94b", Notes: null, ItemsCount: 1
[2025-12-22 22:54:39.235] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 22:54:39.238] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:39.240] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "506c83ad-20ac-42f9-a32e-16f2701bad37", Quantity: 1, Notes: null
[2025-12-22 22:54:39.246] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p13='?' (DbType = Guid), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Orders] SET [Total] = @p12
OUTPUT 1
WHERE [Id] = @p13;
[2025-12-22 22:54:39.260] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "0788940a-8883-4de7-91fd-257612d46876" создан пользователем "601d547d-42ee-4d95-abc0-42bf30f4d94b". Сумма: 750.00, Блюд: 1
[2025-12-22 22:54:39.262] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 22:54:39.263] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 44.2986ms
[2025-12-22 22:54:39.264] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 22:54:39.266] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 52.5391ms
[2025-12-22 22:54:39.269] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Cart - null null
[2025-12-22 22:54:39.271] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:39.271] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Cart - 204 null null 2.4118ms
[2025-12-22 22:54:39.272] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 DELETE https://localhost:7188/api/Cart - null null
[2025-12-22 22:54:39.275] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:39.276] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.ClearCart (RestaurantApi)'
[2025-12-22 22:54:39.277] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "ClearCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] ClearCart() on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 22:54:39.282] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
[2025-12-22 22:54:39.288] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p2='?' (DbType = Guid), @p1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p0;
UPDATE [Carts] SET [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
[2025-12-22 22:54:39.291] [INF] [RestaurantAPI.Controllers.CartController] Корзина пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b" очищена
[2025-12-22 22:54:39.292] [INF] [Microsoft.AspNetCore.Mvc.StatusCodeResult] Executing StatusCodeResult, setting HTTP status code 204
[2025-12-22 22:54:39.292] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.ClearCart (RestaurantApi) in 14.4044ms
[2025-12-22 22:54:39.294] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.ClearCart (RestaurantApi)'
[2025-12-22 22:54:39.295] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 DELETE https://localhost:7188/api/Cart - 204 null null 22.1396ms
[2025-12-22 22:54:41.062] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:54:41.064] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:54:41.065] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:41.068] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:41.068] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 6.52ms
[2025-12-22 22:54:41.069] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 4.9458ms
[2025-12-22 22:54:41.071] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:54:41.071] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:54:41.077] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:41.079] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:41.080] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:54:41.080] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:54:41.081] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:54:41.082] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:54:41.086] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:41.088] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:54:41.090] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:41.092] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:54:41.093] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:41.094] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:41.095] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:41.096] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:41.100] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 22:54:41.101] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 750.00, Заказов: 1
[2025-12-22 22:54:41.102] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:54:41.103] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:54:41.104] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:54:41.105] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 21.4213ms
[2025-12-22 22:54:41.106] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:54:41.107] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:54:41.107] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 22.077ms
[2025-12-22 22:54:41.108] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 37.3549ms
[2025-12-22 22:54:41.109] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:54:41.112] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 40.7313ms
[2025-12-22 22:54:41.115] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:54:41.115] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:54:41.117] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:41.119] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:41.119] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 4.4277ms
[2025-12-22 22:54:41.120] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 4.8453ms
[2025-12-22 22:54:41.122] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:54:41.122] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:54:41.127] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:41.128] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:41.129] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:54:41.129] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:54:41.130] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:54:41.131] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:54:41.135] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:54:41.136] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:54:41.138] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:54:41.139] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:41.141] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:41.141] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 8.7008ms
[2025-12-22 22:54:41.143] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:41.143] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:54:41.146] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:54:41.146] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 23.9958ms
[2025-12-22 22:54:41.147] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 750.00, Заказов: 1
[2025-12-22 22:54:41.151] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:54:41.152] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 17.9843ms
[2025-12-22 22:54:41.153] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:54:41.154] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 31.6315ms
[2025-12-22 22:54:41.156] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:54:41.156] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:54:41.158] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:41.160] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:41.160] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 4.2754ms
[2025-12-22 22:54:41.161] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:54:41.162] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:54:41.164] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:54:41.165] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:41.168] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:54:41.168] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:54:41.169] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:54:41.170] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:54:41.173] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:54:41.174] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:41.175] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:41.176] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:41.177] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.486ms
[2025-12-22 22:54:41.179] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:54:41.179] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:54:41.180] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:54:41.181] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 19.729ms
[2025-12-22 22:54:41.183] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:54:41.186] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.2379ms
[2025-12-22 22:54:41.187] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:54:41.188] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 31.6923ms
[2025-12-22 22:54:41.191] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 22:54:41.191] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 22:54:41.192] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:41.194] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:41.194] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 3.9171ms
[2025-12-22 22:54:41.195] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 4.4463ms
[2025-12-22 22:54:41.196] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 22:54:41.196] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 22:54:41.201] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:41.203] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:41.204] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:54:41.204] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:54:41.205] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:54:41.206] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:54:41.208] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:54:41.210] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:54:41.211] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:54:41.212] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:54:41.214] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:41.215] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:41.217] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:41.218] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:41.220] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:54:41.221] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:54:41.222] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 750.00, Заказов: 1
[2025-12-22 22:54:41.224] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:54:41.225] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:54:41.226] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:54:41.227] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.5614ms
[2025-12-22 22:54:41.228] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.1489ms
[2025-12-22 22:54:41.228] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:54:41.229] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:54:41.230] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 33.773ms
[2025-12-22 22:54:41.231] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 34.4569ms
[2025-12-22 22:54:41.234] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:54:41.237] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:41.238] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 4.384ms
[2025-12-22 22:54:41.240] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:54:41.242] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:41.243] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:54:41.244] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:54:41.262] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 22:54:41.264] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 22:54:41.265] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:41.266] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 20.5395ms
[2025-12-22 22:54:41.267] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:54:41.268] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 28.2223ms
[2025-12-22 22:54:41.271] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:54:41.273] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:41.273] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.4613ms
[2025-12-22 22:54:41.275] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:54:41.277] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:41.278] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:54:41.279] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:54:41.286] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 22:54:41.288] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:41.289] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 9.1003ms
[2025-12-22 22:54:41.290] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:54:41.291] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 16.0995ms
[2025-12-22 22:54:41.293] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:54:41.295] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:41.296] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.2157ms
[2025-12-22 22:54:41.297] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:54:41.300] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:41.301] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:54:41.302] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:54:41.307] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 22:54:41.308] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:41.309] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.6571ms
[2025-12-22 22:54:41.310] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:54:41.311] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 14.0557ms
[2025-12-22 22:54:42.428] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:54:42.431] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:54:42.431] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:54:42.431] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:42.435] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:42.438] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:42.438] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 10.2122ms
[2025-12-22 22:54:42.439] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 8.2288ms
[2025-12-22 22:54:42.440] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 8.5022ms
[2025-12-22 22:54:42.441] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:54:42.441] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:54:42.441] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:54:42.453] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:42.456] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:42.458] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:42.458] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:54:42.459] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:54:42.460] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:54:42.461] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.MenuReadDto]]] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-22 22:54:42.462] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 22:54:42.463] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.CategoryReadDto]]] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-22 22:54:42.467] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:42.468] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:42.469] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:42.470] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[CreatedAt], [m].[CreatedBy], [m].[DeletedAt], [m].[DeletedBy], [m].[IsDeleted], [m].[Name], [m].[Notes], [m].[UpdatedAt], [m].[UpdatedBy]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:54:42.472] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 22:54:42.474] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:54:42.475] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-22 22:54:42.477] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 22:54:42.479] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 22:54:42.480] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:42.481] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:42.483] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:42.485] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 20.2059ms
[2025-12-22 22:54:42.486] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 19.7179ms
[2025-12-22 22:54:42.487] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 19.0881ms
[2025-12-22 22:54:42.488] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:54:42.489] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:54:42.490] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:54:42.491] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 50.4293ms
[2025-12-22 22:54:42.492] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 50.9884ms
[2025-12-22 22:54:42.493] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 51.7906ms
[2025-12-22 22:54:42.494] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:54:42.503] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:42.505] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 10.4137ms
[2025-12-22 22:54:42.506] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:54:42.509] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:42.510] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:54:42.511] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-22 22:54:42.514] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-22 22:54:42.517] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-22 22:54:42.519] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-22 22:54:42.520] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:42.521] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 9.2108ms
[2025-12-22 22:54:42.523] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:54:42.524] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 17.3418ms
[2025-12-22 22:54:43.200] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - null null
[2025-12-22 22:54:43.202] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:43.203] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - 204 null null 2.9311ms
[2025-12-22 22:54:43.205] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - null null
[2025-12-22 22:54:43.208] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:43.208] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-22 22:54:43.209] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishIngredients", controller = "DishIngredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishIngredients(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishIngredientsController (RestaurantApi).
[2025-12-22 22:54:43.212] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DishIngredients] AS [d]
INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
[2025-12-22 22:54:43.214] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[DishId], [s].[Name] AS [DishName], [s].[IngredientId], [i].[Name] AS [IngredientName], [s].[Quantity]
FROM (
    SELECT [d].[Id], [d].[DishId], [d].[IngredientId], [d].[Quantity], [d0].[Name]
    FROM [DishIngredients] AS [d]
    INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
    ORDER BY [d0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Ingredients] AS [i] ON [s].[IngredientId] = [i].[Id]
ORDER BY [s].[Name]
[2025-12-22 22:54:43.216] [INF] [RestaurantAPI.Controllers.DishIngredientsController] Получен список ингредиентов блюд. Количество: 5, Всего: 5, Страница: 1
[2025-12-22 22:54:43.217] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishIngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:43.219] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi) in 8.389ms
[2025-12-22 22:54:43.221] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-22 22:54:43.221] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - 200 null application/json; charset=utf-8 16.4364ms
[2025-12-22 22:54:45.306] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Cart/items - null null
[2025-12-22 22:54:45.309] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:45.309] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Cart/items - 204 null null 2.9856ms
[2025-12-22 22:54:45.310] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Cart/items - application/json 112
[2025-12-22 22:54:45.313] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:45.314] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi)'
[2025-12-22 22:54:45.315] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "AddItem", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.CartReadDto]] AddItem(RestaurantAPI.DTOs.CartItemAddDto) on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 22:54:45.317] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
[2025-12-22 22:54:45.320] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__8__locals1_dto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__8__locals1_dto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:45.323] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Guid), @p3='?' (Size = 500), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p7='?' (DbType = Guid), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CartItems] ([CartId], [CreatedAt], [DishId], [Notes], [Quantity], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE [Carts] SET [UpdatedAt] = @p6
OUTPUT 1
WHERE [Id] = @p7;
[2025-12-22 22:54:45.326] [INF] [RestaurantAPI.Controllers.CartController] Товар "506c83ad-20ac-42f9-a32e-16f2701bad37" добавлен в корзину пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b"
[2025-12-22 22:54:45.328] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [s].[Id], [s].[CartId], [s].[CreatedAt], [s].[DishId], [s].[Notes], [s].[Quantity], [s].[UpdatedAt], [s].[Id0], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedBy], [s].[DeletedAt], [s].[DeletedBy], [s].[Description], [s].[IsDeleted], [s].[Name], [s].[Notes0], [s].[Price], [s].[UpdatedAt0], [s].[UpdatedBy]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt], [d].[Id] AS [Id0], [d].[CategoryId], [d].[CreatedAt] AS [CreatedAt0], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes] AS [Notes0], [d].[Price], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UpdatedBy]
    FROM [CartItems] AS [c0]
    INNER JOIN [Dishes] AS [d] ON [c0].[DishId] = [d].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
[2025-12-22 22:54:45.330] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.DTOs.CartReadDto'.
[2025-12-22 22:54:45.331] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi) in 15.1331ms
[2025-12-22 22:54:45.332] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.AddItem (RestaurantApi)'
[2025-12-22 22:54:45.333] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Cart/items - 200 null application/json; charset=utf-8 23.0643ms
[2025-12-22 22:54:49.733] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-22 22:54:49.735] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:49.736] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 2.6707ms
[2025-12-22 22:54:49.737] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 189
[2025-12-22 22:54:49.740] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:49.740] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 22:54:49.741] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 22:54:49.752] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:49.754] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:49.756] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "601d547d-42ee-4d95-abc0-42bf30f4d94b", Notes: лол, ItemsCount: 1
[2025-12-22 22:54:49.758] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 22:54:49.760] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:49.762] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "506c83ad-20ac-42f9-a32e-16f2701bad37", Quantity: 1, Notes: Удалено: Куриное филе
[2025-12-22 22:54:49.764] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p13='?' (DbType = Guid), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Orders] SET [Total] = @p12
OUTPUT 1
WHERE [Id] = @p13;
[2025-12-22 22:54:49.768] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "27ce63ac-d57f-4e08-afab-81e1c8cdd47e" создан пользователем "601d547d-42ee-4d95-abc0-42bf30f4d94b". Сумма: 750.00, Блюд: 1
[2025-12-22 22:54:49.769] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 22:54:49.770] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 27.7491ms
[2025-12-22 22:54:49.771] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 22:54:49.772] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 34.9114ms
[2025-12-22 22:54:49.775] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Cart - null null
[2025-12-22 22:54:49.777] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:49.778] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Cart - 204 null null 2.4485ms
[2025-12-22 22:54:49.779] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 DELETE https://localhost:7188/api/Cart - null null
[2025-12-22 22:54:49.782] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:49.783] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.ClearCart (RestaurantApi)'
[2025-12-22 22:54:49.784] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "ClearCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] ClearCart() on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 22:54:49.786] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN [CartItems] AS [c0] ON [c1].[Id] = [c0].[CartId]
ORDER BY [c1].[Id]
[2025-12-22 22:54:49.790] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p2='?' (DbType = Guid), @p1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [CartItems]
OUTPUT 1
WHERE [Id] = @p0;
UPDATE [Carts] SET [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
[2025-12-22 22:54:49.792] [INF] [RestaurantAPI.Controllers.CartController] Корзина пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b" очищена
[2025-12-22 22:54:49.793] [INF] [Microsoft.AspNetCore.Mvc.StatusCodeResult] Executing StatusCodeResult, setting HTTP status code 204
[2025-12-22 22:54:49.794] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.ClearCart (RestaurantApi) in 8.7892ms
[2025-12-22 22:54:49.795] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.ClearCart (RestaurantApi)'
[2025-12-22 22:54:49.795] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 DELETE https://localhost:7188/api/Cart - 204 null null 16.3924ms
[2025-12-22 22:54:50.736] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:54:50.739] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:50.739] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:54:50.739] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:54:50.739] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 3.1664ms
[2025-12-22 22:54:50.741] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:50.742] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-22 22:54:50.743] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:50.748] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 9.3405ms
[2025-12-22 22:54:50.750] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:50.750] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-22 22:54:50.751] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 11.7825ms
[2025-12-22 22:54:50.753] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:54:50.754] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:54:50.756] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:50.760] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:50.761] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.MenuReadDto]]] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-22 22:54:50.761] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:54:50.762] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:54:50.764] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.CategoryReadDto]]] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-22 22:54:50.765] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:50.768] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:50.765] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 22:54:50.769] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[CreatedAt], [m].[CreatedBy], [m].[DeletedAt], [m].[DeletedBy], [m].[IsDeleted], [m].[Name], [m].[Notes], [m].[UpdatedAt], [m].[UpdatedBy]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:54:50.770] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:54:50.772] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:50.773] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-22 22:54:50.774] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 22:54:50.776] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 22:54:50.776] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:50.777] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:50.779] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 22:54:50.780] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 16.6218ms
[2025-12-22 22:54:50.781] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 14.2319ms
[2025-12-22 22:54:50.782] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:50.784] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-22 22:54:50.784] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 22:54:50.786] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 14.915ms
[2025-12-22 22:54:50.786] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 44.5023ms
[2025-12-22 22:54:50.787] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 37.2645ms
[2025-12-22 22:54:50.788] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:54:50.789] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:54:50.793] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 40.0267ms
[2025-12-22 22:54:50.795] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:50.797] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 8.6629ms
[2025-12-22 22:54:50.799] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-22 22:54:50.802] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:50.803] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:54:50.804] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-22 22:54:50.806] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-22 22:54:50.809] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-22 22:54:50.810] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-22 22:54:50.812] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:50.813] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 8.0061ms
[2025-12-22 22:54:50.814] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-22 22:54:50.815] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 15.806ms
[2025-12-22 22:54:53.785] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:54:53.786] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:54:53.787] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:53.789] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:53.790] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 5.6594ms
[2025-12-22 22:54:53.791] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 5.2298ms
[2025-12-22 22:54:53.793] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:54:53.793] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:54:53.800] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:53.802] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:53.803] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:54:53.804] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:54:53.804] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:54:53.805] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:54:53.807] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:53.808] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:54:53.809] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:53.811] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:54:53.812] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:53.813] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:53.815] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:53.817] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:53.819] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 22:54:53.820] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:54:53.821] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1500.00, Заказов: 2
[2025-12-22 22:54:53.822] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:54:53.823] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:54:53.824] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:54:53.825] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.1335ms
[2025-12-22 22:54:53.826] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 18.7182ms
[2025-12-22 22:54:53.827] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:54:53.828] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:54:53.828] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 35.4629ms
[2025-12-22 22:54:53.829] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 36.1671ms
[2025-12-22 22:54:53.832] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:54:53.832] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:54:53.837] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:53.839] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:53.840] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 7.9715ms
[2025-12-22 22:54:53.842] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:54:53.853] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 20.7193ms
[2025-12-22 22:54:53.853] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:53.855] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:54:53.856] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:54:53.858] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:53.859] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:54:53.859] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:54:53.861] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:54:53.862] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:54:53.864] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:54:53.865] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:53.868] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:54:53.868] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 7.4578ms
[2025-12-22 22:54:53.870] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:53.870] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:54:53.872] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:53.873] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 30.5165ms
[2025-12-22 22:54:53.875] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:54:53.878] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1500.00, Заказов: 2
[2025-12-22 22:54:53.879] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:54:53.880] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 16.9601ms
[2025-12-22 22:54:53.881] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:54:53.882] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 27.1813ms
[2025-12-22 22:54:53.885] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:54:53.886] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:54:53.887] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:53.889] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:53.889] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 4.0428ms
[2025-12-22 22:54:53.890] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:54:53.891] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:54:53.893] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:54:53.894] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:53.896] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:54:53.896] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:54:53.897] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:54:53.899] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:54:53.901] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:54:53.902] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:53.903] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:53.905] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:53.905] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.771ms
[2025-12-22 22:54:53.907] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:54:53.908] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:54:53.909] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:54:53.910] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 19.5177ms
[2025-12-22 22:54:53.911] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:54:53.914] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 18.9915ms
[2025-12-22 22:54:53.915] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:54:53.916] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 30.8182ms
[2025-12-22 22:54:53.919] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 22:54:53.919] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 22:54:53.921] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:53.923] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:53.923] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 4.2314ms
[2025-12-22 22:54:53.924] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 4.7616ms
[2025-12-22 22:54:53.925] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 22:54:53.925] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 22:54:53.930] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:53.933] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:53.933] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:54:53.934] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:54:53.935] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:54:53.936] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:54:53.938] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:54:53.939] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:54:53.940] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:54:53.942] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:54:53.943] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:53.945] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:53.946] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:53.948] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:53.950] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:54:53.951] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:54:53.952] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 1500.00, Заказов: 2
[2025-12-22 22:54:53.954] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:54:53.955] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:54:53.955] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:54:53.956] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.5285ms
[2025-12-22 22:54:53.957] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.2116ms
[2025-12-22 22:54:53.958] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:54:53.959] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:54:53.960] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 34.233ms
[2025-12-22 22:54:53.960] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 34.9816ms
[2025-12-22 22:54:53.963] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:54:53.967] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:53.968] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 4.7515ms
[2025-12-22 22:54:53.970] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:54:53.972] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:53.973] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:54:53.973] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:54:53.976] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 22:54:53.978] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 22:54:53.979] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:53.980] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 5.1712ms
[2025-12-22 22:54:53.981] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:54:53.981] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 11.2076ms
[2025-12-22 22:54:53.985] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:54:53.987] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:53.988] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.4201ms
[2025-12-22 22:54:53.989] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:54:53.992] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:53.993] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:54:53.994] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:54:53.996] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 22:54:53.998] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:53.999] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 3.9125ms
[2025-12-22 22:54:54.000] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:54:54.001] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 11.777ms
[2025-12-22 22:54:54.004] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:54:54.006] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:54.007] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.6056ms
[2025-12-22 22:54:54.008] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:54:54.011] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:54.012] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:54:54.013] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:54:54.015] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 22:54:54.017] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:54.018] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 4.1717ms
[2025-12-22 22:54:54.019] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:54:54.020] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 11.6267ms
[2025-12-22 22:54:59.036] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 22:54:59.038] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:59.039] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 3.2648ms
[2025-12-22 22:54:59.041] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 22:54:59.044] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:59.045] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 22:54:59.047] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.UserReadDto]]] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-22 22:54:59.051] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:59.057] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[IsDeleted], [u0].[Notes], [u0].[PasswordHash], [u0].[RoleId], [u0].[UpdatedAt], [u0].[UpdatedBy], [u0].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM (
    SELECT [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-22 22:54:59.059] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 22:54:59.060] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:59.061] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 12.8146ms
[2025-12-22 22:54:59.063] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 22:54:59.063] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 22.2446ms
[2025-12-22 22:54:59.066] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:54:59.068] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:59.069] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 2.7743ms
[2025-12-22 22:54:59.070] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 22:54:59.073] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:59.074] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:54:59.075] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 22:54:59.077] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:59.079] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 22:54:59.081] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 22:54:59.083] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:59.085] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 8.7491ms
[2025-12-22 22:54:59.086] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 22:54:59.086] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 16.0075ms
[2025-12-22 22:54:59.089] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 22:54:59.091] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:59.092] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 2.2139ms
[2025-12-22 22:54:59.093] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 22:54:59.095] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:54:59.096] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 22:54:59.097] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 22:54:59.100] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:54:59.105] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 22:54:59.106] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 2, Всего: 2, Страница: 1
[2025-12-22 22:54:59.107] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:54:59.108] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 10.2582ms
[2025-12-22 22:54:59.109] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 22:54:59.110] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 16.9328ms
[2025-12-22 22:55:08.281] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-22 22:55:08.283] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:55:08.284] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 3.097ms
[2025-12-22 22:55:08.285] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 187
[2025-12-22 22:55:08.288] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:55:08.289] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 22:55:08.290] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 22:55:08.296] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:55:08.299] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:55:08.301] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "c75a4aab-c6d6-47c8-b866-56ee05fc57b6", Notes: null, ItemsCount: 1
[2025-12-22 22:55:08.303] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 22:55:08.306] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:55:08.308] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e8b4009a-2de3-4f24-9484-408e7d813d61", Quantity: 2, Notes: null
[2025-12-22 22:55:08.310] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p13='?' (DbType = Guid), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Orders] SET [Total] = @p12
OUTPUT 1
WHERE [Id] = @p13;
[2025-12-22 22:55:08.325] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "dbdfb5a1-9d9f-4f85-a74f-4085010bc88a" создан пользователем "c75a4aab-c6d6-47c8-b866-56ee05fc57b6". Сумма: 800.00, Блюд: 1
[2025-12-22 22:55:08.327] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 22:55:08.328] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 36.3177ms
[2025-12-22 22:55:08.329] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 22:55:08.330] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 44.2397ms
[2025-12-22 22:55:08.333] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 22:55:08.335] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:55:08.336] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 2.9611ms
[2025-12-22 22:55:08.338] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 22:55:08.340] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:55:08.341] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 22:55:08.342] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 22:55:08.344] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:55:08.346] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 22:55:08.349] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 3, Всего: 3, Страница: 1
[2025-12-22 22:55:08.350] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:55:08.352] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 8.4763ms
[2025-12-22 22:55:08.354] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 22:55:08.355] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 17.0724ms
[2025-12-22 22:55:10.912] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/27ce63ac-d57f-4e08-afab-81e1c8cdd47e - null null
[2025-12-22 22:55:10.914] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:55:10.915] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/27ce63ac-d57f-4e08-afab-81e1c8cdd47e - 204 null null 2.8119ms
[2025-12-22 22:55:10.917] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/27ce63ac-d57f-4e08-afab-81e1c8cdd47e - null null
[2025-12-22 22:55:10.919] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:55:10.920] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-22 22:55:10.925] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-22 22:55:10.937] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:55:10.947] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-22 22:55:10.950] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:55:10.953] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 26.5437ms
[2025-12-22 22:55:10.954] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-22 22:55:10.955] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/27ce63ac-d57f-4e08-afab-81e1c8cdd47e - 200 null application/json; charset=utf-8 37.8507ms
[2025-12-22 22:55:34.784] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/dbdfb5a1-9d9f-4f85-a74f-4085010bc88a - null null
[2025-12-22 22:55:34.787] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:55:34.787] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/dbdfb5a1-9d9f-4f85-a74f-4085010bc88a - 204 null null 2.8773ms
[2025-12-22 22:55:34.789] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/dbdfb5a1-9d9f-4f85-a74f-4085010bc88a - null null
[2025-12-22 22:55:34.792] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:55:34.793] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-22 22:55:34.794] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-22 22:55:34.798] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:55:34.803] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-22 22:55:34.804] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:55:34.805] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 10.3718ms
[2025-12-22 22:55:34.806] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-22 22:55:34.807] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/dbdfb5a1-9d9f-4f85-a74f-4085010bc88a - 200 null application/json; charset=utf-8 17.99ms
[2025-12-22 22:56:06.637] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-22 22:56:06.639] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:06.639] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 2.6132ms
[2025-12-22 22:56:06.641] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 264
[2025-12-22 22:56:06.644] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:06.644] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 22:56:06.645] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 22:56:06.649] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:56:06.652] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:56:06.656] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:56:06.657] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "c75a4aab-c6d6-47c8-b866-56ee05fc57b6", Notes: null, ItemsCount: 2
[2025-12-22 22:56:06.662] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 22:56:06.666] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:56:06.667] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "adb0a8a2-a8c3-40bd-8f5b-26b9847ed9e7", Quantity: 17, Notes: null
[2025-12-22 22:56:06.669] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:56:06.671] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "bc75836d-c978-460e-b72a-7ad8d898f4db", Quantity: 1, Notes: null
[2025-12-22 22:56:06.682] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p12='?' (DbType = DateTime), @p13='?' (Size = 100), @p14='?' (DbType = DateTime), @p15='?' (Size = 100), @p16='?' (DbType = Guid), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (DbType = Guid), @p20='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (Size = 100), @p25='?' (DbType = Guid), @p24='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, 0),
(@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, 1)) AS i ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
VALUES (i.[CreatedAt], i.[CreatedBy], i.[DeletedAt], i.[DeletedBy], i.[DishId], i.[IsDeleted], i.[Notes], i.[OrderId], i.[Price], i.[Quantity], i.[UpdatedAt], i.[UpdatedBy])
OUTPUT INSERTED.[Id], i._Position;
UPDATE [Orders] SET [Total] = @p24
OUTPUT 1
WHERE [Id] = @p25;
[2025-12-22 22:56:06.698] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "ee4b9427-1c9b-49b4-9833-0303844e3cd0" создан пользователем "c75a4aab-c6d6-47c8-b866-56ee05fc57b6". Сумма: 14800.00, Блюд: 2
[2025-12-22 22:56:06.699] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 22:56:06.700] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 53.5514ms
[2025-12-22 22:56:06.701] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 22:56:06.702] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 61.0636ms
[2025-12-22 22:56:06.704] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 22:56:06.706] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:06.707] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 2.211ms
[2025-12-22 22:56:06.708] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 22:56:06.711] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:06.711] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 22:56:06.712] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 22:56:06.716] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:56:06.721] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 22:56:06.723] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 4, Всего: 4, Страница: 1
[2025-12-22 22:56:06.724] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:56:06.726] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 12.1928ms
[2025-12-22 22:56:06.727] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 22:56:06.727] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 19.6071ms
[2025-12-22 22:56:11.317] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:56:11.320] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:11.321] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:56:11.321] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 3.9745ms
[2025-12-22 22:56:11.324] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:56:11.326] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:11.332] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:11.333] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 12.2307ms
[2025-12-22 22:56:11.334] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:56:11.336] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:56:11.339] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:56:11.342] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:11.345] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:56:11.346] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:56:11.346] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:56:11.350] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:56:11.351] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:56:11.354] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:56:11.355] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:56:11.356] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:56:11.357] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:56:11.360] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:56:11.360] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 22:56:11.363] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 17100.00, Заказов: 4
[2025-12-22 22:56:11.364] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:56:11.365] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:56:11.366] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 22.0673ms
[2025-12-22 22:56:11.368] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:56:11.368] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:56:11.369] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:56:11.370] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 45.7072ms
[2025-12-22 22:56:11.371] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 23.6636ms
[2025-12-22 22:56:11.374] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:56:11.375] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 38.8938ms
[2025-12-22 22:56:11.378] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:56:11.378] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:56:11.379] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:11.381] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:11.382] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 4.5061ms
[2025-12-22 22:56:11.383] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 5.1252ms
[2025-12-22 22:56:11.384] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:56:11.385] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:56:11.390] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:11.392] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:11.393] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:56:11.393] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:56:11.394] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:56:11.394] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:56:11.398] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:56:11.399] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:56:11.401] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:56:11.402] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:56:11.403] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:56:11.404] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 8.6215ms
[2025-12-22 22:56:11.406] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:56:11.406] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:56:11.408] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:56:11.409] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 24.2305ms
[2025-12-22 22:56:11.410] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 17100.00, Заказов: 4
[2025-12-22 22:56:11.413] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:56:11.415] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 17.6209ms
[2025-12-22 22:56:11.416] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:56:11.417] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 31.7496ms
[2025-12-22 22:56:11.419] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:56:11.419] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:56:11.421] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:11.423] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:11.423] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 4.4598ms
[2025-12-22 22:56:11.424] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:56:11.425] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:56:11.427] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:56:11.428] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:11.430] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:56:11.431] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:56:11.432] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:56:11.434] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:56:11.436] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:56:11.436] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:56:11.438] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:56:11.439] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:56:11.440] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.7715ms
[2025-12-22 22:56:11.442] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:56:11.443] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:56:11.444] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:56:11.445] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 20.2999ms
[2025-12-22 22:56:11.446] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:56:11.449] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.881ms
[2025-12-22 22:56:11.450] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:56:11.451] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 32.1231ms
[2025-12-22 22:56:11.454] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 22:56:11.454] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 22:56:11.456] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:11.458] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:11.458] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 3.9125ms
[2025-12-22 22:56:11.459] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 4.4688ms
[2025-12-22 22:56:11.460] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 22:56:11.460] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 22:56:11.465] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:11.467] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:11.468] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:56:11.468] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:56:11.469] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:56:11.470] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:56:11.472] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:56:11.473] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:56:11.474] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:56:11.476] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:56:11.477] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:56:11.479] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:56:11.480] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:56:11.483] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:56:11.484] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:56:11.485] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:56:11.486] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 2300.00, Заказов: 3
[2025-12-22 22:56:11.488] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 15600.00, Заказов: 2
[2025-12-22 22:56:11.489] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:56:11.490] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:56:11.491] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.1245ms
[2025-12-22 22:56:11.492] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.9196ms
[2025-12-22 22:56:11.493] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:56:11.494] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:56:11.495] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 34.7806ms
[2025-12-22 22:56:11.496] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 35.4758ms
[2025-12-22 22:56:11.505] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:56:11.507] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:11.507] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 2.575ms
[2025-12-22 22:56:11.509] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:56:11.511] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:11.512] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:56:11.513] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:56:11.522] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 22:56:11.523] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 22:56:11.524] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:56:11.525] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 10.4893ms
[2025-12-22 22:56:11.526] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:56:11.527] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 18.0941ms
[2025-12-22 22:56:11.529] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:56:11.532] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:11.532] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.8798ms
[2025-12-22 22:56:11.534] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:56:11.537] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:11.538] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:56:11.539] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:56:11.545] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 22:56:11.547] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:56:11.548] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 8.189ms
[2025-12-22 22:56:11.550] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:56:11.550] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 16.5974ms
[2025-12-22 22:56:11.554] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:56:11.555] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:11.556] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.1525ms
[2025-12-22 22:56:11.558] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:56:11.560] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:56:11.561] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:56:11.562] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:56:11.565] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 22:56:11.567] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:56:11.568] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.1403ms
[2025-12-22 22:56:11.569] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:56:11.570] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 12.4358ms
[2025-12-22 22:57:44.231] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - null null
[2025-12-22 22:57:44.234] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:44.234] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - 204 null null 3.8637ms
[2025-12-22 22:57:44.236] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - null null
[2025-12-22 22:57:44.240] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:44.241] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-22 22:57:44.242] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.OrderReadDto]]] GetMyOrders(Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 22:57:44.249] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_Value_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:57:44.255] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[UserId] = @__userId_Value_0 AND [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 22:57:44.257] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b". Количество: 2, Всего: 2, Страница: 1
[2025-12-22 22:57:44.259] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:57:44.260] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 16.6498ms
[2025-12-22 22:57:44.263] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-22 22:57:44.265] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - 200 null application/json; charset=utf-8 28.5276ms
[2025-12-22 22:57:50.467] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:57:50.470] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:57:50.470] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:50.472] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:50.473] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 5.7006ms
[2025-12-22 22:57:50.474] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 4.3539ms
[2025-12-22 22:57:50.475] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 22:57:50.476] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:57:50.482] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:50.484] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:50.485] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:57:50.486] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:57:50.486] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:57:50.487] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:57:50.491] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:57:50.491] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:57:50.494] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:57:50.497] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:57:50.498] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:57:50.499] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:57:50.502] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:57:50.502] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:57:50.505] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 22:57:50.506] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 17100.00, Заказов: 4
[2025-12-22 22:57:50.507] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:57:50.507] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:57:50.509] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:57:50.510] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 21.8046ms
[2025-12-22 22:57:50.511] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:57:50.512] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:57:50.513] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 23.9312ms
[2025-12-22 22:57:50.514] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 38.6811ms
[2025-12-22 22:57:50.515] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:57:50.518] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 41.9645ms
[2025-12-22 22:57:50.521] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:57:50.521] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:57:50.522] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:50.524] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:50.525] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 3.9006ms
[2025-12-22 22:57:50.525] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 4.2934ms
[2025-12-22 22:57:50.527] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:57:50.527] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 22:57:50.532] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:50.534] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:50.535] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:57:50.536] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:57:50.536] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:57:50.537] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:57:50.541] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:57:50.541] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:57:50.543] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:57:50.544] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:57:50.547] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:57:50.547] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 8.6563ms
[2025-12-22 22:57:50.549] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:57:50.550] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:57:50.552] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:57:50.552] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 25.4877ms
[2025-12-22 22:57:50.553] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 17100.00, Заказов: 4
[2025-12-22 22:57:50.556] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:57:50.557] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 17.1616ms
[2025-12-22 22:57:50.558] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:57:50.559] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 32.3849ms
[2025-12-22 22:57:50.561] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:57:50.561] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:57:50.564] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:50.566] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:50.566] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 5.2889ms
[2025-12-22 22:57:50.567] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:57:50.568] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 22:57:50.570] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:57:50.572] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:50.574] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:57:50.574] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:57:50.574] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:57:50.576] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:57:50.578] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:57:50.580] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:57:50.580] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:57:50.582] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:57:50.583] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.4271ms
[2025-12-22 22:57:50.585] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:57:50.585] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:57:50.586] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 22:57:50.587] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 19.1263ms
[2025-12-22 22:57:50.588] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:57:50.591] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 18.2006ms
[2025-12-22 22:57:50.592] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:57:50.593] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 31.4594ms
[2025-12-22 22:57:50.597] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 22:57:50.597] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 22:57:50.599] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:50.601] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:50.601] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 5.1198ms
[2025-12-22 22:57:50.602] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 5.414ms
[2025-12-22 22:57:50.604] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 22:57:50.604] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 22:57:50.608] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:50.610] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:50.611] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:57:50.611] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:57:50.612] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:57:50.613] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:57:50.615] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:57:50.616] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:57:50.618] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:57:50.619] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 22:57:50.621] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:57:50.622] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:57:50.624] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:57:50.625] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:57:50.627] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:57:50.628] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 22:57:50.629] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 2300.00, Заказов: 3
[2025-12-22 22:57:50.631] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 15600.00, Заказов: 2
[2025-12-22 22:57:50.631] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:57:50.632] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 22:57:50.633] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.0314ms
[2025-12-22 22:57:50.634] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 18.7225ms
[2025-12-22 22:57:50.635] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:57:50.636] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 22:57:50.637] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 32.8822ms
[2025-12-22 22:57:50.637] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 33.6204ms
[2025-12-22 22:57:50.640] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:57:50.643] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:50.644] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 4.3882ms
[2025-12-22 22:57:50.646] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 22:57:50.648] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:50.649] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:57:50.650] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:57:50.659] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 22:57:50.660] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 22:57:50.661] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:57:50.662] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 11.6953ms
[2025-12-22 22:57:50.664] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 22:57:50.665] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 18.7839ms
[2025-12-22 22:57:50.667] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:57:50.669] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:50.669] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.1345ms
[2025-12-22 22:57:50.671] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 22:57:50.673] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:50.674] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:57:50.675] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:57:50.682] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 22:57:50.684] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:57:50.685] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 8.8138ms
[2025-12-22 22:57:50.686] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 22:57:50.687] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 16.3559ms
[2025-12-22 22:57:50.690] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:57:50.692] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:50.693] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.9443ms
[2025-12-22 22:57:50.695] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 22:57:50.698] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:50.699] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:57:50.700] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 22:57:50.704] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 22:57:50.706] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:57:50.707] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.1269ms
[2025-12-22 22:57:50.708] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 22:57:50.709] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 14.2094ms
[2025-12-22 22:57:52.243] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 22:57:52.245] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Roles - null null
[2025-12-22 22:57:52.247] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:52.249] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:52.250] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 7.3379ms
[2025-12-22 22:57:52.251] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Roles - 204 null null 6.2347ms
[2025-12-22 22:57:52.253] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 22:57:52.254] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Roles - null null
[2025-12-22 22:57:52.261] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:52.264] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 22:57:52.265] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 22:57:52.266] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi)'
[2025-12-22 22:57:52.267] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.UserReadDto]]] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-22 22:57:52.270] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:57:52.271] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRoles", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.RoleReadDto]]] GetRoles(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.RolesController (RestaurantApi).
[2025-12-22 22:57:52.276] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[IsDeleted], [u0].[Notes], [u0].[PasswordHash], [u0].[RoleId], [u0].[UpdatedAt], [u0].[UpdatedBy], [u0].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM (
    SELECT [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-22 22:57:52.278] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 22:57:52.280] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:57:52.281] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 12.3888ms
[2025-12-22 22:57:52.282] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 22:57:52.284] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 30.9057ms
[2025-12-22 22:57:52.289] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Roles] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 22:57:52.302] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Roles] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
ORDER BY [r].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 22:57:52.307] [INF] [RestaurantAPI.Controllers.RolesController] Получен список ролей. Количество: 3, Всего: 3, Страница: 1
[2025-12-22 22:57:52.308] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.RoleReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 22:57:52.311] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi) in 37.717ms
[2025-12-22 22:57:52.313] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi)'
[2025-12-22 22:57:52.314] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Roles - 200 null application/json; charset=utf-8 60.5958ms
[2025-12-22 23:05:05.623] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - null null
[2025-12-22 23:05:05.626] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:05.627] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - 204 null null 3.2514ms
[2025-12-22 23:05:05.628] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - null null
[2025-12-22 23:05:05.632] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:05.633] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-22 23:05:05.634] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.OrderReadDto]]] GetMyOrders(Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:05:05.645] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_Value_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:05.650] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[UserId] = @__userId_Value_0 AND [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 23:05:05.652] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b". Количество: 2, Всего: 2, Страница: 1
[2025-12-22 23:05:05.654] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:05:05.655] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 19.0542ms
[2025-12-22 23:05:05.656] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-22 23:05:05.657] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders?page=1&pageSize=100 - 200 null application/json; charset=utf-8 28.2413ms
[2025-12-22 23:05:06.232] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:05:06.232] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:05:06.234] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:06.237] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:06.237] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 5.6943ms
[2025-12-22 23:05:06.238] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 6.0268ms
[2025-12-22 23:05:06.241] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:05:06.242] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:05:06.246] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:06.248] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:06.249] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:05:06.249] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:05:06.250] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:05:06.251] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:05:06.256] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:06.259] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:06.275] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:06.275] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (16ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:05:06.278] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:06.279] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:05:06.283] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:06.283] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 23:05:06.285] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:06.286] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 17100.00, Заказов: 4
[2025-12-22 23:05:06.289] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:05:06.290] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 37.9817ms
[2025-12-22 23:05:06.291] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:05:06.291] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:05:06.292] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 50.6891ms
[2025-12-22 23:05:06.293] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 23:05:06.296] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:05:06.297] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 43.5162ms
[2025-12-22 23:05:06.298] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:05:06.299] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 57.2068ms
[2025-12-22 23:05:06.302] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:05:06.302] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:05:06.305] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:06.306] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:06.307] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 5.0159ms
[2025-12-22 23:05:06.308] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 5.4836ms
[2025-12-22 23:05:06.309] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:05:06.309] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:05:06.314] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:06.315] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:06.316] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:05:06.317] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:05:06.317] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:05:06.318] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:05:06.323] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:05:06.323] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:05:06.325] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:05:06.326] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:05:06.328] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:06.329] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 9.7852ms
[2025-12-22 23:05:06.331] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:06.332] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:05:06.334] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:05:06.334] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 24.6132ms
[2025-12-22 23:05:06.335] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 17100.00, Заказов: 4
[2025-12-22 23:05:06.339] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:05:06.341] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.3736ms
[2025-12-22 23:05:06.342] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:05:06.343] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 33.4747ms
[2025-12-22 23:05:06.345] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:05:06.345] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:05:06.347] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:06.349] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:06.350] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 4.5848ms
[2025-12-22 23:05:06.350] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:05:06.351] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:05:06.354] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:05:06.356] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:06.358] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:05:06.358] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:05:06.358] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:05:06.361] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:05:06.363] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:05:06.364] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:06.365] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:05:06.367] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:06.367] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.8466ms
[2025-12-22 23:05:06.370] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:05:06.370] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:05:06.372] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 23:05:06.373] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 21.7051ms
[2025-12-22 23:05:06.374] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:05:06.378] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.8675ms
[2025-12-22 23:05:06.379] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:05:06.380] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 34.5863ms
[2025-12-22 23:05:06.383] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:05:06.383] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:05:06.385] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:06.387] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:06.388] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 5.0568ms
[2025-12-22 23:05:06.389] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 5.5847ms
[2025-12-22 23:05:06.390] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:05:06.390] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:05:06.395] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:06.397] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:06.397] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:05:06.398] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:05:06.399] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:05:06.400] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:05:06.403] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:05:06.405] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:05:06.406] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:05:06.408] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:05:06.409] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:06.411] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:06.412] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:06.414] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:06.415] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:05:06.417] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:05:06.420] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 15600.00, Заказов: 2
[2025-12-22 23:05:06.418] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 2300.00, Заказов: 3
[2025-12-22 23:05:06.421] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:05:06.422] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:05:06.423] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.0112ms
[2025-12-22 23:05:06.424] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 22.7531ms
[2025-12-22 23:05:06.425] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:05:06.426] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:05:06.427] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 36.6244ms
[2025-12-22 23:05:06.428] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 38.1007ms
[2025-12-22 23:05:06.431] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:05:06.435] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:06.435] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 4.2581ms
[2025-12-22 23:05:06.438] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:05:06.441] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:06.442] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:05:06.442] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:05:06.452] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 23:05:06.454] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 23:05:06.454] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:05:06.456] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 11.9444ms
[2025-12-22 23:05:06.457] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:05:06.457] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 19.5277ms
[2025-12-22 23:05:06.460] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:05:06.462] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:06.462] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.203ms
[2025-12-22 23:05:06.464] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:05:06.466] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:06.467] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:05:06.468] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:05:06.475] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 23:05:06.476] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:05:06.477] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 8.6884ms
[2025-12-22 23:05:06.479] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:05:06.480] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 15.8799ms
[2025-12-22 23:05:06.482] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 23:05:06.484] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:06.485] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.4133ms
[2025-12-22 23:05:06.486] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 23:05:06.490] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:06.491] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:05:06.492] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:05:06.495] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 23:05:06.497] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:05:06.498] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 4.483ms
[2025-12-22 23:05:06.499] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:05:06.499] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 13.1593ms
[2025-12-22 23:05:07.430] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 23:05:07.434] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:07.435] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 4.1868ms
[2025-12-22 23:05:07.437] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 23:05:07.441] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:07.442] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 23:05:07.443] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.UserReadDto]]] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-22 23:05:07.446] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:07.451] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[IsDeleted], [u0].[Notes], [u0].[PasswordHash], [u0].[RoleId], [u0].[UpdatedAt], [u0].[UpdatedBy], [u0].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM (
    SELECT [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-22 23:05:07.453] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 23:05:07.455] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:05:07.456] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 11.3473ms
[2025-12-22 23:05:07.458] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 23:05:07.458] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 21.5188ms
[2025-12-22 23:05:07.461] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 23:05:07.463] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:07.463] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 2.5585ms
[2025-12-22 23:05:07.465] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 23:05:07.467] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:07.468] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 23:05:07.469] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 23:05:07.472] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:07.477] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 23:05:07.479] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 23:05:07.480] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:05:07.481] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 10.845ms
[2025-12-22 23:05:07.482] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 23:05:07.483] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 18.2341ms
[2025-12-22 23:05:07.486] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:05:07.489] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:07.490] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 3.9561ms
[2025-12-22 23:05:07.492] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:05:07.494] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:07.495] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:05:07.496] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:05:07.498] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:07.504] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 23:05:07.506] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 4, Всего: 4, Страница: 1
[2025-12-22 23:05:07.507] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:05:07.508] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 10.5377ms
[2025-12-22 23:05:07.509] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:05:07.509] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 17.5703ms
[2025-12-22 23:05:14.563] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-22 23:05:14.565] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:14.566] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 2.801ms
[2025-12-22 23:05:14.567] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 187
[2025-12-22 23:05:14.570] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:14.571] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:05:14.572] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:05:14.577] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:14.580] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:14.582] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "c75a4aab-c6d6-47c8-b866-56ee05fc57b6", Notes: null, ItemsCount: 1
[2025-12-22 23:05:14.586] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 23:05:14.590] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:14.592] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e3b024ce-9139-4b59-a73b-9dfa81d65721", Quantity: 1, Notes: null
[2025-12-22 23:05:14.598] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p13='?' (DbType = Guid), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Orders] SET [Total] = @p12
OUTPUT 1
WHERE [Id] = @p13;
[2025-12-22 23:05:14.601] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "44bcee05-9ce0-4678-9f8c-c764a95cdeb0" создан пользователем "c75a4aab-c6d6-47c8-b866-56ee05fc57b6". Сумма: 100.00, Блюд: 1
[2025-12-22 23:05:14.602] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 23:05:14.604] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 30.6276ms
[2025-12-22 23:05:14.605] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:05:14.606] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 38.7088ms
[2025-12-22 23:05:14.608] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:05:14.610] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:14.611] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 2.8569ms
[2025-12-22 23:05:14.613] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:05:14.616] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:14.616] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:05:14.617] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:05:14.620] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:14.623] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 23:05:14.625] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 5, Всего: 5, Страница: 1
[2025-12-22 23:05:14.626] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:05:14.627] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 8.0719ms
[2025-12-22 23:05:14.628] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:05:14.629] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 16.2478ms
[2025-12-22 23:05:16.467] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/44bcee05-9ce0-4678-9f8c-c764a95cdeb0 - null null
[2025-12-22 23:05:16.469] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:16.470] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/44bcee05-9ce0-4678-9f8c-c764a95cdeb0 - 204 null null 2.4539ms
[2025-12-22 23:05:16.471] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/44bcee05-9ce0-4678-9f8c-c764a95cdeb0 - null null
[2025-12-22 23:05:16.474] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:16.474] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-22 23:05:16.475] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-22 23:05:16.479] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:16.484] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-22 23:05:16.486] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:05:16.487] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 10.4627ms
[2025-12-22 23:05:16.488] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-22 23:05:16.489] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/44bcee05-9ce0-4678-9f8c-c764a95cdeb0 - 200 null application/json; charset=utf-8 17.6441ms
[2025-12-22 23:05:25.826] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-22 23:05:25.828] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:25.829] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 2.4827ms
[2025-12-22 23:05:25.830] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 187
[2025-12-22 23:05:25.833] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:25.834] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:05:25.834] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:05:25.838] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:25.840] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:25.842] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "c75a4aab-c6d6-47c8-b866-56ee05fc57b6", Notes: null, ItemsCount: 1
[2025-12-22 23:05:25.844] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 23:05:25.846] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:25.848] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e3b024ce-9139-4b59-a73b-9dfa81d65721", Quantity: 2, Notes: null
[2025-12-22 23:05:25.850] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p13='?' (DbType = Guid), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Orders] SET [Total] = @p12
OUTPUT 1
WHERE [Id] = @p13;
[2025-12-22 23:05:25.852] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "7f3e0473-1e1a-4a67-b651-e181d3a70176" создан пользователем "c75a4aab-c6d6-47c8-b866-56ee05fc57b6". Сумма: 200.00, Блюд: 1
[2025-12-22 23:05:25.853] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 23:05:25.855] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 18.7637ms
[2025-12-22 23:05:25.855] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:05:25.856] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 26.2178ms
[2025-12-22 23:05:25.859] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:05:25.861] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:25.861] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 2.4299ms
[2025-12-22 23:05:25.863] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:05:25.865] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:25.866] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:05:25.867] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:05:25.869] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:25.872] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 23:05:25.874] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 23:05:25.875] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:05:25.876] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 8.0382ms
[2025-12-22 23:05:25.877] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:05:25.878] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 15.3073ms
[2025-12-22 23:05:27.673] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/7f3e0473-1e1a-4a67-b651-e181d3a70176 - null null
[2025-12-22 23:05:27.675] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:27.675] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/7f3e0473-1e1a-4a67-b651-e181d3a70176 - 204 null null 2.7939ms
[2025-12-22 23:05:27.677] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/7f3e0473-1e1a-4a67-b651-e181d3a70176 - null null
[2025-12-22 23:05:27.679] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:27.680] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-22 23:05:27.681] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-22 23:05:27.683] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:27.685] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-22 23:05:27.687] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:05:27.689] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 6.6573ms
[2025-12-22 23:05:27.690] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-22 23:05:27.692] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/7f3e0473-1e1a-4a67-b651-e181d3a70176 - 200 null application/json; charset=utf-8 15.049ms
[2025-12-22 23:05:39.184] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-22 23:05:39.186] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:39.188] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 3.663ms
[2025-12-22 23:05:39.190] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 871
[2025-12-22 23:05:39.194] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:39.195] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:05:39.196] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:05:39.198] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:39.201] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:39.203] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:39.206] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:39.208] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:39.210] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:39.212] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:39.214] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:39.215] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:39.217] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:39.219] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:39.221] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "c75a4aab-c6d6-47c8-b866-56ee05fc57b6", Notes: null, ItemsCount: 10
[2025-12-22 23:05:39.224] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 23:05:39.226] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:39.228] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "4df7b27a-19c4-4f59-9b32-edf28ca4467f", Quantity: 1, Notes: null
[2025-12-22 23:05:39.229] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:39.231] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e3b024ce-9139-4b59-a73b-9dfa81d65721", Quantity: 1, Notes: null
[2025-12-22 23:05:39.232] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:39.234] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e95fdeb0-af57-44bd-91ab-29e79dbad536", Quantity: 1, Notes: null
[2025-12-22 23:05:39.235] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:39.237] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "6df9d371-ed3e-43fc-a2f9-05f35cc8b457", Quantity: 1, Notes: null
[2025-12-22 23:05:39.239] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:39.242] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "506c83ad-20ac-42f9-a32e-16f2701bad37", Quantity: 1, Notes: null
[2025-12-22 23:05:39.243] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:39.245] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "c14b7bc6-a42f-4aa6-821e-694beb05a2eb", Quantity: 1, Notes: null
[2025-12-22 23:05:39.246] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:39.248] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "5a0ab935-6754-4bcb-b1ad-3b0d1aed65fc", Quantity: 1, Notes: null
[2025-12-22 23:05:39.249] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:39.251] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "0ca719ed-5bb4-4e18-a5f2-85f0957cb01c", Quantity: 1, Notes: null
[2025-12-22 23:05:39.252] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:39.254] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "70d3ef4c-a114-45ea-bb14-52d7adf21ccf", Quantity: 1, Notes: null
[2025-12-22 23:05:39.257] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:39.258] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e50cda14-92f5-44fc-b8f2-f4240ac9e0a9", Quantity: 1, Notes: null
[2025-12-22 23:05:39.276] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p12='?' (DbType = DateTime), @p13='?' (Size = 100), @p14='?' (DbType = DateTime), @p15='?' (Size = 100), @p16='?' (DbType = Guid), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (DbType = Guid), @p20='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (Size = 100), @p24='?' (DbType = DateTime), @p25='?' (Size = 100), @p26='?' (DbType = DateTime), @p27='?' (Size = 100), @p28='?' (DbType = Guid), @p29='?' (DbType = Boolean), @p30='?' (Size = 4000), @p31='?' (DbType = Guid), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = DateTime), @p35='?' (Size = 100), @p36='?' (DbType = DateTime), @p37='?' (Size = 100), @p38='?' (DbType = DateTime), @p39='?' (Size = 100), @p40='?' (DbType = Guid), @p41='?' (DbType = Boolean), @p42='?' (Size = 4000), @p43='?' (DbType = Guid), @p44='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p45='?' (DbType = Int32), @p46='?' (DbType = DateTime), @p47='?' (Size = 100), @p48='?' (DbType = DateTime), @p49='?' (Size = 100), @p50='?' (DbType = DateTime), @p51='?' (Size = 100), @p52='?' (DbType = Guid), @p53='?' (DbType = Boolean), @p54='?' (Size = 4000), @p55='?' (DbType = Guid), @p56='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p57='?' (DbType = Int32), @p58='?' (DbType = DateTime), @p59='?' (Size = 100), @p60='?' (DbType = DateTime), @p61='?' (Size = 100), @p62='?' (DbType = DateTime), @p63='?' (Size = 100), @p64='?' (DbType = Guid), @p65='?' (DbType = Boolean), @p66='?' (Size = 4000), @p67='?' (DbType = Guid), @p68='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p69='?' (DbType = Int32), @p70='?' (DbType = DateTime), @p71='?' (Size = 100), @p72='?' (DbType = DateTime), @p73='?' (Size = 100), @p74='?' (DbType = DateTime), @p75='?' (Size = 100), @p76='?' (DbType = Guid), @p77='?' (DbType = Boolean), @p78='?' (Size = 4000), @p79='?' (DbType = Guid), @p80='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p81='?' (DbType = Int32), @p82='?' (DbType = DateTime), @p83='?' (Size = 100), @p84='?' (DbType = DateTime), @p85='?' (Size = 100), @p86='?' (DbType = DateTime), @p87='?' (Size = 100), @p88='?' (DbType = Guid), @p89='?' (DbType = Boolean), @p90='?' (Size = 4000), @p91='?' (DbType = Guid), @p92='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p93='?' (DbType = Int32), @p94='?' (DbType = DateTime), @p95='?' (Size = 100), @p96='?' (DbType = DateTime), @p97='?' (Size = 100), @p98='?' (DbType = DateTime), @p99='?' (Size = 100), @p100='?' (DbType = Guid), @p101='?' (DbType = Boolean), @p102='?' (Size = 4000), @p103='?' (DbType = Guid), @p104='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p105='?' (DbType = Int32), @p106='?' (DbType = DateTime), @p107='?' (Size = 100), @p108='?' (DbType = DateTime), @p109='?' (Size = 100), @p110='?' (DbType = DateTime), @p111='?' (Size = 100), @p112='?' (DbType = Guid), @p113='?' (DbType = Boolean), @p114='?' (Size = 4000), @p115='?' (DbType = Guid), @p116='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p117='?' (DbType = Int32), @p118='?' (DbType = DateTime), @p119='?' (Size = 100), @p121='?' (DbType = Guid), @p120='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, 0),
(@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, 1),
(@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 2),
(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 3),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 4),
(@p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, 5),
(@p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, 6),
(@p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, 7),
(@p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, 8),
(@p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, 9)) AS i ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
VALUES (i.[CreatedAt], i.[CreatedBy], i.[DeletedAt], i.[DeletedBy], i.[DishId], i.[IsDeleted], i.[Notes], i.[OrderId], i.[Price], i.[Quantity], i.[UpdatedAt], i.[UpdatedBy])
OUTPUT INSERTED.[Id], i._Position;
UPDATE [Orders] SET [Total] = @p120
OUTPUT 1
WHERE [Id] = @p121;
[2025-12-22 23:05:39.279] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "c95e6e5f-f469-40cf-a887-d26b386fde5c" создан пользователем "c75a4aab-c6d6-47c8-b866-56ee05fc57b6". Сумма: 5920.00, Блюд: 10
[2025-12-22 23:05:39.280] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 23:05:39.281] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 84.5724ms
[2025-12-22 23:05:39.283] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:05:39.283] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 93.1706ms
[2025-12-22 23:05:39.288] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:05:39.290] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:39.291] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 2.8507ms
[2025-12-22 23:05:39.292] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:05:39.296] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:39.297] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:05:39.298] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:05:39.301] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:39.303] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 23:05:39.306] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 7, Всего: 7, Страница: 1
[2025-12-22 23:05:39.307] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:05:39.308] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 7.7761ms
[2025-12-22 23:05:39.308] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:05:39.309] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 16.7495ms
[2025-12-22 23:05:53.023] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-22 23:05:53.025] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:53.026] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 3.4357ms
[2025-12-22 23:05:53.027] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 871
[2025-12-22 23:05:53.030] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:53.031] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:05:53.032] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:05:53.034] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:53.037] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:53.040] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:53.043] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:53.045] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:53.047] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:53.049] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:53.051] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:53.053] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:53.055] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:53.057] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:53.059] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "c75a4aab-c6d6-47c8-b866-56ee05fc57b6", Notes: null, ItemsCount: 10
[2025-12-22 23:05:53.061] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 23:05:53.063] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:53.065] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "70d3ef4c-a114-45ea-bb14-52d7adf21ccf", Quantity: 1, Notes: null
[2025-12-22 23:05:53.066] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:53.068] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "0ca719ed-5bb4-4e18-a5f2-85f0957cb01c", Quantity: 1, Notes: null
[2025-12-22 23:05:53.070] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:53.071] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "5a0ab935-6754-4bcb-b1ad-3b0d1aed65fc", Quantity: 1, Notes: null
[2025-12-22 23:05:53.073] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:53.075] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "6df9d371-ed3e-43fc-a2f9-05f35cc8b457", Quantity: 1, Notes: null
[2025-12-22 23:05:53.077] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:53.079] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e8b4009a-2de3-4f24-9484-408e7d813d61", Quantity: 1, Notes: null
[2025-12-22 23:05:53.081] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:53.082] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "506c83ad-20ac-42f9-a32e-16f2701bad37", Quantity: 1, Notes: null
[2025-12-22 23:05:53.084] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:53.086] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e3b024ce-9139-4b59-a73b-9dfa81d65721", Quantity: 1, Notes: null
[2025-12-22 23:05:53.088] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:53.089] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e50cda14-92f5-44fc-b8f2-f4240ac9e0a9", Quantity: 1, Notes: null
[2025-12-22 23:05:53.091] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:53.092] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "4df7b27a-19c4-4f59-9b32-edf28ca4467f", Quantity: 1, Notes: null
[2025-12-22 23:05:53.094] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:53.095] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "adb0a8a2-a8c3-40bd-8f5b-26b9847ed9e7", Quantity: 1, Notes: null
[2025-12-22 23:05:53.099] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p12='?' (DbType = DateTime), @p13='?' (Size = 100), @p14='?' (DbType = DateTime), @p15='?' (Size = 100), @p16='?' (DbType = Guid), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (DbType = Guid), @p20='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (Size = 100), @p24='?' (DbType = DateTime), @p25='?' (Size = 100), @p26='?' (DbType = DateTime), @p27='?' (Size = 100), @p28='?' (DbType = Guid), @p29='?' (DbType = Boolean), @p30='?' (Size = 4000), @p31='?' (DbType = Guid), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = DateTime), @p35='?' (Size = 100), @p36='?' (DbType = DateTime), @p37='?' (Size = 100), @p38='?' (DbType = DateTime), @p39='?' (Size = 100), @p40='?' (DbType = Guid), @p41='?' (DbType = Boolean), @p42='?' (Size = 4000), @p43='?' (DbType = Guid), @p44='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p45='?' (DbType = Int32), @p46='?' (DbType = DateTime), @p47='?' (Size = 100), @p48='?' (DbType = DateTime), @p49='?' (Size = 100), @p50='?' (DbType = DateTime), @p51='?' (Size = 100), @p52='?' (DbType = Guid), @p53='?' (DbType = Boolean), @p54='?' (Size = 4000), @p55='?' (DbType = Guid), @p56='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p57='?' (DbType = Int32), @p58='?' (DbType = DateTime), @p59='?' (Size = 100), @p60='?' (DbType = DateTime), @p61='?' (Size = 100), @p62='?' (DbType = DateTime), @p63='?' (Size = 100), @p64='?' (DbType = Guid), @p65='?' (DbType = Boolean), @p66='?' (Size = 4000), @p67='?' (DbType = Guid), @p68='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p69='?' (DbType = Int32), @p70='?' (DbType = DateTime), @p71='?' (Size = 100), @p72='?' (DbType = DateTime), @p73='?' (Size = 100), @p74='?' (DbType = DateTime), @p75='?' (Size = 100), @p76='?' (DbType = Guid), @p77='?' (DbType = Boolean), @p78='?' (Size = 4000), @p79='?' (DbType = Guid), @p80='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p81='?' (DbType = Int32), @p82='?' (DbType = DateTime), @p83='?' (Size = 100), @p84='?' (DbType = DateTime), @p85='?' (Size = 100), @p86='?' (DbType = DateTime), @p87='?' (Size = 100), @p88='?' (DbType = Guid), @p89='?' (DbType = Boolean), @p90='?' (Size = 4000), @p91='?' (DbType = Guid), @p92='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p93='?' (DbType = Int32), @p94='?' (DbType = DateTime), @p95='?' (Size = 100), @p96='?' (DbType = DateTime), @p97='?' (Size = 100), @p98='?' (DbType = DateTime), @p99='?' (Size = 100), @p100='?' (DbType = Guid), @p101='?' (DbType = Boolean), @p102='?' (Size = 4000), @p103='?' (DbType = Guid), @p104='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p105='?' (DbType = Int32), @p106='?' (DbType = DateTime), @p107='?' (Size = 100), @p108='?' (DbType = DateTime), @p109='?' (Size = 100), @p110='?' (DbType = DateTime), @p111='?' (Size = 100), @p112='?' (DbType = Guid), @p113='?' (DbType = Boolean), @p114='?' (Size = 4000), @p115='?' (DbType = Guid), @p116='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p117='?' (DbType = Int32), @p118='?' (DbType = DateTime), @p119='?' (Size = 100), @p121='?' (DbType = Guid), @p120='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, 0),
(@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, 1),
(@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 2),
(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 3),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 4),
(@p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, 5),
(@p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, 6),
(@p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, 7),
(@p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, 8),
(@p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, 9)) AS i ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
VALUES (i.[CreatedAt], i.[CreatedBy], i.[DeletedAt], i.[DeletedBy], i.[DishId], i.[IsDeleted], i.[Notes], i.[OrderId], i.[Price], i.[Quantity], i.[UpdatedAt], i.[UpdatedBy])
OUTPUT INSERTED.[Id], i._Position;
UPDATE [Orders] SET [Total] = @p120
OUTPUT 1
WHERE [Id] = @p121;
[2025-12-22 23:05:53.102] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "54f1ae45-f4ef-4f01-b87a-5565a9db4a3e" создан пользователем "c75a4aab-c6d6-47c8-b866-56ee05fc57b6". Сумма: 5330.00, Блюд: 10
[2025-12-22 23:05:53.104] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 23:05:53.105] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 72.265ms
[2025-12-22 23:05:53.106] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:05:53.107] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 79.774ms
[2025-12-22 23:05:53.111] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:05:53.113] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:53.113] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 2.0349ms
[2025-12-22 23:05:53.115] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:05:53.118] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:05:53.119] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:05:53.120] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:05:53.123] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:05:53.125] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 23:05:53.128] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 8, Всего: 8, Страница: 1
[2025-12-22 23:05:53.129] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:05:53.131] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 9.4184ms
[2025-12-22 23:05:53.132] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:05:53.133] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 18.3879ms
[2025-12-22 23:08:47.326] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-22 23:08:47.328] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:08:47.329] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 2.7825ms
[2025-12-22 23:08:47.330] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 871
[2025-12-22 23:08:47.334] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:08:47.335] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:08:47.335] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:08:47.339] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:47.341] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:47.343] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:47.345] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:47.348] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:47.351] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:47.352] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:47.354] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:47.356] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:47.358] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:47.361] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:47.363] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "c75a4aab-c6d6-47c8-b866-56ee05fc57b6", Notes: null, ItemsCount: 10
[2025-12-22 23:08:47.365] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 23:08:47.368] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:47.370] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "6df9d371-ed3e-43fc-a2f9-05f35cc8b457", Quantity: 1, Notes: null
[2025-12-22 23:08:47.371] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:47.373] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "c14b7bc6-a42f-4aa6-821e-694beb05a2eb", Quantity: 1, Notes: null
[2025-12-22 23:08:47.375] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:47.377] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e3b024ce-9139-4b59-a73b-9dfa81d65721", Quantity: 1, Notes: null
[2025-12-22 23:08:47.378] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:47.380] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "4df7b27a-19c4-4f59-9b32-edf28ca4467f", Quantity: 1, Notes: null
[2025-12-22 23:08:47.382] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:47.384] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e8b4009a-2de3-4f24-9484-408e7d813d61", Quantity: 1, Notes: null
[2025-12-22 23:08:47.386] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:47.388] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e95fdeb0-af57-44bd-91ab-29e79dbad536", Quantity: 1, Notes: null
[2025-12-22 23:08:47.390] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:47.391] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e50cda14-92f5-44fc-b8f2-f4240ac9e0a9", Quantity: 1, Notes: null
[2025-12-22 23:08:47.393] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:47.394] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "bc75836d-c978-460e-b72a-7ad8d898f4db", Quantity: 1, Notes: null
[2025-12-22 23:08:47.396] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:47.398] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "adb0a8a2-a8c3-40bd-8f5b-26b9847ed9e7", Quantity: 1, Notes: null
[2025-12-22 23:08:47.400] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:47.402] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "70d3ef4c-a114-45ea-bb14-52d7adf21ccf", Quantity: 1, Notes: null
[2025-12-22 23:08:47.406] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p12='?' (DbType = DateTime), @p13='?' (Size = 100), @p14='?' (DbType = DateTime), @p15='?' (Size = 100), @p16='?' (DbType = Guid), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (DbType = Guid), @p20='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (Size = 100), @p24='?' (DbType = DateTime), @p25='?' (Size = 100), @p26='?' (DbType = DateTime), @p27='?' (Size = 100), @p28='?' (DbType = Guid), @p29='?' (DbType = Boolean), @p30='?' (Size = 4000), @p31='?' (DbType = Guid), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = DateTime), @p35='?' (Size = 100), @p36='?' (DbType = DateTime), @p37='?' (Size = 100), @p38='?' (DbType = DateTime), @p39='?' (Size = 100), @p40='?' (DbType = Guid), @p41='?' (DbType = Boolean), @p42='?' (Size = 4000), @p43='?' (DbType = Guid), @p44='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p45='?' (DbType = Int32), @p46='?' (DbType = DateTime), @p47='?' (Size = 100), @p48='?' (DbType = DateTime), @p49='?' (Size = 100), @p50='?' (DbType = DateTime), @p51='?' (Size = 100), @p52='?' (DbType = Guid), @p53='?' (DbType = Boolean), @p54='?' (Size = 4000), @p55='?' (DbType = Guid), @p56='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p57='?' (DbType = Int32), @p58='?' (DbType = DateTime), @p59='?' (Size = 100), @p60='?' (DbType = DateTime), @p61='?' (Size = 100), @p62='?' (DbType = DateTime), @p63='?' (Size = 100), @p64='?' (DbType = Guid), @p65='?' (DbType = Boolean), @p66='?' (Size = 4000), @p67='?' (DbType = Guid), @p68='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p69='?' (DbType = Int32), @p70='?' (DbType = DateTime), @p71='?' (Size = 100), @p72='?' (DbType = DateTime), @p73='?' (Size = 100), @p74='?' (DbType = DateTime), @p75='?' (Size = 100), @p76='?' (DbType = Guid), @p77='?' (DbType = Boolean), @p78='?' (Size = 4000), @p79='?' (DbType = Guid), @p80='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p81='?' (DbType = Int32), @p82='?' (DbType = DateTime), @p83='?' (Size = 100), @p84='?' (DbType = DateTime), @p85='?' (Size = 100), @p86='?' (DbType = DateTime), @p87='?' (Size = 100), @p88='?' (DbType = Guid), @p89='?' (DbType = Boolean), @p90='?' (Size = 4000), @p91='?' (DbType = Guid), @p92='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p93='?' (DbType = Int32), @p94='?' (DbType = DateTime), @p95='?' (Size = 100), @p96='?' (DbType = DateTime), @p97='?' (Size = 100), @p98='?' (DbType = DateTime), @p99='?' (Size = 100), @p100='?' (DbType = Guid), @p101='?' (DbType = Boolean), @p102='?' (Size = 4000), @p103='?' (DbType = Guid), @p104='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p105='?' (DbType = Int32), @p106='?' (DbType = DateTime), @p107='?' (Size = 100), @p108='?' (DbType = DateTime), @p109='?' (Size = 100), @p110='?' (DbType = DateTime), @p111='?' (Size = 100), @p112='?' (DbType = Guid), @p113='?' (DbType = Boolean), @p114='?' (Size = 4000), @p115='?' (DbType = Guid), @p116='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p117='?' (DbType = Int32), @p118='?' (DbType = DateTime), @p119='?' (Size = 100), @p121='?' (DbType = Guid), @p120='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, 0),
(@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, 1),
(@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 2),
(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 3),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 4),
(@p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, 5),
(@p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, 6),
(@p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, 7),
(@p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, 8),
(@p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, 9)) AS i ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
VALUES (i.[CreatedAt], i.[CreatedBy], i.[DeletedAt], i.[DeletedBy], i.[DishId], i.[IsDeleted], i.[Notes], i.[OrderId], i.[Price], i.[Quantity], i.[UpdatedAt], i.[UpdatedBy])
OUTPUT INSERTED.[Id], i._Position;
UPDATE [Orders] SET [Total] = @p120
OUTPUT 1
WHERE [Id] = @p121;
[2025-12-22 23:08:47.421] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "5969dd06-5d4b-4c8f-bf14-1b2c86340844" создан пользователем "c75a4aab-c6d6-47c8-b866-56ee05fc57b6". Сумма: 5660.00, Блюд: 10
[2025-12-22 23:08:47.423] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 23:08:47.424] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 87.4683ms
[2025-12-22 23:08:47.425] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:08:47.426] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 95.6745ms
[2025-12-22 23:08:47.429] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:08:47.430] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:08:47.431] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 2.2103ms
[2025-12-22 23:08:47.433] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:08:47.435] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:08:47.436] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:08:47.437] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:08:47.440] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:47.443] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 23:08:47.445] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 9, Всего: 9, Страница: 1
[2025-12-22 23:08:47.446] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:08:47.447] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 8.7673ms
[2025-12-22 23:08:47.448] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:08:47.450] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 16.2431ms
[2025-12-22 23:08:48.980] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/5969dd06-5d4b-4c8f-bf14-1b2c86340844 - null null
[2025-12-22 23:08:48.982] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:08:48.983] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/5969dd06-5d4b-4c8f-bf14-1b2c86340844 - 204 null null 3.2684ms
[2025-12-22 23:08:48.985] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/5969dd06-5d4b-4c8f-bf14-1b2c86340844 - null null
[2025-12-22 23:08:48.988] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:08:48.989] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-22 23:08:48.990] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-22 23:08:48.992] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:48.995] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-22 23:08:48.997] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:08:48.998] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 6.5745ms
[2025-12-22 23:08:49.000] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-22 23:08:49.001] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/5969dd06-5d4b-4c8f-bf14-1b2c86340844 - 200 null application/json; charset=utf-8 16.0874ms
[2025-12-22 23:08:58.861] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-22 23:08:58.864] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:08:58.866] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 4.2907ms
[2025-12-22 23:08:58.867] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 187
[2025-12-22 23:08:58.872] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:08:58.872] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:08:58.873] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:08:58.877] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:58.879] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:58.881] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "c75a4aab-c6d6-47c8-b866-56ee05fc57b6", Notes: null, ItemsCount: 1
[2025-12-22 23:08:58.885] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 23:08:58.887] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:58.889] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e3b024ce-9139-4b59-a73b-9dfa81d65721", Quantity: 1, Notes: null
[2025-12-22 23:08:58.891] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p13='?' (DbType = Guid), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Orders] SET [Total] = @p12
OUTPUT 1
WHERE [Id] = @p13;
[2025-12-22 23:08:58.906] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "1b5607be-7e15-4b11-9d32-dfe176458a94" создан пользователем "c75a4aab-c6d6-47c8-b866-56ee05fc57b6". Сумма: 100.00, Блюд: 1
[2025-12-22 23:08:58.907] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 23:08:58.909] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 34.5897ms
[2025-12-22 23:08:58.911] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:08:58.912] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 44.1246ms
[2025-12-22 23:08:58.914] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:08:58.916] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:08:58.917] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 2.8854ms
[2025-12-22 23:08:58.919] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:08:58.922] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:08:58.922] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:08:58.923] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:08:58.925] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:08:58.928] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 23:08:58.930] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 10, Всего: 10, Страница: 1
[2025-12-22 23:08:58.931] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:08:58.933] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 8.1506ms
[2025-12-22 23:08:58.934] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:08:58.935] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 16.0171ms
[2025-12-22 23:09:00.529] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/1b5607be-7e15-4b11-9d32-dfe176458a94 - null null
[2025-12-22 23:09:00.531] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:09:00.532] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/1b5607be-7e15-4b11-9d32-dfe176458a94 - 204 null null 2.9651ms
[2025-12-22 23:09:00.534] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/1b5607be-7e15-4b11-9d32-dfe176458a94 - null null
[2025-12-22 23:09:00.537] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:09:00.538] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-22 23:09:00.539] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-22 23:09:00.541] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:09:00.544] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-22 23:09:00.545] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:09:00.546] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 6.3193ms
[2025-12-22 23:09:00.547] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-22 23:09:00.548] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/1b5607be-7e15-4b11-9d32-dfe176458a94 - 200 null application/json; charset=utf-8 14.3768ms
[2025-12-22 23:10:44.537] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-22 23:10:44.539] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:44.540] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 2.5791ms
[2025-12-22 23:10:44.541] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 187
[2025-12-22 23:10:44.544] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:44.544] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:10:44.545] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:10:44.549] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:44.551] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:44.552] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "c75a4aab-c6d6-47c8-b866-56ee05fc57b6", Notes: null, ItemsCount: 1
[2025-12-22 23:10:44.554] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 23:10:44.556] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:44.558] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e50cda14-92f5-44fc-b8f2-f4240ac9e0a9", Quantity: 1, Notes: null
[2025-12-22 23:10:44.560] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p13='?' (DbType = Guid), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Orders] SET [Total] = @p12
OUTPUT 1
WHERE [Id] = @p13;
[2025-12-22 23:10:44.575] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "51ee574c-230b-4e77-b883-3a979be0399a" создан пользователем "c75a4aab-c6d6-47c8-b866-56ee05fc57b6". Сумма: 100.00, Блюд: 1
[2025-12-22 23:10:44.577] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 23:10:44.578] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 30.9112ms
[2025-12-22 23:10:44.579] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:10:44.580] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 39.3149ms
[2025-12-22 23:10:44.684] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 187
[2025-12-22 23:10:44.686] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:44.687] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:10:44.688] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:10:44.692] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:44.694] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:44.696] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "c75a4aab-c6d6-47c8-b866-56ee05fc57b6", Notes: null, ItemsCount: 1
[2025-12-22 23:10:44.699] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 23:10:44.701] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:44.703] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e3b024ce-9139-4b59-a73b-9dfa81d65721", Quantity: 1, Notes: null
[2025-12-22 23:10:44.705] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p13='?' (DbType = Guid), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Orders] SET [Total] = @p12
OUTPUT 1
WHERE [Id] = @p13;
[2025-12-22 23:10:44.708] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "2abd5596-0639-4935-8a8e-94e8093b5f6b" создан пользователем "c75a4aab-c6d6-47c8-b866-56ee05fc57b6". Сумма: 100.00, Блюд: 1
[2025-12-22 23:10:44.710] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 23:10:44.711] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 21.2737ms
[2025-12-22 23:10:44.712] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:10:44.713] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 28.8326ms
[2025-12-22 23:10:44.816] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 187
[2025-12-22 23:10:44.818] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:44.819] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:10:44.820] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:10:44.823] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:44.825] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:44.827] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "c75a4aab-c6d6-47c8-b866-56ee05fc57b6", Notes: null, ItemsCount: 1
[2025-12-22 23:10:44.830] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 23:10:44.833] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:44.835] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e3b024ce-9139-4b59-a73b-9dfa81d65721", Quantity: 1, Notes: null
[2025-12-22 23:10:44.837] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p13='?' (DbType = Guid), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Orders] SET [Total] = @p12
OUTPUT 1
WHERE [Id] = @p13;
[2025-12-22 23:10:44.841] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "21e46073-3867-4b1a-9416-4ddf604ba7b2" создан пользователем "c75a4aab-c6d6-47c8-b866-56ee05fc57b6". Сумма: 100.00, Блюд: 1
[2025-12-22 23:10:44.842] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 23:10:44.843] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 22.3153ms
[2025-12-22 23:10:44.845] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:10:44.846] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 29.7887ms
[2025-12-22 23:10:44.954] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 187
[2025-12-22 23:10:44.956] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:44.957] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:10:44.957] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:10:44.960] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:44.962] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:44.964] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "c75a4aab-c6d6-47c8-b866-56ee05fc57b6", Notes: null, ItemsCount: 1
[2025-12-22 23:10:44.966] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 23:10:44.968] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:44.970] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e50cda14-92f5-44fc-b8f2-f4240ac9e0a9", Quantity: 1, Notes: null
[2025-12-22 23:10:44.972] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p13='?' (DbType = Guid), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Orders] SET [Total] = @p12
OUTPUT 1
WHERE [Id] = @p13;
[2025-12-22 23:10:44.974] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "9a109ece-e065-4600-8be7-a719b74f305d" создан пользователем "c75a4aab-c6d6-47c8-b866-56ee05fc57b6". Сумма: 100.00, Блюд: 1
[2025-12-22 23:10:44.975] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 23:10:44.976] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 18.028ms
[2025-12-22 23:10:44.977] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:10:44.978] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 23.9583ms
[2025-12-22 23:10:45.082] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 187
[2025-12-22 23:10:45.084] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:45.085] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:10:45.086] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:10:45.089] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:45.091] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:45.092] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "c75a4aab-c6d6-47c8-b866-56ee05fc57b6", Notes: null, ItemsCount: 1
[2025-12-22 23:10:45.094] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 23:10:45.096] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:45.098] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e50cda14-92f5-44fc-b8f2-f4240ac9e0a9", Quantity: 1, Notes: null
[2025-12-22 23:10:45.100] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p13='?' (DbType = Guid), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Orders] SET [Total] = @p12
OUTPUT 1
WHERE [Id] = @p13;
[2025-12-22 23:10:45.102] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "a3fbcf75-9af1-4dae-acee-d95ca712e6b7" создан пользователем "c75a4aab-c6d6-47c8-b866-56ee05fc57b6". Сумма: 100.00, Блюд: 1
[2025-12-22 23:10:45.104] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 23:10:45.105] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 17.5551ms
[2025-12-22 23:10:45.106] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:10:45.106] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 24.1246ms
[2025-12-22 23:10:45.109] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:10:45.111] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:45.112] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 2.639ms
[2025-12-22 23:10:45.114] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:10:45.116] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:45.117] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:10:45.118] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:10:45.120] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:45.124] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 23:10:45.126] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 15, Всего: 15, Страница: 1
[2025-12-22 23:10:45.127] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:10:45.129] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 9.6174ms
[2025-12-22 23:10:45.130] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:10:45.131] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 17.2543ms
[2025-12-22 23:10:51.286] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 23:10:51.287] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories - null null
[2025-12-22 23:10:51.288] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Ingredients?pageSize=1000 - null null
[2025-12-22 23:10:51.288] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.290] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.293] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.294] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 7.9987ms
[2025-12-22 23:10:51.295] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories - 204 null null 7.1535ms
[2025-12-22 23:10:51.297] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Ingredients?pageSize=1000 - 204 null null 8.7826ms
[2025-12-22 23:10:51.297] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 23:10:51.298] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories - null null
[2025-12-22 23:10:51.299] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - null null
[2025-12-22 23:10:51.310] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.313] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.316] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.317] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 23:10:51.318] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 23:10:51.319] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-22 23:10:51.321] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 23:10:51.321] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.CategoryReadDto]]] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-22 23:10:51.325] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetIngredients", controller = "Ingredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.IngredientReadDto]]] GetIngredients(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.IngredientsController (RestaurantApi).
[2025-12-22 23:10:51.325] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:51.332] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 23:10:51.334] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:51.335] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 23:10:51.338] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:10:51.338] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:51.339] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 23:10:51.340] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 15.6288ms
[2025-12-22 23:10:51.344] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 23:10:51.345] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 23:10:51.346] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:10:51.348] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 50.4531ms
[2025-12-22 23:10:51.349] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 23.8647ms
[2025-12-22 23:10:51.354] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[CreatedAt], [i].[CreatedBy], [i].[DeletedAt], [i].[DeletedBy], [i].[IsDeleted], [i].[Name], [i].[Notes], [i].[UpdatedAt], [i].[UpdatedBy]
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
ORDER BY [i].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 23:10:51.354] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 23:10:51.356] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories - 200 null application/json; charset=utf-8 58.3485ms
[2025-12-22 23:10:51.380] [INF] [RestaurantAPI.Controllers.IngredientsController] Получен список ингредиентов. Количество: 24, Всего: 24, Страница: 1
[2025-12-22 23:10:51.382] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.IngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:10:51.387] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi) in 59.5512ms
[2025-12-22 23:10:51.388] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-22 23:10:51.389] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - 200 null application/json; charset=utf-8 90.2866ms
[2025-12-22 23:10:51.731] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:10:51.732] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:10:51.734] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.736] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.737] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 5.5082ms
[2025-12-22 23:10:51.738] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 5.6904ms
[2025-12-22 23:10:51.739] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:10:51.741] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:10:51.744] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.747] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.748] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:10:51.749] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:10:51.749] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:10:51.750] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:10:51.753] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:51.754] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:10:51.755] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:51.756] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:10:51.758] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:51.759] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:51.761] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:51.762] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:51.765] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 23:10:51.767] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:10:51.767] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 34910.00, Заказов: 15
[2025-12-22 23:10:51.769] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 23:10:51.770] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:10:51.770] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:10:51.771] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.7425ms
[2025-12-22 23:10:51.772] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.4097ms
[2025-12-22 23:10:51.773] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:10:51.774] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:10:51.775] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 35.142ms
[2025-12-22 23:10:51.775] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 34.6649ms
[2025-12-22 23:10:51.779] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:10:51.779] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:10:51.783] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.785] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.785] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 6.2099ms
[2025-12-22 23:10:51.786] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 6.7634ms
[2025-12-22 23:10:51.788] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:10:51.788] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:10:51.792] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.794] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.795] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:10:51.795] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:10:51.796] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:10:51.797] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:10:51.801] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:10:51.801] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:10:51.802] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:10:51.804] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:10:51.805] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 6.0125ms
[2025-12-22 23:10:51.807] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:51.807] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:10:51.809] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:51.809] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 20.9431ms
[2025-12-22 23:10:51.812] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:10:51.815] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 34910.00, Заказов: 15
[2025-12-22 23:10:51.816] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:10:51.817] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 16.7388ms
[2025-12-22 23:10:51.818] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:10:51.819] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 30.8317ms
[2025-12-22 23:10:51.821] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:10:51.822] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:10:51.824] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.825] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.826] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 4.6233ms
[2025-12-22 23:10:51.827] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:10:51.827] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:10:51.830] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:10:51.832] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.834] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:10:51.835] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:10:51.835] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:10:51.838] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:10:51.840] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:10:51.841] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:51.842] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:10:51.844] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:51.845] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.9767ms
[2025-12-22 23:10:51.847] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:10:51.847] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:10:51.849] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 0.00, Заказов: 0
[2025-12-22 23:10:51.849] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 21.7552ms
[2025-12-22 23:10:51.850] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:10:51.853] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.4584ms
[2025-12-22 23:10:51.854] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:10:51.855] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 33.2864ms
[2025-12-22 23:10:51.858] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:10:51.858] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:10:51.860] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.862] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.862] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 4.5527ms
[2025-12-22 23:10:51.863] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 5.0037ms
[2025-12-22 23:10:51.865] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:10:51.865] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:10:51.870] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.872] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.872] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:10:51.873] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:10:51.873] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:10:51.874] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:10:51.877] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:10:51.878] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:10:51.879] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:10:51.881] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:10:51.882] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:51.884] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:51.885] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:51.886] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:10:51.889] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:10:51.890] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:10:51.891] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 19510.00, Заказов: 8
[2025-12-22 23:10:51.892] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 27150.00, Заказов: 6
[2025-12-22 23:10:51.893] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:10:51.894] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:10:51.895] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.1743ms
[2025-12-22 23:10:51.896] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 18.9961ms
[2025-12-22 23:10:51.897] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:10:51.898] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:10:51.899] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 33.9448ms
[2025-12-22 23:10:51.900] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 34.5437ms
[2025-12-22 23:10:51.902] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:10:51.906] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.907] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 4.8635ms
[2025-12-22 23:10:51.909] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:10:51.911] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.912] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:10:51.913] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:10:51.917] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 23:10:51.919] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 23:10:51.919] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:10:51.921] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 6.1894ms
[2025-12-22 23:10:51.922] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:10:51.922] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 13.6066ms
[2025-12-22 23:10:51.925] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:10:51.927] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.927] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.4835ms
[2025-12-22 23:10:51.929] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:10:51.932] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.933] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:10:51.934] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:10:51.937] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 23:10:51.939] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:10:51.940] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 4.152ms
[2025-12-22 23:10:51.941] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:10:51.941] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 12.6311ms
[2025-12-22 23:10:51.944] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 23:10:51.946] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.947] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.6899ms
[2025-12-22 23:10:51.949] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 23:10:51.952] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:10:51.953] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:10:51.954] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:10:51.956] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 23:10:51.958] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:10:51.959] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 4.0151ms
[2025-12-22 23:10:51.960] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:10:51.961] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 12.0983ms
[2025-12-22 23:11:02.951] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 23:11:02.954] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:02.955] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 3.2456ms
[2025-12-22 23:11:02.956] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 23:11:02.960] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:02.961] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 23:11:02.963] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.UserReadDto]]] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-22 23:11:02.966] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:02.969] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[IsDeleted], [u0].[Notes], [u0].[PasswordHash], [u0].[RoleId], [u0].[UpdatedAt], [u0].[UpdatedBy], [u0].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM (
    SELECT [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-22 23:11:02.971] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 23:11:02.972] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:11:02.973] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 8.5961ms
[2025-12-22 23:11:02.974] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 23:11:02.975] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 18.3984ms
[2025-12-22 23:11:02.977] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 23:11:02.979] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:02.979] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 2.8205ms
[2025-12-22 23:11:02.982] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 23:11:02.984] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:02.985] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 23:11:02.985] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 23:11:02.988] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:02.990] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 23:11:02.992] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 23:11:02.993] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:11:02.994] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 7.702ms
[2025-12-22 23:11:02.996] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 23:11:02.997] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 14.6978ms
[2025-12-22 23:11:03.000] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:11:03.002] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:03.002] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 2.0683ms
[2025-12-22 23:11:03.004] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:11:03.006] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:03.007] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:11:03.008] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:11:03.011] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:03.014] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 23:11:03.016] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 15, Всего: 15, Страница: 1
[2025-12-22 23:11:03.017] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:11:03.018] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 8.1563ms
[2025-12-22 23:11:03.019] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:11:03.020] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 15.9855ms
[2025-12-22 23:11:11.175] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-22 23:11:11.177] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:11.177] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 2.2694ms
[2025-12-22 23:11:11.179] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 341
[2025-12-22 23:11:11.182] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:11.182] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:11:11.183] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:11:11.186] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:11.188] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:11.190] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:11.192] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:11.193] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "c75a4aab-c6d6-47c8-b866-56ee05fc57b6", Notes: null, ItemsCount: 3
[2025-12-22 23:11:11.195] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 23:11:11.197] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:11.199] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "6df9d371-ed3e-43fc-a2f9-05f35cc8b457", Quantity: 10, Notes: null
[2025-12-22 23:11:11.200] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:11.201] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "bc75836d-c978-460e-b72a-7ad8d898f4db", Quantity: 12, Notes: null
[2025-12-22 23:11:11.203] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:11.204] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "adb0a8a2-a8c3-40bd-8f5b-26b9847ed9e7", Quantity: 1, Notes: null
[2025-12-22 23:11:11.213] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p12='?' (DbType = DateTime), @p13='?' (Size = 100), @p14='?' (DbType = DateTime), @p15='?' (Size = 100), @p16='?' (DbType = Guid), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (DbType = Guid), @p20='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (Size = 100), @p24='?' (DbType = DateTime), @p25='?' (Size = 100), @p26='?' (DbType = DateTime), @p27='?' (Size = 100), @p28='?' (DbType = Guid), @p29='?' (DbType = Boolean), @p30='?' (Size = 4000), @p31='?' (DbType = Guid), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = DateTime), @p35='?' (Size = 100), @p37='?' (DbType = Guid), @p36='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, 0),
(@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, 1),
(@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 2)) AS i ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
VALUES (i.[CreatedAt], i.[CreatedBy], i.[DeletedAt], i.[DeletedBy], i.[DishId], i.[IsDeleted], i.[Notes], i.[OrderId], i.[Price], i.[Quantity], i.[UpdatedAt], i.[UpdatedBy])
OUTPUT INSERTED.[Id], i._Position;
UPDATE [Orders] SET [Total] = @p36
OUTPUT 1
WHERE [Id] = @p37;
[2025-12-22 23:11:11.228] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "12a64119-aac6-424c-96c0-f0c5609476ad" создан пользователем "c75a4aab-c6d6-47c8-b866-56ee05fc57b6". Сумма: 13050.00, Блюд: 3
[2025-12-22 23:11:11.230] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 23:11:11.231] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 46.8165ms
[2025-12-22 23:11:11.232] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:11:11.233] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 53.9414ms
[2025-12-22 23:11:11.235] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:11:11.237] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:11.238] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 2.2681ms
[2025-12-22 23:11:11.239] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:11:11.242] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:11.242] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:11:11.243] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:11:11.245] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:11.248] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 23:11:11.250] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 16, Всего: 16, Страница: 1
[2025-12-22 23:11:11.251] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:11:11.252] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 7.8312ms
[2025-12-22 23:11:11.253] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:11:11.254] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 15.2298ms
[2025-12-22 23:11:18.656] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:11:18.659] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:18.660] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:11:18.661] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 4.397ms
[2025-12-22 23:11:18.663] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:18.663] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:11:18.666] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 5.8394ms
[2025-12-22 23:11:18.668] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:11:18.668] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:18.674] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:18.675] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:11:18.675] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:11:18.676] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:11:18.677] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:11:18.681] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:18.682] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:11:18.683] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:18.685] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:11:18.686] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:18.687] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:18.689] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:18.690] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:18.692] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 23:11:18.693] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:11:18.694] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 47960.00, Заказов: 16
[2025-12-22 23:11:18.696] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:11:18.697] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:11:18.698] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:11:18.699] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.2811ms
[2025-12-22 23:11:18.700] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.9473ms
[2025-12-22 23:11:18.701] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:11:18.702] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:11:18.703] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 39.7295ms
[2025-12-22 23:11:18.704] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 35.7773ms
[2025-12-22 23:11:18.706] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:11:18.707] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:11:18.710] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:18.712] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:18.712] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 5.776ms
[2025-12-22 23:11:18.713] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 6.307ms
[2025-12-22 23:11:18.715] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:11:18.715] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:11:18.720] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:18.722] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:18.723] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:11:18.724] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:11:18.724] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:11:18.725] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:11:18.728] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:11:18.730] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:11:18.730] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:11:18.731] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 4.9956ms
[2025-12-22 23:11:18.734] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:11:18.734] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:11:18.735] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 19.7091ms
[2025-12-22 23:11:18.737] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:18.741] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:18.742] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:11:18.744] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 34910.00, Заказов: 15
[2025-12-22 23:11:18.745] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:11:18.746] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 18.1001ms
[2025-12-22 23:11:18.748] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:11:18.749] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 33.2705ms
[2025-12-22 23:11:18.751] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:11:18.751] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:11:18.753] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:18.755] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:18.755] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 4.1632ms
[2025-12-22 23:11:18.756] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:11:18.756] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:11:18.758] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:11:18.760] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:18.762] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:11:18.762] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:11:18.763] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:11:18.765] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:11:18.767] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:11:18.768] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:18.769] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:11:18.771] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:18.771] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.827ms
[2025-12-22 23:11:18.773] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:11:18.774] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:11:18.775] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:11:18.776] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 19.4097ms
[2025-12-22 23:11:18.777] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:11:18.781] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.6822ms
[2025-12-22 23:11:18.782] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:11:18.782] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 31.2568ms
[2025-12-22 23:11:18.786] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:11:18.786] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:11:18.787] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:18.789] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:18.789] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 3.6671ms
[2025-12-22 23:11:18.790] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 4.2273ms
[2025-12-22 23:11:18.792] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:11:18.792] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:11:18.796] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:18.798] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:18.799] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:11:18.800] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:11:18.800] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:11:18.801] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:11:18.804] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:11:18.805] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:11:18.807] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:11:18.808] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:11:18.810] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:18.811] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:18.813] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:18.815] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:18.817] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:11:18.818] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:11:18.819] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 19510.00, Заказов: 8
[2025-12-22 23:11:18.820] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 27150.00, Заказов: 6
[2025-12-22 23:11:18.821] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:11:18.822] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:11:18.823] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.1567ms
[2025-12-22 23:11:18.824] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.3865ms
[2025-12-22 23:11:18.824] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:11:18.825] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:11:18.826] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 34.4539ms
[2025-12-22 23:11:18.827] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 34.5351ms
[2025-12-22 23:11:18.830] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:11:18.833] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:18.834] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 4.2735ms
[2025-12-22 23:11:18.836] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:11:18.838] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:18.839] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:11:18.840] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:11:18.844] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 23:11:18.845] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 23:11:18.846] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:11:18.847] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 6.2745ms
[2025-12-22 23:11:18.849] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:11:18.849] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 13.5157ms
[2025-12-22 23:11:18.853] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:11:18.854] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:18.855] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.2342ms
[2025-12-22 23:11:18.856] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:11:18.860] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:18.861] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:11:18.861] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:11:18.864] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 23:11:18.866] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:11:18.868] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 4.9053ms
[2025-12-22 23:11:18.869] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:11:18.870] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 13.1583ms
[2025-12-22 23:11:18.873] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 23:11:18.874] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:18.875] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.4327ms
[2025-12-22 23:11:18.876] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 23:11:18.879] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:18.880] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:11:18.881] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:11:18.884] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 23:11:18.886] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:11:18.887] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 4.687ms
[2025-12-22 23:11:18.889] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:11:18.889] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 13.1742ms
[2025-12-22 23:11:27.312] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Cart - null null
[2025-12-22 23:11:27.340] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:27.341] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Cart - 204 null null 29.0553ms
[2025-12-22 23:11:27.344] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Cart - null null
[2025-12-22 23:11:27.347] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:27.348] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi)'
[2025-12-22 23:11:27.349] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.CartReadDto]] GetCart() on controller RestaurantAPI.Controllers.CartController (RestaurantApi).
[2025-12-22 23:11:27.359] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__userId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c1].[Id], [c1].[CreatedAt], [c1].[UpdatedAt], [c1].[UserId], [s].[Id], [s].[CartId], [s].[CreatedAt], [s].[DishId], [s].[Notes], [s].[Quantity], [s].[UpdatedAt], [s].[Id0], [s].[CategoryId], [s].[CreatedAt0], [s].[CreatedBy], [s].[DeletedAt], [s].[DeletedBy], [s].[Description], [s].[IsDeleted], [s].[Name], [s].[Notes0], [s].[Price], [s].[UpdatedAt0], [s].[UpdatedBy]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[UpdatedAt], [c].[UserId]
    FROM [Carts] AS [c]
    WHERE [c].[UserId] = @__userId_Value_0
) AS [c1]
LEFT JOIN (
    SELECT [c0].[Id], [c0].[CartId], [c0].[CreatedAt], [c0].[DishId], [c0].[Notes], [c0].[Quantity], [c0].[UpdatedAt], [d].[Id] AS [Id0], [d].[CategoryId], [d].[CreatedAt] AS [CreatedAt0], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes] AS [Notes0], [d].[Price], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UpdatedBy]
    FROM [CartItems] AS [c0]
    INNER JOIN [Dishes] AS [d] ON [c0].[DishId] = [d].[Id]
) AS [s] ON [c1].[Id] = [s].[CartId]
ORDER BY [c1].[Id], [s].[Id]
[2025-12-22 23:11:27.362] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.DTOs.CartReadDto'.
[2025-12-22 23:11:27.366] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi) in 14.6345ms
[2025-12-22 23:11:27.367] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CartController.GetCart (RestaurantApi)'
[2025-12-22 23:11:27.368] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Cart - 200 null application/json; charset=utf-8 24.6465ms
[2025-12-22 23:11:27.397] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:11:27.398] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:11:27.400] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:27.402] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:27.403] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 5.456ms
[2025-12-22 23:11:27.403] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 5.5503ms
[2025-12-22 23:11:27.406] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:11:27.406] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:11:27.411] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:27.413] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:27.413] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:11:27.414] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:11:27.414] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:11:27.415] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:11:27.418] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:27.419] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:11:27.420] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:27.422] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:11:27.423] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:27.425] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:27.426] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:27.428] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:27.431] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 23:11:27.432] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:11:27.433] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 47960.00, Заказов: 16
[2025-12-22 23:11:27.434] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:11:27.435] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:11:27.436] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:11:27.437] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.3857ms
[2025-12-22 23:11:27.438] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.3201ms
[2025-12-22 23:11:27.440] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:11:27.440] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:11:27.441] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 35.3928ms
[2025-12-22 23:11:27.442] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 35.8395ms
[2025-12-22 23:11:27.445] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:11:27.446] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:11:27.448] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:27.450] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:27.451] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 5.5359ms
[2025-12-22 23:11:27.452] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 5.9865ms
[2025-12-22 23:11:27.454] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:11:27.455] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:11:27.459] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:27.461] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:27.462] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:11:27.463] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:11:27.463] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:11:27.464] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:11:27.467] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:11:27.468] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:11:27.469] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:11:27.471] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:11:27.472] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 6.3285ms
[2025-12-22 23:11:27.474] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:27.474] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:11:27.477] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:27.477] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 22.9324ms
[2025-12-22 23:11:27.480] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:11:27.483] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 34910.00, Заказов: 15
[2025-12-22 23:11:27.484] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:11:27.486] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 18.8074ms
[2025-12-22 23:11:27.487] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:11:27.487] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 32.4327ms
[2025-12-22 23:11:27.490] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:11:27.490] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:11:27.492] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:27.494] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:27.494] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 4.638ms
[2025-12-22 23:11:27.495] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:11:27.497] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:11:27.499] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:11:27.501] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:27.503] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:11:27.503] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:11:27.504] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:11:27.506] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:11:27.508] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:11:27.509] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:27.510] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:11:27.513] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:27.513] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 6.4272ms
[2025-12-22 23:11:27.516] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:11:27.516] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:11:27.517] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:11:27.518] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 21.6437ms
[2025-12-22 23:11:27.519] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:11:27.522] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.113ms
[2025-12-22 23:11:27.523] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:11:27.524] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 33.6438ms
[2025-12-22 23:11:27.527] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:11:27.527] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:11:27.529] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:27.531] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:27.532] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 4.7278ms
[2025-12-22 23:11:27.532] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 5.4323ms
[2025-12-22 23:11:27.534] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:11:27.535] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:11:27.539] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:27.541] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:27.542] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:11:27.542] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:11:27.543] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:11:27.544] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:11:27.547] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:11:27.548] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:11:27.550] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:11:27.551] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:11:27.553] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:27.554] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:27.555] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:27.557] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:27.559] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:11:27.561] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:11:27.562] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 27150.00, Заказов: 6
[2025-12-22 23:11:27.563] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 19510.00, Заказов: 8
[2025-12-22 23:11:27.564] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:11:27.565] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:11:27.566] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.487ms
[2025-12-22 23:11:27.567] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.1636ms
[2025-12-22 23:11:27.568] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:11:27.569] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:11:27.570] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 35.3707ms
[2025-12-22 23:11:27.571] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 35.5997ms
[2025-12-22 23:11:27.573] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:11:27.577] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:27.578] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 4.3209ms
[2025-12-22 23:11:27.580] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:11:27.583] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:27.584] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:11:27.584] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:11:27.588] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 23:11:27.590] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 23:11:27.591] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:11:27.592] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 6.1748ms
[2025-12-22 23:11:27.593] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:11:27.594] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 13.7274ms
[2025-12-22 23:11:27.598] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:11:27.600] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:27.601] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.9464ms
[2025-12-22 23:11:27.603] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:11:27.605] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:27.606] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:11:27.607] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:11:27.610] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 23:11:27.612] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:11:27.613] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 4.9035ms
[2025-12-22 23:11:27.614] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:11:27.615] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 12.1841ms
[2025-12-22 23:11:27.619] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 23:11:27.621] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:27.621] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.4484ms
[2025-12-22 23:11:27.623] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 23:11:27.625] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:27.626] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:11:27.627] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:11:27.630] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 23:11:27.632] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:11:27.633] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 4.7586ms
[2025-12-22 23:11:27.634] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:11:27.635] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 12.704ms
[2025-12-22 23:11:39.103] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 23:11:39.105] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:39.106] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 3.4507ms
[2025-12-22 23:11:39.108] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 23:11:39.113] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:39.114] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 23:11:39.115] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.UserReadDto]]] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-22 23:11:39.118] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:39.121] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[IsDeleted], [u0].[Notes], [u0].[PasswordHash], [u0].[RoleId], [u0].[UpdatedAt], [u0].[UpdatedBy], [u0].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM (
    SELECT [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-22 23:11:39.123] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 23:11:39.123] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:11:39.124] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 7.6835ms
[2025-12-22 23:11:39.125] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 23:11:39.126] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 18.0555ms
[2025-12-22 23:11:39.128] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 23:11:39.132] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:39.132] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 4.0629ms
[2025-12-22 23:11:39.134] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 23:11:39.137] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:39.137] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 23:11:39.138] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 23:11:39.141] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:39.143] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 23:11:39.145] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 23:11:39.147] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:11:39.148] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 8.0652ms
[2025-12-22 23:11:39.149] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 23:11:39.150] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 15.7443ms
[2025-12-22 23:11:39.153] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:11:39.155] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:39.155] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 2.4006ms
[2025-12-22 23:11:39.157] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:11:39.160] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:11:39.160] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:11:39.161] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:11:39.164] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:11:39.167] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 23:11:39.169] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 16, Всего: 16, Страница: 1
[2025-12-22 23:11:39.170] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:11:39.171] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 8.0389ms
[2025-12-22 23:11:39.172] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:11:39.173] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 15.7533ms
[2025-12-22 23:12:00.285] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-22 23:12:00.287] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:00.288] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 2.4349ms
[2025-12-22 23:12:00.289] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 418
[2025-12-22 23:12:00.292] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:00.293] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:12:00.294] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:12:00.299] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:00.301] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:00.303] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:00.305] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:00.309] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:00.311] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "c75a4aab-c6d6-47c8-b866-56ee05fc57b6", Notes: null, ItemsCount: 4
[2025-12-22 23:12:00.315] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 23:12:00.318] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:00.320] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e50cda14-92f5-44fc-b8f2-f4240ac9e0a9", Quantity: 15, Notes: null
[2025-12-22 23:12:00.322] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:00.323] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e3b024ce-9139-4b59-a73b-9dfa81d65721", Quantity: 10, Notes: null
[2025-12-22 23:12:00.325] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:00.327] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "bc75836d-c978-460e-b72a-7ad8d898f4db", Quantity: 10, Notes: null
[2025-12-22 23:12:00.328] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:00.330] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "adb0a8a2-a8c3-40bd-8f5b-26b9847ed9e7", Quantity: 8, Notes: null
[2025-12-22 23:12:00.340] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p12='?' (DbType = DateTime), @p13='?' (Size = 100), @p14='?' (DbType = DateTime), @p15='?' (Size = 100), @p16='?' (DbType = Guid), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (DbType = Guid), @p20='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (Size = 100), @p24='?' (DbType = DateTime), @p25='?' (Size = 100), @p26='?' (DbType = DateTime), @p27='?' (Size = 100), @p28='?' (DbType = Guid), @p29='?' (DbType = Boolean), @p30='?' (Size = 4000), @p31='?' (DbType = Guid), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = DateTime), @p35='?' (Size = 100), @p36='?' (DbType = DateTime), @p37='?' (Size = 100), @p38='?' (DbType = DateTime), @p39='?' (Size = 100), @p40='?' (DbType = Guid), @p41='?' (DbType = Boolean), @p42='?' (Size = 4000), @p43='?' (DbType = Guid), @p44='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p45='?' (DbType = Int32), @p46='?' (DbType = DateTime), @p47='?' (Size = 100), @p49='?' (DbType = Guid), @p48='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, 0),
(@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, 1),
(@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 2),
(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 3)) AS i ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
VALUES (i.[CreatedAt], i.[CreatedBy], i.[DeletedAt], i.[DeletedBy], i.[DishId], i.[IsDeleted], i.[Notes], i.[OrderId], i.[Price], i.[Quantity], i.[UpdatedAt], i.[UpdatedBy])
OUTPUT INSERTED.[Id], i._Position;
UPDATE [Orders] SET [Total] = @p48
OUTPUT 1
WHERE [Id] = @p49;
[2025-12-22 23:12:00.343] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "c83a43ca-8330-46b2-8a4b-8944c4e25091" создан пользователем "c75a4aab-c6d6-47c8-b866-56ee05fc57b6". Сумма: 12800.00, Блюд: 4
[2025-12-22 23:12:00.345] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 23:12:00.346] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 50.4091ms
[2025-12-22 23:12:00.347] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:12:00.348] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 58.4975ms
[2025-12-22 23:12:00.351] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:12:00.353] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:00.353] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 2.2973ms
[2025-12-22 23:12:00.354] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:12:00.357] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:00.358] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:12:00.359] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:12:00.362] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:00.366] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 23:12:00.369] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 17, Всего: 17, Страница: 1
[2025-12-22 23:12:00.370] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:12:00.371] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 11.5033ms
[2025-12-22 23:12:00.373] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:12:00.373] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 19.0033ms
[2025-12-22 23:12:03.032] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:12:03.034] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:03.035] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:12:03.035] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 3.5704ms
[2025-12-22 23:12:03.037] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:03.038] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:12:03.040] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 5.628ms
[2025-12-22 23:12:03.042] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:12:03.043] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:03.050] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:03.051] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:12:03.052] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:12:03.052] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:12:03.053] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:12:03.057] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:03.058] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:12:03.059] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:03.061] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:12:03.063] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:03.065] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:03.067] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:03.067] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:03.071] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 23:12:03.072] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:12:03.073] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 60760.00, Заказов: 17
[2025-12-22 23:12:03.074] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:12:03.075] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:12:03.076] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:12:03.077] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 22.285ms
[2025-12-22 23:12:03.078] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 22.4857ms
[2025-12-22 23:12:03.079] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:12:03.080] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:12:03.081] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 43.3191ms
[2025-12-22 23:12:03.082] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 39.9373ms
[2025-12-22 23:12:03.086] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:12:03.086] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:12:03.089] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:03.091] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:03.091] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 5.5597ms
[2025-12-22 23:12:03.092] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 6.1144ms
[2025-12-22 23:12:03.093] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:12:03.093] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:12:03.099] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:03.101] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:03.102] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:12:03.102] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:12:03.103] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:12:03.104] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:12:03.107] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:12:03.110] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:12:03.110] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:12:03.113] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:03.114] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:12:03.116] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:03.116] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 8.5304ms
[2025-12-22 23:12:03.118] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:12:03.118] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:12:03.120] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 47710.00, Заказов: 16
[2025-12-22 23:12:03.120] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 27.147ms
[2025-12-22 23:12:03.121] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:12:03.124] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 18.6644ms
[2025-12-22 23:12:03.125] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:12:03.126] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 32.6218ms
[2025-12-22 23:12:03.129] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:12:03.130] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:12:03.132] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:03.133] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:03.134] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 5.2889ms
[2025-12-22 23:12:03.135] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:12:03.135] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:12:03.137] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:12:03.139] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:03.141] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:12:03.142] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:12:03.142] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:12:03.144] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:12:03.147] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:12:03.148] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:03.149] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:12:03.150] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:03.151] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.7746ms
[2025-12-22 23:12:03.153] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:12:03.153] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:12:03.155] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:12:03.156] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 20.1373ms
[2025-12-22 23:12:03.157] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:12:03.160] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.2271ms
[2025-12-22 23:12:03.162] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:12:03.163] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 33.2679ms
[2025-12-22 23:12:03.166] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:12:03.166] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:12:03.168] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:03.169] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:03.170] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 3.997ms
[2025-12-22 23:12:03.171] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 4.4599ms
[2025-12-22 23:12:03.172] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:12:03.172] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:12:03.177] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:03.179] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:03.180] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:12:03.180] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:12:03.181] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:12:03.181] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:12:03.185] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:12:03.186] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:12:03.187] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:12:03.189] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:12:03.191] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:03.192] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:03.194] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:03.196] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:03.197] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:12:03.200] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:12:03.200] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 19510.00, Заказов: 8
[2025-12-22 23:12:03.202] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 27150.00, Заказов: 6
[2025-12-22 23:12:03.202] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:12:03.203] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:12:03.204] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 21.4422ms
[2025-12-22 23:12:03.205] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.4991ms
[2025-12-22 23:12:03.206] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:12:03.207] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:12:03.208] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 36.4627ms
[2025-12-22 23:12:03.209] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 36.9605ms
[2025-12-22 23:12:03.212] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:12:03.216] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:03.217] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 4.8482ms
[2025-12-22 23:12:03.219] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:12:03.221] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:03.222] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:12:03.222] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:12:03.232] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 23:12:03.234] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 23:12:03.235] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:12:03.236] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 11.8712ms
[2025-12-22 23:12:03.237] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:12:03.237] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 18.6699ms
[2025-12-22 23:12:03.240] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:12:03.242] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:03.242] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.1265ms
[2025-12-22 23:12:03.244] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:12:03.247] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:03.247] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:12:03.249] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:12:03.256] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 23:12:03.258] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:12:03.259] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 9.2611ms
[2025-12-22 23:12:03.260] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:12:03.261] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 17.566ms
[2025-12-22 23:12:03.265] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 23:12:03.267] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:03.268] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.7218ms
[2025-12-22 23:12:03.269] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 23:12:03.272] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:03.273] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:12:03.273] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:12:03.277] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 23:12:03.279] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:12:03.280] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.5745ms
[2025-12-22 23:12:03.281] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:12:03.282] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 12.7926ms
[2025-12-22 23:12:14.725] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=month - null null
[2025-12-22 23:12:14.728] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:14.729] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=month - 204 null null 3.9727ms
[2025-12-22 23:12:14.731] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=month - null null
[2025-12-22 23:12:14.734] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:14.735] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:12:14.736] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:12:14.742] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 23:12:14.746] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:12:14.747] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 9.8711ms
[2025-12-22 23:12:14.748] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:12:14.749] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=month - 200 null application/json; charset=utf-8 18.5273ms
[2025-12-22 23:12:20.590] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 23:12:20.592] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:20.593] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.7419ms
[2025-12-22 23:12:20.595] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 23:12:20.599] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:20.600] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:12:20.601] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:12:20.603] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 23:12:20.605] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:12:20.605] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 3.6342ms
[2025-12-22 23:12:20.606] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:12:20.607] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 12.4563ms
[2025-12-22 23:12:22.525] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 23:12:22.529] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:22.530] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 4.75ms
[2025-12-22 23:12:22.532] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 23:12:22.535] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:22.536] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 23:12:22.537] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.UserReadDto]]] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-22 23:12:22.541] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:22.549] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[IsDeleted], [u0].[Notes], [u0].[PasswordHash], [u0].[RoleId], [u0].[UpdatedAt], [u0].[UpdatedBy], [u0].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM (
    SELECT [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-22 23:12:22.551] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 23:12:22.552] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:12:22.553] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 13.8962ms
[2025-12-22 23:12:22.554] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 23:12:22.555] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 23.3538ms
[2025-12-22 23:12:22.557] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 23:12:22.559] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:22.560] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 2.4461ms
[2025-12-22 23:12:22.562] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 23:12:22.565] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:22.565] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 23:12:22.566] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 23:12:22.569] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:22.573] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 23:12:22.575] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 23:12:22.576] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:12:22.577] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 9.3781ms
[2025-12-22 23:12:22.580] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 23:12:22.581] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 18.9661ms
[2025-12-22 23:12:22.584] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:12:22.585] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:22.586] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 2.6378ms
[2025-12-22 23:12:22.588] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:12:22.591] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:22.591] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:12:22.592] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:12:22.595] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:22.598] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 23:12:22.600] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 17, Всего: 17, Страница: 1
[2025-12-22 23:12:22.601] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:12:22.602] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 8.6609ms
[2025-12-22 23:12:22.603] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:12:22.604] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 16.0424ms
[2025-12-22 23:12:30.851] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/12a64119-aac6-424c-96c0-f0c5609476ad - null null
[2025-12-22 23:12:30.856] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:30.858] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/12a64119-aac6-424c-96c0-f0c5609476ad - 204 null null 6.2559ms
[2025-12-22 23:12:30.860] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/12a64119-aac6-424c-96c0-f0c5609476ad - null null
[2025-12-22 23:12:30.863] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:30.864] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-22 23:12:30.865] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-22 23:12:30.868] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:30.872] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-22 23:12:30.874] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:12:30.875] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 8.9673ms
[2025-12-22 23:12:30.876] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-22 23:12:30.877] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/12a64119-aac6-424c-96c0-f0c5609476ad - 200 null application/json; charset=utf-8 17.4329ms
[2025-12-22 23:12:49.800] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-22 23:12:49.802] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:49.802] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 2.3763ms
[2025-12-22 23:12:49.804] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 418
[2025-12-22 23:12:49.806] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:49.807] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:12:49.808] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:12:49.811] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:49.813] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:49.815] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:49.817] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:49.819] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:49.821] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "c75a4aab-c6d6-47c8-b866-56ee05fc57b6", Notes: null, ItemsCount: 4
[2025-12-22 23:12:49.823] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 23:12:49.825] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:49.827] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "c14b7bc6-a42f-4aa6-821e-694beb05a2eb", Quantity: 5, Notes: null
[2025-12-22 23:12:49.829] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:49.830] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "0ca719ed-5bb4-4e18-a5f2-85f0957cb01c", Quantity: 13, Notes: null
[2025-12-22 23:12:49.832] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:49.833] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "adb0a8a2-a8c3-40bd-8f5b-26b9847ed9e7", Quantity: 10, Notes: null
[2025-12-22 23:12:49.835] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:49.836] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "6df9d371-ed3e-43fc-a2f9-05f35cc8b457", Quantity: 10, Notes: null
[2025-12-22 23:12:49.839] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p12='?' (DbType = DateTime), @p13='?' (Size = 100), @p14='?' (DbType = DateTime), @p15='?' (Size = 100), @p16='?' (DbType = Guid), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (DbType = Guid), @p20='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (Size = 100), @p24='?' (DbType = DateTime), @p25='?' (Size = 100), @p26='?' (DbType = DateTime), @p27='?' (Size = 100), @p28='?' (DbType = Guid), @p29='?' (DbType = Boolean), @p30='?' (Size = 4000), @p31='?' (DbType = Guid), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = DateTime), @p35='?' (Size = 100), @p36='?' (DbType = DateTime), @p37='?' (Size = 100), @p38='?' (DbType = DateTime), @p39='?' (Size = 100), @p40='?' (DbType = Guid), @p41='?' (DbType = Boolean), @p42='?' (Size = 4000), @p43='?' (DbType = Guid), @p44='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p45='?' (DbType = Int32), @p46='?' (DbType = DateTime), @p47='?' (Size = 100), @p49='?' (DbType = Guid), @p48='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, 0),
(@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, 1),
(@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 2),
(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 3)) AS i ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
VALUES (i.[CreatedAt], i.[CreatedBy], i.[DeletedAt], i.[DeletedBy], i.[DishId], i.[IsDeleted], i.[Notes], i.[OrderId], i.[Price], i.[Quantity], i.[UpdatedAt], i.[UpdatedBy])
OUTPUT INSERTED.[Id], i._Position;
UPDATE [Orders] SET [Total] = @p48
OUTPUT 1
WHERE [Id] = @p49;
[2025-12-22 23:12:49.853] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "a77100cc-9a89-48c9-94d8-854cd370e242" создан пользователем "c75a4aab-c6d6-47c8-b866-56ee05fc57b6". Сумма: 25410.00, Блюд: 4
[2025-12-22 23:12:49.855] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 23:12:49.856] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 46.7489ms
[2025-12-22 23:12:49.857] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:12:49.858] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 54.3837ms
[2025-12-22 23:12:49.861] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:12:49.863] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:49.864] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 2.4425ms
[2025-12-22 23:12:49.865] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:12:49.869] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:49.870] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:12:49.871] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:12:49.874] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:49.877] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 23:12:49.879] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 18, Всего: 18, Страница: 1
[2025-12-22 23:12:49.880] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:12:49.882] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 9.0898ms
[2025-12-22 23:12:49.883] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:12:49.883] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 18.3119ms
[2025-12-22 23:12:55.158] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:12:55.159] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:12:55.164] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:55.168] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:55.169] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 10.1161ms
[2025-12-22 23:12:55.169] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 9.7911ms
[2025-12-22 23:12:55.173] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:12:55.173] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:12:55.180] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:55.182] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:55.182] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:12:55.183] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:12:55.184] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:12:55.185] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:12:55.188] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:55.190] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:12:55.190] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:55.192] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:12:55.194] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:55.196] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:55.198] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:55.199] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:55.201] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 23:12:55.202] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:12:55.203] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 86170.00, Заказов: 18
[2025-12-22 23:12:55.205] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:12:55.206] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:12:55.208] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:12:55.209] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 22.2675ms
[2025-12-22 23:12:55.211] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 22.8758ms
[2025-12-22 23:12:55.212] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:12:55.214] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:12:55.215] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 41.674ms
[2025-12-22 23:12:55.215] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 41.8995ms
[2025-12-22 23:12:55.219] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:12:55.219] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:12:55.223] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:55.225] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:55.226] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 7.3266ms
[2025-12-22 23:12:55.227] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 8.1636ms
[2025-12-22 23:12:55.229] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:12:55.229] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:12:55.238] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:55.240] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:55.241] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:12:55.241] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:12:55.242] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:12:55.243] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:12:55.246] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:12:55.247] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:12:55.249] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:12:55.251] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:12:55.251] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 6.5582ms
[2025-12-22 23:12:55.253] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:55.253] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:12:55.255] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:55.255] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 26.3481ms
[2025-12-22 23:12:55.258] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:12:55.262] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 47710.00, Заказов: 16
[2025-12-22 23:12:55.263] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:12:55.264] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 17.9794ms
[2025-12-22 23:12:55.265] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:12:55.266] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 36.4565ms
[2025-12-22 23:12:55.268] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:12:55.268] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:12:55.270] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:55.271] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:55.272] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 4.1464ms
[2025-12-22 23:12:55.273] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:12:55.273] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:12:55.275] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:12:55.278] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:55.280] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:12:55.281] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:12:55.281] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:12:55.284] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:12:55.285] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:12:55.286] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:55.287] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:12:55.289] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:55.290] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.7939ms
[2025-12-22 23:12:55.292] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:12:55.292] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:12:55.296] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:12:55.296] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 23.1895ms
[2025-12-22 23:12:55.297] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:12:55.301] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 21.13ms
[2025-12-22 23:12:55.302] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:12:55.303] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 34.5638ms
[2025-12-22 23:12:55.306] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:12:55.306] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:12:55.308] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:55.309] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:55.310] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 4.7054ms
[2025-12-22 23:12:55.311] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 5.2604ms
[2025-12-22 23:12:55.313] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:12:55.313] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:12:55.318] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:55.320] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:55.321] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:12:55.321] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:12:55.322] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:12:55.322] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:12:55.325] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:12:55.326] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:12:55.328] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:12:55.329] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:12:55.332] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:55.333] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:55.334] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:55.336] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:12:55.337] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:12:55.340] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:12:55.340] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 19510.00, Заказов: 8
[2025-12-22 23:12:55.342] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 27150.00, Заказов: 6
[2025-12-22 23:12:55.342] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:12:55.344] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:12:55.344] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.7444ms
[2025-12-22 23:12:55.346] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.6275ms
[2025-12-22 23:12:55.347] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:12:55.348] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:12:55.348] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 35.7056ms
[2025-12-22 23:12:55.349] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 36.4988ms
[2025-12-22 23:12:55.352] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:12:55.355] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:55.356] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 4.3537ms
[2025-12-22 23:12:55.358] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:12:55.361] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:55.362] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:12:55.362] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:12:55.367] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 23:12:55.369] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 23:12:55.369] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:12:55.370] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 6.7607ms
[2025-12-22 23:12:55.371] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:12:55.372] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 14.572ms
[2025-12-22 23:12:55.375] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:12:55.376] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:55.377] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.6534ms
[2025-12-22 23:12:55.379] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:12:55.382] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:55.383] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:12:55.384] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:12:55.387] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 23:12:55.389] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:12:55.390] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 4.9393ms
[2025-12-22 23:12:55.391] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:12:55.392] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 12.6017ms
[2025-12-22 23:12:55.395] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 23:12:55.397] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:55.398] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.7699ms
[2025-12-22 23:12:55.400] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 23:12:55.403] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:12:55.404] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:12:55.405] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:12:55.407] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 23:12:55.409] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:12:55.410] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 3.9783ms
[2025-12-22 23:12:55.411] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:12:55.412] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 12.0571ms
[2025-12-22 23:14:43.228] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 23:14:43.230] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:14:43.232] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 4.4754ms
[2025-12-22 23:14:43.234] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 23:14:43.238] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:14:43.238] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 23:14:43.239] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.UserReadDto]]] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-22 23:14:43.244] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:43.247] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[IsDeleted], [u0].[Notes], [u0].[PasswordHash], [u0].[RoleId], [u0].[UpdatedAt], [u0].[UpdatedBy], [u0].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM (
    SELECT [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-22 23:14:43.249] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 23:14:43.250] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:14:43.251] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 9.776ms
[2025-12-22 23:14:43.253] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 23:14:43.253] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 19.1913ms
[2025-12-22 23:14:43.255] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 23:14:43.258] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:14:43.258] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 3.2132ms
[2025-12-22 23:14:43.260] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 23:14:43.264] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:14:43.265] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 23:14:43.265] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 23:14:43.268] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:43.270] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 23:14:43.272] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 23:14:43.273] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:14:43.274] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 7.6055ms
[2025-12-22 23:14:43.276] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 23:14:43.277] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 16.3811ms
[2025-12-22 23:14:43.280] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:14:43.282] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:14:43.282] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 2.3199ms
[2025-12-22 23:14:43.284] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:14:43.286] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:14:43.287] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:14:43.288] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:14:43.290] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:43.293] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 23:14:43.295] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 18, Всего: 18, Страница: 1
[2025-12-22 23:14:43.296] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:14:43.297] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 8.3098ms
[2025-12-22 23:14:43.299] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:14:43.299] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 15.723ms
[2025-12-22 23:14:50.274] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-22 23:14:50.277] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:14:50.278] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 4.2493ms
[2025-12-22 23:14:50.279] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 871
[2025-12-22 23:14:50.282] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:14:50.283] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:14:50.284] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:14:50.287] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:50.290] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:50.292] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:50.294] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:50.297] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:50.299] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:50.301] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:50.303] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:50.305] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:50.306] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:50.309] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:50.311] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "c75a4aab-c6d6-47c8-b866-56ee05fc57b6", Notes: null, ItemsCount: 10
[2025-12-22 23:14:50.314] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 23:14:50.328] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:50.330] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "bc75836d-c978-460e-b72a-7ad8d898f4db", Quantity: 1, Notes: null
[2025-12-22 23:14:50.331] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:50.333] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "6df9d371-ed3e-43fc-a2f9-05f35cc8b457", Quantity: 1, Notes: null
[2025-12-22 23:14:50.335] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:50.336] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "adb0a8a2-a8c3-40bd-8f5b-26b9847ed9e7", Quantity: 1, Notes: null
[2025-12-22 23:14:50.338] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:50.340] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "5a0ab935-6754-4bcb-b1ad-3b0d1aed65fc", Quantity: 1, Notes: null
[2025-12-22 23:14:50.342] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:50.344] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "0ca719ed-5bb4-4e18-a5f2-85f0957cb01c", Quantity: 1, Notes: null
[2025-12-22 23:14:50.346] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:50.347] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "70d3ef4c-a114-45ea-bb14-52d7adf21ccf", Quantity: 1, Notes: null
[2025-12-22 23:14:50.349] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:50.350] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e8b4009a-2de3-4f24-9484-408e7d813d61", Quantity: 1, Notes: null
[2025-12-22 23:14:50.351] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:50.353] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e3b024ce-9139-4b59-a73b-9dfa81d65721", Quantity: 1, Notes: null
[2025-12-22 23:14:50.354] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:50.355] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "4df7b27a-19c4-4f59-9b32-edf28ca4467f", Quantity: 1, Notes: null
[2025-12-22 23:14:50.357] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:50.359] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e95fdeb0-af57-44bd-91ab-29e79dbad536", Quantity: 1, Notes: null
[2025-12-22 23:14:50.372] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p12='?' (DbType = DateTime), @p13='?' (Size = 100), @p14='?' (DbType = DateTime), @p15='?' (Size = 100), @p16='?' (DbType = Guid), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (DbType = Guid), @p20='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (Size = 100), @p24='?' (DbType = DateTime), @p25='?' (Size = 100), @p26='?' (DbType = DateTime), @p27='?' (Size = 100), @p28='?' (DbType = Guid), @p29='?' (DbType = Boolean), @p30='?' (Size = 4000), @p31='?' (DbType = Guid), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = DateTime), @p35='?' (Size = 100), @p36='?' (DbType = DateTime), @p37='?' (Size = 100), @p38='?' (DbType = DateTime), @p39='?' (Size = 100), @p40='?' (DbType = Guid), @p41='?' (DbType = Boolean), @p42='?' (Size = 4000), @p43='?' (DbType = Guid), @p44='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p45='?' (DbType = Int32), @p46='?' (DbType = DateTime), @p47='?' (Size = 100), @p48='?' (DbType = DateTime), @p49='?' (Size = 100), @p50='?' (DbType = DateTime), @p51='?' (Size = 100), @p52='?' (DbType = Guid), @p53='?' (DbType = Boolean), @p54='?' (Size = 4000), @p55='?' (DbType = Guid), @p56='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p57='?' (DbType = Int32), @p58='?' (DbType = DateTime), @p59='?' (Size = 100), @p60='?' (DbType = DateTime), @p61='?' (Size = 100), @p62='?' (DbType = DateTime), @p63='?' (Size = 100), @p64='?' (DbType = Guid), @p65='?' (DbType = Boolean), @p66='?' (Size = 4000), @p67='?' (DbType = Guid), @p68='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p69='?' (DbType = Int32), @p70='?' (DbType = DateTime), @p71='?' (Size = 100), @p72='?' (DbType = DateTime), @p73='?' (Size = 100), @p74='?' (DbType = DateTime), @p75='?' (Size = 100), @p76='?' (DbType = Guid), @p77='?' (DbType = Boolean), @p78='?' (Size = 4000), @p79='?' (DbType = Guid), @p80='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p81='?' (DbType = Int32), @p82='?' (DbType = DateTime), @p83='?' (Size = 100), @p84='?' (DbType = DateTime), @p85='?' (Size = 100), @p86='?' (DbType = DateTime), @p87='?' (Size = 100), @p88='?' (DbType = Guid), @p89='?' (DbType = Boolean), @p90='?' (Size = 4000), @p91='?' (DbType = Guid), @p92='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p93='?' (DbType = Int32), @p94='?' (DbType = DateTime), @p95='?' (Size = 100), @p96='?' (DbType = DateTime), @p97='?' (Size = 100), @p98='?' (DbType = DateTime), @p99='?' (Size = 100), @p100='?' (DbType = Guid), @p101='?' (DbType = Boolean), @p102='?' (Size = 4000), @p103='?' (DbType = Guid), @p104='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p105='?' (DbType = Int32), @p106='?' (DbType = DateTime), @p107='?' (Size = 100), @p108='?' (DbType = DateTime), @p109='?' (Size = 100), @p110='?' (DbType = DateTime), @p111='?' (Size = 100), @p112='?' (DbType = Guid), @p113='?' (DbType = Boolean), @p114='?' (Size = 4000), @p115='?' (DbType = Guid), @p116='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p117='?' (DbType = Int32), @p118='?' (DbType = DateTime), @p119='?' (Size = 100), @p121='?' (DbType = Guid), @p120='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, 0),
(@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, 1),
(@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 2),
(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 3),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 4),
(@p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, 5),
(@p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, 6),
(@p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, 7),
(@p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, 8),
(@p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, 9)) AS i ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
VALUES (i.[CreatedAt], i.[CreatedBy], i.[DeletedAt], i.[DeletedBy], i.[DishId], i.[IsDeleted], i.[Notes], i.[OrderId], i.[Price], i.[Quantity], i.[UpdatedAt], i.[UpdatedBy])
OUTPUT INSERTED.[Id], i._Position;
UPDATE [Orders] SET [Total] = @p120
OUTPUT 1
WHERE [Id] = @p121;
[2025-12-22 23:14:50.375] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "a8a85682-da40-4267-99b6-0d37c39e9f0f" создан пользователем "c75a4aab-c6d6-47c8-b866-56ee05fc57b6". Сумма: 5720.00, Блюд: 10
[2025-12-22 23:14:50.377] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 23:14:50.378] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 92.6154ms
[2025-12-22 23:14:50.379] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:14:50.380] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 100.8255ms
[2025-12-22 23:14:50.383] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:14:50.385] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:14:50.386] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 2.5162ms
[2025-12-22 23:14:50.388] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:14:50.390] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:14:50.391] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:14:50.392] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:14:50.395] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:50.397] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 23:14:50.399] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 19, Всего: 19, Страница: 1
[2025-12-22 23:14:50.401] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:14:50.402] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 8.3889ms
[2025-12-22 23:14:50.403] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:14:50.403] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 15.8468ms
[2025-12-22 23:14:58.417] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-22 23:14:58.419] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:14:58.420] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 2.6485ms
[2025-12-22 23:14:58.421] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 871
[2025-12-22 23:14:58.424] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:14:58.425] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:14:58.426] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:14:58.430] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:58.432] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:58.434] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:58.436] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:58.438] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:58.439] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:58.442] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:58.444] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:58.446] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:58.448] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:58.451] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:58.453] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "c75a4aab-c6d6-47c8-b866-56ee05fc57b6", Notes: null, ItemsCount: 10
[2025-12-22 23:14:58.455] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 23:14:58.457] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:58.459] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e50cda14-92f5-44fc-b8f2-f4240ac9e0a9", Quantity: 1, Notes: null
[2025-12-22 23:14:58.461] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:58.463] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e3b024ce-9139-4b59-a73b-9dfa81d65721", Quantity: 1, Notes: null
[2025-12-22 23:14:58.465] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:58.467] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "bc75836d-c978-460e-b72a-7ad8d898f4db", Quantity: 1, Notes: null
[2025-12-22 23:14:58.469] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:58.470] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e95fdeb0-af57-44bd-91ab-29e79dbad536", Quantity: 1, Notes: null
[2025-12-22 23:14:58.472] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:58.473] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "5a0ab935-6754-4bcb-b1ad-3b0d1aed65fc", Quantity: 1, Notes: null
[2025-12-22 23:14:58.476] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:58.477] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "adb0a8a2-a8c3-40bd-8f5b-26b9847ed9e7", Quantity: 1, Notes: null
[2025-12-22 23:14:58.479] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:58.481] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "4df7b27a-19c4-4f59-9b32-edf28ca4467f", Quantity: 1, Notes: null
[2025-12-22 23:14:58.483] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:58.484] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "c14b7bc6-a42f-4aa6-821e-694beb05a2eb", Quantity: 1, Notes: null
[2025-12-22 23:14:58.486] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:58.488] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e8b4009a-2de3-4f24-9484-408e7d813d61", Quantity: 1, Notes: null
[2025-12-22 23:14:58.490] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:58.491] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "6df9d371-ed3e-43fc-a2f9-05f35cc8b457", Quantity: 1, Notes: null
[2025-12-22 23:14:58.495] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p12='?' (DbType = DateTime), @p13='?' (Size = 100), @p14='?' (DbType = DateTime), @p15='?' (Size = 100), @p16='?' (DbType = Guid), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (DbType = Guid), @p20='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (Size = 100), @p24='?' (DbType = DateTime), @p25='?' (Size = 100), @p26='?' (DbType = DateTime), @p27='?' (Size = 100), @p28='?' (DbType = Guid), @p29='?' (DbType = Boolean), @p30='?' (Size = 4000), @p31='?' (DbType = Guid), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = DateTime), @p35='?' (Size = 100), @p36='?' (DbType = DateTime), @p37='?' (Size = 100), @p38='?' (DbType = DateTime), @p39='?' (Size = 100), @p40='?' (DbType = Guid), @p41='?' (DbType = Boolean), @p42='?' (Size = 4000), @p43='?' (DbType = Guid), @p44='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p45='?' (DbType = Int32), @p46='?' (DbType = DateTime), @p47='?' (Size = 100), @p48='?' (DbType = DateTime), @p49='?' (Size = 100), @p50='?' (DbType = DateTime), @p51='?' (Size = 100), @p52='?' (DbType = Guid), @p53='?' (DbType = Boolean), @p54='?' (Size = 4000), @p55='?' (DbType = Guid), @p56='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p57='?' (DbType = Int32), @p58='?' (DbType = DateTime), @p59='?' (Size = 100), @p60='?' (DbType = DateTime), @p61='?' (Size = 100), @p62='?' (DbType = DateTime), @p63='?' (Size = 100), @p64='?' (DbType = Guid), @p65='?' (DbType = Boolean), @p66='?' (Size = 4000), @p67='?' (DbType = Guid), @p68='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p69='?' (DbType = Int32), @p70='?' (DbType = DateTime), @p71='?' (Size = 100), @p72='?' (DbType = DateTime), @p73='?' (Size = 100), @p74='?' (DbType = DateTime), @p75='?' (Size = 100), @p76='?' (DbType = Guid), @p77='?' (DbType = Boolean), @p78='?' (Size = 4000), @p79='?' (DbType = Guid), @p80='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p81='?' (DbType = Int32), @p82='?' (DbType = DateTime), @p83='?' (Size = 100), @p84='?' (DbType = DateTime), @p85='?' (Size = 100), @p86='?' (DbType = DateTime), @p87='?' (Size = 100), @p88='?' (DbType = Guid), @p89='?' (DbType = Boolean), @p90='?' (Size = 4000), @p91='?' (DbType = Guid), @p92='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p93='?' (DbType = Int32), @p94='?' (DbType = DateTime), @p95='?' (Size = 100), @p96='?' (DbType = DateTime), @p97='?' (Size = 100), @p98='?' (DbType = DateTime), @p99='?' (Size = 100), @p100='?' (DbType = Guid), @p101='?' (DbType = Boolean), @p102='?' (Size = 4000), @p103='?' (DbType = Guid), @p104='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p105='?' (DbType = Int32), @p106='?' (DbType = DateTime), @p107='?' (Size = 100), @p108='?' (DbType = DateTime), @p109='?' (Size = 100), @p110='?' (DbType = DateTime), @p111='?' (Size = 100), @p112='?' (DbType = Guid), @p113='?' (DbType = Boolean), @p114='?' (Size = 4000), @p115='?' (DbType = Guid), @p116='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p117='?' (DbType = Int32), @p118='?' (DbType = DateTime), @p119='?' (Size = 100), @p121='?' (DbType = Guid), @p120='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, 0),
(@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, 1),
(@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 2),
(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 3),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 4),
(@p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, 5),
(@p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, 6),
(@p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, 7),
(@p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, 8),
(@p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, 9)) AS i ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
VALUES (i.[CreatedAt], i.[CreatedBy], i.[DeletedAt], i.[DeletedBy], i.[DishId], i.[IsDeleted], i.[Notes], i.[OrderId], i.[Price], i.[Quantity], i.[UpdatedAt], i.[UpdatedBy])
OUTPUT INSERTED.[Id], i._Position;
UPDATE [Orders] SET [Total] = @p120
OUTPUT 1
WHERE [Id] = @p121;
[2025-12-22 23:14:58.498] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "f666936d-e983-451c-b672-4f05096f4f59" создан пользователем "c75a4aab-c6d6-47c8-b866-56ee05fc57b6". Сумма: 5630.00, Блюд: 10
[2025-12-22 23:14:58.499] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 23:14:58.501] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 73.2042ms
[2025-12-22 23:14:58.502] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:14:58.503] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 81.2557ms
[2025-12-22 23:14:58.506] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:14:58.508] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:14:58.509] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 2.8291ms
[2025-12-22 23:14:58.511] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:14:58.513] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:14:58.514] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:14:58.515] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:14:58.519] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:14:58.522] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 23:14:58.526] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 20, Всего: 20, Страница: 1
[2025-12-22 23:14:58.527] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:14:58.528] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 11.8424ms
[2025-12-22 23:14:58.529] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:14:58.530] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 19.2307ms
[2025-12-22 23:15:00.346] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/f666936d-e983-451c-b672-4f05096f4f59 - null null
[2025-12-22 23:15:00.349] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:15:00.349] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/f666936d-e983-451c-b672-4f05096f4f59 - 204 null null 3.0932ms
[2025-12-22 23:15:00.351] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/f666936d-e983-451c-b672-4f05096f4f59 - null null
[2025-12-22 23:15:00.353] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:15:00.354] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-22 23:15:00.355] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-22 23:15:00.358] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:00.360] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-22 23:15:00.362] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:15:00.363] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 6.9236ms
[2025-12-22 23:15:00.364] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-22 23:15:00.365] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/f666936d-e983-451c-b672-4f05096f4f59 - 200 null application/json; charset=utf-8 14.124ms
[2025-12-22 23:15:06.988] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-22 23:15:06.989] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:15:06.990] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 2.4788ms
[2025-12-22 23:15:06.992] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 871
[2025-12-22 23:15:06.996] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:15:06.997] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:15:06.998] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:15:07.000] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:07.002] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:07.004] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:07.005] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:07.008] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:07.010] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:07.012] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:07.013] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:07.015] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:07.017] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:07.018] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:07.020] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "c75a4aab-c6d6-47c8-b866-56ee05fc57b6", Notes: null, ItemsCount: 10
[2025-12-22 23:15:07.021] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 23:15:07.023] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:07.025] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "0ca719ed-5bb4-4e18-a5f2-85f0957cb01c", Quantity: 1, Notes: null
[2025-12-22 23:15:07.027] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:07.028] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "5a0ab935-6754-4bcb-b1ad-3b0d1aed65fc", Quantity: 1, Notes: null
[2025-12-22 23:15:07.030] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:07.031] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e95fdeb0-af57-44bd-91ab-29e79dbad536", Quantity: 1, Notes: null
[2025-12-22 23:15:07.033] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:07.034] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "4df7b27a-19c4-4f59-9b32-edf28ca4467f", Quantity: 1, Notes: null
[2025-12-22 23:15:07.036] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:07.037] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "70d3ef4c-a114-45ea-bb14-52d7adf21ccf", Quantity: 1, Notes: null
[2025-12-22 23:15:07.039] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:07.041] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "6df9d371-ed3e-43fc-a2f9-05f35cc8b457", Quantity: 1, Notes: null
[2025-12-22 23:15:07.043] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:07.045] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "506c83ad-20ac-42f9-a32e-16f2701bad37", Quantity: 1, Notes: null
[2025-12-22 23:15:07.046] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:07.048] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "adb0a8a2-a8c3-40bd-8f5b-26b9847ed9e7", Quantity: 1, Notes: null
[2025-12-22 23:15:07.050] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:07.051] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "bc75836d-c978-460e-b72a-7ad8d898f4db", Quantity: 1, Notes: null
[2025-12-22 23:15:07.052] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:07.054] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e8b4009a-2de3-4f24-9484-408e7d813d61", Quantity: 1, Notes: null
[2025-12-22 23:15:07.057] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p12='?' (DbType = DateTime), @p13='?' (Size = 100), @p14='?' (DbType = DateTime), @p15='?' (Size = 100), @p16='?' (DbType = Guid), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (DbType = Guid), @p20='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (Size = 100), @p24='?' (DbType = DateTime), @p25='?' (Size = 100), @p26='?' (DbType = DateTime), @p27='?' (Size = 100), @p28='?' (DbType = Guid), @p29='?' (DbType = Boolean), @p30='?' (Size = 4000), @p31='?' (DbType = Guid), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = DateTime), @p35='?' (Size = 100), @p36='?' (DbType = DateTime), @p37='?' (Size = 100), @p38='?' (DbType = DateTime), @p39='?' (Size = 100), @p40='?' (DbType = Guid), @p41='?' (DbType = Boolean), @p42='?' (Size = 4000), @p43='?' (DbType = Guid), @p44='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p45='?' (DbType = Int32), @p46='?' (DbType = DateTime), @p47='?' (Size = 100), @p48='?' (DbType = DateTime), @p49='?' (Size = 100), @p50='?' (DbType = DateTime), @p51='?' (Size = 100), @p52='?' (DbType = Guid), @p53='?' (DbType = Boolean), @p54='?' (Size = 4000), @p55='?' (DbType = Guid), @p56='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p57='?' (DbType = Int32), @p58='?' (DbType = DateTime), @p59='?' (Size = 100), @p60='?' (DbType = DateTime), @p61='?' (Size = 100), @p62='?' (DbType = DateTime), @p63='?' (Size = 100), @p64='?' (DbType = Guid), @p65='?' (DbType = Boolean), @p66='?' (Size = 4000), @p67='?' (DbType = Guid), @p68='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p69='?' (DbType = Int32), @p70='?' (DbType = DateTime), @p71='?' (Size = 100), @p72='?' (DbType = DateTime), @p73='?' (Size = 100), @p74='?' (DbType = DateTime), @p75='?' (Size = 100), @p76='?' (DbType = Guid), @p77='?' (DbType = Boolean), @p78='?' (Size = 4000), @p79='?' (DbType = Guid), @p80='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p81='?' (DbType = Int32), @p82='?' (DbType = DateTime), @p83='?' (Size = 100), @p84='?' (DbType = DateTime), @p85='?' (Size = 100), @p86='?' (DbType = DateTime), @p87='?' (Size = 100), @p88='?' (DbType = Guid), @p89='?' (DbType = Boolean), @p90='?' (Size = 4000), @p91='?' (DbType = Guid), @p92='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p93='?' (DbType = Int32), @p94='?' (DbType = DateTime), @p95='?' (Size = 100), @p96='?' (DbType = DateTime), @p97='?' (Size = 100), @p98='?' (DbType = DateTime), @p99='?' (Size = 100), @p100='?' (DbType = Guid), @p101='?' (DbType = Boolean), @p102='?' (Size = 4000), @p103='?' (DbType = Guid), @p104='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p105='?' (DbType = Int32), @p106='?' (DbType = DateTime), @p107='?' (Size = 100), @p108='?' (DbType = DateTime), @p109='?' (Size = 100), @p110='?' (DbType = DateTime), @p111='?' (Size = 100), @p112='?' (DbType = Guid), @p113='?' (DbType = Boolean), @p114='?' (Size = 4000), @p115='?' (DbType = Guid), @p116='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p117='?' (DbType = Int32), @p118='?' (DbType = DateTime), @p119='?' (Size = 100), @p121='?' (DbType = Guid), @p120='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, 0),
(@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, 1),
(@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 2),
(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 3),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 4),
(@p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, 5),
(@p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, 6),
(@p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, 7),
(@p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, 8),
(@p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, 9)) AS i ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
VALUES (i.[CreatedAt], i.[CreatedBy], i.[DeletedAt], i.[DeletedBy], i.[DishId], i.[IsDeleted], i.[Notes], i.[OrderId], i.[Price], i.[Quantity], i.[UpdatedAt], i.[UpdatedBy])
OUTPUT INSERTED.[Id], i._Position;
UPDATE [Orders] SET [Total] = @p120
OUTPUT 1
WHERE [Id] = @p121;
[2025-12-22 23:15:07.061] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "ceb6751b-829f-4477-b551-53c02169350d" создан пользователем "c75a4aab-c6d6-47c8-b866-56ee05fc57b6". Сумма: 6370.00, Блюд: 10
[2025-12-22 23:15:07.062] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 23:15:07.063] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 64.0104ms
[2025-12-22 23:15:07.064] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:15:07.065] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 72.8403ms
[2025-12-22 23:15:07.067] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:15:07.069] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:15:07.069] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 2.2512ms
[2025-12-22 23:15:07.071] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:15:07.074] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:15:07.075] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:15:07.075] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:15:07.078] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:07.081] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 23:15:07.083] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 20, Всего: 21, Страница: 1
[2025-12-22 23:15:07.084] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:15:07.086] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 8.9738ms
[2025-12-22 23:15:07.087] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:15:07.088] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 16.8914ms
[2025-12-22 23:15:23.682] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-22 23:15:23.684] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:15:23.685] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 2.4132ms
[2025-12-22 23:15:23.686] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 187
[2025-12-22 23:15:23.688] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:15:23.689] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:15:23.690] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:15:23.693] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:23.696] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:23.697] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "c75a4aab-c6d6-47c8-b866-56ee05fc57b6", Notes: null, ItemsCount: 1
[2025-12-22 23:15:23.699] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 23:15:23.701] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:23.703] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e3b024ce-9139-4b59-a73b-9dfa81d65721", Quantity: 1, Notes: null
[2025-12-22 23:15:23.708] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p13='?' (DbType = Guid), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Orders] SET [Total] = @p12
OUTPUT 1
WHERE [Id] = @p13;
[2025-12-22 23:15:23.722] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "8c01fef3-1393-4356-9450-9b07938a076e" создан пользователем "c75a4aab-c6d6-47c8-b866-56ee05fc57b6". Сумма: 100.00, Блюд: 1
[2025-12-22 23:15:23.724] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 23:15:23.725] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 33.8413ms
[2025-12-22 23:15:23.726] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:15:23.728] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 41.7611ms
[2025-12-22 23:15:23.730] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:15:23.732] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:15:23.733] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 2.4127ms
[2025-12-22 23:15:23.734] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:15:23.737] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:15:23.738] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:15:23.738] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:15:23.742] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:15:23.744] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 23:15:23.746] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 20, Всего: 22, Страница: 1
[2025-12-22 23:15:23.747] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:15:23.748] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 8.5347ms
[2025-12-22 23:15:23.750] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:15:23.751] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 16.5919ms
[2025-12-22 23:20:07.642] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:20:07.642] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:20:07.644] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:20:07.647] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:20:07.648] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 6.3091ms
[2025-12-22 23:20:07.649] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 6.8154ms
[2025-12-22 23:20:07.652] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:20:07.652] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:20:07.660] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:20:07.662] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:20:07.662] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:20:07.663] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:20:07.664] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:20:07.665] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:20:07.674] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:20:07.677] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:20:07.677] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:20:07.680] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:20:07.681] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:20:07.682] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:20:07.685] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:20:07.687] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:20:07.689] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:20:07.690] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 23:20:07.691] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:20:07.693] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 103990.00, Заказов: 22
[2025-12-22 23:20:07.693] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:20:07.694] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:20:07.696] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 28.9824ms
[2025-12-22 23:20:07.697] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 28.1505ms
[2025-12-22 23:20:07.698] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:20:07.699] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:20:07.700] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 48.4203ms
[2025-12-22 23:20:07.701] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 48.9174ms
[2025-12-22 23:20:07.705] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:20:07.705] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:20:07.709] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:20:07.712] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:20:07.712] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 6.9723ms
[2025-12-22 23:20:07.713] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 7.4714ms
[2025-12-22 23:20:07.714] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:20:07.715] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:20:07.719] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:20:07.721] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:20:07.722] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:20:07.722] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:20:07.723] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:20:07.724] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:20:07.727] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:20:07.728] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:20:07.729] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:20:07.731] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:20:07.731] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 6.1671ms
[2025-12-22 23:20:07.733] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:20:07.734] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:20:07.736] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:20:07.737] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 22.5167ms
[2025-12-22 23:20:07.740] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:20:07.742] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 65530.00, Заказов: 20
[2025-12-22 23:20:07.743] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:20:07.744] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 17.1867ms
[2025-12-22 23:20:07.745] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:20:07.746] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 31.51ms
[2025-12-22 23:20:07.748] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:20:07.749] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:20:07.751] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:20:07.752] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:20:07.753] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 4.6553ms
[2025-12-22 23:20:07.754] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:20:07.755] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:20:07.757] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:20:07.759] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:20:07.760] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:20:07.761] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:20:07.761] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:20:07.763] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:20:07.765] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:20:07.766] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:20:07.767] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:20:07.770] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:20:07.770] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 6.2212ms
[2025-12-22 23:20:07.772] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:20:07.772] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:20:07.774] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:20:07.775] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 19.789ms
[2025-12-22 23:20:07.775] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:20:07.779] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.0515ms
[2025-12-22 23:20:07.780] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:20:07.781] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 31.8291ms
[2025-12-22 23:20:07.783] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:20:07.783] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:20:07.785] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:20:07.787] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:20:07.787] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 4.3259ms
[2025-12-22 23:20:07.788] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 4.9142ms
[2025-12-22 23:20:07.790] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:20:07.790] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:20:07.796] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:20:07.798] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:20:07.798] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:20:07.799] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:20:07.799] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:20:07.800] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:20:07.803] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:20:07.804] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:20:07.806] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:20:07.807] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:20:07.808] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:20:07.810] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:20:07.811] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:20:07.813] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:20:07.815] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:20:07.816] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:20:07.817] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 19510.00, Заказов: 8
[2025-12-22 23:20:07.819] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 27150.00, Заказов: 6
[2025-12-22 23:20:07.820] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:20:07.821] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:20:07.821] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.9856ms
[2025-12-22 23:20:07.822] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.5088ms
[2025-12-22 23:20:07.823] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:20:07.824] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:20:07.825] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 35.1844ms
[2025-12-22 23:20:07.826] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 36.0254ms
[2025-12-22 23:20:07.829] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:20:07.832] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:20:07.833] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 4.3386ms
[2025-12-22 23:20:07.835] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:20:07.837] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:20:07.838] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:20:07.839] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:20:07.844] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 23:20:07.845] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 23:20:07.846] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:20:07.847] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 6.7488ms
[2025-12-22 23:20:07.848] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:20:07.849] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 14.192ms
[2025-12-22 23:20:07.852] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:20:07.854] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:20:07.856] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 3.2498ms
[2025-12-22 23:20:07.858] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:20:07.861] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:20:07.862] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:20:07.863] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:20:07.866] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 23:20:07.869] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:20:07.870] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 5.7825ms
[2025-12-22 23:20:07.871] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:20:07.872] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 14.2459ms
[2025-12-22 23:20:07.875] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 23:20:07.877] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:20:07.878] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.4376ms
[2025-12-22 23:20:07.879] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 23:20:07.882] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:20:07.883] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:20:07.883] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:20:07.887] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 23:20:07.888] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:20:07.889] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 4.0739ms
[2025-12-22 23:20:07.891] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:20:07.891] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 12.2818ms
[2025-12-22 23:22:49.145] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:22:49.145] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:22:49.154] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:22:49.156] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:22:49.157] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 11.7465ms
[2025-12-22 23:22:49.158] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 12.7186ms
[2025-12-22 23:22:49.160] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:22:49.160] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:22:49.167] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:22:49.169] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:22:49.169] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:22:49.170] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:22:49.171] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:22:49.171] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:22:49.177] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:22:49.177] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:22:49.181] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:22:49.184] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:22:49.187] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:22:49.187] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:22:49.190] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:22:49.190] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:22:49.196] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 23:22:49.197] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:22:49.198] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 103990.00, Заказов: 22
[2025-12-22 23:22:49.199] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:22:49.200] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:22:49.201] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:22:49.202] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 27.4961ms
[2025-12-22 23:22:49.203] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 30.1676ms
[2025-12-22 23:22:49.204] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:22:49.205] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:22:49.206] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 46.1556ms
[2025-12-22 23:22:49.207] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 47.5223ms
[2025-12-22 23:22:49.212] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:22:49.212] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:22:49.215] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:22:49.216] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:22:49.217] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 5.2778ms
[2025-12-22 23:22:49.218] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 5.8661ms
[2025-12-22 23:22:49.219] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:22:49.219] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:22:49.224] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:22:49.226] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:22:49.227] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:22:49.227] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:22:49.228] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:22:49.229] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:22:49.232] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:22:49.232] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:22:49.235] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:22:49.236] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:22:49.238] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:22:49.238] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 8.4385ms
[2025-12-22 23:22:49.240] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:22:49.241] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:22:49.243] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 24.0587ms
[2025-12-22 23:22:49.243] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:22:49.248] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 65530.00, Заказов: 20
[2025-12-22 23:22:49.249] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:22:49.250] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 18.7057ms
[2025-12-22 23:22:49.251] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:22:49.252] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 32.7977ms
[2025-12-22 23:22:49.255] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:22:49.255] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:22:49.257] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:22:49.259] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:22:49.259] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 4.7519ms
[2025-12-22 23:22:49.260] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:22:49.261] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:22:49.263] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:22:49.265] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:22:49.267] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:22:49.267] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:22:49.268] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:22:49.270] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:22:49.271] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:22:49.272] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:22:49.273] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:22:49.275] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:22:49.276] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.5601ms
[2025-12-22 23:22:49.278] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:22:49.279] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:22:49.280] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:22:49.281] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 19.785ms
[2025-12-22 23:22:49.282] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:22:49.285] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 18.9462ms
[2025-12-22 23:22:49.286] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:22:49.287] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 32.1493ms
[2025-12-22 23:22:49.291] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:22:49.291] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:22:49.293] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:22:49.295] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:22:49.296] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 4.7227ms
[2025-12-22 23:22:49.296] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 5.2798ms
[2025-12-22 23:22:49.298] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:22:49.298] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:22:49.303] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:22:49.305] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:22:49.306] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:22:49.306] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:22:49.307] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:22:49.308] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:22:49.310] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:22:49.311] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:22:49.312] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:22:49.315] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:22:49.316] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:22:49.318] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:22:49.319] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:22:49.320] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:22:49.322] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:22:49.324] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:22:49.325] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 27150.00, Заказов: 6
[2025-12-22 23:22:49.326] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 19510.00, Заказов: 8
[2025-12-22 23:22:49.327] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:22:49.328] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:22:49.329] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.221ms
[2025-12-22 23:22:49.330] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.0497ms
[2025-12-22 23:22:49.331] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:22:49.332] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:22:49.333] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 34.7755ms
[2025-12-22 23:22:49.334] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 35.6657ms
[2025-12-22 23:22:49.338] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:22:49.341] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:22:49.341] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 3.7137ms
[2025-12-22 23:22:49.343] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:22:49.346] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:22:49.347] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:22:49.348] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:22:49.360] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 23:22:49.362] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 23:22:49.362] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:22:49.364] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 14.7211ms
[2025-12-22 23:22:49.365] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:22:49.366] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 23.0258ms
[2025-12-22 23:22:49.370] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:22:49.372] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:22:49.373] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 3.0288ms
[2025-12-22 23:22:49.375] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:22:49.377] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:22:49.378] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:22:49.379] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:22:49.387] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 23:22:49.389] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:22:49.390] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 9.8426ms
[2025-12-22 23:22:49.391] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:22:49.392] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 17.6556ms
[2025-12-22 23:22:49.397] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-22T20:22:49.394Z&endDate=2025-12-22T20:22:49.394Z - null null
[2025-12-22 23:22:49.399] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:22:49.400] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-22T20:22:49.394Z&endDate=2025-12-22T20:22:49.394Z - 204 null null 3.1763ms
[2025-12-22 23:22:49.401] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-22T20:22:49.394Z&endDate=2025-12-22T20:22:49.394Z - null null
[2025-12-22 23:22:49.405] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:22:49.406] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:22:49.407] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:22:49.410] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:22:49.411] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:22:49.412] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 4.0736ms
[2025-12-22 23:22:49.414] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:22:49.415] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-22T20:22:49.394Z&endDate=2025-12-22T20:22:49.394Z - 200 null application/json; charset=utf-8 13.2304ms
[2025-12-22 23:23:05.065] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:23:05.067] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:23:05.068] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:23:05.070] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:23:05.071] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 6.4048ms
[2025-12-22 23:23:05.072] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 5.2031ms
[2025-12-22 23:23:05.074] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:23:05.074] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:23:05.078] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:23:05.082] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:23:05.083] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:23:05.083] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:23:05.084] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:23:05.085] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:23:05.090] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:23:05.090] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:23:05.097] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:23:05.100] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:23:05.101] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:23:05.102] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:23:05.105] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:23:05.105] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:23:05.109] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 23:23:05.111] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:23:05.111] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 103990.00, Заказов: 22
[2025-12-22 23:23:05.113] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:23:05.114] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:23:05.116] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:23:05.117] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 31.0855ms
[2025-12-22 23:23:05.118] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 30.7635ms
[2025-12-22 23:23:05.120] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:23:05.121] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:23:05.121] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 47.4733ms
[2025-12-22 23:23:05.122] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 48.1016ms
[2025-12-22 23:23:05.127] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:23:05.127] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:23:05.131] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:23:05.133] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:23:05.134] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 6.9767ms
[2025-12-22 23:23:05.135] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 7.5579ms
[2025-12-22 23:23:05.138] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:23:05.138] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:23:05.143] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:23:05.145] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:23:05.146] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:23:05.146] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:23:05.147] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:23:05.148] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:23:05.151] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:23:05.151] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:23:05.153] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:23:05.154] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:23:05.156] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:23:05.157] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 7.7079ms
[2025-12-22 23:23:05.159] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:23:05.160] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:23:05.162] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:23:05.162] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 24.1426ms
[2025-12-22 23:23:05.165] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 65530.00, Заказов: 20
[2025-12-22 23:23:05.168] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:23:05.169] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.0245ms
[2025-12-22 23:23:05.170] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:23:05.171] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 32.9942ms
[2025-12-22 23:23:05.176] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:23:05.176] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:23:05.178] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:23:05.180] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:23:05.180] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 4.7224ms
[2025-12-22 23:23:05.181] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:23:05.183] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:23:05.184] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:23:05.185] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:23:05.187] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:23:05.187] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:23:05.188] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:23:05.190] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:23:05.190] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:23:05.191] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:23:05.193] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:23:05.194] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.4684ms
[2025-12-22 23:23:05.196] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:23:05.197] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:23:05.199] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 16.2198ms
[2025-12-22 23:23:05.199] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:23:05.204] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:23:05.206] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:23:05.206] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.4314ms
[2025-12-22 23:23:05.207] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:23:05.208] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 32.5745ms
[2025-12-22 23:23:05.212] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:23:05.213] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:23:05.216] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:23:05.217] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:23:05.218] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 5.5649ms
[2025-12-22 23:23:05.218] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 5.4831ms
[2025-12-22 23:23:05.220] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:23:05.221] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:23:05.226] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:23:05.229] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:23:05.230] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:23:05.231] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:23:05.232] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:23:05.232] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:23:05.235] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:23:05.235] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:23:05.237] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:23:05.238] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:23:05.240] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:23:05.241] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:23:05.242] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:23:05.244] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:23:05.246] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:23:05.247] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:23:05.248] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 19510.00, Заказов: 8
[2025-12-22 23:23:05.250] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 27150.00, Заказов: 6
[2025-12-22 23:23:05.250] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:23:05.251] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:23:05.252] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 18.9132ms
[2025-12-22 23:23:05.253] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.0875ms
[2025-12-22 23:23:05.254] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:23:05.255] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:23:05.256] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 35.758ms
[2025-12-22 23:23:05.257] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 36.174ms
[2025-12-22 23:23:05.261] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:23:05.264] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:23:05.264] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 3.2727ms
[2025-12-22 23:23:05.266] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:23:05.269] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:23:05.270] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:23:05.270] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:23:05.284] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 23:23:05.286] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 23:23:05.287] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:23:05.289] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 16.8182ms
[2025-12-22 23:23:05.290] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:23:05.291] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 24.581ms
[2025-12-22 23:23:05.295] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:23:05.297] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:23:05.298] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 3.3368ms
[2025-12-22 23:23:05.300] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:23:05.303] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:23:05.303] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:23:05.304] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:23:05.311] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 23:23:05.313] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:23:05.314] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 9.2358ms
[2025-12-22 23:23:05.315] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:23:05.316] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 16.2747ms
[2025-12-22 23:23:05.322] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-22T20:23:05.318Z&endDate=2025-12-22T20:23:05.318Z - null null
[2025-12-22 23:23:05.324] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:23:05.325] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-22T20:23:05.318Z&endDate=2025-12-22T20:23:05.318Z - 204 null null 2.9634ms
[2025-12-22 23:23:05.326] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-22T20:23:05.318Z&endDate=2025-12-22T20:23:05.318Z - null null
[2025-12-22 23:23:05.329] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:23:05.330] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:23:05.331] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:23:05.333] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:23:05.335] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:23:05.337] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 4.5795ms
[2025-12-22 23:23:05.338] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:23:05.339] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-22T20:23:05.318Z&endDate=2025-12-22T20:23:05.318Z - 200 null application/json; charset=utf-8 12.5046ms
[2025-12-22 23:24:58.335] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 23:24:58.338] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:24:58.338] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 3.6649ms
[2025-12-22 23:24:58.340] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 23:24:58.344] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:24:58.345] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 23:24:58.347] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.UserReadDto]]] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-22 23:24:58.352] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:24:58.357] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[IsDeleted], [u0].[Notes], [u0].[PasswordHash], [u0].[RoleId], [u0].[UpdatedAt], [u0].[UpdatedBy], [u0].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM (
    SELECT [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-22 23:24:58.359] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 23:24:58.360] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:24:58.361] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 11.5841ms
[2025-12-22 23:24:58.362] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 23:24:58.363] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 22.9337ms
[2025-12-22 23:24:58.367] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 23:24:58.368] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:24:58.369] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 2.24ms
[2025-12-22 23:24:58.370] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 23:24:58.373] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:24:58.373] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 23:24:58.374] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 23:24:58.379] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:24:58.384] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 23:24:58.386] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 23:24:58.387] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:24:58.388] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 12.6639ms
[2025-12-22 23:24:58.389] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 23:24:58.390] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 19.7969ms
[2025-12-22 23:24:58.393] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:24:58.395] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:24:58.396] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 3.3654ms
[2025-12-22 23:24:58.399] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:24:58.401] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:24:58.402] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:24:58.403] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:24:58.407] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:24:58.413] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 23:24:58.415] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 20, Всего: 22, Страница: 1
[2025-12-22 23:24:58.416] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:24:58.417] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 12.6893ms
[2025-12-22 23:24:58.418] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:24:58.419] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 20.0054ms
[2025-12-22 23:25:09.423] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-22 23:25:09.425] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:25:09.426] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 2.994ms
[2025-12-22 23:25:09.428] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 187
[2025-12-22 23:25:09.430] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:25:09.431] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:25:09.432] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:25:09.437] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:25:09.440] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:25:09.442] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "c75a4aab-c6d6-47c8-b866-56ee05fc57b6", Notes: null, ItemsCount: 1
[2025-12-22 23:25:09.446] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 23:25:09.449] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:25:09.451] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e3b024ce-9139-4b59-a73b-9dfa81d65721", Quantity: 1, Notes: null
[2025-12-22 23:25:09.456] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p13='?' (DbType = Guid), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Orders] SET [Total] = @p12
OUTPUT 1
WHERE [Id] = @p13;
[2025-12-22 23:25:09.459] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "6a885121-86c5-460f-a1c9-8bc9c939a23a" создан пользователем "c75a4aab-c6d6-47c8-b866-56ee05fc57b6". Сумма: 100.00, Блюд: 1
[2025-12-22 23:25:09.460] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 23:25:09.462] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 27.9536ms
[2025-12-22 23:25:09.463] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:25:09.464] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 36.0042ms
[2025-12-22 23:25:09.466] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:25:09.468] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:25:09.469] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 2.3404ms
[2025-12-22 23:25:09.470] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:25:09.472] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:25:09.473] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:25:09.474] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:25:09.478] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:25:09.483] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 23:25:09.485] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 20, Всего: 23, Страница: 1
[2025-12-22 23:25:09.486] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:25:09.488] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 12.392ms
[2025-12-22 23:25:09.489] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:25:09.490] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 20.1838ms
[2025-12-22 23:25:14.113] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/c83a43ca-8330-46b2-8a4b-8944c4e25091 - null null
[2025-12-22 23:25:14.115] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:25:14.115] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/c83a43ca-8330-46b2-8a4b-8944c4e25091 - 204 null null 2.8647ms
[2025-12-22 23:25:14.117] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/c83a43ca-8330-46b2-8a4b-8944c4e25091 - null null
[2025-12-22 23:25:14.120] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:25:14.121] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-22 23:25:14.122] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-22 23:25:14.126] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:25:14.130] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-22 23:25:14.132] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:25:14.133] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 9.2156ms
[2025-12-22 23:25:14.134] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-22 23:25:14.135] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/c83a43ca-8330-46b2-8a4b-8944c4e25091 - 200 null application/json; charset=utf-8 17.4277ms
[2025-12-22 23:25:17.194] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/6a885121-86c5-460f-a1c9-8bc9c939a23a - null null
[2025-12-22 23:25:17.196] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:25:17.196] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/6a885121-86c5-460f-a1c9-8bc9c939a23a - 204 null null 2.6824ms
[2025-12-22 23:25:17.198] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/6a885121-86c5-460f-a1c9-8bc9c939a23a - null null
[2025-12-22 23:25:17.201] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:25:17.202] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-22 23:25:17.203] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-22 23:25:17.205] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:25:17.208] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-22 23:25:17.209] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:25:17.210] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 6.0781ms
[2025-12-22 23:25:17.212] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-22 23:25:17.213] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/6a885121-86c5-460f-a1c9-8bc9c939a23a - 200 null application/json; charset=utf-8 14.6143ms
[2025-12-22 23:27:00.073] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:27:00.076] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:27:00.078] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:00.080] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:00.080] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 7.0828ms
[2025-12-22 23:27:00.081] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 4.9874ms
[2025-12-22 23:27:00.083] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:27:00.083] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:27:00.088] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:00.090] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:00.091] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:27:00.092] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:27:00.093] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:27:00.094] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:27:00.099] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:27:00.103] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:27:00.103] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:27:00.106] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:27:00.108] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:27:00.110] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:27:00.112] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:27:00.113] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:27:00.117] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 23:27:00.118] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:27:00.118] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 104090.00, Заказов: 23
[2025-12-22 23:27:00.120] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:27:00.121] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:27:00.122] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:27:00.123] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 27.8656ms
[2025-12-22 23:27:00.125] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 28.3063ms
[2025-12-22 23:27:00.127] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:27:00.128] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:27:00.128] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 45.2949ms
[2025-12-22 23:27:00.129] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 46.0929ms
[2025-12-22 23:27:00.132] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:27:00.132] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:27:00.136] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:00.137] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:00.138] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 5.8003ms
[2025-12-22 23:27:00.139] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 6.2235ms
[2025-12-22 23:27:00.140] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:27:00.140] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:27:00.146] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:00.148] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:00.148] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:27:00.149] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:27:00.150] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:27:00.151] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:27:00.155] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:27:00.155] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:27:00.157] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:27:00.158] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:27:00.160] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:27:00.161] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 8.3607ms
[2025-12-22 23:27:00.163] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:27:00.163] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:27:00.166] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:27:00.166] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 25.7142ms
[2025-12-22 23:27:00.167] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 65630.00, Заказов: 21
[2025-12-22 23:27:00.170] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:27:00.171] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 17.5669ms
[2025-12-22 23:27:00.172] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:27:00.173] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 32.8768ms
[2025-12-22 23:27:00.176] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:27:00.176] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:27:00.178] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:00.180] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:00.180] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 4.4223ms
[2025-12-22 23:27:00.181] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:27:00.182] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:27:00.184] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:27:00.186] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:00.187] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:27:00.188] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:27:00.188] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:27:00.190] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:27:00.193] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:27:00.193] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:27:00.195] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:27:00.197] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:27:00.197] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.9404ms
[2025-12-22 23:27:00.199] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:27:00.200] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:27:00.201] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:27:00.202] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 19.8651ms
[2025-12-22 23:27:00.203] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:27:00.206] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 18.9399ms
[2025-12-22 23:27:00.207] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:27:00.208] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 31.1402ms
[2025-12-22 23:27:00.211] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:27:00.211] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:27:00.213] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:00.215] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:00.216] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 4.4483ms
[2025-12-22 23:27:00.216] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 5.066ms
[2025-12-22 23:27:00.218] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:27:00.218] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:27:00.223] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:00.225] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:00.225] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:27:00.226] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:27:00.227] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:27:00.227] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:27:00.230] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:27:00.232] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:27:00.233] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:27:00.234] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:27:00.236] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:27:00.237] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:27:00.239] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:27:00.240] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:27:00.242] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:27:00.244] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:27:00.245] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 27150.00, Заказов: 6
[2025-12-22 23:27:00.246] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 19510.00, Заказов: 8
[2025-12-22 23:27:00.247] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:27:00.248] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:27:00.249] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 20.148ms
[2025-12-22 23:27:00.250] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 19.261ms
[2025-12-22 23:27:00.251] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:27:00.251] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:27:00.252] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 34.2166ms
[2025-12-22 23:27:00.255] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:27:00.253] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 34.7257ms
[2025-12-22 23:27:00.257] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:00.260] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 4.7991ms
[2025-12-22 23:27:00.262] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:27:00.265] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:00.265] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:27:00.266] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:27:00.277] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 23:27:00.279] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 23:27:00.280] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:27:00.281] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 13.8297ms
[2025-12-22 23:27:00.282] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:27:00.283] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 21.3873ms
[2025-12-22 23:27:00.286] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:27:00.287] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:00.288] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.1328ms
[2025-12-22 23:27:00.289] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:27:00.292] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:00.293] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:27:00.294] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:27:00.302] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 23:27:00.304] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:27:00.305] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 9.9562ms
[2025-12-22 23:27:00.306] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:27:00.307] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 17.7809ms
[2025-12-22 23:27:00.310] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-22T20:27:00.308Z&endDate=2025-12-22T20:27:00.308Z - null null
[2025-12-22 23:27:00.312] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:00.313] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-22T20:27:00.308Z&endDate=2025-12-22T20:27:00.308Z - 204 null null 2.3277ms
[2025-12-22 23:27:00.314] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-22T20:27:00.308Z&endDate=2025-12-22T20:27:00.308Z - null null
[2025-12-22 23:27:00.318] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:00.319] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:27:00.320] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:27:00.323] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:27:00.325] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:27:00.326] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 4.9722ms
[2025-12-22 23:27:00.327] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:27:00.328] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-22T20:27:00.308Z&endDate=2025-12-22T20:27:00.308Z - 200 null application/json; charset=utf-8 13.9927ms
[2025-12-22 23:27:02.240] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=month&startDate=2024-12-22T20:27:02.236Z&endDate=2025-12-22T20:27:02.236Z - null null
[2025-12-22 23:27:02.242] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:02.243] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=month&startDate=2024-12-22T20:27:02.236Z&endDate=2025-12-22T20:27:02.236Z - 204 null null 2.8797ms
[2025-12-22 23:27:02.245] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=month&startDate=2024-12-22T20:27:02.236Z&endDate=2025-12-22T20:27:02.236Z - null null
[2025-12-22 23:27:02.248] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:02.249] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:27:02.249] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:27:02.255] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:27:02.257] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:27:02.258] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 7.4853ms
[2025-12-22 23:27:02.259] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:27:02.260] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=month&startDate=2024-12-22T20:27:02.236Z&endDate=2025-12-22T20:27:02.236Z - 200 null application/json; charset=utf-8 15.5754ms
[2025-12-22 23:27:09.297] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=week&startDate=2024-12-22T20:27:09.294Z&endDate=2025-12-22T20:27:09.294Z - null null
[2025-12-22 23:27:09.299] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:09.300] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=week&startDate=2024-12-22T20:27:09.294Z&endDate=2025-12-22T20:27:09.294Z - 204 null null 2.5716ms
[2025-12-22 23:27:09.302] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=week&startDate=2024-12-22T20:27:09.294Z&endDate=2025-12-22T20:27:09.294Z - null null
[2025-12-22 23:27:09.305] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:09.306] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:27:09.306] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:27:09.309] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:27:09.312] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:27:09.313] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.5435ms
[2025-12-22 23:27:09.314] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:27:09.315] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=week&startDate=2024-12-22T20:27:09.294Z&endDate=2025-12-22T20:27:09.294Z - 200 null application/json; charset=utf-8 13.1344ms
[2025-12-22 23:27:10.732] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-22T20:27:10.727Z&endDate=2025-12-22T20:27:10.727Z - null null
[2025-12-22 23:27:10.734] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:10.735] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-22T20:27:10.727Z&endDate=2025-12-22T20:27:10.727Z - 204 null null 2.9339ms
[2025-12-22 23:27:10.738] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-22T20:27:10.727Z&endDate=2025-12-22T20:27:10.727Z - null null
[2025-12-22 23:27:10.741] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:27:10.741] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:27:10.742] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:27:10.745] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:27:10.747] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:27:10.748] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 3.9704ms
[2025-12-22 23:27:10.749] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:27:10.749] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-22T20:27:10.727Z&endDate=2025-12-22T20:27:10.727Z - 200 null application/json; charset=utf-8 11.7498ms
[2025-12-22 23:28:53.237] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:28:53.249] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:28:53.252] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:28:53.258] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:28:53.259] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 21.8506ms
[2025-12-22 23:28:53.262] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 13.6843ms
[2025-12-22 23:28:53.266] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:28:53.268] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:28:53.291] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:28:53.298] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:28:53.301] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:28:53.304] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:28:53.306] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:28:53.310] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:28:53.327] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:28:53.328] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:28:53.337] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:28:53.344] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:28:53.350] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:28:53.351] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:28:53.367] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:28:53.368] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:28:53.388] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:28:53.395] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 23:28:53.396] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:28:53.404] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 104090.00, Заказов: 23
[2025-12-22 23:28:53.407] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:28:53.409] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:28:53.413] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 95.1046ms
[2025-12-22 23:28:53.416] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 100.5021ms
[2025-12-22 23:28:53.421] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:28:53.426] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:28:53.430] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 164.4038ms
[2025-12-22 23:28:53.428] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 159.7116ms
[2025-12-22 23:28:53.445] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:28:53.445] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:28:53.458] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:28:53.465] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:28:53.467] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 22.4182ms
[2025-12-22 23:28:53.469] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 23.8873ms
[2025-12-22 23:28:53.473] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:28:53.475] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:28:53.495] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:28:53.502] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:28:53.504] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:28:53.505] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:28:53.507] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:28:53.509] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:28:53.520] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:28:53.521] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:28:53.527] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:28:53.531] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:28:53.537] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:28:53.539] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 24.9134ms
[2025-12-22 23:28:53.545] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:28:53.546] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:28:53.551] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:28:53.551] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 77.7807ms
[2025-12-22 23:28:53.558] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 65630.00, Заказов: 21
[2025-12-22 23:28:53.571] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:28:53.577] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 59.9466ms
[2025-12-22 23:28:53.581] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:28:53.584] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 108.764ms
[2025-12-22 23:28:53.593] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:28:53.594] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:28:53.602] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:28:53.607] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:28:53.608] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 14.9175ms
[2025-12-22 23:28:53.609] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:28:53.616] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:28:53.620] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:28:53.624] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:28:53.631] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:28:53.637] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:28:53.643] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:28:53.644] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:28:53.653] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:28:53.654] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:28:53.659] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:28:53.665] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:28:53.665] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:28:53.672] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:28:53.674] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:28:53.677] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 14.1851ms
[2025-12-22 23:28:53.679] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 60.6561ms
[2025-12-22 23:28:53.681] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:28:53.686] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 61.9761ms
[2025-12-22 23:28:53.684] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:28:53.694] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 100.5312ms
[2025-12-22 23:28:53.707] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:28:53.707] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:28:53.714] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:28:53.721] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:28:53.723] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 16.5814ms
[2025-12-22 23:28:53.725] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 18.2995ms
[2025-12-22 23:28:53.727] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:28:53.740] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:28:53.728] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:28:53.741] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:28:53.746] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:28:53.748] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:28:53.748] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:28:53.751] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:28:53.752] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:28:53.757] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:28:53.762] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:28:53.769] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:28:53.774] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:28:53.778] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:28:53.784] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:28:53.789] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:28:53.797] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:28:53.803] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:28:53.807] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 19510.00, Заказов: 8
[2025-12-22 23:28:53.814] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 27150.00, Заказов: 6
[2025-12-22 23:28:53.817] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:28:53.821] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:28:53.823] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 72.8507ms
[2025-12-22 23:28:53.825] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 70.1707ms
[2025-12-22 23:28:53.828] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:28:53.833] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:28:53.835] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 108.2244ms
[2025-12-22 23:28:53.838] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 110.3219ms
[2025-12-22 23:28:53.845] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:28:53.857] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:28:53.858] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 13.1845ms
[2025-12-22 23:28:53.861] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:28:53.871] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:28:53.873] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:28:53.876] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:28:53.909] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (27ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 23:28:53.916] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 23:28:53.918] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:28:53.919] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 38.784ms
[2025-12-22 23:28:53.922] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:28:53.924] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 63.6257ms
[2025-12-22 23:28:53.937] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:28:53.943] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:28:53.945] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 7.5425ms
[2025-12-22 23:28:53.948] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:28:53.956] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:28:53.957] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:28:53.959] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:28:53.992] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 23:28:53.998] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:28:54.002] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 37.4296ms
[2025-12-22 23:28:54.005] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:28:54.008] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 60.0677ms
[2025-12-22 23:28:54.021] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-22T20:28:54.016Z&endDate=2025-12-22T20:28:54.016Z - null null
[2025-12-22 23:28:54.028] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:28:54.031] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-22T20:28:54.016Z&endDate=2025-12-22T20:28:54.016Z - 204 null null 9.399ms
[2025-12-22 23:28:54.034] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-22T20:28:54.016Z&endDate=2025-12-22T20:28:54.016Z - null null
[2025-12-22 23:28:54.043] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:28:54.045] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:28:54.047] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:28:54.055] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:28:54.059] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:28:54.063] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 10.6528ms
[2025-12-22 23:28:54.065] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:28:54.067] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-22T20:28:54.016Z&endDate=2025-12-22T20:28:54.016Z - 200 null application/json; charset=utf-8 33.3682ms
[2025-12-22 23:29:32.311] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:29:32.333] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:29:32.340] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:29:32.347] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:29:32.349] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 37.3336ms
[2025-12-22 23:29:32.351] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 17.8918ms
[2025-12-22 23:29:32.355] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:29:32.358] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:29:32.380] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:29:32.388] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:29:32.391] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:29:32.393] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:29:32.396] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:29:32.399] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:29:32.414] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:29:32.414] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:29:32.424] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:29:32.429] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:29:32.435] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:29:32.436] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:29:32.444] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:29:32.445] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:29:32.456] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 23:29:32.460] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:29:32.461] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 104090.00, Заказов: 23
[2025-12-22 23:29:32.467] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:29:32.470] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:29:32.473] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:29:32.476] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 71.3402ms
[2025-12-22 23:29:32.479] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 72.3656ms
[2025-12-22 23:29:32.482] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:29:32.485] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:29:32.488] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 132.7247ms
[2025-12-22 23:29:32.491] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 132.2463ms
[2025-12-22 23:29:32.501] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:29:32.502] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:29:32.515] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:29:32.517] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:29:32.521] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 19.8865ms
[2025-12-22 23:29:32.523] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 21.5789ms
[2025-12-22 23:29:32.527] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:29:32.529] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:29:32.542] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:29:32.545] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:29:32.547] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:29:32.548] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:29:32.551] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:29:32.553] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:29:32.565] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:29:32.566] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:29:32.571] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:29:32.576] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:29:32.577] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 17.9939ms
[2025-12-22 23:29:32.584] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:29:32.587] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:29:32.592] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:29:32.593] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 66.1572ms
[2025-12-22 23:29:32.599] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:29:32.603] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 65630.00, Заказов: 21
[2025-12-22 23:29:32.606] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:29:32.609] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 45.7546ms
[2025-12-22 23:29:32.613] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:29:32.616] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 86.999ms
[2025-12-22 23:29:32.621] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:29:32.623] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:29:32.631] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:29:32.636] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:29:32.638] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 16.4839ms
[2025-12-22 23:29:32.640] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:29:32.641] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:29:32.647] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:29:32.652] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:29:32.658] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:29:32.658] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:29:32.660] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:29:32.665] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:29:32.671] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:29:32.671] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:29:32.675] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:29:32.680] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:29:32.681] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 14.0747ms
[2025-12-22 23:29:32.688] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:29:32.689] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:29:32.690] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 49.185ms
[2025-12-22 23:29:32.696] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:29:32.711] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:29:32.714] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 58.4465ms
[2025-12-22 23:29:32.717] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:29:32.719] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 96.2464ms
[2025-12-22 23:29:32.728] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:29:32.729] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:29:32.739] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:29:32.745] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:29:32.751] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 21.5722ms
[2025-12-22 23:29:32.748] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 19.9879ms
[2025-12-22 23:29:32.756] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:29:32.757] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:29:32.777] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:29:32.783] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:29:32.784] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:29:32.786] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:29:32.789] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:29:32.791] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:29:32.798] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:29:32.801] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:29:32.804] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:29:32.808] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:29:32.811] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:29:32.814] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:29:32.818] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:29:32.823] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:29:32.828] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:29:32.838] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:29:32.841] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 19510.00, Заказов: 8
[2025-12-22 23:29:32.845] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 27150.00, Заказов: 6
[2025-12-22 23:29:32.848] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:29:32.851] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:29:32.854] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 57.9166ms
[2025-12-22 23:29:32.857] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 58.6456ms
[2025-12-22 23:29:32.861] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:29:32.866] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:29:32.868] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 112.1516ms
[2025-12-22 23:29:32.872] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 114.9683ms
[2025-12-22 23:29:32.880] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:29:32.891] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:29:32.894] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 14.2505ms
[2025-12-22 23:29:32.900] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:29:32.910] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:29:32.912] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:29:32.915] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:29:32.952] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (32ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 23:29:32.964] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 23:29:32.966] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:29:32.971] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 52.3219ms
[2025-12-22 23:29:32.975] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:29:32.977] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 76.9132ms
[2025-12-22 23:29:32.986] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:29:32.995] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:29:32.997] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 11.5412ms
[2025-12-22 23:29:33.000] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:29:33.009] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:29:33.013] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:29:33.017] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:29:33.050] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 23:29:33.056] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:29:33.058] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 34.5115ms
[2025-12-22 23:29:33.063] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:29:33.065] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 65.4998ms
[2025-12-22 23:29:33.076] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 23:29:33.081] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:29:33.085] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 9.1858ms
[2025-12-22 23:29:33.090] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-22 23:29:33.101] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:29:33.104] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:29:33.108] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:29:33.118] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-22 23:29:33.126] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:29:33.131] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 19.0273ms
[2025-12-22 23:29:33.136] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:29:33.140] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 49.2861ms
[2025-12-22 23:30:34.552] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:30:34.556] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:30:34.564] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:30:34.574] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:30:34.576] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 24.9234ms
[2025-12-22 23:30:34.579] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 22.7486ms
[2025-12-22 23:30:34.584] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:30:34.587] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:30:34.607] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:30:34.614] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:30:34.617] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:30:34.619] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:30:34.622] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:30:34.625] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:30:34.641] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:30:34.643] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:30:34.655] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:30:34.658] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:30:34.669] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:30:34.670] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:30:34.682] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:30:34.684] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:30:34.697] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 23:30:34.701] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:30:34.704] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 104090.00, Заказов: 23
[2025-12-22 23:30:34.710] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:30:34.713] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:30:34.717] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:30:34.721] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 90.5336ms
[2025-12-22 23:30:34.725] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 88.2966ms
[2025-12-22 23:30:34.729] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:30:34.733] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:30:34.736] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 151.5881ms
[2025-12-22 23:30:34.738] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 151.8908ms
[2025-12-22 23:30:34.750] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:30:34.752] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:30:34.762] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:30:34.769] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:30:34.772] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 21.5854ms
[2025-12-22 23:30:34.774] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 21.3534ms
[2025-12-22 23:30:34.777] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:30:34.778] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:30:34.798] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:30:34.806] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:30:34.807] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:30:34.809] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:30:34.812] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:30:34.816] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:30:34.827] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:30:34.831] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:30:34.833] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:30:34.840] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 21.2073ms
[2025-12-22 23:30:34.841] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:30:34.843] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:30:34.850] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 73.0223ms
[2025-12-22 23:30:34.854] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:30:34.872] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:30:34.886] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:30:34.893] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 65630.00, Заказов: 21
[2025-12-22 23:30:34.897] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:30:34.903] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 80.663ms
[2025-12-22 23:30:34.907] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:30:34.911] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 132.462ms
[2025-12-22 23:30:34.920] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:30:34.921] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:30:34.932] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:30:34.938] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:30:34.940] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 19.6041ms
[2025-12-22 23:30:34.943] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:30:34.945] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:30:34.958] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:30:34.966] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:30:34.972] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:30:34.974] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:30:34.976] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:30:34.988] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:30:34.990] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:30:34.994] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:30:35.004] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 25.3179ms
[2025-12-22 23:30:35.008] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:30:35.008] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:30:35.016] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 70.9786ms
[2025-12-22 23:30:35.022] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:30:35.040] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:30:35.046] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:30:35.050] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:30:35.054] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 84.2699ms
[2025-12-22 23:30:35.058] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:30:35.061] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 139.6028ms
[2025-12-22 23:30:35.074] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:30:35.077] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:30:35.081] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:30:35.085] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:30:35.087] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 12.9592ms
[2025-12-22 23:30:35.089] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 12.2842ms
[2025-12-22 23:30:35.093] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:30:35.094] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:30:35.107] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:30:35.114] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:30:35.116] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:30:35.118] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:30:35.120] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:30:35.122] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:30:35.138] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:30:35.138] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:30:35.151] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:30:35.151] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:30:35.163] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:30:35.165] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:30:35.175] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:30:35.175] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:30:35.188] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:30:35.190] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:30:35.196] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 19510.00, Заказов: 8
[2025-12-22 23:30:35.202] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 27150.00, Заказов: 6
[2025-12-22 23:30:35.207] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:30:35.211] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:30:35.216] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 89.6034ms
[2025-12-22 23:30:35.221] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 88.2908ms
[2025-12-22 23:30:35.223] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:30:35.227] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:30:35.230] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 136.9892ms
[2025-12-22 23:30:35.234] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 140.2493ms
[2025-12-22 23:30:35.245] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:30:35.256] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:30:35.259] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 14.5056ms
[2025-12-22 23:30:35.264] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:30:35.276] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:30:35.279] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:30:35.283] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:30:35.324] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (34ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 23:30:35.329] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 23:30:35.332] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:30:35.335] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 47.662ms
[2025-12-22 23:30:35.339] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:30:35.342] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 78.1056ms
[2025-12-22 23:30:35.356] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:30:35.363] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:30:35.366] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 9.7027ms
[2025-12-22 23:30:35.371] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:30:35.384] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:30:35.386] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:30:35.389] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:30:35.429] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 23:30:35.436] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:30:35.438] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 43.836ms
[2025-12-22 23:30:35.440] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:30:35.441] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 70.1474ms
[2025-12-22 23:30:35.459] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:30:35.452Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:30:35.467] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:30:35.470] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:30:35.452Z&endDate=2026-12-31T20:59:59.999Z - 204 null null 10.3226ms
[2025-12-22 23:30:35.472] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:30:35.452Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:30:35.484] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:30:35.486] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:30:35.489] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:30:35.505] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:30:35.514] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:30:35.520] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 24.1477ms
[2025-12-22 23:30:35.524] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:30:35.526] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:30:35.452Z&endDate=2026-12-31T20:59:59.999Z - 200 null application/json; charset=utf-8 53.1699ms
[2025-12-22 23:31:34.426] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:31:34.429] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:31:34.431] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 5.0004ms
[2025-12-22 23:31:34.434] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:31:34.440] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:31:34.443] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:31:34.444] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:31:34.453] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:31:34.457] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:31:34.459] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 12.5467ms
[2025-12-22 23:31:34.461] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:31:34.462] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 28.5375ms
[2025-12-22 23:31:35.911] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2026-01-01T00:00:00.000Z&endDate=2026-12-31T23:59:59.999Z - null null
[2025-12-22 23:31:35.915] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:31:35.916] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2026-01-01T00:00:00.000Z&endDate=2026-12-31T23:59:59.999Z - 204 null null 4.92ms
[2025-12-22 23:31:35.919] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2026-01-01T00:00:00.000Z&endDate=2026-12-31T23:59:59.999Z - null null
[2025-12-22 23:31:35.924] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:31:35.926] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:31:35.930] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:31:35.940] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:31:35.948] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:31:35.954] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 16.5231ms
[2025-12-22 23:31:35.957] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:31:35.962] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2026-01-01T00:00:00.000Z&endDate=2026-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 43.0904ms
[2025-12-22 23:31:39.150] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:31:39.145Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:31:39.155] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:31:39.156] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:31:39.145Z&endDate=2026-12-31T20:59:59.999Z - 204 null null 6.7464ms
[2025-12-22 23:31:39.159] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:31:39.145Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:31:39.175] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:31:39.179] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:31:39.184] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:31:39.196] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:31:39.205] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:31:39.211] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 22.005ms
[2025-12-22 23:31:39.215] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:31:39.220] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:31:39.145Z&endDate=2026-12-31T20:59:59.999Z - 200 null application/json; charset=utf-8 61.0745ms
[2025-12-22 23:31:40.477] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:31:40.486] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:31:40.487] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 9.7798ms
[2025-12-22 23:31:40.489] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:31:40.502] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:31:40.505] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:31:40.506] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:31:40.516] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:31:40.521] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:31:40.524] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 15.5242ms
[2025-12-22 23:31:40.527] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:31:40.530] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 40.2069ms
[2025-12-22 23:31:41.919] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2026-01-01T00:00:00.000Z&endDate=2026-12-31T23:59:59.999Z - null null
[2025-12-22 23:31:41.926] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:31:41.928] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2026-01-01T00:00:00.000Z&endDate=2026-12-31T23:59:59.999Z - 204 null null 9.5064ms
[2025-12-22 23:31:41.930] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2026-01-01T00:00:00.000Z&endDate=2026-12-31T23:59:59.999Z - null null
[2025-12-22 23:31:41.945] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:31:41.948] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:31:41.952] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:31:41.967] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:31:41.974] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:31:41.978] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 20.8051ms
[2025-12-22 23:31:41.980] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:31:41.984] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2026-01-01T00:00:00.000Z&endDate=2026-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 53.3474ms
[2025-12-22 23:31:43.088] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:31:43.082Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:31:43.092] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:31:43.094] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:31:43.082Z&endDate=2026-12-31T20:59:59.999Z - 204 null null 6.109ms
[2025-12-22 23:31:43.097] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:31:43.082Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:31:43.109] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:31:43.114] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:31:43.118] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:31:43.134] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:31:43.139] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:31:43.145] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 19.9161ms
[2025-12-22 23:31:43.147] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:31:43.152] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:31:43.082Z&endDate=2026-12-31T20:59:59.999Z - 200 null application/json; charset=utf-8 55.1945ms
[2025-12-22 23:33:12.483] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2026-01-01T00:00:00.000Z&endDate=2026-12-31T23:59:59.999Z - null null
[2025-12-22 23:33:12.487] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:33:12.490] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2026-01-01T00:00:00.000Z&endDate=2026-12-31T23:59:59.999Z - 204 null null 5.9233ms
[2025-12-22 23:33:12.492] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2026-01-01T00:00:00.000Z&endDate=2026-12-31T23:59:59.999Z - null null
[2025-12-22 23:33:12.503] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:33:12.504] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:33:12.507] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:33:12.521] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:33:12.527] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:33:12.535] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 23.3873ms
[2025-12-22 23:33:12.537] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:33:12.539] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2026-01-01T00:00:00.000Z&endDate=2026-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 47.2581ms
[2025-12-22 23:33:14.274] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:33:14.269Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:33:14.278] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:33:14.281] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:33:14.269Z&endDate=2026-12-31T20:59:59.999Z - 204 null null 6.4736ms
[2025-12-22 23:33:14.283] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:33:14.269Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:33:14.288] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:33:14.293] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:33:14.297] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:33:14.306] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:33:14.312] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:33:14.317] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 13.5902ms
[2025-12-22 23:33:14.320] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:33:14.324] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:33:14.269Z&endDate=2026-12-31T20:59:59.999Z - 200 null application/json; charset=utf-8 40.4391ms
[2025-12-22 23:34:49.553] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:34:49.558] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:34:49.635] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:34:49.642] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:34:49.645] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 91.8956ms
[2025-12-22 23:34:49.646] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 87.628ms
[2025-12-22 23:34:49.649] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:34:49.649] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:34:49.668] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:34:49.676] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:34:49.678] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:34:49.680] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:34:49.683] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:34:49.685] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:34:49.701] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:34:49.709] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:34:49.718] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:34:49.719] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:34:49.732] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:34:49.736] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:34:49.743] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:34:49.744] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 23:34:49.750] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:34:49.752] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 104090.00, Заказов: 23
[2025-12-22 23:34:49.761] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:34:49.765] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 74.5179ms
[2025-12-22 23:34:49.768] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:34:49.770] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:34:49.775] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:34:49.778] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 128.9024ms
[2025-12-22 23:34:49.782] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:34:49.790] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 92.993ms
[2025-12-22 23:34:49.794] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:34:49.796] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 147.0806ms
[2025-12-22 23:34:49.807] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:34:49.807] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:34:49.821] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:34:49.822] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 14.8491ms
[2025-12-22 23:34:49.817] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:34:49.825] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:34:49.831] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 24.4187ms
[2025-12-22 23:34:49.835] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:34:49.839] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:34:49.858] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:34:49.861] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:34:49.863] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:34:49.865] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:34:49.867] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:34:49.875] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:34:49.881] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:34:49.882] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:34:49.886] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:34:49.893] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:34:49.895] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 20.5489ms
[2025-12-22 23:34:49.901] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:34:49.902] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:34:49.908] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:34:49.909] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 73.6317ms
[2025-12-22 23:34:49.913] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 65630.00, Заказов: 21
[2025-12-22 23:34:49.922] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:34:49.925] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 53.3413ms
[2025-12-22 23:34:49.928] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:34:49.932] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 107.3057ms
[2025-12-22 23:34:49.936] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:34:49.937] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:34:49.945] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:34:49.951] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:34:49.954] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 17.6119ms
[2025-12-22 23:34:49.955] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:34:49.956] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:34:49.963] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:34:49.968] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:34:49.975] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:34:49.976] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:34:49.978] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:34:49.985] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:34:49.992] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:34:49.994] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:34:49.998] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:34:50.003] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:34:50.005] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 16.7873ms
[2025-12-22 23:34:50.008] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:34:50.009] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:34:50.011] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 55.1239ms
[2025-12-22 23:34:50.016] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:34:50.026] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:34:50.031] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 57.1815ms
[2025-12-22 23:34:50.034] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:34:50.037] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 99.8084ms
[2025-12-22 23:34:50.042] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:34:50.042] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:34:50.049] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:34:50.053] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:34:50.055] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 13.0259ms
[2025-12-22 23:34:50.056] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 14.1598ms
[2025-12-22 23:34:50.059] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:34:50.059] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:34:50.083] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:34:50.094] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:34:50.098] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:34:50.101] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:34:50.103] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:34:50.106] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:34:50.115] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:34:50.119] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:34:50.125] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:34:50.129] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:34:50.133] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:34:50.136] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:34:50.143] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:34:50.147] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:34:50.150] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:34:50.153] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:34:50.154] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 19510.00, Заказов: 8
[2025-12-22 23:34:50.155] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 27150.00, Заказов: 6
[2025-12-22 23:34:50.156] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:34:50.157] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:34:50.161] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 50.1111ms
[2025-12-22 23:34:50.163] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 47.2548ms
[2025-12-22 23:34:50.166] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:34:50.168] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:34:50.171] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 112.2402ms
[2025-12-22 23:34:50.173] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 114.4436ms
[2025-12-22 23:34:50.178] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:34:50.192] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:34:50.193] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 15.2107ms
[2025-12-22 23:34:50.196] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:34:50.204] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:34:50.205] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:34:50.209] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:34:50.246] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (30ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 23:34:50.251] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 23:34:50.253] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:34:50.256] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 43.3834ms
[2025-12-22 23:34:50.259] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:34:50.260] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 64.5523ms
[2025-12-22 23:34:50.266] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:34:50.269] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:34:50.272] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 6.7682ms
[2025-12-22 23:34:50.275] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:34:50.284] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:34:50.285] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:34:50.288] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:34:50.311] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 23:34:50.315] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:34:50.317] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 26.5256ms
[2025-12-22 23:34:50.320] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:34:50.322] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 47.2884ms
[2025-12-22 23:34:50.328] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:34:50.325Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:34:50.335] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:34:50.337] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:34:50.325Z&endDate=2026-12-31T20:59:59.999Z - 204 null null 9.3979ms
[2025-12-22 23:34:50.340] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:34:50.325Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:34:50.351] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:34:50.354] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:34:50.356] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:34:50.365] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:34:50.368] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:34:50.374] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 13.1869ms
[2025-12-22 23:34:50.376] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:34:50.378] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:34:50.325Z&endDate=2026-12-31T20:59:59.999Z - 200 null application/json; charset=utf-8 37.0734ms
[2025-12-22 23:34:57.222] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=year&startDate=2023-12-22T20:34:57.215Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:34:57.226] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:34:57.227] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=year&startDate=2023-12-22T20:34:57.215Z&endDate=2026-12-31T20:59:59.999Z - 204 null null 5.089ms
[2025-12-22 23:34:57.231] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=year&startDate=2023-12-22T20:34:57.215Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:34:57.239] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:34:57.243] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:34:57.244] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:34:57.260] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:34:57.265] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:34:57.269] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 19.9036ms
[2025-12-22 23:34:57.273] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:34:57.276] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=year&startDate=2023-12-22T20:34:57.215Z&endDate=2026-12-31T20:59:59.999Z - 200 null application/json; charset=utf-8 44.9194ms
[2025-12-22 23:35:00.734] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:35:00.734] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:35:00.739] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:35:00.742] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:35:00.743] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 8.5381ms
[2025-12-22 23:35:00.744] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 9.7347ms
[2025-12-22 23:35:00.748] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:35:00.750] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:35:00.763] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:35:00.772] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:35:00.775] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:35:00.777] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:35:00.779] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:35:00.781] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:35:00.795] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:35:00.797] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:35:00.804] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:35:00.808] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:35:00.812] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:35:00.814] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:35:00.823] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:35:00.832] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:35:00.832] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 23:35:00.843] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 104090.00, Заказов: 23
[2025-12-22 23:35:00.846] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:35:00.847] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:35:00.851] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:35:00.854] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 68.0353ms
[2025-12-22 23:35:00.855] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:35:00.857] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:35:00.859] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 68.7972ms
[2025-12-22 23:35:00.860] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 112.6107ms
[2025-12-22 23:35:00.861] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:35:00.871] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 120.707ms
[2025-12-22 23:35:00.881] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:35:00.882] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:35:00.884] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:35:00.886] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:35:00.887] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 6.2053ms
[2025-12-22 23:35:00.889] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 7.0975ms
[2025-12-22 23:35:00.893] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:35:00.895] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:35:00.901] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:35:00.903] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:35:00.903] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:35:00.904] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:35:00.905] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:35:00.907] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:35:00.914] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:35:00.915] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:35:00.918] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:35:00.923] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:35:00.923] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 12.9555ms
[2025-12-22 23:35:00.928] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:35:00.929] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:35:00.934] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:35:00.934] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 41.0716ms
[2025-12-22 23:35:00.938] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:35:00.941] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 65630.00, Заказов: 21
[2025-12-22 23:35:00.941] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:35:00.943] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 30.4775ms
[2025-12-22 23:35:00.945] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:35:00.948] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 53.0203ms
[2025-12-22 23:35:00.957] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:35:00.958] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:35:00.962] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:35:00.965] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:35:00.966] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 8.554ms
[2025-12-22 23:35:00.967] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:35:00.970] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:35:00.972] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:35:00.975] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:35:00.981] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:35:00.982] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:35:00.983] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:35:00.987] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:35:00.989] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:35:00.992] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:35:00.995] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:35:01.000] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:35:01.002] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 14.431ms
[2025-12-22 23:35:01.006] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:35:01.007] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:35:01.011] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:35:01.013] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 42.9466ms
[2025-12-22 23:35:01.015] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:35:01.021] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 41.7619ms
[2025-12-22 23:35:01.023] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:35:01.024] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 66.5576ms
[2025-12-22 23:35:01.034] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:35:01.034] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:35:01.037] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:35:01.042] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:35:01.043] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 9.4027ms
[2025-12-22 23:35:01.045] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 10.7062ms
[2025-12-22 23:35:01.048] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:35:01.049] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:35:01.060] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:35:01.063] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:35:01.064] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:35:01.066] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:35:01.066] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:35:01.067] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:35:01.074] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:35:01.075] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:35:01.077] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:35:01.079] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:35:01.082] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:35:01.085] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:35:01.089] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:35:01.093] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:35:01.098] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:35:01.101] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:35:01.103] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 19510.00, Заказов: 8
[2025-12-22 23:35:01.107] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 27150.00, Заказов: 6
[2025-12-22 23:35:01.110] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:35:01.112] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:35:01.114] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 42.6986ms
[2025-12-22 23:35:01.116] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 41.9336ms
[2025-12-22 23:35:01.118] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:35:01.121] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:35:01.123] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 74.8539ms
[2025-12-22 23:35:01.125] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 76.4362ms
[2025-12-22 23:35:01.133] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:35:01.141] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:35:01.143] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 9.9337ms
[2025-12-22 23:35:01.146] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:35:01.153] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:35:01.155] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:35:01.157] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:35:01.183] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 23:35:01.185] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 23:35:01.186] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:35:01.188] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 26.3982ms
[2025-12-22 23:35:01.190] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:35:01.192] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 46.0666ms
[2025-12-22 23:35:01.201] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:35:01.206] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:35:01.207] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 5.6207ms
[2025-12-22 23:35:01.210] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:35:01.216] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:35:01.218] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:35:01.220] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:35:01.240] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 23:35:01.244] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:35:01.247] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 23.6498ms
[2025-12-22 23:35:01.250] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:35:01.251] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 41.3521ms
[2025-12-22 23:35:01.262] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:35:01.257Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:35:01.266] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:35:01.268] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:35:01.257Z&endDate=2026-12-31T20:59:59.999Z - 204 null null 6.2897ms
[2025-12-22 23:35:01.271] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:35:01.257Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:35:01.281] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:35:01.282] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:35:01.284] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:35:01.288] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:35:01.291] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:35:01.293] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 6.6067ms
[2025-12-22 23:35:01.295] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:35:01.297] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:35:01.257Z&endDate=2026-12-31T20:59:59.999Z - 200 null application/json; charset=utf-8 26.1575ms
[2025-12-22 23:36:02.419] [INF] [] Запуск приложения Restaurant API
[2025-12-22 23:36:02.811] [INF] [] Приложение Restaurant API успешно запущено
[2025-12-22 23:36:02.841] [INF] [Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager] User profile is available. Using 'C:\Users\motya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-12-22 23:36:03.004] [INF] [Microsoft.Hosting.Lifetime] Now listening on: https://localhost:7188
[2025-12-22 23:36:03.006] [INF] [Microsoft.Hosting.Lifetime] Now listening on: http://localhost:5143
[2025-12-22 23:36:03.119] [INF] [Microsoft.Hosting.Lifetime] Application started. Press Ctrl+C to shut down.
[2025-12-22 23:36:03.123] [INF] [Microsoft.Hosting.Lifetime] Hosting environment: Development
[2025-12-22 23:36:03.126] [INF] [Microsoft.Hosting.Lifetime] Content root path: D:\restaurant-project\RestaurantAPI\RestaurantApi
[2025-12-22 23:36:03.207] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/index.html - null null
[2025-12-22 23:36:03.399] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/index.html - 200 null text/html;charset=utf-8 193.0273ms
[2025-12-22 23:36:03.412] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - null null
[2025-12-22 23:36:03.412] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_vs/browserLink - null null
[2025-12-22 23:36:03.422] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 9.99ms
[2025-12-22 23:36:03.449] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.9748ms
[2025-12-22 23:36:04.093] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - null null
[2025-12-22 23:36:04.149] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 55.3331ms
[2025-12-22 23:36:06.865] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 23:36:06.865] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories - null null
[2025-12-22 23:36:06.866] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Ingredients?pageSize=1000 - null null
[2025-12-22 23:36:06.884] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:06.884] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:06.887] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:06.890] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 24.5205ms
[2025-12-22 23:36:06.890] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories - 204 null null 24.5148ms
[2025-12-22 23:36:06.890] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Ingredients?pageSize=1000 - 204 null null 24.3128ms
[2025-12-22 23:36:06.894] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 23:36:06.894] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories - null null
[2025-12-22 23:36:06.894] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - null null
[2025-12-22 23:36:06.923] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:06.925] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:06.931] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:07.074] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 23:36:07.074] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 23:36:07.080] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-22 23:36:07.125] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:36:07.126] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:36:07.128] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetIngredients", controller = "Ingredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.IngredientReadDto]]] GetIngredients(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.IngredientsController (RestaurantApi).
[2025-12-22 23:36:07.128] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 23:36:07.128] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.CategoryReadDto]]] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-22 23:36:07.130] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:07.135] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:07.149] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 24.7611ms
[2025-12-22 23:36:07.150] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 24.2533ms
[2025-12-22 23:36:07.153] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:36:07.153] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:36:07.169] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:07.172] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:07.182] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:36:07.182] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:36:07.193] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:07.194] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:10.733] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (89ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:10.733] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (106ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:10.733] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:10.733] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (95ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:10.733] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (106ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:10.831] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:10.831] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:10.876] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:10.876] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:10.895] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:10.895] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:10.933] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[CreatedAt], [i].[CreatedBy], [i].[DeletedAt], [i].[DeletedBy], [i].[IsDeleted], [i].[Name], [i].[Notes], [i].[UpdatedAt], [i].[UpdatedBy]
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
ORDER BY [i].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 23:36:10.933] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 23:36:10.980] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 23:36:10.981] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:36:11.004] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 104090.00, Заказов: 23
[2025-12-22 23:36:11.007] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:36:11.013] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 23:36:11.031] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:36:11.031] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:36:11.074] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 3869.557ms
[2025-12-22 23:36:11.074] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 3866.1752ms
[2025-12-22 23:36:11.079] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:36:11.082] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:36:11.094] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:36:11.094] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 3941.0664ms
[2025-12-22 23:36:11.094] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 3941.2494ms
[2025-12-22 23:36:11.095] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:36:11.100] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:11.124] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:11.127] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 32.257ms
[2025-12-22 23:36:11.128] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 33.8681ms
[2025-12-22 23:36:11.129] [INF] [RestaurantAPI.Controllers.IngredientsController] Получен список ингредиентов. Количество: 24, Всего: 24, Страница: 1
[2025-12-22 23:36:11.130] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 23:36:11.131] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:36:11.132] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:36:11.155] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.IngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:11.157] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:11.164] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:11.170] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:11.171] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 23:36:11.184] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:11.184] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:36:11.194] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 4047.3028ms
[2025-12-22 23:36:11.195] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi) in 4056.7727ms
[2025-12-22 23:36:11.201] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-22 23:36:11.195] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:11.200] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 23:36:11.195] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:11.204] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - 200 null application/json; charset=utf-8 4309.4673ms
[2025-12-22 23:36:11.204] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:11.210] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories - 200 null application/json; charset=utf-8 4316.5732ms
[2025-12-22 23:36:11.225] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 4084.0234ms
[2025-12-22 23:36:11.245] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 23:36:11.248] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 4354.5781ms
[2025-12-22 23:36:11.342] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:11.351] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:11.356] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:11.366] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:11.366] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:11.380] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:36:11.385] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 65630.00, Заказов: 21
[2025-12-22 23:36:11.390] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:36:11.390] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:11.394] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 187.0745ms
[2025-12-22 23:36:11.401] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:36:11.403] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 172.7499ms
[2025-12-22 23:36:11.403] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 271.4147ms
[2025-12-22 23:36:11.406] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:11.417] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 285.791ms
[2025-12-22 23:36:11.422] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:36:11.422] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:36:11.429] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:11.433] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:11.434] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 12.1255ms
[2025-12-22 23:36:11.437] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:36:11.437] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:36:11.447] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:11.452] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:11.460] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:11.463] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:11.464] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:11.472] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:11.472] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:11.478] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:11.483] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 15.0262ms
[2025-12-22 23:36:11.483] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:11.487] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:11.492] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:11.493] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 55.5973ms
[2025-12-22 23:36:11.498] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:36:11.503] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:36:11.504] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:36:11.508] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 52.2468ms
[2025-12-22 23:36:11.510] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:36:11.513] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 90.4628ms
[2025-12-22 23:36:11.518] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:36:11.518] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:36:11.528] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:11.534] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:11.538] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 20.0106ms
[2025-12-22 23:36:11.539] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 21.0697ms
[2025-12-22 23:36:11.543] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:36:11.543] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:36:11.564] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:11.570] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:11.574] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:36:11.575] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:36:11.577] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:11.581] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:11.591] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:11.597] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:11.604] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:11.609] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:11.610] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:11.616] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:11.620] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:11.622] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:11.627] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:36:11.631] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:36:11.632] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 27150.00, Заказов: 6
[2025-12-22 23:36:11.672] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 19510.00, Заказов: 8
[2025-12-22 23:36:11.672] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:36:11.677] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:36:11.681] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 95.4041ms
[2025-12-22 23:36:11.684] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 92.7435ms
[2025-12-22 23:36:11.687] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:36:11.689] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:36:11.693] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 150.3353ms
[2025-12-22 23:36:11.695] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 152.1756ms
[2025-12-22 23:36:11.701] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:36:11.711] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:11.714] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 13.6065ms
[2025-12-22 23:36:11.718] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:36:11.724] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:11.726] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:36:11.735] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:11.835] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (38ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 23:36:11.842] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 23:36:11.844] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:11.853] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 112.9168ms
[2025-12-22 23:36:11.856] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:36:11.859] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 140.7524ms
[2025-12-22 23:36:11.866] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:36:11.876] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:11.879] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 12.6734ms
[2025-12-22 23:36:11.882] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:36:11.893] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:11.895] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:36:11.909] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:11.962] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 23:36:11.968] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:11.976] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 62.0322ms
[2025-12-22 23:36:11.985] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:36:11.987] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 104.5973ms
[2025-12-22 23:36:11.993] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2015-12-22T20:36:11.991Z&endDate=2035-12-22T20:36:11.991Z - null null
[2025-12-22 23:36:12.001] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:12.004] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2015-12-22T20:36:11.991Z&endDate=2035-12-22T20:36:11.991Z - 204 null null 10.1436ms
[2025-12-22 23:36:12.006] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2015-12-22T20:36:11.991Z&endDate=2035-12-22T20:36:11.991Z - null null
[2025-12-22 23:36:12.013] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:12.016] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:12.020] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:12.031] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:12.038] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:12.042] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 17.2664ms
[2025-12-22 23:36:12.044] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:12.048] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2015-12-22T20:36:11.991Z&endDate=2035-12-22T20:36:11.991Z - 200 null application/json; charset=utf-8 41.504ms
[2025-12-22 23:36:12.054] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:36:12.050Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:36:12.063] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:12.065] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:36:12.050Z&endDate=2026-12-31T20:59:59.999Z - 204 null null 11.3055ms
[2025-12-22 23:36:12.068] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:36:12.050Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:36:12.077] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:12.081] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:12.084] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:12.095] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:12.104] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:12.108] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 18.9551ms
[2025-12-22 23:36:12.110] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:12.115] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:36:12.050Z&endDate=2026-12-31T20:59:59.999Z - 200 null application/json; charset=utf-8 46.2726ms
[2025-12-22 23:36:13.862] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=year&startDate=2023-12-22T20:36:13.857Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:36:13.867] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:13.869] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=year&startDate=2023-12-22T20:36:13.857Z&endDate=2026-12-31T20:59:59.999Z - 204 null null 7.5837ms
[2025-12-22 23:36:13.873] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=year&startDate=2023-12-22T20:36:13.857Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:36:13.883] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:13.885] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:13.889] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:13.912] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:13.924] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:13.928] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 35.2502ms
[2025-12-22 23:36:13.931] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:13.935] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=year&startDate=2023-12-22T20:36:13.857Z&endDate=2026-12-31T20:59:59.999Z - 200 null application/json; charset=utf-8 61.1898ms
[2025-12-22 23:36:15.804] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:36:15.799Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:36:15.808] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:15.814] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:36:15.799Z&endDate=2026-12-31T20:59:59.999Z - 204 null null 9.9039ms
[2025-12-22 23:36:15.817] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:36:15.799Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:36:15.830] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:15.834] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:15.838] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:15.851] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:15.857] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:15.863] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 20.6265ms
[2025-12-22 23:36:15.865] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:15.868] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:36:15.799Z&endDate=2026-12-31T20:59:59.999Z - 200 null application/json; charset=utf-8 51.3265ms
[2025-12-22 23:36:17.071] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2026-01-01T00:00:00.000Z&endDate=2026-12-31T23:59:59.999Z - null null
[2025-12-22 23:36:17.076] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:17.079] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2026-01-01T00:00:00.000Z&endDate=2026-12-31T23:59:59.999Z - 204 null null 7.2769ms
[2025-12-22 23:36:17.083] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2026-01-01T00:00:00.000Z&endDate=2026-12-31T23:59:59.999Z - null null
[2025-12-22 23:36:17.090] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:17.094] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:17.096] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:17.105] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:17.111] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:17.115] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 15.2547ms
[2025-12-22 23:36:17.119] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:17.121] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2026-01-01T00:00:00.000Z&endDate=2026-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 37.9415ms
[2025-12-22 23:36:18.271] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:36:18.280] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:18.282] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 10.3714ms
[2025-12-22 23:36:18.285] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:36:18.295] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:18.298] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:18.302] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:18.312] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:18.320] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:18.324] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 18.1533ms
[2025-12-22 23:36:18.327] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:18.331] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 45.6826ms
[2025-12-22 23:36:20.366] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:36:20.359Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:36:20.372] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:20.374] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:36:20.359Z&endDate=2026-12-31T20:59:59.999Z - 204 null null 8.6993ms
[2025-12-22 23:36:20.377] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:36:20.359Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:36:20.385] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:20.386] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:20.390] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:20.402] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:20.406] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:20.409] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 12.9832ms
[2025-12-22 23:36:20.411] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:20.415] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:36:20.359Z&endDate=2026-12-31T20:59:59.999Z - 200 null application/json; charset=utf-8 37.5712ms
[2025-12-22 23:36:23.627] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:36:23.632] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:23.634] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 6.2894ms
[2025-12-22 23:36:23.637] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:36:23.646] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:23.648] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:23.650] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:23.659] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:23.666] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:23.671] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 15.1717ms
[2025-12-22 23:36:23.673] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:23.676] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 39.1127ms
[2025-12-22 23:36:27.865] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 23:36:27.869] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:27.870] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 4.4957ms
[2025-12-22 23:36:27.872] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 23:36:27.876] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:27.879] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 23:36:27.893] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.UserReadDto]]] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-22 23:36:27.916] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:27.957] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[IsDeleted], [u0].[Notes], [u0].[PasswordHash], [u0].[RoleId], [u0].[UpdatedAt], [u0].[UpdatedBy], [u0].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM (
    SELECT [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-22 23:36:28.059] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 23:36:28.062] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:28.071] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 174.8589ms
[2025-12-22 23:36:28.073] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 23:36:28.075] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 202.9731ms
[2025-12-22 23:36:28.078] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 23:36:28.083] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:28.084] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 5.563ms
[2025-12-22 23:36:28.086] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 23:36:28.091] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:28.093] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 23:36:28.096] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 23:36:28.104] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:28.113] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 23:36:28.122] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 23:36:28.126] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:28.128] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 29.6281ms
[2025-12-22 23:36:28.131] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 23:36:28.132] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 46.2295ms
[2025-12-22 23:36:28.138] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:36:28.144] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:28.146] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 8.324ms
[2025-12-22 23:36:28.148] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:36:28.157] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:28.160] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:36:28.174] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:36:28.213] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:28.254] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 23:36:28.339] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 20, Всего: 23, Страница: 1
[2025-12-22 23:36:28.343] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:28.366] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 186.6567ms
[2025-12-22 23:36:28.369] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:36:28.372] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 223.8733ms
[2025-12-22 23:36:42.322] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-22 23:36:42.326] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:42.327] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 5.2226ms
[2025-12-22 23:36:42.331] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 187
[2025-12-22 23:36:42.336] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:42.337] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:36:42.346] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:36:42.481] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__item_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__item_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:42.503] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:42.509] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "c75a4aab-c6d6-47c8-b866-56ee05fc57b6", Notes: null, ItemsCount: 1
[2025-12-22 23:36:42.826] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-22 23:36:42.905] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:42.908] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e3b024ce-9139-4b59-a73b-9dfa81d65721", Quantity: 1, Notes: null
[2025-12-22 23:36:43.020] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p13='?' (DbType = Guid), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Orders] SET [Total] = @p12
OUTPUT 1
WHERE [Id] = @p13;
[2025-12-22 23:36:43.064] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "9984f855-ba5b-44bd-9ffc-22bc99f3be9b" создан пользователем "c75a4aab-c6d6-47c8-b866-56ee05fc57b6". Сумма: 100.00, Блюд: 1
[2025-12-22 23:36:43.075] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-22 23:36:43.109] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 761.3111ms
[2025-12-22 23:36:43.112] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-22 23:36:43.115] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 784.3429ms
[2025-12-22 23:36:43.120] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:36:43.126] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:43.128] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 7.2083ms
[2025-12-22 23:36:43.131] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-22 23:36:43.137] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:43.138] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:36:43.140] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:36:43.149] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:43.157] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-22 23:36:43.166] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 20, Всего: 24, Страница: 1
[2025-12-22 23:36:43.170] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:43.176] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 30.7957ms
[2025-12-22 23:36:43.179] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:36:43.182] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 51.3953ms
[2025-12-22 23:36:44.904] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:36:44.906] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:36:44.908] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:44.911] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:44.914] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 9.56ms
[2025-12-22 23:36:44.914] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 7.9231ms
[2025-12-22 23:36:44.917] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:36:44.918] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:36:44.929] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:44.931] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:44.934] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:36:44.935] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:36:44.936] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:44.937] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:44.945] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:44.947] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:44.951] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:44.954] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:44.958] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:44.964] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:44.967] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:44.968] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:44.974] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 23:36:44.980] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:36:44.981] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 104190.00, Заказов: 24
[2025-12-22 23:36:44.985] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:36:44.988] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:36:44.990] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:36:44.996] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 54.6865ms
[2025-12-22 23:36:44.997] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 53.05ms
[2025-12-22 23:36:44.999] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:36:45.002] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:36:45.004] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 86.5796ms
[2025-12-22 23:36:45.006] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 87.8248ms
[2025-12-22 23:36:45.011] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:36:45.011] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:36:45.020] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:45.024] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:45.024] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 13.7434ms
[2025-12-22 23:36:45.026] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 15.2409ms
[2025-12-22 23:36:45.028] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:36:45.036] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:45.037] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:45.029] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:36:45.039] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:45.047] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:45.050] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:36:45.053] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:45.055] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:45.057] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:45.063] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 13.6273ms
[2025-12-22 23:36:45.064] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:45.065] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:45.068] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:45.068] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 40.4361ms
[2025-12-22 23:36:45.073] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:45.080] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:45.085] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:36:45.089] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 65630.00, Заказов: 21
[2025-12-22 23:36:45.091] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:36:45.093] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 33.2973ms
[2025-12-22 23:36:45.097] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:36:45.099] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 70.7444ms
[2025-12-22 23:36:45.103] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:36:45.104] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:36:45.109] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:45.115] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:45.115] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 12.1114ms
[2025-12-22 23:36:45.117] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:36:45.118] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:36:45.123] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:45.130] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:45.133] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:45.135] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:45.136] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:45.144] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:45.148] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:45.153] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:45.158] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:45.159] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 18.6649ms
[2025-12-22 23:36:45.164] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:45.164] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:45.166] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 48.1554ms
[2025-12-22 23:36:45.172] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:36:45.181] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:36:45.183] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:36:45.187] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 54.9011ms
[2025-12-22 23:36:45.188] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:36:45.190] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 86.2859ms
[2025-12-22 23:36:45.194] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:36:45.194] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:36:45.200] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:45.204] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:45.205] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 10.9016ms
[2025-12-22 23:36:45.206] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 11.3243ms
[2025-12-22 23:36:45.208] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:36:45.208] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:36:45.220] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:45.226] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:45.228] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:36:45.230] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:36:45.231] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:45.233] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:45.240] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:45.243] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:45.244] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:45.247] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:45.251] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:45.255] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:45.259] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:45.264] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:36:45.268] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:36:45.272] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:36:45.274] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 19510.00, Заказов: 8
[2025-12-22 23:36:45.279] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 27150.00, Заказов: 6
[2025-12-22 23:36:45.282] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:36:45.284] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:36:45.287] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 51.2832ms
[2025-12-22 23:36:45.289] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 48.989ms
[2025-12-22 23:36:45.290] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:36:45.293] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:36:45.295] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 86.7137ms
[2025-12-22 23:36:45.297] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 88.7637ms
[2025-12-22 23:36:45.301] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:36:45.312] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:45.314] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 13.0755ms
[2025-12-22 23:36:45.317] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:36:45.325] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:45.328] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:36:45.332] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:45.360] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 23:36:45.366] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 23:36:45.369] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:45.371] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 22.4036ms
[2025-12-22 23:36:45.374] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:36:45.376] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 58.3106ms
[2025-12-22 23:36:45.381] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:36:45.385] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:45.388] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 6.5993ms
[2025-12-22 23:36:45.390] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:36:45.397] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:45.399] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:36:45.401] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:45.413] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 23:36:45.420] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:45.422] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 17.1991ms
[2025-12-22 23:36:45.423] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:36:45.425] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 34.977ms
[2025-12-22 23:36:45.429] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2015-12-22T20:36:45.426Z&endDate=2035-12-22T20:36:45.426Z - null null
[2025-12-22 23:36:45.433] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:45.436] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2015-12-22T20:36:45.426Z&endDate=2035-12-22T20:36:45.426Z - 204 null null 6.2508ms
[2025-12-22 23:36:45.440] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2015-12-22T20:36:45.426Z&endDate=2035-12-22T20:36:45.426Z - null null
[2025-12-22 23:36:45.444] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:45.446] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:45.448] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:45.457] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:45.462] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:45.465] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 12.3689ms
[2025-12-22 23:36:45.467] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:45.471] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2015-12-22T20:36:45.426Z&endDate=2035-12-22T20:36:45.426Z - 200 null application/json; charset=utf-8 31.0463ms
[2025-12-22 23:36:45.476] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:36:45.473Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:36:45.481] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:45.483] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:36:45.473Z&endDate=2026-12-31T20:59:59.999Z - 204 null null 6.3772ms
[2025-12-22 23:36:45.485] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:36:45.473Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:36:45.494] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:45.496] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:45.497] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:45.504] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:45.510] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:45.514] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 14.0959ms
[2025-12-22 23:36:45.516] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:45.519] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:36:45.473Z&endDate=2026-12-31T20:59:59.999Z - 200 null application/json; charset=utf-8 33.9877ms
[2025-12-22 23:36:50.079] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:36:50.085] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:50.087] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 7.6825ms
[2025-12-22 23:36:50.089] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:36:50.096] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:36:50.099] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:50.102] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:36:50.108] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:36:50.114] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:36:50.117] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 12.0293ms
[2025-12-22 23:36:50.119] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:36:50.123] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 33.5662ms
[2025-12-22 23:37:24.936] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2026-01-01T00:00:00.000Z&endDate=2026-12-31T23:59:59.999Z - null null
[2025-12-22 23:37:24.995] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:37:24.998] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2026-01-01T00:00:00.000Z&endDate=2026-12-31T23:59:59.999Z - 204 null null 61.2793ms
[2025-12-22 23:37:25.001] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2026-01-01T00:00:00.000Z&endDate=2026-12-31T23:59:59.999Z - null null
[2025-12-22 23:37:25.015] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:37:25.018] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:37:25.022] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:37:25.038] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0 AND [o].[OrderDate] <= @__endDate_Value_1
[2025-12-22 23:37:25.045] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:37:25.053] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 27.3695ms
[2025-12-22 23:37:25.056] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:37:25.057] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2026-01-01T00:00:00.000Z&endDate=2026-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 56.1455ms
[2025-12-22 23:51:54.962] [INF] [] Запуск приложения Restaurant API
[2025-12-22 23:51:55.319] [INF] [] Приложение Restaurant API успешно запущено
[2025-12-22 23:51:55.348] [INF] [Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager] User profile is available. Using 'C:\Users\motya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-12-22 23:51:55.483] [INF] [Microsoft.Hosting.Lifetime] Now listening on: https://localhost:7188
[2025-12-22 23:51:55.485] [INF] [Microsoft.Hosting.Lifetime] Now listening on: http://localhost:5143
[2025-12-22 23:51:55.577] [INF] [Microsoft.Hosting.Lifetime] Application started. Press Ctrl+C to shut down.
[2025-12-22 23:51:55.583] [INF] [Microsoft.Hosting.Lifetime] Hosting environment: Development
[2025-12-22 23:51:55.585] [INF] [Microsoft.Hosting.Lifetime] Content root path: D:\restaurant-project\RestaurantAPI\RestaurantApi
[2025-12-22 23:51:55.764] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/index.html - null null
[2025-12-22 23:51:55.957] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/index.html - 200 null text/html;charset=utf-8 193.4409ms
[2025-12-22 23:51:56.289] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - null null
[2025-12-22 23:51:56.289] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_vs/browserLink - null null
[2025-12-22 23:51:56.302] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 12.9289ms
[2025-12-22 23:51:56.329] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_vs/browserLink - 200 null text/javascript; charset=UTF-8 40.8221ms
[2025-12-22 23:51:57.098] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - null null
[2025-12-22 23:51:57.162] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 64.1951ms
[2025-12-22 23:52:05.236] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Ingredients?pageSize=1000 - null null
[2025-12-22 23:52:05.236] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 23:52:05.236] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories - null null
[2025-12-22 23:52:05.251] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:05.251] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:05.255] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:05.261] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Ingredients?pageSize=1000 - 204 null null 25.0761ms
[2025-12-22 23:52:05.261] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 24.9836ms
[2025-12-22 23:52:05.261] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories - 204 null null 25.2122ms
[2025-12-22 23:52:05.265] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 23:52:05.265] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - null null
[2025-12-22 23:52:05.266] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories - null null
[2025-12-22 23:52:05.285] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:05.285] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:05.289] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:05.435] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 23:52:05.435] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 23:52:05.437] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-22 23:52:05.487] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetIngredients", controller = "Ingredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.IngredientReadDto]]] GetIngredients(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.IngredientsController (RestaurantApi).
[2025-12-22 23:52:05.488] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 23:52:05.487] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.CategoryReadDto]]] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-22 23:52:05.539] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:52:05.542] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:52:05.547] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:05.555] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:05.556] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 16.5006ms
[2025-12-22 23:52:05.559] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 16.8558ms
[2025-12-22 23:52:05.559] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:52:05.562] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:52:05.584] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:05.593] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:05.606] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:52:05.606] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:52:05.619] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:05.623] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:08.634] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:08.634] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:08.634] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:08.635] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:08.636] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (52ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:08.718] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:08.718] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:08.743] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:08.743] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:08.761] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:08.761] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:08.819] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[CreatedAt], [i].[CreatedBy], [i].[DeletedAt], [i].[DeletedBy], [i].[IsDeleted], [i].[Name], [i].[Notes], [i].[UpdatedAt], [i].[UpdatedBy]
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
ORDER BY [i].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 23:52:08.819] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 23:52:08.839] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 23:52:08.848] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 104190.00, Заказов: 24
[2025-12-22 23:52:08.854] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (21ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:52:08.861] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:52:08.873] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:52:08.874] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:52:08.893] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 23:52:08.914] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 3278.2915ms
[2025-12-22 23:52:08.914] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 3282.6387ms
[2025-12-22 23:52:08.920] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:52:08.922] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:52:08.933] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:52:08.933] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:52:08.936] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 3376.4594ms
[2025-12-22 23:52:08.936] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 3373.695ms
[2025-12-22 23:52:08.939] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:08.944] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:08.959] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 26.656ms
[2025-12-22 23:52:08.961] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 27.9351ms
[2025-12-22 23:52:08.964] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:52:08.964] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:52:09.014] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:09.024] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:09.031] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:52:09.031] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:52:09.038] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:09.045] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:09.046] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 23:52:09.048] [INF] [RestaurantAPI.Controllers.IngredientsController] Получен список ингредиентов. Количество: 24, Всего: 24, Страница: 1
[2025-12-22 23:52:09.057] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:52:09.061] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.IngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:52:09.078] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 23:52:09.084] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:52:09.087] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi) in 3592.9146ms
[2025-12-22 23:52:09.088] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 3585.5447ms
[2025-12-22 23:52:09.092] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-22 23:52:09.097] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 23:52:09.100] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 3600.4884ms
[2025-12-22 23:52:09.100] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - 200 null application/json; charset=utf-8 3834.9438ms
[2025-12-22 23:52:09.102] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories - 200 null application/json; charset=utf-8 3836.7151ms
[2025-12-22 23:52:09.105] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 23:52:09.128] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 3863.1727ms
[2025-12-22 23:52:09.177] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:09.184] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:09.194] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:09.201] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[CreatedAt]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:09.203] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:09.216] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:52:09.221] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 65630.00, Заказов: 21
[2025-12-22 23:52:09.225] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:52:09.230] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:52:09.230] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 184.6581ms
[2025-12-22 23:52:09.235] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:52:09.238] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 273.9178ms
[2025-12-22 23:52:09.240] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 188.9005ms
[2025-12-22 23:52:09.251] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:52:09.255] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 290.6194ms
[2025-12-22 23:52:09.261] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:52:09.261] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:52:09.270] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:09.276] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:09.277] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 16.6057ms
[2025-12-22 23:52:09.281] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:52:09.282] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:52:09.292] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:09.299] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:09.305] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:52:09.309] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:09.310] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:09.317] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:09.326] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[CreatedAt]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:09.327] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:09.332] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:52:09.338] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:09.341] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 21.6991ms
[2025-12-22 23:52:09.347] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:52:09.347] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:52:09.349] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 67.4246ms
[2025-12-22 23:52:09.355] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:52:09.362] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:52:09.364] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 62.1682ms
[2025-12-22 23:52:09.367] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:52:09.370] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 108.6725ms
[2025-12-22 23:52:09.375] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:52:09.375] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:52:09.389] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:09.397] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:09.400] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 25.5142ms
[2025-12-22 23:52:09.402] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 26.9966ms
[2025-12-22 23:52:09.405] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:52:09.406] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:52:09.425] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:09.431] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:09.434] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:52:09.436] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:52:09.438] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:09.441] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:09.452] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:09.457] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:09.461] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:09.466] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:09.471] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:09.475] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:09.482] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:09.538] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:09.540] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:52:09.547] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:52:09.548] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 27150.00, Заказов: 6
[2025-12-22 23:52:09.552] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 19510.00, Заказов: 8
[2025-12-22 23:52:09.556] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:52:09.559] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:52:09.564] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 113.7463ms
[2025-12-22 23:52:09.567] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 120.7616ms
[2025-12-22 23:52:09.569] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:52:09.571] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:52:09.575] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 169.3883ms
[2025-12-22 23:52:09.578] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 173.3108ms
[2025-12-22 23:52:09.584] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:52:09.600] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:09.603] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 19.0065ms
[2025-12-22 23:52:09.606] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:52:09.616] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:09.620] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:52:09.632] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:09.737] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (25ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 23:52:09.746] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 23:52:09.748] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:52:09.761] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 122.8158ms
[2025-12-22 23:52:09.763] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:52:09.765] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 158.7581ms
[2025-12-22 23:52:09.770] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:52:09.780] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:09.783] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 12.0933ms
[2025-12-22 23:52:09.786] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:52:09.801] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:09.804] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:52:09.814] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:09.873] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 23:52:09.881] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:52:09.889] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 69.435ms
[2025-12-22 23:52:09.896] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:52:09.899] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 112.9834ms
[2025-12-22 23:52:09.904] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2015-12-22T20:52:09.901Z&endDate=2035-12-22T20:52:09.901Z - null null
[2025-12-22 23:52:09.909] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:09.911] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2015-12-22T20:52:09.901Z&endDate=2035-12-22T20:52:09.901Z - 204 null null 7.4361ms
[2025-12-22 23:52:09.915] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2015-12-22T20:52:09.901Z&endDate=2035-12-22T20:52:09.901Z - null null
[2025-12-22 23:52:09.923] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:09.927] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:52:09.929] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:09.941] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[CreatedAt]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:09.950] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:52:09.952] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 18.9251ms
[2025-12-22 23:52:09.956] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:52:09.960] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2015-12-22T20:52:09.901Z&endDate=2035-12-22T20:52:09.901Z - 200 null application/json; charset=utf-8 45.7135ms
[2025-12-22 23:52:09.965] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:52:09.962Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:52:09.973] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:09.976] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:52:09.962Z&endDate=2026-12-31T20:59:59.999Z - 204 null null 10.4227ms
[2025-12-22 23:52:09.979] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:52:09.962Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:52:09.988] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:09.991] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:52:09.995] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:10.006] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[CreatedAt]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:10.012] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:52:10.018] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 19.2369ms
[2025-12-22 23:52:10.024] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:52:10.028] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:52:09.962Z&endDate=2026-12-31T20:59:59.999Z - 200 null application/json; charset=utf-8 49.3933ms
[2025-12-22 23:52:13.509] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:52:13.514] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:13.517] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 7.8962ms
[2025-12-22 23:52:13.520] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:52:13.531] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:13.535] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:52:13.539] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:13.551] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[CreatedAt]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:13.558] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:52:13.562] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 20.4147ms
[2025-12-22 23:52:13.566] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:52:13.569] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 49.3069ms
[2025-12-22 23:52:20.524] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 23:52:20.532] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:20.533] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 9.1968ms
[2025-12-22 23:52:20.536] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-22 23:52:20.545] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:20.548] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 23:52:20.559] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.UserReadDto]]] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-22 23:52:20.589] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:20.636] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[CreatedAt], [u0].[CreatedBy], [u0].[DeletedAt], [u0].[DeletedBy], [u0].[IsDeleted], [u0].[Notes], [u0].[PasswordHash], [u0].[RoleId], [u0].[UpdatedAt], [u0].[UpdatedBy], [u0].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM (
    SELECT [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-22 23:52:20.766] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 23:52:20.768] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:52:20.781] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 218.8655ms
[2025-12-22 23:52:20.784] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-22 23:52:20.785] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 249.5508ms
[2025-12-22 23:52:20.789] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 23:52:20.801] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:20.802] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 12.7983ms
[2025-12-22 23:52:20.805] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 23:52:20.815] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:20.817] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 23:52:20.819] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 23:52:20.833] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:20.842] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 23:52:20.849] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 23:52:20.854] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:52:20.859] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 35.7299ms
[2025-12-22 23:52:20.864] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 23:52:20.868] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 62.967ms
[2025-12-22 23:52:20.874] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=createdAt&order=desc - null null
[2025-12-22 23:52:20.885] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:20.887] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=createdAt&order=desc - 204 null null 12.4834ms
[2025-12-22 23:52:20.890] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=createdAt&order=desc - null null
[2025-12-22 23:52:20.898] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:20.901] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:52:20.913] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-22 23:52:20.939] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:20.985] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[CreatedBy], [o0].[DeletedAt], [o0].[DeletedBy], [o0].[IsDeleted], [o0].[Notes], [o0].[Status], [o0].[Total], [o0].[UpdatedAt], [o0].[UpdatedBy], [o0].[UserId], [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[CreatedAt] DESC
[2025-12-22 23:52:21.062] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 20, Всего: 24, Страница: 1
[2025-12-22 23:52:21.070] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:52:21.094] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 176.4406ms
[2025-12-22 23:52:21.099] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-22 23:52:21.102] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=createdAt&order=desc - 200 null application/json; charset=utf-8 212.0362ms
[2025-12-22 23:52:29.057] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:52:29.059] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:52:29.063] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:29.066] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:29.067] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 10.1858ms
[2025-12-22 23:52:29.068] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 8.8702ms
[2025-12-22 23:52:29.071] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:52:29.071] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:52:29.086] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:29.088] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:29.089] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:52:29.090] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:52:29.091] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:29.093] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:29.100] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:29.103] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:29.108] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:29.112] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:29.115] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:29.119] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:29.125] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:29.131] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:29.137] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 23:52:29.143] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:52:29.144] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 104190.00, Заказов: 24
[2025-12-22 23:52:29.149] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:52:29.150] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:52:29.153] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 56.4424ms
[2025-12-22 23:52:29.154] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:52:29.151] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:52:29.158] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 86.9083ms
[2025-12-22 23:52:29.160] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 60.9409ms
[2025-12-22 23:52:29.167] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:52:29.170] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 98.5127ms
[2025-12-22 23:52:29.175] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:52:29.175] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:52:29.177] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:29.180] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:29.182] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 7.0089ms
[2025-12-22 23:52:29.181] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 6.2344ms
[2025-12-22 23:52:29.184] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:52:29.185] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:52:29.199] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:29.202] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:29.204] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:52:29.205] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:52:29.205] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:29.207] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:29.213] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[CreatedAt]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:29.213] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:29.217] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:52:29.221] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:29.222] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 12.6826ms
[2025-12-22 23:52:29.226] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:29.226] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:52:29.229] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 45.1022ms
[2025-12-22 23:52:29.229] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:29.237] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:52:29.240] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 65630.00, Заказов: 21
[2025-12-22 23:52:29.242] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:52:29.244] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 32.7542ms
[2025-12-22 23:52:29.245] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:52:29.247] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 62.2319ms
[2025-12-22 23:52:29.251] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:52:29.251] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:52:29.258] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:29.261] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:29.261] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 10.5188ms
[2025-12-22 23:52:29.262] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:52:29.264] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:52:29.266] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:29.269] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:29.272] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:52:29.274] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:29.274] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:29.282] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[CreatedAt]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:29.283] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:29.285] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:52:29.289] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:29.290] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 12.4471ms
[2025-12-22 23:52:29.295] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:52:29.299] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:29.299] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 35.8021ms
[2025-12-22 23:52:29.306] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:52:29.313] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:52:29.315] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:52:29.319] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 47.8727ms
[2025-12-22 23:52:29.322] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:52:29.325] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 73.4077ms
[2025-12-22 23:52:29.330] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:52:29.330] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:52:29.337] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:29.342] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:29.343] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 13.4889ms
[2025-12-22 23:52:29.344] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 14.4222ms
[2025-12-22 23:52:29.347] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:52:29.347] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:52:29.359] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:29.364] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:29.365] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:52:29.366] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:52:29.369] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:29.370] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:29.378] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:29.383] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:29.383] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:29.389] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:29.393] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:29.395] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:29.399] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:29.403] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:52:29.409] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:52:29.411] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
GROUP BY [o].[Status]
[2025-12-22 23:52:29.411] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 19510.00, Заказов: 8
[2025-12-22 23:52:29.416] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 27150.00, Заказов: 6
[2025-12-22 23:52:29.417] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:52:29.420] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:52:29.425] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 50.8001ms
[2025-12-22 23:52:29.427] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 48.6533ms
[2025-12-22 23:52:29.428] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:52:29.430] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:52:29.432] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 85.5668ms
[2025-12-22 23:52:29.434] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 87.185ms
[2025-12-22 23:52:29.438] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:52:29.449] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:29.452] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 13.453ms
[2025-12-22 23:52:29.454] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:52:29.463] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:29.468] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:52:29.470] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:29.482] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 23:52:29.489] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 23:52:29.491] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:52:29.495] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 23.0997ms
[2025-12-22 23:52:29.497] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:52:29.500] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 46.8777ms
[2025-12-22 23:52:29.505] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:52:29.510] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:29.513] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 7.8166ms
[2025-12-22 23:52:29.515] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:52:29.525] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:29.528] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:52:29.529] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:29.540] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 23:52:29.546] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:52:29.550] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 17.7382ms
[2025-12-22 23:52:29.553] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:52:29.556] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 40.9984ms
[2025-12-22 23:52:29.561] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2015-12-22T20:52:29.558Z&endDate=2035-12-22T20:52:29.558Z - null null
[2025-12-22 23:52:29.569] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:29.571] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2015-12-22T20:52:29.558Z&endDate=2035-12-22T20:52:29.558Z - 204 null null 10.193ms
[2025-12-22 23:52:29.573] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2015-12-22T20:52:29.558Z&endDate=2035-12-22T20:52:29.558Z - null null
[2025-12-22 23:52:29.581] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:29.584] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:52:29.589] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:29.598] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[CreatedAt]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:29.602] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:52:29.605] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 12.2514ms
[2025-12-22 23:52:29.611] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:52:29.613] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2015-12-22T20:52:29.558Z&endDate=2035-12-22T20:52:29.558Z - 200 null application/json; charset=utf-8 39.0079ms
[2025-12-22 23:52:29.620] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:52:29.617Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:52:29.631] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:29.633] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:52:29.617Z&endDate=2026-12-31T20:59:59.999Z - 204 null null 12.213ms
[2025-12-22 23:52:29.636] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:52:29.617Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:52:29.643] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:29.646] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:52:29.649] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:29.655] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[CreatedAt]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:29.660] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:52:29.665] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 13.7974ms
[2025-12-22 23:52:29.667] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:52:29.669] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:52:29.617Z&endDate=2026-12-31T20:59:59.999Z - 200 null application/json; charset=utf-8 32.8489ms
[2025-12-22 23:52:57.332] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:52:57.336] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:57.338] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 5.3605ms
[2025-12-22 23:52:57.341] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:52:57.353] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:52:57.358] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:52:57.360] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:52:57.379] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime), @__endDate_Value_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[CreatedAt]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__startDate_Value_0 AND [o].[CreatedAt] <= @__endDate_Value_1
[2025-12-22 23:52:57.391] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:52:57.397] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 28.0994ms
[2025-12-22 23:52:57.402] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:52:57.409] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 67.5077ms
[2025-12-22 23:55:41.425] [INF] [] Запуск приложения Restaurant API
[2025-12-22 23:55:41.771] [INF] [] Приложение Restaurant API успешно запущено
[2025-12-22 23:55:41.802] [INF] [Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager] User profile is available. Using 'C:\Users\motya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-12-22 23:55:41.996] [INF] [Microsoft.Hosting.Lifetime] Now listening on: https://localhost:7188
[2025-12-22 23:55:42.168] [INF] [Microsoft.Hosting.Lifetime] Now listening on: http://localhost:5143
[2025-12-22 23:55:42.396] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/index.html - null null
[2025-12-22 23:55:42.446] [INF] [Microsoft.Hosting.Lifetime] Application started. Press Ctrl+C to shut down.
[2025-12-22 23:55:42.458] [INF] [Microsoft.Hosting.Lifetime] Hosting environment: Development
[2025-12-22 23:55:42.459] [INF] [Microsoft.Hosting.Lifetime] Content root path: D:\restaurant-project\RestaurantAPI\RestaurantApi
[2025-12-22 23:55:42.647] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/index.html - 200 null text/html;charset=utf-8 251.9132ms
[2025-12-22 23:55:42.694] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_vs/browserLink - null null
[2025-12-22 23:55:42.694] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - null null
[2025-12-22 23:55:42.708] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 14.1005ms
[2025-12-22 23:55:42.734] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.6399ms
[2025-12-22 23:55:43.558] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - null null
[2025-12-22 23:55:43.622] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 63.6515ms
[2025-12-22 23:55:45.462] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Ingredients?pageSize=1000 - null null
[2025-12-22 23:55:45.462] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 23:55:45.462] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories - null null
[2025-12-22 23:55:45.476] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:45.476] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:45.478] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:45.481] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Ingredients?pageSize=1000 - 204 null null 19.254ms
[2025-12-22 23:55:45.481] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 19.2589ms
[2025-12-22 23:55:45.482] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories - 204 null null 20.1175ms
[2025-12-22 23:55:45.484] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - null null
[2025-12-22 23:55:45.485] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-22 23:55:45.485] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories - null null
[2025-12-22 23:55:45.504] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:45.504] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:45.508] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:45.663] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 23:55:45.663] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 23:55:45.664] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-22 23:55:45.730] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:55:45.730] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetIngredients", controller = "Ingredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.IngredientReadDto]]] GetIngredients(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.IngredientsController (RestaurantApi).
[2025-12-22 23:55:45.730] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.DishReadDto]]] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-22 23:55:45.730] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.Helpers.PagedResult`1[RestaurantAPI.DTOs.CategoryReadDto]]] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-22 23:55:45.731] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:55:45.734] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:45.754] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 23.8287ms
[2025-12-22 23:55:45.755] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:45.757] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-22 23:55:45.761] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 30.094ms
[2025-12-22 23:55:45.764] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:55:45.765] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:45.775] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:45.783] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:55:45.783] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:55:45.797] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:55:45.797] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:55:48.784] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (66ms) [Parameters=[@__localStartDate_0='?' (DbType = DateTime), @__localEndDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__localStartDate_0 AND [o].[CreatedAt] <= @__localEndDate_1
[2025-12-22 23:55:48.784] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:55:48.784] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:55:48.784] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:55:48.784] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:55:48.898] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:55:48.912] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (21ms) [Parameters=[@__localStartDate_0='?' (DbType = DateTime), @__localEndDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__localStartDate_0 AND [o].[CreatedAt] <= @__localEndDate_1
[2025-12-22 23:55:48.924] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:55:48.930] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:55:48.949] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:55:48.950] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:55:49.010] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 23:55:49.010] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[CreatedAt], [i].[CreatedBy], [i].[DeletedAt], [i].[DeletedBy], [i].[IsDeleted], [i].[Name], [i].[Notes], [i].[UpdatedAt], [i].[UpdatedBy]
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
ORDER BY [i].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-22 23:55:49.042] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-22 23:55:49.042] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__localStartDate_0='?' (DbType = DateTime), @__localEndDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__localStartDate_0 AND [o].[CreatedAt] <= @__localEndDate_1
GROUP BY [o].[Status]
[2025-12-22 23:55:49.056] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 104190.00, Заказов: 24
[2025-12-22 23:55:49.060] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:55:49.084] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:55:49.084] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:55:49.102] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[CategoryId], [d0].[CreatedAt], [d0].[CreatedBy], [d0].[DeletedAt], [d0].[DeletedBy], [d0].[Description], [d0].[IsDeleted], [d0].[Name], [d0].[Notes], [d0].[Price], [d0].[UpdatedAt], [d0].[UpdatedBy], [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-22 23:55:49.134] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 3320.8757ms
[2025-12-22 23:55:49.134] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 3324.1171ms
[2025-12-22 23:55:49.140] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:55:49.143] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:55:49.165] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:55:49.165] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:55:49.173] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 3415.5471ms
[2025-12-22 23:55:49.173] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 3408.8089ms
[2025-12-22 23:55:49.195] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:49.210] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:49.250] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 85.6772ms
[2025-12-22 23:55:49.252] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 204 null null 87.6728ms
[2025-12-22 23:55:49.254] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:55:49.257] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - null null
[2025-12-22 23:55:49.262] [INF] [RestaurantAPI.Controllers.IngredientsController] Получен список ингредиентов. Количество: 24, Всего: 24, Страница: 1
[2025-12-22 23:55:49.263] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-22 23:55:49.297] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.IngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:55:49.289] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:49.280] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:49.298] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:55:49.308] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:55:49.311] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:55:49.311] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-22 23:55:49.319] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:55:49.323] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi) in 3587.1112ms
[2025-12-22 23:55:49.325] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 3579.7259ms
[2025-12-22 23:55:49.329] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'RestaurantAPI.Helpers.PagedResult`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:55:49.333] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:55:49.340] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-22 23:55:49.343] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-22 23:55:49.359] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 3617.2249ms
[2025-12-22 23:55:49.359] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - 200 null application/json; charset=utf-8 3873.2997ms
[2025-12-22 23:55:49.361] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories - 200 null application/json; charset=utf-8 3875.9422ms
[2025-12-22 23:55:49.364] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-22 23:55:49.386] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 3900.7459ms
[2025-12-22 23:55:49.476] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__localStartDate_0='?' (DbType = DateTime), @__localEndDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__localStartDate_0 AND [o].[CreatedAt] <= @__localEndDate_1
[2025-12-22 23:55:49.489] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__localStartDate_0='?' (DbType = DateTime), @__localEndDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__localStartDate_0 AND [o].[CreatedAt] <= @__localEndDate_1
[2025-12-22 23:55:49.499] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:55:49.510] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:55:49.522] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__localStartDate_0='?' (DbType = DateTime), @__localEndDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__localStartDate_0 AND [o].[CreatedAt] <= @__localEndDate_1
GROUP BY [o].[Status]
[2025-12-22 23:55:49.530] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 65630.00, Заказов: 21
[2025-12-22 23:55:49.526] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (21ms) [Parameters=[@__localStartDate_0='?' (DbType = DateTime), @__localEndDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[CreatedAt]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__localStartDate_0 AND [o].[CreatedAt] <= @__localEndDate_1
[2025-12-22 23:55:49.532] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:55:49.541] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 206.5293ms
[2025-12-22 23:55:49.544] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:55:49.548] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 290.6226ms
[2025-12-22 23:55:49.558] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:55:49.567] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 212.4409ms
[2025-12-22 23:55:49.571] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:55:49.576] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-12-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.999Z - 200 null application/json; charset=utf-8 321.3831ms
[2025-12-22 23:55:49.580] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:55:49.580] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:55:49.590] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:49.597] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:49.600] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:55:49.602] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 204 null null 21.6567ms
[2025-12-22 23:55:49.604] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:55:49.606] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - null null
[2025-12-22 23:55:49.623] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__localStartDate_0='?' (DbType = DateTime), @__localEndDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__localStartDate_0 AND [o].[CreatedAt] <= @__localEndDate_1
[2025-12-22 23:55:49.626] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:49.636] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:55:49.636] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__localStartDate_0='?' (DbType = DateTime), @__localEndDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__localStartDate_0 AND [o].[CreatedAt] <= @__localEndDate_1
[2025-12-22 23:55:49.640] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:55:49.649] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:55:49.661] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__localStartDate_0='?' (DbType = DateTime), @__localEndDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[CreatedAt]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__localStartDate_0 AND [o].[CreatedAt] <= @__localEndDate_1
[2025-12-22 23:55:49.661] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:55:49.669] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:55:49.678] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__localStartDate_0='?' (DbType = DateTime), @__localEndDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__localStartDate_0 AND [o].[CreatedAt] <= @__localEndDate_1
GROUP BY [o].[Status]
[2025-12-22 23:55:49.679] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 27.2175ms
[2025-12-22 23:55:49.686] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 13050.00, Заказов: 1
[2025-12-22 23:55:49.690] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:55:49.695] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:55:49.698] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 91.7665ms
[2025-12-22 23:55:49.702] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 83.5376ms
[2025-12-22 23:55:49.740] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:55:49.743] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-11-01T00:00:00.000Z&endDate=2025-11-30T23:59:59.999Z - 200 null application/json; charset=utf-8 162.5162ms
[2025-12-22 23:55:49.760] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:55:49.760] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:55:49.771] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:49.781] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:49.783] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 204 null null 23.1083ms
[2025-12-22 23:55:49.786] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 204 null null 25.8295ms
[2025-12-22 23:55:49.787] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - null null
[2025-12-22 23:55:49.789] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - null null
[2025-12-22 23:55:49.819] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:49.826] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:49.831] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:55:49.832] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:55:49.834] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:55:49.837] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:55:49.852] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__localStartDate_0='?' (DbType = DateTime), @__localEndDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__localStartDate_0 AND [o].[CreatedAt] <= @__localEndDate_1
[2025-12-22 23:55:49.856] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__localStartDate_0='?' (DbType = DateTime), @__localEndDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__localStartDate_0 AND [o].[CreatedAt] <= @__localEndDate_1
[2025-12-22 23:55:49.862] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__localStartDate_0='?' (DbType = DateTime), @__localEndDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__localStartDate_0 AND [o].[CreatedAt] <= @__localEndDate_1
[2025-12-22 23:55:49.868] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__localStartDate_0='?' (DbType = DateTime), @__localEndDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__localStartDate_0 AND [o].[CreatedAt] <= @__localEndDate_1
[2025-12-22 23:55:49.873] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:55:49.881] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:55:49.887] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:55:49.893] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-22 23:55:49.900] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__localStartDate_0='?' (DbType = DateTime), @__localEndDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__localStartDate_0 AND [o].[CreatedAt] <= @__localEndDate_1
GROUP BY [o].[Status]
[2025-12-22 23:55:49.905] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__localStartDate_0='?' (DbType = DateTime), @__localEndDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__localStartDate_0 AND [o].[CreatedAt] <= @__localEndDate_1
GROUP BY [o].[Status]
[2025-12-22 23:55:49.909] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 7160.00, Заказов: 3
[2025-12-22 23:55:49.916] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 12350.00, Заказов: 5
[2025-12-22 23:55:49.919] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:55:49.922] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-22 23:55:49.926] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 83.4502ms
[2025-12-22 23:55:49.928] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 79.2362ms
[2025-12-22 23:55:49.930] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:55:49.933] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-22 23:55:49.936] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-22T00:00:00.000Z&endDate=2025-12-22T23:59:59.999Z - 200 null application/json; charset=utf-8 149.8979ms
[2025-12-22 23:55:49.938] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview?startDate=2025-12-21T00:00:00.000Z&endDate=2025-12-21T23:59:59.999Z - 200 null application/json; charset=utf-8 149.03ms
[2025-12-22 23:55:49.944] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:55:49.958] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:49.960] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 15.142ms
[2025-12-22 23:55:49.962] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-22 23:55:49.971] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:49.973] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:55:49.984] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:55:50.073] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (26ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-22 23:55:50.080] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-22 23:55:50.083] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:55:50.092] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 102.9216ms
[2025-12-22 23:55:50.094] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-22 23:55:50.098] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 135.883ms
[2025-12-22 23:55:50.104] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:55:50.110] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:50.112] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 8.0466ms
[2025-12-22 23:55:50.115] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-22 23:55:50.125] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:50.130] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:55:50.140] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:55:50.192] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-22 23:55:50.201] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:55:50.210] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 65.6127ms
[2025-12-22 23:55:50.215] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-22 23:55:50.220] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 104.7696ms
[2025-12-22 23:55:50.224] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2015-12-22T20:55:50.221Z&endDate=2035-12-22T20:55:50.221Z - null null
[2025-12-22 23:55:50.232] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:50.234] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2015-12-22T20:55:50.221Z&endDate=2035-12-22T20:55:50.221Z - 204 null null 9.7699ms
[2025-12-22 23:55:50.237] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2015-12-22T20:55:50.221Z&endDate=2035-12-22T20:55:50.221Z - null null
[2025-12-22 23:55:50.248] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:50.250] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:55:50.253] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:55:50.262] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__localStartDate_0='?' (DbType = DateTime), @__localEndDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[CreatedAt]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__localStartDate_0 AND [o].[CreatedAt] <= @__localEndDate_1
[2025-12-22 23:55:50.268] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:55:50.274] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 15.834ms
[2025-12-22 23:55:50.277] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:55:50.280] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2015-12-22T20:55:50.221Z&endDate=2035-12-22T20:55:50.221Z - 200 null application/json; charset=utf-8 42.9804ms
[2025-12-22 23:55:50.284] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:55:50.282Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:55:50.290] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:50.292] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:55:50.282Z&endDate=2026-12-31T20:59:59.999Z - 204 null null 7.5336ms
[2025-12-22 23:55:50.295] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:55:50.282Z&endDate=2026-12-31T20:59:59.999Z - null null
[2025-12-22 23:55:50.303] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:50.306] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:55:50.309] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:55:50.320] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__localStartDate_0='?' (DbType = DateTime), @__localEndDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[CreatedAt]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__localStartDate_0 AND [o].[CreatedAt] <= @__localEndDate_1
[2025-12-22 23:55:50.327] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:55:50.331] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 17.7068ms
[2025-12-22 23:55:50.338] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:55:50.340] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2023-12-22T20:55:50.282Z&endDate=2026-12-31T20:59:59.999Z - 200 null application/json; charset=utf-8 45.6945ms
[2025-12-22 23:55:55.089] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-31T21:00:00.000Z&endDate=2025-12-31T20:59:59.999Z - null null
[2025-12-22 23:55:55.094] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:55.095] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-31T21:00:00.000Z&endDate=2025-12-31T20:59:59.999Z - 204 null null 6.8322ms
[2025-12-22 23:55:55.098] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-31T21:00:00.000Z&endDate=2025-12-31T20:59:59.999Z - null null
[2025-12-22 23:55:55.110] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:55.116] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:55:55.120] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:55:55.138] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__localStartDate_0='?' (DbType = DateTime), @__localEndDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[CreatedAt]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__localStartDate_0 AND [o].[CreatedAt] <= @__localEndDate_1
[2025-12-22 23:55:55.145] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:55:55.150] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 25.4584ms
[2025-12-22 23:55:55.153] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:55:55.157] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-31T21:00:00.000Z&endDate=2025-12-31T20:59:59.999Z - 200 null application/json; charset=utf-8 58.9373ms
[2025-12-22 23:55:59.432] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=year&startDate=2024-12-31T21:00:00.000Z&endDate=2025-12-31T20:59:59.999Z - null null
[2025-12-22 23:55:59.439] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:59.442] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=year&startDate=2024-12-31T21:00:00.000Z&endDate=2025-12-31T20:59:59.999Z - 204 null null 9.0198ms
[2025-12-22 23:55:59.445] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=year&startDate=2024-12-31T21:00:00.000Z&endDate=2025-12-31T20:59:59.999Z - null null
[2025-12-22 23:55:59.458] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:55:59.461] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:55:59.464] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:55:59.487] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__localStartDate_0='?' (DbType = DateTime), @__localEndDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[CreatedAt] AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__localStartDate_0 AND [o].[CreatedAt] <= @__localEndDate_1
[2025-12-22 23:55:59.501] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:55:59.508] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 41.1636ms
[2025-12-22 23:55:59.513] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:55:59.519] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=year&startDate=2024-12-31T21:00:00.000Z&endDate=2025-12-31T20:59:59.999Z - 200 null application/json; charset=utf-8 74.1474ms
[2025-12-22 23:56:05.259] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=month&startDate=2024-12-31T21:00:00.000Z&endDate=2025-12-31T20:59:59.999Z - null null
[2025-12-22 23:56:05.263] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:56:05.265] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=month&startDate=2024-12-31T21:00:00.000Z&endDate=2025-12-31T20:59:59.999Z - 204 null null 6.2949ms
[2025-12-22 23:56:05.269] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=month&startDate=2024-12-31T21:00:00.000Z&endDate=2025-12-31T20:59:59.999Z - null null
[2025-12-22 23:56:05.278] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:56:05.280] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:56:05.284] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:56:05.294] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__localStartDate_0='?' (DbType = DateTime), @__localEndDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[CreatedAt] AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__localStartDate_0 AND [o].[CreatedAt] <= @__localEndDate_1
[2025-12-22 23:56:05.303] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:56:05.307] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 17.4344ms
[2025-12-22 23:56:05.310] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:56:05.312] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=month&startDate=2024-12-31T21:00:00.000Z&endDate=2025-12-31T20:59:59.999Z - 200 null application/json; charset=utf-8 43.8496ms
[2025-12-22 23:56:08.750] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=week&startDate=2024-12-31T21:00:00.000Z&endDate=2025-12-31T20:59:59.999Z - null null
[2025-12-22 23:56:08.754] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:56:08.757] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=week&startDate=2024-12-31T21:00:00.000Z&endDate=2025-12-31T20:59:59.999Z - 204 null null 6.5363ms
[2025-12-22 23:56:08.760] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=week&startDate=2024-12-31T21:00:00.000Z&endDate=2025-12-31T20:59:59.999Z - null null
[2025-12-22 23:56:08.775] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:56:08.778] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:56:08.783] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:56:08.794] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__localStartDate_0='?' (DbType = DateTime), @__localEndDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[CreatedAt] AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__localStartDate_0 AND [o].[CreatedAt] <= @__localEndDate_1
[2025-12-22 23:56:08.804] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:56:08.810] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 19.7288ms
[2025-12-22 23:56:08.814] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:56:08.819] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=week&startDate=2024-12-31T21:00:00.000Z&endDate=2025-12-31T20:59:59.999Z - 200 null application/json; charset=utf-8 59.2737ms
[2025-12-22 23:56:37.853] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-31T21:00:00.000Z&endDate=2025-12-31T20:59:59.999Z - null null
[2025-12-22 23:56:37.857] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:56:37.859] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-31T21:00:00.000Z&endDate=2025-12-31T20:59:59.999Z - 204 null null 5.6508ms
[2025-12-22 23:56:37.861] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-31T21:00:00.000Z&endDate=2025-12-31T20:59:59.999Z - null null
[2025-12-22 23:56:37.876] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-22 23:56:37.880] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:56:37.887] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-22 23:56:37.901] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__localStartDate_0='?' (DbType = DateTime), @__localEndDate_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[CreatedAt]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[CreatedAt] >= @__localStartDate_0 AND [o].[CreatedAt] <= @__localEndDate_1
[2025-12-22 23:56:37.910] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-22 23:56:37.919] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 26.2689ms
[2025-12-22 23:56:37.923] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-22 23:56:37.928] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day&startDate=2024-12-31T21:00:00.000Z&endDate=2025-12-31T20:59:59.999Z - 200 null application/json; charset=utf-8 66.2621ms
