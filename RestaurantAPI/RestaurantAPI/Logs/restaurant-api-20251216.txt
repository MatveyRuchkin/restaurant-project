[2025-12-16 00:00:03.483] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/048cacce-26b2-4ea3-971f-7d086212a131 - null null
[2025-12-16 00:00:03.501] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:00:03.502] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/048cacce-26b2-4ea3-971f-7d086212a131 - 204 null null 18.5424ms
[2025-12-16 00:00:03.503] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/048cacce-26b2-4ea3-971f-7d086212a131 - null null
[2025-12-16 00:00:03.506] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:00:03.507] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 00:00:03.509] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-16 00:00:03.521] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:00:03.528] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-16 00:00:03.529] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:00:03.530] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 19.8947ms
[2025-12-16 00:00:03.531] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 00:00:03.532] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/048cacce-26b2-4ea3-971f-7d086212a131 - 200 null application/json; charset=utf-8 28.6203ms
[2025-12-16 00:00:06.617] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 00:00:06.620] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:00:06.622] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - 204 null null 4.6415ms
[2025-12-16 00:00:06.624] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 00:00:06.629] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:00:06.630] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 00:00:06.631] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMyOrders() on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 00:00:06.640] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [u].[Username], [o].[OrderDate], [o].[Status], [o].[Total], [o].[Notes]
FROM [Orders] AS [o]
INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[UserId] = @__userId_0
ORDER BY [o].[OrderDate] DESC
[2025-12-16 00:00:06.643] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "297e9a8e-3d8a-4464-bee5-1c028bb4a92b". Количество: 0
[2025-12-16 00:00:06.644] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:00:06.645] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 11.1056ms
[2025-12-16 00:00:06.646] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 00:00:06.647] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - 200 null application/json; charset=utf-8 22.976ms
[2025-12-16 00:00:07.187] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 00:00:07.189] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:00:07.190] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 3.9604ms
[2025-12-16 00:00:07.193] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 00:00:07.196] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:00:07.197] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 00:00:07.198] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 00:00:07.202] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:00:07.210] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [u].[Username], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[Notes]
FROM (
    SELECT [o].[Id], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:00:07.213] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 00:00:07.214] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:00:07.216] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 15.9948ms
[2025-12-16 00:00:07.217] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 00:00:07.218] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 25.0911ms
[2025-12-16 00:02:24.686] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - null null
[2025-12-16 00:02:24.688] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:24.689] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - 204 null null 2.9224ms
[2025-12-16 00:02:24.690] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Auth/login - application/json 47
[2025-12-16 00:02:24.694] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:24.694] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 00:02:24.695] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.AuthResponseDto]] Login(RestaurantAPI.DTOs.UserLoginDto) on controller RestaurantAPI.Controllers.AuthController (RestaurantApi).
[2025-12-16 00:02:24.703] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__dto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Username] = @__dto_Username_0
[2025-12-16 00:02:24.911] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [JwtTokens] ([CreatedAt], [ExpiresAt], [Revoked], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
[2025-12-16 00:02:24.916] [INF] [RestaurantAPI.Controllers.AuthController] Пользователь Jefowus1 успешно вошел в систему
[2025-12-16 00:02:24.917] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'RestaurantAPI.DTOs.AuthResponseDto'.
[2025-12-16 00:02:24.918] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.AuthController.Login (RestaurantApi) in 221.4241ms
[2025-12-16 00:02:24.919] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 00:02:24.920] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Auth/login - 200 null application/json; charset=utf-8 229.8808ms
[2025-12-16 00:02:26.142] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 00:02:26.144] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 00:02:26.144] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:02:26.145] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:26.147] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:26.149] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:26.151] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 8.6496ms
[2025-12-16 00:02:26.151] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 7.6041ms
[2025-12-16 00:02:26.152] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 7.8161ms
[2025-12-16 00:02:26.153] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 00:02:26.153] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 00:02:26.154] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:02:26.163] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:26.164] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:26.166] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:26.167] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 00:02:26.168] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:02:26.168] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:02:26.169] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 00:02:26.170] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 00:02:26.171] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 00:02:26.178] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:02:26.185] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:02:26.185] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:02:26.186] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:02:26.191] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 00:02:26.191] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 00:02:26.192] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:02:26.192] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:02:26.194] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 12, Всего: 12, Страница: 1, Размер страницы: 1000
[2025-12-16 00:02:26.196] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 00:02:26.197] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 23.1686ms
[2025-12-16 00:02:26.198] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:02:26.199] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:02:26.200] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:02:26.201] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 25.2581ms
[2025-12-16 00:02:26.202] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 29.7616ms
[2025-12-16 00:02:26.203] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 49.4146ms
[2025-12-16 00:02:26.204] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:02:26.205] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 00:02:26.207] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 53.3677ms
[2025-12-16 00:02:26.208] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 54.8213ms
[2025-12-16 00:02:26.210] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 00:02:26.215] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:26.215] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 5.0115ms
[2025-12-16 00:02:26.217] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 00:02:26.220] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:26.220] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 00:02:26.221] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 00:02:26.227] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 00:02:26.233] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 00:02:26.234] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 00:02:26.235] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:02:26.236] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 13.7259ms
[2025-12-16 00:02:26.237] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 00:02:26.238] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 21.3165ms
[2025-12-16 00:02:27.170] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - null null
[2025-12-16 00:02:27.172] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:27.173] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - 204 null null 2.9046ms
[2025-12-16 00:02:27.174] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - null null
[2025-12-16 00:02:27.177] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:27.177] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 00:02:27.178] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishIngredients", controller = "DishIngredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishIngredients(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishIngredientsController (RestaurantApi).
[2025-12-16 00:02:27.196] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (16ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DishIngredients] AS [d]
INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
[2025-12-16 00:02:27.203] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[DishId], [s].[Name] AS [DishName], [s].[IngredientId], [i].[Name] AS [IngredientName], [s].[Quantity]
FROM (
    SELECT [d].[Id], [d].[DishId], [d].[IngredientId], [d].[Quantity], [d0].[Name]
    FROM [DishIngredients] AS [d]
    INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
    ORDER BY [d0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Ingredients] AS [i] ON [s].[IngredientId] = [i].[Id]
ORDER BY [s].[Name]
[2025-12-16 00:02:27.205] [INF] [RestaurantAPI.Controllers.DishIngredientsController] Получен список ингредиентов блюд. Количество: 5, Всего: 5, Страница: 1
[2025-12-16 00:02:27.206] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishIngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:02:27.207] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi) in 27.7632ms
[2025-12-16 00:02:27.208] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 00:02:27.209] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - 200 null application/json; charset=utf-8 34.7942ms
[2025-12-16 00:02:31.121] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - null null
[2025-12-16 00:02:31.123] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:31.124] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - 204 null null 2.5881ms
[2025-12-16 00:02:31.125] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Auth/login - application/json 44
[2025-12-16 00:02:31.128] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:31.129] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 00:02:31.130] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.AuthResponseDto]] Login(RestaurantAPI.DTOs.UserLoginDto) on controller RestaurantAPI.Controllers.AuthController (RestaurantApi).
[2025-12-16 00:02:31.132] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__dto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Username] = @__dto_Username_0
[2025-12-16 00:02:31.385] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [JwtTokens] ([CreatedAt], [ExpiresAt], [Revoked], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
[2025-12-16 00:02:31.390] [INF] [RestaurantAPI.Controllers.AuthController] Пользователь admin успешно вошел в систему
[2025-12-16 00:02:31.392] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'RestaurantAPI.DTOs.AuthResponseDto'.
[2025-12-16 00:02:31.393] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.AuthController.Login (RestaurantApi) in 262.4253ms
[2025-12-16 00:02:31.395] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 00:02:31.395] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Auth/login - 200 null application/json; charset=utf-8 270.2696ms
[2025-12-16 00:02:33.566] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:02:33.568] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:02:33.569] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:02:33.569] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:02:33.570] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:33.572] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:33.574] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:33.575] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:33.576] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 9.9797ms
[2025-12-16 00:02:33.577] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 8.9562ms
[2025-12-16 00:02:33.578] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 8.44ms
[2025-12-16 00:02:33.578] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 8.9923ms
[2025-12-16 00:02:33.579] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:02:33.580] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:02:33.580] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:02:33.580] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:02:33.592] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:33.594] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:33.596] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:33.598] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:33.599] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:02:33.599] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:02:33.600] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:02:33.601] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:02:33.601] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:02:33.602] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:02:33.603] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:02:33.604] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:02:33.610] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:02:33.614] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:02:33.616] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:02:33.617] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:02:33.618] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:02:33.618] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:02:33.620] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:02:33.623] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:02:33.623] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:02:33.624] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 13.7338ms
[2025-12-16 00:02:33.625] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:02:33.627] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:02:33.629] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:02:33.630] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 22.9613ms
[2025-12-16 00:02:33.630] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:02:33.631] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 20.0399ms
[2025-12-16 00:02:33.632] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 52.0967ms
[2025-12-16 00:02:33.633] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:02:33.635] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:02:33.635] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:02:33.640] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 59.9921ms
[2025-12-16 00:02:33.641] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:02:33.642] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 61.3873ms
[2025-12-16 00:02:33.645] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 38.9558ms
[2025-12-16 00:02:33.648] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:02:33.649] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 69.5403ms
[2025-12-16 00:02:40.091] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 00:02:40.092] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 00:02:40.094] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:40.097] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:40.097] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 6.1464ms
[2025-12-16 00:02:40.098] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 5.3372ms
[2025-12-16 00:02:40.099] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 00:02:40.099] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 00:02:40.105] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:40.109] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:40.110] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 00:02:40.110] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 00:02:40.111] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 00:02:40.112] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 00:02:40.115] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:02:40.115] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:02:40.121] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[Username], [r].[Name] AS [RoleName]
FROM (
    SELECT [u].[Id], [u].[RoleId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-16 00:02:40.122] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [u].[Username], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[Notes]
FROM (
    SELECT [o].[Id], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:02:40.124] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 00:02:40.127] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 00:02:40.128] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:02:40.129] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:02:40.131] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 17.9447ms
[2025-12-16 00:02:40.132] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 17.5828ms
[2025-12-16 00:02:40.133] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 00:02:40.134] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 00:02:40.135] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 35.5934ms
[2025-12-16 00:02:40.136] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 36.1481ms
[2025-12-16 00:02:42.088] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 00:02:42.091] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Roles - null null
[2025-12-16 00:02:42.093] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:42.095] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:42.096] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 00:02:42.096] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Roles - 204 null null 6.007ms
[2025-12-16 00:02:42.097] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 00:02:42.098] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Roles - null null
[2025-12-16 00:02:42.103] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:02:42.105] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:42.109] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi)'
[2025-12-16 00:02:42.110] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[Username], [r].[Name] AS [RoleName]
FROM (
    SELECT [u].[Id], [u].[RoleId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-16 00:02:42.111] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRoles", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRoles(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.RolesController (RestaurantApi).
[2025-12-16 00:02:42.115] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 00:02:42.118] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:02:42.119] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Roles] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:02:42.119] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 17.4095ms
[2025-12-16 00:02:42.122] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 00:02:42.123] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 35.0771ms
[2025-12-16 00:02:42.136] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
ORDER BY [r].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:02:42.138] [INF] [RestaurantAPI.Controllers.RolesController] Получен список ролей. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 00:02:42.140] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.RoleReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:02:42.141] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi) in 24.213ms
[2025-12-16 00:02:42.142] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi)'
[2025-12-16 00:02:42.143] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Roles - 200 null application/json; charset=utf-8 44.6889ms
[2025-12-16 00:02:42.392] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=1000 - null null
[2025-12-16 00:02:42.394] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:42.395] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=1000 - 204 null null 3.3345ms
[2025-12-16 00:02:42.397] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=1000 - null null
[2025-12-16 00:02:42.400] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:42.401] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:02:42.402] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 00:02:42.405] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:02:42.409] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:02:42.410] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 00:02:42.412] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:02:42.413] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 9.1046ms
[2025-12-16 00:02:42.414] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:02:42.415] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=1000 - 200 null application/json; charset=utf-8 18.0208ms
[2025-12-16 00:02:42.690] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Ingredients?pageSize=1000 - null null
[2025-12-16 00:02:42.693] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:42.694] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Ingredients?pageSize=1000 - 204 null null 3.8852ms
[2025-12-16 00:02:42.696] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - null null
[2025-12-16 00:02:42.699] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:02:42.700] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-16 00:02:42.701] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetIngredients", controller = "Ingredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetIngredients(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.IngredientsController (RestaurantApi).
[2025-12-16 00:02:42.705] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:02:42.712] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[Name]
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
ORDER BY [i].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:02:42.714] [INF] [RestaurantAPI.Controllers.IngredientsController] Получен список ингредиентов. Количество: 24, Всего: 24, Страница: 1
[2025-12-16 00:02:42.716] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.IngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:02:42.717] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi) in 14.4764ms
[2025-12-16 00:02:42.718] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-16 00:02:42.720] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - 200 null application/json; charset=utf-8 24.0479ms
[2025-12-16 00:04:27.966] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=1000 - null null
[2025-12-16 00:04:27.969] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:27.970] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=1000 - 204 null null 3.8407ms
[2025-12-16 00:04:27.972] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=1000 - null null
[2025-12-16 00:04:27.975] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:27.976] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:04:27.977] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 00:04:27.989] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:27.993] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:04:27.995] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 00:04:27.996] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:04:27.997] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 18.5299ms
[2025-12-16 00:04:27.998] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:04:27.999] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=1000 - 200 null application/json; charset=utf-8 27.2423ms
[2025-12-16 00:04:28.985] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 00:04:28.988] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:28.988] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Roles - null null
[2025-12-16 00:04:28.989] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 3.6303ms
[2025-12-16 00:04:28.991] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 00:04:28.991] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:28.996] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:28.996] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Roles - 204 null null 8.0055ms
[2025-12-16 00:04:28.998] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 00:04:28.998] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Roles - null null
[2025-12-16 00:04:29.002] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 00:04:29.003] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:29.005] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi)'
[2025-12-16 00:04:29.006] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRoles", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRoles(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.RolesController (RestaurantApi).
[2025-12-16 00:04:29.011] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Roles] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:29.013] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:29.015] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
ORDER BY [r].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:04:29.018] [INF] [RestaurantAPI.Controllers.RolesController] Получен список ролей. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 00:04:29.019] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[Username], [r].[Name] AS [RoleName]
FROM (
    SELECT [u].[Id], [u].[RoleId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-16 00:04:29.020] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.RoleReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:04:29.022] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 00:04:29.022] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi) in 14.5633ms
[2025-12-16 00:04:29.025] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi)'
[2025-12-16 00:04:29.024] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:04:29.026] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Roles - 200 null application/json; charset=utf-8 27.419ms
[2025-12-16 00:04:29.027] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 22.0211ms
[2025-12-16 00:04:29.030] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 00:04:29.031] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 40.2892ms
[2025-12-16 00:04:31.205] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 00:04:31.207] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:31.207] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 00:04:31.208] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 00:04:31.210] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:31.211] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 00:04:31.212] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 4.6246ms
[2025-12-16 00:04:31.213] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 00:04:31.214] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:31.219] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:31.221] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[Username], [r].[Name] AS [RoleName]
FROM (
    SELECT [u].[Id], [u].[RoleId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-16 00:04:31.221] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 00:04:31.223] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 00:04:31.224] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 00:04:31.225] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:04:31.228] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 15.0248ms
[2025-12-16 00:04:31.230] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 00:04:31.231] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 26.1811ms
[2025-12-16 00:04:31.244] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:31.250] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [u].[Username], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[Notes]
FROM (
    SELECT [o].[Id], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:04:31.253] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 00:04:31.254] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:04:31.255] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 28.1494ms
[2025-12-16 00:04:31.256] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 00:04:31.257] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 43.6792ms
[2025-12-16 00:04:32.105] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:04:32.107] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:04:32.107] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:04:32.107] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:04:32.107] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:32.110] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:32.111] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:32.113] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:32.114] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 9.133ms
[2025-12-16 00:04:32.115] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 8.0992ms
[2025-12-16 00:04:32.116] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 8.504ms
[2025-12-16 00:04:32.116] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 9.1985ms
[2025-12-16 00:04:32.117] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:04:32.118] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:04:32.118] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:04:32.119] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:04:32.131] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:32.133] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:32.136] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:32.138] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:32.139] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:04:32.140] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:04:32.140] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:04:32.141] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:04:32.142] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:04:32.143] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:04:32.144] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:04:32.145] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:04:32.149] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:32.153] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:32.156] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:04:32.156] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:32.159] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:04:32.159] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:04:32.160] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:04:32.162] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 11.2684ms
[2025-12-16 00:04:32.162] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:32.163] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:04:32.165] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:04:32.166] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:04:32.169] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 19.677ms
[2025-12-16 00:04:32.170] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:04:32.171] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 52.6485ms
[2025-12-16 00:04:32.172] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:04:32.172] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:04:32.173] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 25.3105ms
[2025-12-16 00:04:32.177] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:04:32.178] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 59.146ms
[2025-12-16 00:04:32.179] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:04:32.179] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:04:32.182] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 64.148ms
[2025-12-16 00:04:32.184] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 37.078ms
[2025-12-16 00:04:32.187] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:04:32.188] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 71.1143ms
[2025-12-16 00:04:32.602] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:04:32.604] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories - null null
[2025-12-16 00:04:32.605] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:32.607] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:32.609] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 6.5453ms
[2025-12-16 00:04:32.609] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories - 204 null null 5.3197ms
[2025-12-16 00:04:32.610] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:04:32.610] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories - null null
[2025-12-16 00:04:32.615] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:32.617] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:32.618] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:04:32.619] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:04:32.620] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 00:04:32.621] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 00:04:32.623] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:32.624] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:32.627] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:04:32.628] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 00:04:32.629] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 00:04:32.630] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 12, Всего: 12, Страница: 1, Размер страницы: 1000
[2025-12-16 00:04:32.631] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:04:32.633] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:04:32.634] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 10.8468ms
[2025-12-16 00:04:32.636] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 14.0976ms
[2025-12-16 00:04:32.637] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:04:32.638] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:04:32.639] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories - 200 null application/json; charset=utf-8 28.2051ms
[2025-12-16 00:04:32.639] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 29.0472ms
[2025-12-16 00:04:32.906] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=1000 - null null
[2025-12-16 00:04:32.908] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:32.909] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=1000 - 204 null null 3.7817ms
[2025-12-16 00:04:32.912] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=1000 - null null
[2025-12-16 00:04:32.916] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:32.917] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 00:04:32.918] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 00:04:32.923] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:32.928] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:04:32.930] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 00:04:32.932] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:04:32.933] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 13.3283ms
[2025-12-16 00:04:32.935] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 00:04:32.936] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=1000 - 200 null application/json; charset=utf-8 24.5678ms
[2025-12-16 00:04:33.250] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Ingredients?pageSize=1000 - null null
[2025-12-16 00:04:33.253] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:33.254] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Ingredients?pageSize=1000 - 204 null null 3.8292ms
[2025-12-16 00:04:33.256] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - null null
[2025-12-16 00:04:33.259] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:33.260] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-16 00:04:33.261] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetIngredients", controller = "Ingredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetIngredients(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.IngredientsController (RestaurantApi).
[2025-12-16 00:04:33.266] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:33.271] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[Name]
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
ORDER BY [i].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:04:33.272] [INF] [RestaurantAPI.Controllers.IngredientsController] Получен список ингредиентов. Количество: 24, Всего: 24, Страница: 1
[2025-12-16 00:04:33.273] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.IngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:04:33.275] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi) in 12.4242ms
[2025-12-16 00:04:33.276] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-16 00:04:33.277] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - 200 null application/json; charset=utf-8 21.3993ms
[2025-12-16 00:04:33.528] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 00:04:33.529] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Roles - null null
[2025-12-16 00:04:33.530] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:33.533] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:33.534] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 00:04:33.534] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi)'
[2025-12-16 00:04:33.535] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 00:04:33.536] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRoles", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRoles(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.RolesController (RestaurantApi).
[2025-12-16 00:04:33.539] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:33.540] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Roles] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:33.542] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[Username], [r].[Name] AS [RoleName]
FROM (
    SELECT [u].[Id], [u].[RoleId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-16 00:04:33.543] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
ORDER BY [r].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:04:33.545] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 00:04:33.547] [INF] [RestaurantAPI.Controllers.RolesController] Получен список ролей. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 00:04:33.548] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:04:33.549] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.RoleReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:04:33.550] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 12.0863ms
[2025-12-16 00:04:33.551] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi) in 12.1601ms
[2025-12-16 00:04:33.553] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 00:04:33.554] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi)'
[2025-12-16 00:04:33.555] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 27.0174ms
[2025-12-16 00:04:33.555] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Roles - 200 null application/json; charset=utf-8 26.5917ms
[2025-12-16 00:04:35.592] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:04:35.593] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:04:35.594] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:04:35.594] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:04:35.594] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:35.596] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:35.598] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:35.601] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:35.601] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:04:35.602] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:04:35.603] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:04:35.604] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:04:35.605] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:04:35.606] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:04:35.607] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:04:35.608] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:04:35.611] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:35.613] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:04:35.613] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:04:35.616] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:04:35.616] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:35.618] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:04:35.620] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:04:35.622] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:04:35.625] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:35.625] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:04:35.626] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 13.8052ms
[2025-12-16 00:04:35.628] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 13.6982ms
[2025-12-16 00:04:35.630] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:35.630] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 19.2606ms
[2025-12-16 00:04:35.631] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:04:35.632] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:04:35.636] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:04:35.636] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:04:35.638] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 43.5997ms
[2025-12-16 00:04:35.638] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 44.1243ms
[2025-12-16 00:04:35.639] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 45.7656ms
[2025-12-16 00:04:35.641] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:04:35.648] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:04:35.649] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 39.301ms
[2025-12-16 00:04:35.650] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:04:35.651] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 58.9957ms
[2025-12-16 00:04:39.898] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:04:39.900] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories - null null
[2025-12-16 00:04:39.900] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:39.903] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:39.904] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 5.7337ms
[2025-12-16 00:04:39.904] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories - 204 null null 4.6292ms
[2025-12-16 00:04:39.906] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:04:39.906] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories - null null
[2025-12-16 00:04:39.912] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:39.914] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:39.915] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:04:39.916] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:04:39.917] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 00:04:39.918] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 00:04:39.921] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:39.922] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:39.924] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 00:04:39.926] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:04:39.927] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 12, Всего: 12, Страница: 1, Размер страницы: 1000
[2025-12-16 00:04:39.929] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 00:04:39.930] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:04:39.931] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:04:39.932] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 12.0955ms
[2025-12-16 00:04:39.934] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:04:39.933] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 11.8452ms
[2025-12-16 00:04:39.935] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 29.3671ms
[2025-12-16 00:04:39.937] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:04:39.940] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories - 200 null application/json; charset=utf-8 34.1653ms
[2025-12-16 00:04:40.360] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:04:40.362] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:04:40.362] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:04:40.362] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:04:40.363] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:40.366] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:40.368] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:40.372] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:40.373] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 12.5488ms
[2025-12-16 00:04:40.373] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 11.4859ms
[2025-12-16 00:04:40.374] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 12.0821ms
[2025-12-16 00:04:40.375] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 12.6369ms
[2025-12-16 00:04:40.375] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:04:40.376] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:04:40.377] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:04:40.377] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:04:40.393] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:40.396] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:40.398] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:40.402] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:04:40.403] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:04:40.404] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:04:40.405] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:04:40.405] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:04:40.406] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:04:40.407] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:04:40.408] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:04:40.409] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:04:40.413] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:40.415] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:04:40.415] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:04:40.416] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:04:40.417] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:40.419] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:04:40.422] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:04:40.424] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:04:40.427] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:40.427] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:04:40.428] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 13.7543ms
[2025-12-16 00:04:40.429] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 13.7626ms
[2025-12-16 00:04:40.431] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:04:40.431] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 18.5295ms
[2025-12-16 00:04:40.432] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:04:40.433] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:04:40.435] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:04:40.435] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:04:40.436] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 59.4671ms
[2025-12-16 00:04:40.437] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 60.2227ms
[2025-12-16 00:04:40.438] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 61.7065ms
[2025-12-16 00:04:40.439] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:04:40.447] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:04:40.448] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 37.5173ms
[2025-12-16 00:04:40.449] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:04:40.450] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 74.9904ms
[2025-12-16 00:11:02.599] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:11:02.606] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:02.607] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 7.2555ms
[2025-12-16 00:11:02.926] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:11:02.945] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:02.946] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:11:02.947] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:11:03.047] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:11:03.053] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:11:03.059] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:11:03.064] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:11:03.070] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:11:03.072] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:11:03.074] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:11:03.076] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 127.6397ms
[2025-12-16 00:11:03.078] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:11:03.078] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 152.0953ms
[2025-12-16 00:11:03.082] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:11:03.086] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:03.087] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 4.1927ms
[2025-12-16 00:11:03.088] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:11:03.093] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:03.094] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:11:03.095] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:11:03.110] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:11:03.112] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:11:03.113] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:11:03.115] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 18.2474ms
[2025-12-16 00:11:03.117] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:11:03.118] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 30.0871ms
[2025-12-16 00:11:03.121] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:11:03.124] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:03.126] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 4.2065ms
[2025-12-16 00:11:03.128] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:11:03.132] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:03.133] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:11:03.135] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:11:03.147] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:11:03.149] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:11:03.151] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 14.505ms
[2025-12-16 00:11:03.153] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:11:03.154] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 25.86ms
[2025-12-16 00:11:03.158] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:11:03.160] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:03.161] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 3.5414ms
[2025-12-16 00:11:03.163] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:11:03.167] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:03.168] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:11:03.169] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:11:03.177] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:11:03.179] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:11:03.180] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 9.0761ms
[2025-12-16 00:11:03.181] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:11:03.183] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 19.8729ms
[2025-12-16 00:11:03.189] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:11:03.192] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:03.193] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 4.0102ms
[2025-12-16 00:11:03.195] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:11:03.198] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:03.199] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:11:03.204] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:11:03.253] [ERR] [RestaurantAPI.Controllers.StatisticsController] Ошибка при получении статистики выручки по датам
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => !(o.IsDeleted))
    .Where(o => o.OrderDate >= __startDate_Value_0)
    .GroupBy(o => o.OrderDate.Date)
    .Select(g => new { 
        Date = g.Key.ToString("yyyy-MM-dd"), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total), 
        OrdersCount = g
            .AsQueryable()
            .Count()
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Additional information: Translation of method 'System.DateTime.ToString' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate(Nullable`1 startDate, Nullable`1 endDate, String period) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Controllers\StatisticsController.cs:line 121
[2025-12-16 00:11:03.307] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'System.String'.
[2025-12-16 00:11:03.310] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 103.5306ms
[2025-12-16 00:11:03.312] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:11:03.313] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 500 null text/plain; charset=utf-8 117.9325ms
[2025-12-16 00:11:15.882] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=week - null null
[2025-12-16 00:11:15.885] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:15.886] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=week - 204 null null 3.4724ms
[2025-12-16 00:11:15.887] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=week - null null
[2025-12-16 00:11:15.890] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:15.891] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:11:15.892] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:11:15.911] [ERR] [RestaurantAPI.Controllers.StatisticsController] Ошибка при получении статистики выручки по датам
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => !(o.IsDeleted))
    .Where(o => o.OrderDate >= __startDate_Value_0)
    .GroupBy(o => new { 
        Year = o.OrderDate.Year, 
        WeekStart = o.OrderDate.AddDays((double)(-Convert(o.OrderDate.DayOfWeek, Int32)
         + 1)).Date
     })' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate(Nullable`1 startDate, Nullable`1 endDate, String period) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Controllers\StatisticsController.cs:line 105
[2025-12-16 00:11:15.916] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'System.String'.
[2025-12-16 00:11:15.917] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 23.121ms
[2025-12-16 00:11:15.918] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:11:15.918] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=week - 500 null text/plain; charset=utf-8 31.0378ms
[2025-12-16 00:11:16.581] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:11:16.583] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:16.584] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 3.2179ms
[2025-12-16 00:11:16.586] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:11:16.588] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:16.589] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:11:16.590] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:11:16.594] [ERR] [RestaurantAPI.Controllers.StatisticsController] Ошибка при получении статистики выручки по датам
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => !(o.IsDeleted))
    .Where(o => o.OrderDate >= __startDate_Value_0)
    .GroupBy(o => o.OrderDate.Date)
    .Select(g => new { 
        Date = g.Key.ToString("yyyy-MM-dd"), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total), 
        OrdersCount = g
            .AsQueryable()
            .Count()
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Additional information: Translation of method 'System.DateTime.ToString' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate(Nullable`1 startDate, Nullable`1 endDate, String period) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Controllers\StatisticsController.cs:line 121
[2025-12-16 00:11:16.599] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'System.String'.
[2025-12-16 00:11:16.601] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 9.125ms
[2025-12-16 00:11:16.602] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:11:16.602] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 500 null text/plain; charset=utf-8 16.411ms
[2025-12-16 00:11:54.102] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:11:54.105] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:54.106] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 4.7529ms
[2025-12-16 00:11:54.110] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:11:54.114] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:54.116] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:11:54.118] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:11:54.128] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:11:54.136] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:11:54.142] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:11:54.145] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:11:54.149] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:11:54.152] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:11:54.154] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:11:54.155] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 33.2344ms
[2025-12-16 00:11:54.157] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:11:54.159] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 48.9396ms
[2025-12-16 00:11:54.163] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:11:54.165] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:54.166] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 3.5107ms
[2025-12-16 00:11:54.168] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:11:54.171] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:54.172] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:11:54.173] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:11:54.177] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:11:54.180] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:11:54.181] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:11:54.183] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 8.1578ms
[2025-12-16 00:11:54.184] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:11:54.187] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 18.9167ms
[2025-12-16 00:11:54.191] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:11:54.193] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:54.194] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 3.5077ms
[2025-12-16 00:11:54.196] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:11:54.199] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:54.200] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:11:54.201] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:11:54.204] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:11:54.206] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:11:54.207] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 5.1543ms
[2025-12-16 00:11:54.209] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:11:54.210] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 14.1085ms
[2025-12-16 00:11:54.213] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:11:54.215] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:54.216] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 2.7538ms
[2025-12-16 00:11:54.218] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:11:54.221] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:54.222] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:11:54.223] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:11:54.227] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:11:54.229] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:11:54.230] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 5.2092ms
[2025-12-16 00:11:54.232] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:11:54.233] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 15.0396ms
[2025-12-16 00:11:54.237] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:11:54.240] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:54.241] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 4.0359ms
[2025-12-16 00:11:54.244] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:11:54.246] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:54.247] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:11:54.248] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:11:54.252] [ERR] [RestaurantAPI.Controllers.StatisticsController] Ошибка при получении статистики выручки по датам
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => !(o.IsDeleted))
    .Where(o => o.OrderDate >= __startDate_Value_0)
    .GroupBy(o => o.OrderDate.Date)
    .Select(g => new { 
        Date = g.Key.ToString("yyyy-MM-dd"), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total), 
        OrdersCount = g
            .AsQueryable()
            .Count()
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Additional information: Translation of method 'System.DateTime.ToString' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate(Nullable`1 startDate, Nullable`1 endDate, String period) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Controllers\StatisticsController.cs:line 121
[2025-12-16 00:11:54.257] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'System.String'.
[2025-12-16 00:11:54.258] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 8.5977ms
[2025-12-16 00:11:54.260] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:11:54.261] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 500 null text/plain; charset=utf-8 16.9686ms
[2025-12-16 00:11:58.915] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:11:58.917] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:58.918] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:11:58.919] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:11:58.922] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:11:58.925] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:11:58.928] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:11:58.931] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:11:58.935] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:11:58.937] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:11:58.938] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:11:58.939] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 18.8117ms
[2025-12-16 00:11:58.941] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:11:58.942] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 26.9542ms
[2025-12-16 00:11:58.948] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:11:58.950] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:58.950] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:11:58.951] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:11:58.955] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:11:58.957] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:11:58.958] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:11:58.960] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 6.9032ms
[2025-12-16 00:11:58.961] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:11:58.962] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 14.0223ms
[2025-12-16 00:11:58.966] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:11:58.968] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:58.969] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:11:58.970] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:11:58.972] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:11:58.975] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:11:58.976] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 5.5786ms
[2025-12-16 00:11:58.977] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:11:58.978] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 12.1452ms
[2025-12-16 00:11:58.982] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:11:58.984] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:58.985] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:11:58.986] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:11:58.989] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:11:58.991] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:11:58.993] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 5.6668ms
[2025-12-16 00:11:58.994] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:11:58.995] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 12.4302ms
[2025-12-16 00:11:59.005] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:11:59.007] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:11:59.007] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:11:59.008] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:11:59.011] [ERR] [RestaurantAPI.Controllers.StatisticsController] Ошибка при получении статистики выручки по датам
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => !(o.IsDeleted))
    .Where(o => o.OrderDate >= __startDate_Value_0)
    .GroupBy(o => o.OrderDate.Date)
    .Select(g => new { 
        Date = g.Key.ToString("yyyy-MM-dd"), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total), 
        OrdersCount = g
            .AsQueryable()
            .Count()
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Additional information: Translation of method 'System.DateTime.ToString' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate(Nullable`1 startDate, Nullable`1 endDate, String period) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Controllers\StatisticsController.cs:line 121
[2025-12-16 00:11:59.018] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'System.String'.
[2025-12-16 00:11:59.019] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 9.8891ms
[2025-12-16 00:11:59.020] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:11:59.021] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 500 null text/plain; charset=utf-8 16.4552ms
[2025-12-16 00:12:02.753] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:12:02.757] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:02.759] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 5.4266ms
[2025-12-16 00:12:02.761] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:12:02.769] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:02.772] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:12:02.774] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:12:02.779] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:12:02.783] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:12:02.788] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:12:02.792] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:12:02.797] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:12:02.801] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:12:02.803] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:12:02.806] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 29.2983ms
[2025-12-16 00:12:02.808] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:12:02.810] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 48.9327ms
[2025-12-16 00:12:02.818] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:12:02.823] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:02.825] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 6.5171ms
[2025-12-16 00:12:02.827] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:12:02.835] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:02.836] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:12:02.837] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:12:02.842] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:12:02.845] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:12:02.847] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:12:02.849] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 8.7653ms
[2025-12-16 00:12:02.851] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:12:02.853] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 26.737ms
[2025-12-16 00:12:02.860] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:12:02.864] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:02.865] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 5.6732ms
[2025-12-16 00:12:02.867] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:12:02.874] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:02.875] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:12:02.877] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:12:02.884] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:12:02.887] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:12:02.888] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 7.4491ms
[2025-12-16 00:12:02.890] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:12:02.892] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 24.5758ms
[2025-12-16 00:12:02.901] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:12:02.905] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:02.906] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 5.6653ms
[2025-12-16 00:12:02.908] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:12:02.913] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:02.915] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:12:02.916] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:12:02.920] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:12:02.923] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:12:02.925] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 6.7753ms
[2025-12-16 00:12:02.927] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:12:02.928] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 20.3056ms
[2025-12-16 00:12:02.942] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:12:02.946] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:02.947] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 5.0685ms
[2025-12-16 00:12:02.950] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:12:02.955] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:02.956] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:12:02.958] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:12:02.964] [ERR] [RestaurantAPI.Controllers.StatisticsController] Ошибка при получении статистики выручки по датам
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => !(o.IsDeleted))
    .Where(o => o.OrderDate >= __startDate_Value_0)
    .GroupBy(o => o.OrderDate.Date)
    .Select(g => new { 
        Date = g.Key.ToString("yyyy-MM-dd"), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total), 
        OrdersCount = g
            .AsQueryable()
            .Count()
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Additional information: Translation of method 'System.DateTime.ToString' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate(Nullable`1 startDate, Nullable`1 endDate, String period) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Controllers\StatisticsController.cs:line 121
[2025-12-16 00:12:02.972] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'System.String'.
[2025-12-16 00:12:02.975] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 14.0948ms
[2025-12-16 00:12:02.978] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:12:02.980] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 500 null text/plain; charset=utf-8 29.8433ms
[2025-12-16 00:12:07.327] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:12:07.331] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:07.333] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:12:07.335] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:12:07.360] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:12:07.370] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:12:07.381] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:12:07.394] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:12:07.405] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:12:07.408] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:12:07.411] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:12:07.415] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 75.6478ms
[2025-12-16 00:12:07.418] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:12:07.421] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 93.3192ms
[2025-12-16 00:12:07.428] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:12:07.434] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:07.436] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:12:07.438] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:12:07.469] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (28ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:12:07.472] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:12:07.473] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:12:07.475] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 34.754ms
[2025-12-16 00:12:07.477] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:12:07.479] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 51.4131ms
[2025-12-16 00:12:07.487] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:12:07.491] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:07.492] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:12:07.493] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:12:07.522] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:12:07.528] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:12:07.530] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 34.515ms
[2025-12-16 00:12:07.533] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:12:07.535] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 48.5787ms
[2025-12-16 00:12:07.543] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:12:07.547] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:07.548] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:12:07.550] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:12:07.567] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:12:07.569] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:12:07.571] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 18.2968ms
[2025-12-16 00:12:07.578] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:12:07.579] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 36.3975ms
[2025-12-16 00:12:07.591] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:12:07.594] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:07.595] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:12:07.596] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:12:07.602] [ERR] [RestaurantAPI.Controllers.StatisticsController] Ошибка при получении статистики выручки по датам
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => !(o.IsDeleted))
    .Where(o => o.OrderDate >= __startDate_Value_0)
    .GroupBy(o => o.OrderDate.Date)
    .Select(g => new { 
        Date = g.Key.ToString("yyyy-MM-dd"), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total), 
        OrdersCount = g
            .AsQueryable()
            .Count()
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Additional information: Translation of method 'System.DateTime.ToString' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate(Nullable`1 startDate, Nullable`1 endDate, String period) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Controllers\StatisticsController.cs:line 121
[2025-12-16 00:12:07.611] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'System.String'.
[2025-12-16 00:12:07.614] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 15.0016ms
[2025-12-16 00:12:07.616] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:12:07.618] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 500 null text/plain; charset=utf-8 26.8304ms
[2025-12-16 00:12:13.104] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:12:13.110] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:13.111] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 7.059ms
[2025-12-16 00:12:13.114] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:12:13.123] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:13.125] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:12:13.128] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:12:13.147] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:12:13.155] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:12:13.164] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:12:13.172] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:12:13.178] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:12:13.183] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:12:13.185] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:12:13.188] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 57.2834ms
[2025-12-16 00:12:13.190] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:12:13.192] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 77.2346ms
[2025-12-16 00:12:13.198] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:12:13.204] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:13.205] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 7.1798ms
[2025-12-16 00:12:13.207] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:12:13.216] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:13.218] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:12:13.220] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:12:13.237] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:12:13.240] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:12:13.241] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:12:13.243] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 19.8432ms
[2025-12-16 00:12:13.244] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:12:13.246] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 38.3188ms
[2025-12-16 00:12:13.252] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:12:13.256] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:13.257] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 5.0399ms
[2025-12-16 00:12:13.260] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:12:13.267] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:13.269] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:12:13.270] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:12:13.283] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:12:13.286] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:12:13.287] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 14.98ms
[2025-12-16 00:12:13.289] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:12:13.290] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 30.01ms
[2025-12-16 00:12:13.297] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:12:13.300] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:13.301] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 4.0511ms
[2025-12-16 00:12:13.303] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:12:13.307] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:13.308] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:12:13.310] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:12:13.318] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:12:13.320] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:12:13.321] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 8.5642ms
[2025-12-16 00:12:13.324] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:12:13.327] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 23.9451ms
[2025-12-16 00:12:13.336] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:12:13.340] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:13.341] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 4.2889ms
[2025-12-16 00:12:13.343] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:12:13.349] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:13.350] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:12:13.351] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:12:13.357] [ERR] [RestaurantAPI.Controllers.StatisticsController] Ошибка при получении статистики выручки по датам
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => !(o.IsDeleted))
    .Where(o => o.OrderDate >= __startDate_Value_0)
    .GroupBy(o => o.OrderDate.Date)
    .Select(g => new { 
        Date = g.Key.ToString("yyyy-MM-dd"), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total), 
        OrdersCount = g
            .AsQueryable()
            .Count()
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Additional information: Translation of method 'System.DateTime.ToString' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate(Nullable`1 startDate, Nullable`1 endDate, String period) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Controllers\StatisticsController.cs:line 121
[2025-12-16 00:12:13.364] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'System.String'.
[2025-12-16 00:12:13.366] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 12.5494ms
[2025-12-16 00:12:13.367] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:12:13.369] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 500 null text/plain; charset=utf-8 25.4449ms
[2025-12-16 00:12:18.851] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:12:18.853] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:18.855] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 3.5166ms
[2025-12-16 00:12:18.859] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:12:18.866] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:18.867] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:12:18.869] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:12:18.875] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:12:18.878] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:12:18.884] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:12:18.890] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:12:18.895] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:12:18.897] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:12:18.898] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:12:18.901] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 28.6177ms
[2025-12-16 00:12:18.904] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:12:18.905] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 46.1575ms
[2025-12-16 00:12:18.917] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:12:18.919] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:18.921] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 4.4737ms
[2025-12-16 00:12:18.923] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:12:18.928] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:18.929] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:12:18.931] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:12:18.937] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:12:18.940] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:12:18.942] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:12:18.945] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 10.3718ms
[2025-12-16 00:12:18.947] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:12:18.950] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 26.354ms
[2025-12-16 00:12:18.956] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:12:18.959] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:18.960] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 4.1688ms
[2025-12-16 00:12:18.963] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:12:18.971] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:18.973] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:12:18.974] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:12:18.978] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:12:18.981] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:12:18.984] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 7.1582ms
[2025-12-16 00:12:18.986] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:12:18.987] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 24.2935ms
[2025-12-16 00:12:18.993] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:12:18.997] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:18.998] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 4.8894ms
[2025-12-16 00:12:19.001] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:12:19.006] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:19.007] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:12:19.009] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:12:19.014] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:12:19.018] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:12:19.021] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 8.1177ms
[2025-12-16 00:12:19.022] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:12:19.024] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 23.585ms
[2025-12-16 00:12:19.035] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:12:19.038] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:19.040] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 4.3907ms
[2025-12-16 00:12:19.042] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:12:19.047] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:12:19.048] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:12:19.049] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:12:19.054] [ERR] [RestaurantAPI.Controllers.StatisticsController] Ошибка при получении статистики выручки по датам
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => !(o.IsDeleted))
    .Where(o => o.OrderDate >= __startDate_Value_0)
    .GroupBy(o => o.OrderDate.Date)
    .Select(g => new { 
        Date = g.Key.ToString("yyyy-MM-dd"), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total), 
        OrdersCount = g
            .AsQueryable()
            .Count()
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Additional information: Translation of method 'System.DateTime.ToString' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate(Nullable`1 startDate, Nullable`1 endDate, String period) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Controllers\StatisticsController.cs:line 121
[2025-12-16 00:12:19.063] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'System.String'.
[2025-12-16 00:12:19.065] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 13.3214ms
[2025-12-16 00:12:19.067] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:12:19.069] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 500 null text/plain; charset=utf-8 26.8266ms
[2025-12-16 00:14:29.347] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 00:14:29.350] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:14:29.351] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - 204 null null 4.7806ms
[2025-12-16 00:14:29.354] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 00:14:29.361] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:14:29.362] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 00:14:29.363] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMyOrders() on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 00:14:29.378] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [u].[Username], [o].[OrderDate], [o].[Status], [o].[Total], [o].[Notes]
FROM [Orders] AS [o]
INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[UserId] = @__userId_0
ORDER BY [o].[OrderDate] DESC
[2025-12-16 00:14:29.380] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b". Количество: 1
[2025-12-16 00:14:29.381] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:14:29.382] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 17.2972ms
[2025-12-16 00:14:29.384] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 00:14:29.386] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - 200 null application/json; charset=utf-8 31.5778ms
[2025-12-16 00:14:30.391] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/5d9639f0-c2b4-49eb-b6fa-4544a7361466 - null null
[2025-12-16 00:14:30.394] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:14:30.394] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/5d9639f0-c2b4-49eb-b6fa-4544a7361466 - 204 null null 3.5825ms
[2025-12-16 00:14:30.396] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/5d9639f0-c2b4-49eb-b6fa-4544a7361466 - null null
[2025-12-16 00:14:30.401] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:14:30.402] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 00:14:30.403] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-16 00:14:30.407] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:14:30.428] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (19ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-16 00:14:30.429] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:14:30.430] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 25.8614ms
[2025-12-16 00:14:30.431] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 00:14:30.432] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/5d9639f0-c2b4-49eb-b6fa-4544a7361466 - 200 null application/json; charset=utf-8 35.8847ms
[2025-12-16 00:14:36.839] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 00:14:36.842] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:14:36.843] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - 204 null null 4.1206ms
[2025-12-16 00:14:36.845] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 00:14:36.850] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:14:36.852] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 00:14:36.853] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMyOrders() on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 00:14:36.858] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [u].[Username], [o].[OrderDate], [o].[Status], [o].[Total], [o].[Notes]
FROM [Orders] AS [o]
INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[UserId] = @__userId_0
ORDER BY [o].[OrderDate] DESC
[2025-12-16 00:14:36.860] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b". Количество: 1
[2025-12-16 00:14:36.861] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:14:36.863] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 7.2452ms
[2025-12-16 00:14:36.866] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 00:14:36.867] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - 200 null application/json; charset=utf-8 22.2239ms
[2025-12-16 00:14:59.528] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 00:14:59.533] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:14:59.534] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - 204 null null 6.0823ms
[2025-12-16 00:14:59.537] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 00:14:59.546] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:14:59.547] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 00:14:59.549] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMyOrders() on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 00:14:59.555] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [u].[Username], [o].[OrderDate], [o].[Status], [o].[Total], [o].[Notes]
FROM [Orders] AS [o]
INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[UserId] = @__userId_0
ORDER BY [o].[OrderDate] DESC
[2025-12-16 00:14:59.558] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b". Количество: 1
[2025-12-16 00:14:59.561] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:14:59.563] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 10.8436ms
[2025-12-16 00:14:59.565] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 00:14:59.566] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - 200 null application/json; charset=utf-8 29.38ms
[2025-12-16 00:15:05.112] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:15:05.128] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:15:05.131] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 18.9951ms
[2025-12-16 00:15:05.135] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:15:05.142] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:15:05.143] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:15:05.145] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:15:05.154] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:15:05.161] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:15:05.167] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:15:05.175] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:15:05.183] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:15:05.187] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:15:05.189] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:15:05.192] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 45.167ms
[2025-12-16 00:15:05.193] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:15:05.194] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 59.2834ms
[2025-12-16 00:15:05.215] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:15:05.231] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:15:05.232] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 17.6638ms
[2025-12-16 00:15:05.236] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:15:05.244] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:15:05.246] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:15:05.247] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:15:05.265] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:15:05.268] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:15:05.270] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:15:05.272] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 22.9489ms
[2025-12-16 00:15:05.274] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:15:05.276] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 39.9789ms
[2025-12-16 00:15:05.281] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:15:05.287] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:15:05.288] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 6.5273ms
[2025-12-16 00:15:05.291] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:15:05.296] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:15:05.298] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:15:05.301] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:15:05.324] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:15:05.329] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:15:05.332] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 27.1437ms
[2025-12-16 00:15:05.335] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:15:05.336] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 45.1397ms
[2025-12-16 00:15:05.340] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:15:05.346] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:15:05.347] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 7.3331ms
[2025-12-16 00:15:05.349] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:15:05.355] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:15:05.357] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:15:05.359] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:15:05.368] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:15:05.372] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:15:05.373] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 11.0231ms
[2025-12-16 00:15:05.375] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:15:05.377] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 27.8345ms
[2025-12-16 00:15:05.386] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:15:05.390] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:15:05.391] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 4.9118ms
[2025-12-16 00:15:05.394] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:15:05.400] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:15:05.403] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:15:05.404] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:15:05.412] [ERR] [RestaurantAPI.Controllers.StatisticsController] Ошибка при получении статистики выручки по датам
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => !(o.IsDeleted))
    .Where(o => o.OrderDate >= __startDate_Value_0)
    .GroupBy(o => o.OrderDate.Date)
    .Select(g => new { 
        Date = g.Key.ToString("yyyy-MM-dd"), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total), 
        OrdersCount = g
            .AsQueryable()
            .Count()
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Additional information: Translation of method 'System.DateTime.ToString' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate(Nullable`1 startDate, Nullable`1 endDate, String period) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Controllers\StatisticsController.cs:line 121
[2025-12-16 00:15:05.425] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'System.String'.
[2025-12-16 00:15:05.427] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 20.3433ms
[2025-12-16 00:15:05.429] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:15:05.431] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 500 null text/plain; charset=utf-8 37.2013ms
[2025-12-16 00:17:10.778] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:17:10.785] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:17:10.786] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 7.2546ms
[2025-12-16 00:17:10.788] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:17:10.791] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:17:10.792] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:17:10.793] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:17:10.805] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:17:10.808] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:17:10.812] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:17:10.818] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:17:10.822] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:17:10.824] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:17:10.825] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:17:10.826] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 31.3863ms
[2025-12-16 00:17:10.827] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:17:10.827] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 39.9007ms
[2025-12-16 00:17:10.831] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:17:10.834] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:17:10.835] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 4.1542ms
[2025-12-16 00:17:10.837] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:17:10.840] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:17:10.840] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:17:10.841] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:17:10.851] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:17:10.853] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:17:10.854] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:17:10.856] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 13.1814ms
[2025-12-16 00:17:10.857] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:17:10.857] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 20.2386ms
[2025-12-16 00:17:10.860] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:17:10.862] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:17:10.863] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.5187ms
[2025-12-16 00:17:10.864] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:17:10.867] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:17:10.868] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:17:10.869] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:17:10.878] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:17:10.879] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:17:10.880] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 9.4188ms
[2025-12-16 00:17:10.882] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:17:10.883] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 18.8797ms
[2025-12-16 00:17:10.888] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:17:10.890] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:17:10.890] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 2.4337ms
[2025-12-16 00:17:10.892] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:17:10.895] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:17:10.895] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:17:10.896] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:17:10.902] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:17:10.904] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:17:10.905] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 7.2832ms
[2025-12-16 00:17:10.906] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:17:10.906] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 14.5583ms
[2025-12-16 00:17:10.911] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:17:10.913] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:17:10.914] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.6412ms
[2025-12-16 00:17:10.915] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:17:10.919] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:17:10.919] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:17:10.920] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:17:10.923] [ERR] [RestaurantAPI.Controllers.StatisticsController] Ошибка при получении статистики выручки по датам
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => !(o.IsDeleted))
    .Where(o => o.OrderDate >= __startDate_Value_0)
    .GroupBy(o => o.OrderDate.Date)
    .Select(g => new { 
        Date = g.Key.ToString("yyyy-MM-dd"), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total), 
        OrdersCount = g
            .AsQueryable()
            .Count()
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Additional information: Translation of method 'System.DateTime.ToString' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate(Nullable`1 startDate, Nullable`1 endDate, String period) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Controllers\StatisticsController.cs:line 121
[2025-12-16 00:17:10.928] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'System.String'.
[2025-12-16 00:17:10.929] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 7.524ms
[2025-12-16 00:17:10.930] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:17:10.930] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 500 null text/plain; charset=utf-8 15.2769ms
[2025-12-16 00:18:41.662] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:18:41.665] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:18:41.666] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 3.7008ms
[2025-12-16 00:18:41.668] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:18:41.672] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:18:41.673] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:18:41.674] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:18:43.086] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1,408ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:18:43.096] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:18:43.102] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:18:43.106] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:18:43.109] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:18:43.111] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:18:43.112] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:18:43.114] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 1436.6532ms
[2025-12-16 00:18:43.115] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:18:43.116] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 1447.5399ms
[2025-12-16 00:18:43.118] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:18:43.120] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:18:43.121] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 2.3698ms
[2025-12-16 00:18:43.122] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:18:43.125] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:18:43.126] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:18:43.127] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:18:43.137] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:18:43.139] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:18:43.140] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:18:43.141] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 13.342ms
[2025-12-16 00:18:43.142] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:18:43.143] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 20.7591ms
[2025-12-16 00:18:43.146] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:18:43.148] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:18:43.149] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 3.2572ms
[2025-12-16 00:18:43.151] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:18:43.154] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:18:43.154] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:18:43.155] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:18:43.163] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:18:43.165] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:18:43.166] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 9.542ms
[2025-12-16 00:18:43.167] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:18:43.168] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 16.794ms
[2025-12-16 00:18:43.170] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:18:43.172] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:18:43.173] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 2.3816ms
[2025-12-16 00:18:43.174] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:18:43.177] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:18:43.178] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:18:43.179] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:18:43.184] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:18:43.185] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:18:43.186] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 6.6973ms
[2025-12-16 00:18:43.187] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:18:43.188] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 13.8172ms
[2025-12-16 00:18:43.192] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:18:43.194] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:18:43.195] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.5507ms
[2025-12-16 00:18:43.196] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:18:43.199] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:18:43.199] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:18:43.200] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:18:43.205] [ERR] [RestaurantAPI.Controllers.StatisticsController] Ошибка при получении статистики выручки по датам
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => !(o.IsDeleted))
    .Where(o => o.OrderDate >= __startDate_Value_0)
    .GroupBy(o => o.OrderDate.Date)
    .Select(g => new { 
        Date = g.Key.ToString("yyyy-MM-dd"), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total), 
        OrdersCount = g
            .AsQueryable()
            .Count()
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Additional information: Translation of method 'System.DateTime.ToString' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate(Nullable`1 startDate, Nullable`1 endDate, String period) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Controllers\StatisticsController.cs:line 121
[2025-12-16 00:18:43.210] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'System.String'.
[2025-12-16 00:18:43.211] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 9.4575ms
[2025-12-16 00:18:43.213] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:18:43.214] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 500 null text/plain; charset=utf-8 17.6348ms
[2025-12-16 00:19:46.350] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:19:46.358] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:19:46.359] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 9.5489ms
[2025-12-16 00:19:46.361] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:19:46.372] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:19:46.373] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:19:46.373] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:19:48.868] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2,492ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:19:48.872] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:19:48.877] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:19:48.881] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:19:48.885] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:19:48.887] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:19:48.888] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:19:48.889] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 2513.9822ms
[2025-12-16 00:19:48.890] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:19:48.891] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 2529.3817ms
[2025-12-16 00:19:48.894] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:19:48.897] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:19:48.897] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 2.8498ms
[2025-12-16 00:19:48.899] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:19:48.901] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:19:48.902] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:19:48.903] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:19:48.913] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:19:48.914] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:19:48.915] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:19:48.916] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 11.9191ms
[2025-12-16 00:19:48.917] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:19:48.918] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 19.5088ms
[2025-12-16 00:19:48.922] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:19:48.924] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:19:48.924] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.3947ms
[2025-12-16 00:19:48.926] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:19:48.928] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:19:48.929] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:19:48.930] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:19:48.938] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:19:48.940] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:19:48.941] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 8.6721ms
[2025-12-16 00:19:48.941] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:19:48.942] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 16.6194ms
[2025-12-16 00:19:48.945] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:19:48.947] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:19:48.948] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 2.8599ms
[2025-12-16 00:19:48.950] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:19:48.952] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:19:48.953] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:19:48.954] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:19:48.959] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:19:48.961] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:19:48.962] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 7.1525ms
[2025-12-16 00:19:48.963] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:19:48.964] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 14.4932ms
[2025-12-16 00:19:48.969] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:19:48.970] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:19:48.971] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.3594ms
[2025-12-16 00:19:48.973] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:19:48.975] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:19:48.976] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:19:48.977] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:19:48.981] [ERR] [RestaurantAPI.Controllers.StatisticsController] Ошибка при получении статистики выручки по датам
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => !(o.IsDeleted))
    .Where(o => o.OrderDate >= __startDate_Value_0)
    .GroupBy(o => o.OrderDate.Date)
    .Select(g => new { 
        Date = g.Key.ToString("yyyy-MM-dd"), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total), 
        OrdersCount = g
            .AsQueryable()
            .Count()
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Additional information: Translation of method 'System.DateTime.ToString' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate(Nullable`1 startDate, Nullable`1 endDate, String period) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Controllers\StatisticsController.cs:line 121
[2025-12-16 00:19:48.985] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'System.String'.
[2025-12-16 00:19:48.986] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 7.6593ms
[2025-12-16 00:19:48.987] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:19:48.988] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 500 null text/plain; charset=utf-8 14.8593ms
[2025-12-16 00:19:52.523] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:19:52.525] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories - null null
[2025-12-16 00:19:52.526] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:19:52.528] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:19:52.529] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 6.1054ms
[2025-12-16 00:19:52.530] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories - 204 null null 4.8257ms
[2025-12-16 00:19:52.532] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:19:52.532] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories - null null
[2025-12-16 00:19:52.540] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:19:52.543] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:19:52.544] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:19:52.544] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:19:52.545] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 00:19:52.546] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 00:19:52.550] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:19:52.557] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 00:19:52.559] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 12, Всего: 12, Страница: 1, Размер страницы: 1000
[2025-12-16 00:19:52.560] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:19:52.561] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:19:52.562] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 13.6121ms
[2025-12-16 00:19:52.565] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:19:52.566] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 34.1281ms
[2025-12-16 00:19:52.568] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:19:52.570] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 00:19:52.571] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:19:52.573] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 22.1252ms
[2025-12-16 00:19:52.574] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:19:52.575] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories - 200 null application/json; charset=utf-8 42.8586ms
[2025-12-16 00:19:53.182] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:19:53.184] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:19:53.185] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 3.4768ms
[2025-12-16 00:19:53.187] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:19:53.190] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:19:53.191] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:19:53.192] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:19:53.194] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:19:53.198] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:19:53.200] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:19:53.202] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:19:53.205] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:19:53.208] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:19:53.209] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:19:53.210] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 17.1357ms
[2025-12-16 00:19:53.213] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:19:53.214] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 26.9143ms
[2025-12-16 00:19:53.223] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:19:53.226] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:19:53.226] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:19:53.227] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:19:53.232] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:19:53.234] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:19:53.235] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:19:53.237] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 7.2121ms
[2025-12-16 00:19:53.238] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:19:53.239] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 15.7262ms
[2025-12-16 00:19:53.242] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:19:53.244] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:19:53.244] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:19:53.245] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:19:53.249] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:19:53.252] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:19:53.253] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 5.5917ms
[2025-12-16 00:19:53.254] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:19:53.255] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 13.2785ms
[2025-12-16 00:19:53.258] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:19:53.260] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:19:53.260] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:19:53.261] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:19:53.265] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:19:53.267] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:19:53.268] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 5.3463ms
[2025-12-16 00:19:53.269] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:19:53.270] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 12.3045ms
[2025-12-16 00:19:53.275] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:19:53.277] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:19:53.278] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:19:53.279] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:19:53.282] [ERR] [RestaurantAPI.Controllers.StatisticsController] Ошибка при получении статистики выручки по датам
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => !(o.IsDeleted))
    .Where(o => o.OrderDate >= __startDate_Value_0)
    .GroupBy(o => o.OrderDate.Date)
    .Select(g => new { 
        Date = g.Key.ToString("yyyy-MM-dd"), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total), 
        OrdersCount = g
            .AsQueryable()
            .Count()
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Additional information: Translation of method 'System.DateTime.ToString' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate(Nullable`1 startDate, Nullable`1 endDate, String period) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Controllers\StatisticsController.cs:line 121
[2025-12-16 00:19:53.288] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'System.String'.
[2025-12-16 00:19:53.289] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 8.8995ms
[2025-12-16 00:19:53.290] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:19:53.291] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 500 null text/plain; charset=utf-8 15.7296ms
[2025-12-16 00:20:43.424] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:20:43.426] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:20:43.428] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 3.7593ms
[2025-12-16 00:20:43.430] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:20:43.432] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:20:43.433] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:20:43.434] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:20:43.451] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:20:43.454] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:20:43.456] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:20:43.459] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:20:43.463] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:20:43.465] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:20:43.466] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:20:43.467] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 31.9854ms
[2025-12-16 00:20:43.469] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:20:43.470] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 39.7212ms
[2025-12-16 00:20:43.474] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:20:43.476] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:20:43.476] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 2.393ms
[2025-12-16 00:20:43.478] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:20:43.482] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:20:43.483] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:20:43.484] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:20:43.487] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:20:43.489] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:20:43.490] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:20:43.491] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 5.6971ms
[2025-12-16 00:20:43.492] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:20:43.492] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 14.1366ms
[2025-12-16 00:20:43.497] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:20:43.499] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:20:43.500] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.6342ms
[2025-12-16 00:20:43.502] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:20:43.504] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:20:43.505] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:20:43.506] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:20:43.509] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:20:43.512] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:20:43.513] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 5.5213ms
[2025-12-16 00:20:43.514] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:20:43.515] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 13.4332ms
[2025-12-16 00:20:43.519] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:20:43.521] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:20:43.522] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 2.7917ms
[2025-12-16 00:20:43.524] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:20:43.526] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:20:43.527] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:20:43.528] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:20:43.531] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:20:43.533] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:20:43.534] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 3.994ms
[2025-12-16 00:20:43.535] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:20:43.536] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 11.664ms
[2025-12-16 00:20:43.542] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:20:43.544] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:20:43.545] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 3.369ms
[2025-12-16 00:20:43.547] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:20:43.550] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:20:43.550] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:20:43.551] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:20:43.555] [ERR] [RestaurantAPI.Controllers.StatisticsController] Ошибка при получении статистики выручки по датам
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => !(o.IsDeleted))
    .Where(o => o.OrderDate >= __startDate_Value_0)
    .GroupBy(o => o.OrderDate.Date)
    .Select(g => new { 
        Date = g.Key.ToString("yyyy-MM-dd"), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total), 
        OrdersCount = g
            .AsQueryable()
            .Count()
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Additional information: Translation of method 'System.DateTime.ToString' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate(Nullable`1 startDate, Nullable`1 endDate, String period) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Controllers\StatisticsController.cs:line 121
[2025-12-16 00:20:43.560] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'System.String'.
[2025-12-16 00:20:43.563] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 9.8308ms
[2025-12-16 00:20:43.564] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:20:43.565] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 500 null text/plain; charset=utf-8 17.12ms
[2025-12-16 00:22:02.112] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:22:02.114] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:02.115] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 3.337ms
[2025-12-16 00:22:02.117] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:22:02.121] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:02.122] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:22:02.124] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:02.138] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:22:02.144] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:22:02.149] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:22:02.155] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:22:02.159] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:22:02.162] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:22:02.163] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:22:02.164] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 37.8215ms
[2025-12-16 00:22:02.166] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:22:02.167] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 49.5179ms
[2025-12-16 00:22:02.174] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:22:02.177] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:02.178] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 3.5288ms
[2025-12-16 00:22:02.180] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:22:02.183] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:02.184] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:22:02.185] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:02.197] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:22:02.199] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:22:02.200] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:22:02.201] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 14.4103ms
[2025-12-16 00:22:02.203] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:22:02.204] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 24.0877ms
[2025-12-16 00:22:02.212] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:22:02.214] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:02.215] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 3.2205ms
[2025-12-16 00:22:02.218] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:22:02.223] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:02.224] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:22:02.225] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:02.236] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:22:02.239] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:22:02.240] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 13.3241ms
[2025-12-16 00:22:02.242] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:22:02.243] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 25.3021ms
[2025-12-16 00:22:02.252] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:22:02.254] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:02.255] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 2.9515ms
[2025-12-16 00:22:02.256] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:22:02.260] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:02.262] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:22:02.263] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:02.267] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:22:02.270] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:22:02.271] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 7.1166ms
[2025-12-16 00:22:02.272] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:22:02.274] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 17.0192ms
[2025-12-16 00:22:02.285] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:22:02.288] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:02.289] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 3.254ms
[2025-12-16 00:22:02.290] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:22:02.294] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:02.295] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:22:02.296] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:02.300] [ERR] [RestaurantAPI.Controllers.StatisticsController] Ошибка при получении статистики выручки по датам
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => !(o.IsDeleted))
    .Where(o => o.OrderDate >= __startDate_Value_0)
    .GroupBy(o => o.OrderDate.Date)
    .Select(g => new { 
        Date = g.Key.ToString("yyyy-MM-dd"), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total), 
        OrdersCount = g
            .AsQueryable()
            .Count()
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Additional information: Translation of method 'System.DateTime.ToString' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate(Nullable`1 startDate, Nullable`1 endDate, String period) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Controllers\StatisticsController.cs:line 121
[2025-12-16 00:22:02.305] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'System.String'.
[2025-12-16 00:22:02.306] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 9.0738ms
[2025-12-16 00:22:02.308] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:22:02.309] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 500 null text/plain; charset=utf-8 18.2863ms
[2025-12-16 00:22:06.740] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:22:06.744] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:06.745] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:22:06.748] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:06.751] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:22:06.755] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:22:06.758] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:22:06.761] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:22:06.764] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:22:06.765] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:22:06.766] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:22:06.767] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 17.5611ms
[2025-12-16 00:22:06.768] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:22:06.769] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 29.3806ms
[2025-12-16 00:22:06.777] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:22:06.780] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:06.780] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:22:06.781] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:06.784] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:22:06.786] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:22:06.787] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:22:06.788] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 5.5152ms
[2025-12-16 00:22:06.789] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:22:06.790] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 13.213ms
[2025-12-16 00:22:06.798] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:22:06.800] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:06.801] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:22:06.802] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:06.804] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:22:06.806] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:22:06.807] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 4.0127ms
[2025-12-16 00:22:06.808] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:22:06.810] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 11.9705ms
[2025-12-16 00:22:06.819] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:22:06.822] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:06.822] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:22:06.823] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:06.826] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:22:06.829] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:22:06.830] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 5.1999ms
[2025-12-16 00:22:06.831] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:22:06.832] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 12.8373ms
[2025-12-16 00:22:06.844] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:22:06.847] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:06.848] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:22:06.850] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:06.854] [ERR] [RestaurantAPI.Controllers.StatisticsController] Ошибка при получении статистики выручки по датам
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => !(o.IsDeleted))
    .Where(o => o.OrderDate >= __startDate_Value_0)
    .GroupBy(o => o.OrderDate.Date)
    .Select(g => new { 
        Date = g.Key.ToString("yyyy-MM-dd"), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total), 
        OrdersCount = g
            .AsQueryable()
            .Count()
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Additional information: Translation of method 'System.DateTime.ToString' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate(Nullable`1 startDate, Nullable`1 endDate, String period) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Controllers\StatisticsController.cs:line 121
[2025-12-16 00:22:06.859] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'System.String'.
[2025-12-16 00:22:06.861] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 9.0772ms
[2025-12-16 00:22:06.863] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:22:06.864] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 500 null text/plain; charset=utf-8 20.3169ms
[2025-12-16 00:22:12.764] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:22:12.767] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:12.768] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 3.2546ms
[2025-12-16 00:22:12.770] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:22:12.775] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:12.775] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:22:12.777] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:12.780] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:22:12.783] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:22:12.785] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:22:12.788] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:22:12.791] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:22:12.793] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:22:12.795] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:22:12.796] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 17.2296ms
[2025-12-16 00:22:12.797] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:22:12.798] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 28.1226ms
[2025-12-16 00:22:12.803] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:22:12.805] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:12.806] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 2.6407ms
[2025-12-16 00:22:12.807] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:22:12.811] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:12.812] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:22:12.813] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:12.817] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:22:12.819] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:22:12.820] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:22:12.821] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 6.4215ms
[2025-12-16 00:22:12.823] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:22:12.824] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 16.5663ms
[2025-12-16 00:22:12.829] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:22:12.831] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:12.832] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.8593ms
[2025-12-16 00:22:12.834] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:22:12.837] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:12.838] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:22:12.839] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:12.844] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:22:12.846] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:22:12.847] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 6.187ms
[2025-12-16 00:22:12.848] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:22:12.849] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 14.8133ms
[2025-12-16 00:22:12.855] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:22:12.857] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:12.858] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 2.8044ms
[2025-12-16 00:22:12.860] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:22:12.863] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:12.864] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:22:12.864] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:12.867] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:22:12.869] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:22:12.870] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 4.712ms
[2025-12-16 00:22:12.872] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:22:12.873] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 12.7918ms
[2025-12-16 00:22:12.882] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:22:12.884] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:12.885] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.8577ms
[2025-12-16 00:22:12.886] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:22:12.889] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:12.890] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:22:12.891] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:12.896] [ERR] [RestaurantAPI.Controllers.StatisticsController] Ошибка при получении статистики выручки по датам
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => !(o.IsDeleted))
    .Where(o => o.OrderDate >= __startDate_Value_0)
    .GroupBy(o => o.OrderDate.Date)
    .Select(g => new { 
        Date = g.Key.ToString("yyyy-MM-dd"), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total), 
        OrdersCount = g
            .AsQueryable()
            .Count()
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Additional information: Translation of method 'System.DateTime.ToString' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate(Nullable`1 startDate, Nullable`1 endDate, String period) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Controllers\StatisticsController.cs:line 121
[2025-12-16 00:22:12.901] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'System.String'.
[2025-12-16 00:22:12.902] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 9.1839ms
[2025-12-16 00:22:12.904] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:22:12.904] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 500 null text/plain; charset=utf-8 17.8731ms
[2025-12-16 00:22:19.510] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:22:19.513] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:19.514] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 3.5512ms
[2025-12-16 00:22:19.516] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:22:19.519] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:19.520] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:22:19.521] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:19.524] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:22:19.527] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:22:19.530] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:22:19.533] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:22:19.535] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:22:19.537] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:22:19.539] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:22:19.540] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 16.9295ms
[2025-12-16 00:22:19.541] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:22:19.542] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 26.1869ms
[2025-12-16 00:22:19.548] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:22:19.550] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:19.551] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 2.9449ms
[2025-12-16 00:22:19.553] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:22:19.556] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:19.556] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:22:19.557] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:19.563] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:22:19.565] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:22:19.567] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:22:19.568] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 8.7411ms
[2025-12-16 00:22:19.570] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:22:19.571] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 17.7129ms
[2025-12-16 00:22:19.576] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:22:19.578] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:19.579] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 3.3432ms
[2025-12-16 00:22:19.581] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:22:19.584] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:19.585] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:22:19.585] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:19.588] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:22:19.590] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:22:19.591] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 4.5813ms
[2025-12-16 00:22:19.594] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:22:19.595] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 13.7826ms
[2025-12-16 00:22:19.600] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:22:19.602] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:19.603] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 3.0194ms
[2025-12-16 00:22:19.605] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:22:19.607] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:19.609] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:22:19.610] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:19.613] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:22:19.615] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:22:19.616] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 4.6283ms
[2025-12-16 00:22:19.618] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:22:19.619] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 13.9468ms
[2025-12-16 00:22:19.625] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:22:19.628] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:19.628] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 3.3193ms
[2025-12-16 00:22:19.630] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:22:19.633] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:19.634] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:22:19.635] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:19.639] [ERR] [RestaurantAPI.Controllers.StatisticsController] Ошибка при получении статистики выручки по датам
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => !(o.IsDeleted))
    .Where(o => o.OrderDate >= __startDate_Value_0)
    .GroupBy(o => o.OrderDate.Date)
    .Select(g => new { 
        Date = g.Key.ToString("yyyy-MM-dd"), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total), 
        OrdersCount = g
            .AsQueryable()
            .Count()
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Additional information: Translation of method 'System.DateTime.ToString' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate(Nullable`1 startDate, Nullable`1 endDate, String period) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Controllers\StatisticsController.cs:line 121
[2025-12-16 00:22:19.644] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'System.String'.
[2025-12-16 00:22:19.646] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 8.8664ms
[2025-12-16 00:22:19.647] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:22:19.648] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 500 null text/plain; charset=utf-8 17.5072ms
[2025-12-16 00:22:53.014] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:22:53.017] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:53.016] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories - null null
[2025-12-16 00:22:53.018] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 4.2055ms
[2025-12-16 00:22:53.021] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:53.022] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:22:53.025] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories - 204 null null 9.0334ms
[2025-12-16 00:22:53.028] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:53.028] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories - null null
[2025-12-16 00:22:53.033] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:22:53.036] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:53.039] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 00:22:53.040] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:22:53.046] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 00:22:53.047] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:22:53.052] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:22:53.057] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 00:22:53.057] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:22:53.063] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 00:22:53.061] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 12, Всего: 12, Страница: 1, Размер страницы: 1000
[2025-12-16 00:22:53.065] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:22:53.064] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:22:53.067] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 17.4728ms
[2025-12-16 00:22:53.066] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 21.653ms
[2025-12-16 00:22:53.068] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:22:53.069] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:22:53.070] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 47.8788ms
[2025-12-16 00:22:53.069] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories - 200 null application/json; charset=utf-8 40.9953ms
[2025-12-16 00:22:59.146] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:22:59.149] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:59.150] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 4.7491ms
[2025-12-16 00:22:59.153] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:22:59.158] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:59.160] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:22:59.161] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:59.166] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:22:59.171] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:22:59.176] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:22:59.179] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:22:59.185] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:22:59.190] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:22:59.194] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:22:59.196] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 31.9704ms
[2025-12-16 00:22:59.197] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:22:59.199] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 45.986ms
[2025-12-16 00:22:59.216] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:22:59.323] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:59.327] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 110.1985ms
[2025-12-16 00:22:59.329] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:22:59.335] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:59.336] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:22:59.338] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:59.345] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:22:59.349] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:22:59.350] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:22:59.352] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 11.8721ms
[2025-12-16 00:22:59.355] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:22:59.356] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 27.3454ms
[2025-12-16 00:22:59.362] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:22:59.366] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:59.367] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 5.6915ms
[2025-12-16 00:22:59.370] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:22:59.377] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:59.379] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:22:59.381] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:59.385] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:22:59.389] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:22:59.390] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 6.9465ms
[2025-12-16 00:22:59.394] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:22:59.396] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 25.999ms
[2025-12-16 00:22:59.401] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:22:59.405] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:59.407] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 5.9641ms
[2025-12-16 00:22:59.410] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:22:59.416] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:59.417] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:22:59.419] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:59.422] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:22:59.427] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:22:59.429] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 8.5211ms
[2025-12-16 00:22:59.431] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:22:59.433] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 22.8668ms
[2025-12-16 00:22:59.440] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:22:59.444] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:59.445] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 5.4977ms
[2025-12-16 00:22:59.447] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:22:59.454] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:22:59.456] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:22:59.457] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:22:59.463] [ERR] [RestaurantAPI.Controllers.StatisticsController] Ошибка при получении статистики выручки по датам
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => !(o.IsDeleted))
    .Where(o => o.OrderDate >= __startDate_Value_0)
    .GroupBy(o => o.OrderDate.Date)
    .Select(g => new { 
        Date = g.Key.ToString("yyyy-MM-dd"), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total), 
        OrdersCount = g
            .AsQueryable()
            .Count()
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Additional information: Translation of method 'System.DateTime.ToString' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate(Nullable`1 startDate, Nullable`1 endDate, String period) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Controllers\StatisticsController.cs:line 121
[2025-12-16 00:22:59.472] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'System.String'.
[2025-12-16 00:22:59.474] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 13.4923ms
[2025-12-16 00:22:59.477] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:22:59.478] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 500 null text/plain; charset=utf-8 30.8705ms
[2025-12-16 00:23:36.627] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:23:36.630] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:23:36.631] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 3.8647ms
[2025-12-16 00:23:36.634] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:23:36.639] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:23:36.640] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:23:36.642] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:23:36.654] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:23:36.659] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:23:36.663] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:23:36.667] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:23:36.671] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:23:36.672] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:23:36.674] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:23:36.676] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 29.8153ms
[2025-12-16 00:23:36.677] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:23:36.679] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 44.8772ms
[2025-12-16 00:23:36.687] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:23:36.689] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:23:36.690] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 3.0158ms
[2025-12-16 00:23:36.693] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:23:36.695] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:23:36.696] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:23:36.696] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:23:36.705] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:23:36.708] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:23:36.708] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:23:36.709] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 11.6381ms
[2025-12-16 00:23:36.710] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:23:36.712] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 19.0724ms
[2025-12-16 00:23:36.720] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:23:36.722] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:23:36.723] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.9114ms
[2025-12-16 00:23:36.725] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:23:36.728] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:23:36.729] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:23:36.730] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:23:36.737] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:23:36.740] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:23:36.741] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 9.7065ms
[2025-12-16 00:23:36.742] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:23:36.743] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 17.6586ms
[2025-12-16 00:23:36.752] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:23:36.754] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:23:36.755] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 2.7343ms
[2025-12-16 00:23:36.757] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:23:36.760] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:23:36.761] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:23:36.761] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:23:36.766] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:23:36.768] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:23:36.769] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 6.4903ms
[2025-12-16 00:23:36.770] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:23:36.771] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 14.2913ms
[2025-12-16 00:23:36.785] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:23:36.787] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:23:36.788] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.8845ms
[2025-12-16 00:23:36.790] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:23:36.794] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:23:36.795] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:23:36.796] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:23:36.798] [ERR] [RestaurantAPI.Controllers.StatisticsController] Ошибка при получении статистики выручки по датам
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => !(o.IsDeleted))
    .Where(o => o.OrderDate >= __startDate_Value_0)
    .GroupBy(o => o.OrderDate.Date)
    .Select(g => new { 
        Date = g.Key.ToString("yyyy-MM-dd"), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total), 
        OrdersCount = g
            .AsQueryable()
            .Count()
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Additional information: Translation of method 'System.DateTime.ToString' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate(Nullable`1 startDate, Nullable`1 endDate, String period) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Controllers\StatisticsController.cs:line 121
[2025-12-16 00:23:36.803] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'System.String'.
[2025-12-16 00:23:36.804] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 7.2284ms
[2025-12-16 00:23:36.805] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:23:36.806] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 500 null text/plain; charset=utf-8 16.4321ms
[2025-12-16 00:23:46.696] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:23:46.698] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories - null null
[2025-12-16 00:23:46.699] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:23:46.700] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:23:46.701] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 5.1392ms
[2025-12-16 00:23:46.702] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories - 204 null null 4.0603ms
[2025-12-16 00:23:46.704] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:23:46.704] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories - null null
[2025-12-16 00:23:46.711] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:23:46.715] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:23:46.716] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:23:46.716] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:23:46.717] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 00:23:46.718] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 00:23:46.721] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:23:46.723] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:23:46.730] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 00:23:46.732] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 12, Всего: 12, Страница: 1, Размер страницы: 1000
[2025-12-16 00:23:46.733] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:23:46.735] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 15.2753ms
[2025-12-16 00:23:46.736] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:23:46.736] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 32.7441ms
[2025-12-16 00:23:46.743] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:23:46.745] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 00:23:46.747] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:23:46.748] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 27.1005ms
[2025-12-16 00:23:46.749] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:23:46.750] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories - 200 null application/json; charset=utf-8 46.0586ms
[2025-12-16 00:24:49.283] [INF] [] Запуск приложения Restaurant API
[2025-12-16 00:24:49.744] [INF] [] Приложение Restaurant API успешно запущено
[2025-12-16 00:24:49.779] [INF] [Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager] User profile is available. Using 'C:\Users\motya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-12-16 00:24:49.957] [INF] [Microsoft.Hosting.Lifetime] Now listening on: https://localhost:7188
[2025-12-16 00:24:49.959] [INF] [Microsoft.Hosting.Lifetime] Now listening on: http://localhost:5143
[2025-12-16 00:24:50.060] [INF] [Microsoft.Hosting.Lifetime] Application started. Press Ctrl+C to shut down.
[2025-12-16 00:24:50.062] [INF] [Microsoft.Hosting.Lifetime] Hosting environment: Development
[2025-12-16 00:24:50.065] [INF] [Microsoft.Hosting.Lifetime] Content root path: D:\restaurant-project\RestaurantAPI\RestaurantApi
[2025-12-16 00:24:50.641] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger - null null
[2025-12-16 00:24:50.757] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger - 301 0 null 118.6455ms
[2025-12-16 00:24:50.763] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/index.html - null null
[2025-12-16 00:24:50.848] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/index.html - 200 null text/html;charset=utf-8 84.7635ms
[2025-12-16 00:24:50.858] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/swagger-ui.css - null null
[2025-12-16 00:24:50.859] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/swagger-ui-standalone-preset.js - null null
[2025-12-16 00:24:50.859] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/swagger-ui-bundle.js - null null
[2025-12-16 00:24:50.859] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - null null
[2025-12-16 00:24:50.867] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_vs/browserLink - null null
[2025-12-16 00:24:50.881] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 21.9299ms
[2025-12-16 00:24:50.890] [INF] [Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
[2025-12-16 00:24:50.890] [INF] [Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
[2025-12-16 00:24:50.894] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 35.5387ms
[2025-12-16 00:24:50.895] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/swagger-ui.css - 200 152034 text/css 36.6584ms
[2025-12-16 00:24:50.902] [INF] [Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
[2025-12-16 00:24:50.916] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_vs/browserLink - 200 null text/javascript; charset=UTF-8 49.4057ms
[2025-12-16 00:24:50.918] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 59.6593ms
[2025-12-16 00:24:51.109] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - null null
[2025-12-16 00:24:51.180] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 70.1205ms
[2025-12-16 00:24:52.653] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:24:52.661] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:24:52.663] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 10.4854ms
[2025-12-16 00:24:52.666] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:24:52.674] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:24:52.782] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:24:52.826] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:24:54.580] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:24:54.647] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:24:54.659] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:24:54.669] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:24:54.707] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:24:54.712] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:24:54.718] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:24:54.736] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 1905.1454ms
[2025-12-16 00:24:54.739] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:24:54.745] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:24:54.746] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 2080.5227ms
[2025-12-16 00:24:54.748] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:24:54.751] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 5.6466ms
[2025-12-16 00:24:54.754] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:24:54.757] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:24:54.761] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:24:54.765] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:24:54.872] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (33ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:24:54.878] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:24:54.880] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:24:54.885] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 118.1349ms
[2025-12-16 00:24:54.887] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:24:54.888] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 134.0325ms
[2025-12-16 00:24:54.891] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:24:54.893] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:24:54.894] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 3.1156ms
[2025-12-16 00:24:54.896] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:24:54.899] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:24:54.902] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:24:54.906] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:24:54.973] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:24:54.979] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:24:54.982] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 75.2362ms
[2025-12-16 00:24:54.984] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:24:54.984] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 88.7589ms
[2025-12-16 00:24:54.987] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:24:54.990] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:24:54.991] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 3.3046ms
[2025-12-16 00:24:54.993] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:24:54.995] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:24:54.996] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:24:55.003] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:24:55.023] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:24:55.026] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:24:55.032] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 27.4077ms
[2025-12-16 00:24:55.033] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:24:55.034] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 41.6747ms
[2025-12-16 00:24:55.038] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:24:55.041] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:24:55.042] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 3.2162ms
[2025-12-16 00:24:55.044] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:24:55.048] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:24:55.049] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:24:55.053] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:24:55.078] [ERR] [RestaurantAPI.Controllers.StatisticsController] Ошибка при получении статистики выручки по датам
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => !(o.IsDeleted))
    .Where(o => o.OrderDate >= __startDate_Value_0)
    .GroupBy(o => o.OrderDate.Date)
    .Select(g => new { 
        Date = g.Key.ToString("yyyy-MM-dd"), 
        Revenue = g
            .AsQueryable()
            .Sum(e => (decimal?)e.Total) ?? 0, 
        OrdersCount = g
            .AsQueryable()
            .Count()
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Additional information: Translation of method 'System.DateTime.ToString' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate(Nullable`1 startDate, Nullable`1 endDate, String period) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Controllers\StatisticsController.cs:line 121
[2025-12-16 00:24:55.105] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'System.String'.
[2025-12-16 00:24:55.107] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 51.6647ms
[2025-12-16 00:24:55.108] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:24:55.109] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 500 null text/plain; charset=utf-8 65.2726ms
[2025-12-16 00:27:05.884] [INF] [] Запуск приложения Restaurant API
[2025-12-16 00:27:06.249] [INF] [] Приложение Restaurant API успешно запущено
[2025-12-16 00:27:06.276] [INF] [Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager] User profile is available. Using 'C:\Users\motya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-12-16 00:27:06.405] [INF] [Microsoft.Hosting.Lifetime] Now listening on: https://localhost:7188
[2025-12-16 00:27:06.408] [INF] [Microsoft.Hosting.Lifetime] Now listening on: http://localhost:5143
[2025-12-16 00:27:06.542] [INF] [Microsoft.Hosting.Lifetime] Application started. Press Ctrl+C to shut down.
[2025-12-16 00:27:06.546] [INF] [Microsoft.Hosting.Lifetime] Hosting environment: Development
[2025-12-16 00:27:06.550] [INF] [Microsoft.Hosting.Lifetime] Content root path: D:\restaurant-project\RestaurantAPI\RestaurantApi
[2025-12-16 00:27:06.846] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/index.html - null null
[2025-12-16 00:27:07.079] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/index.html - 200 null text/html;charset=utf-8 234.1797ms
[2025-12-16 00:27:07.102] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - null null
[2025-12-16 00:27:07.109] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 6.9072ms
[2025-12-16 00:27:07.112] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_vs/browserLink - null null
[2025-12-16 00:27:07.141] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.4661ms
[2025-12-16 00:27:07.458] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - null null
[2025-12-16 00:27:07.468] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/favicon-32x32.png - null null
[2025-12-16 00:27:07.481] [INF] [Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
[2025-12-16 00:27:07.482] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/favicon-32x32.png - 200 628 image/png 13.9001ms
[2025-12-16 00:27:07.512] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 53.5767ms
[2025-12-16 00:27:29.830] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:27:29.840] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:27:29.843] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 12.8188ms
[2025-12-16 00:27:29.845] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:27:29.852] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:27:29.936] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:27:29.964] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:27:31.487] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:27:32.466] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (937ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:27:32.480] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:27:32.488] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:27:32.524] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:27:32.529] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:27:32.533] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:27:32.547] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 2577.6936ms
[2025-12-16 00:27:32.548] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:27:32.554] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 2709.0355ms
[2025-12-16 00:27:32.554] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:27:32.559] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:27:32.560] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 5.435ms
[2025-12-16 00:27:32.562] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:27:32.564] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:27:32.567] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:27:32.573] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:27:32.671] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:27:32.675] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:27:32.676] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:27:32.681] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 106.5386ms
[2025-12-16 00:27:32.683] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:27:32.683] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 121.8274ms
[2025-12-16 00:27:32.687] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:27:32.689] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:27:32.690] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 3.171ms
[2025-12-16 00:27:32.692] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:27:32.695] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:27:32.698] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:27:32.702] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:27:32.812] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:27:32.816] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:27:32.820] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 116.158ms
[2025-12-16 00:27:32.822] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:27:32.823] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 130.8596ms
[2025-12-16 00:27:32.826] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:27:32.828] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:27:32.829] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 2.781ms
[2025-12-16 00:27:32.831] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:27:32.833] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:27:32.834] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:27:32.838] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:27:32.858] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:27:32.861] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:27:32.866] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 27.4219ms
[2025-12-16 00:27:32.868] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:27:32.869] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 38.1873ms
[2025-12-16 00:27:32.875] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:27:32.877] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:27:32.877] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.6015ms
[2025-12-16 00:27:32.879] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:27:32.882] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:27:32.883] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:27:32.887] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:27:32.914] [ERR] [RestaurantAPI.Controllers.StatisticsController] Ошибка при получении статистики выручки по датам
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => !(o.IsDeleted))
    .Where(o => o.OrderDate >= __startDate_Value_0)
    .GroupBy(o => o.OrderDate.Date)
    .Select(g => new { 
        Date = g.Key.ToString("yyyy-MM-dd"), 
        Revenue = g
            .AsQueryable()
            .Sum(e => (decimal?)e.Total) ?? 0, 
        OrdersCount = g
            .AsQueryable()
            .Count()
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Additional information: Translation of method 'System.DateTime.ToString' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate(Nullable`1 startDate, Nullable`1 endDate, String period) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Controllers\StatisticsController.cs:line 121
[2025-12-16 00:27:32.941] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'System.String'.
[2025-12-16 00:27:32.942] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 53.6501ms
[2025-12-16 00:27:32.943] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:27:32.944] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 500 null text/plain; charset=utf-8 64.5483ms
[2025-12-16 00:28:21.827] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:28:21.830] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:28:21.831] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 3.832ms
[2025-12-16 00:28:21.837] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:28:21.839] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:28:21.841] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:28:21.842] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:28:21.850] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:28:21.855] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:28:21.858] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:28:21.861] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:28:21.865] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:28:21.868] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:28:21.870] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:28:21.872] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 27.8878ms
[2025-12-16 00:28:21.873] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:28:21.874] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 37.3697ms
[2025-12-16 00:28:21.882] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:28:21.884] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:28:21.885] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 3.5119ms
[2025-12-16 00:28:21.887] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:28:21.890] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:28:21.891] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:28:21.892] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:28:21.897] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:28:21.898] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:28:21.899] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:28:21.901] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 7.6691ms
[2025-12-16 00:28:21.903] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:28:21.904] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 16.8945ms
[2025-12-16 00:28:21.910] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:28:21.912] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:28:21.913] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 3.0894ms
[2025-12-16 00:28:21.915] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:28:21.921] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:28:21.922] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:28:21.923] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:28:21.927] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:28:21.929] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:28:21.931] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 6.1669ms
[2025-12-16 00:28:21.932] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:28:21.933] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 17.889ms
[2025-12-16 00:28:21.943] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:28:21.946] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:28:21.947] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 3.3383ms
[2025-12-16 00:28:21.949] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:28:21.952] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:28:21.953] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:28:21.954] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:28:21.958] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:28:21.961] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:28:21.962] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 6.4371ms
[2025-12-16 00:28:21.964] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:28:21.965] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 16.1702ms
[2025-12-16 00:28:21.978] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:28:21.981] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:28:21.982] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 3.5878ms
[2025-12-16 00:28:21.984] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:28:21.988] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:28:21.990] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:28:21.991] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:28:21.997] [ERR] [RestaurantAPI.Controllers.StatisticsController] Ошибка при получении статистики выручки по датам
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => !(o.IsDeleted))
    .Where(o => o.OrderDate >= __startDate_Value_0)
    .GroupBy(o => o.OrderDate.Date)
    .Select(g => new { 
        Date = g.Key.ToString("yyyy-MM-dd"), 
        Revenue = g
            .AsQueryable()
            .Sum(e => (decimal?)e.Total) ?? 0, 
        OrdersCount = g
            .AsQueryable()
            .Count()
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Additional information: Translation of method 'System.DateTime.ToString' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate(Nullable`1 startDate, Nullable`1 endDate, String period) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Controllers\StatisticsController.cs:line 121
[2025-12-16 00:28:22.006] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'System.String'.
[2025-12-16 00:28:22.008] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 14.9788ms
[2025-12-16 00:28:22.009] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:28:22.011] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 500 null text/plain; charset=utf-8 26.4433ms
[2025-12-16 00:30:08.522] [INF] [] Запуск приложения Restaurant API
[2025-12-16 00:30:09.107] [INF] [] Приложение Restaurant API успешно запущено
[2025-12-16 00:30:09.146] [INF] [Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager] User profile is available. Using 'C:\Users\motya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-12-16 00:30:09.346] [INF] [Microsoft.Hosting.Lifetime] Now listening on: https://localhost:7188
[2025-12-16 00:30:09.349] [INF] [Microsoft.Hosting.Lifetime] Now listening on: http://localhost:5143
[2025-12-16 00:30:09.517] [INF] [Microsoft.Hosting.Lifetime] Application started. Press Ctrl+C to shut down.
[2025-12-16 00:30:09.519] [INF] [Microsoft.Hosting.Lifetime] Hosting environment: Development
[2025-12-16 00:30:09.522] [INF] [Microsoft.Hosting.Lifetime] Content root path: D:\restaurant-project\RestaurantAPI\RestaurantApi
[2025-12-16 00:30:09.827] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/index.html - null null
[2025-12-16 00:30:10.049] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/index.html - 200 null text/html;charset=utf-8 224.2833ms
[2025-12-16 00:30:10.078] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - null null
[2025-12-16 00:30:10.081] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_vs/browserLink - null null
[2025-12-16 00:30:10.087] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 8.9973ms
[2025-12-16 00:30:10.120] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_vs/browserLink - 200 null text/javascript; charset=UTF-8 38.8098ms
[2025-12-16 00:30:10.251] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - null null
[2025-12-16 00:30:10.297] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 45.9365ms
[2025-12-16 00:30:13.286] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/index.html - null null
[2025-12-16 00:30:13.296] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/index.html - 200 null text/html;charset=utf-8 10.1957ms
[2025-12-16 00:30:13.323] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_vs/browserLink - null null
[2025-12-16 00:30:13.323] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - null null
[2025-12-16 00:30:13.331] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 7.6647ms
[2025-12-16 00:30:13.342] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_vs/browserLink - 200 null text/javascript; charset=UTF-8 19.098ms
[2025-12-16 00:30:13.371] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - null null
[2025-12-16 00:30:13.443] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 72.1427ms
[2025-12-16 00:30:21.468] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:30:21.472] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories - null null
[2025-12-16 00:30:21.663] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:21.663] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:21.676] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 207.3848ms
[2025-12-16 00:30:21.676] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories - 204 null null 203.7705ms
[2025-12-16 00:30:21.681] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:30:21.684] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories - null null
[2025-12-16 00:30:21.707] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:21.708] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:21.835] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:30:21.842] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:21.844] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 8.8522ms
[2025-12-16 00:30:21.847] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:30:21.861] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:21.872] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:30:21.872] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:30:21.872] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:30:21.932] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 00:30:21.932] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 00:30:21.932] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:30:24.184] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:30:24.184] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:30:24.184] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:30:24.215] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:30:24.225] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:30:24.231] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:30:24.254] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:30:24.260] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 00:30:24.264] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:30:24.267] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:30:24.268] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 00:30:24.271] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:30:24.271] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:30:24.271] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 12, Всего: 12, Страница: 1, Размер страницы: 1000
[2025-12-16 00:30:24.275] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:30:24.287] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 2340.1465ms
[2025-12-16 00:30:24.287] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 2345.8109ms
[2025-12-16 00:30:24.287] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 2342.4111ms
[2025-12-16 00:30:24.288] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:30:24.289] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:30:24.290] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:30:24.295] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:30:24.297] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 2616.0755ms
[2025-12-16 00:30:24.297] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories - 200 null application/json; charset=utf-8 2612.6973ms
[2025-12-16 00:30:24.297] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 2450.0385ms
[2025-12-16 00:30:24.298] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:24.308] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 13.0388ms
[2025-12-16 00:30:24.310] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:30:24.314] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:24.315] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:30:24.322] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:30:24.448] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:30:24.454] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:30:24.456] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:30:24.459] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 135.2429ms
[2025-12-16 00:30:24.461] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:30:24.462] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 151.4518ms
[2025-12-16 00:30:24.465] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:30:24.467] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:24.468] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 3.525ms
[2025-12-16 00:30:24.470] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:30:24.473] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:24.474] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:30:24.478] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:30:24.501] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:30:24.504] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:30:24.508] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 27.9017ms
[2025-12-16 00:30:24.509] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:30:24.510] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 39.7942ms
[2025-12-16 00:30:24.512] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:30:24.515] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:24.516] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 3.3476ms
[2025-12-16 00:30:24.519] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:30:24.522] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:24.523] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:30:24.528] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:30:24.544] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:30:24.547] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:30:24.554] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 24.565ms
[2025-12-16 00:30:24.555] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:30:24.556] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 37.1229ms
[2025-12-16 00:30:24.561] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:30:24.563] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:24.564] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 3.1665ms
[2025-12-16 00:30:24.570] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:30:24.574] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:24.576] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:30:24.582] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:30:24.603] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-16 00:30:24.611] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:30:24.615] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 30.6986ms
[2025-12-16 00:30:24.617] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:30:24.617] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 47.9711ms
[2025-12-16 00:30:29.305] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 00:30:29.305] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 00:30:29.305] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:30:29.308] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:29.310] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:29.312] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:29.313] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 8.6356ms
[2025-12-16 00:30:29.314] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 8.8547ms
[2025-12-16 00:30:29.316] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 10.865ms
[2025-12-16 00:30:29.318] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 00:30:29.321] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 00:30:29.322] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:30:29.333] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:29.336] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:29.339] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:29.342] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 00:30:29.342] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:30:29.344] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:30:29.347] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 00:30:29.350] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 00:30:29.355] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 00:30:29.359] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:30:29.359] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:30:29.368] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:30:29.371] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 00:30:29.373] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 00:30:29.376] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 12, Всего: 12, Страница: 1, Размер страницы: 1000
[2025-12-16 00:30:29.377] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:30:29.379] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:30:29.381] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 29.0056ms
[2025-12-16 00:30:29.384] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 30.433ms
[2025-12-16 00:30:29.386] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:30:29.388] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:30:29.391] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:30:29.391] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 69.3884ms
[2025-12-16 00:30:29.390] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 68.9321ms
[2025-12-16 00:30:29.409] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:30:29.413] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 00:30:29.417] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:30:29.423] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 65.5934ms
[2025-12-16 00:30:29.425] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 00:30:29.426] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 108.8293ms
[2025-12-16 00:30:29.430] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 00:30:29.434] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:29.435] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 5.4761ms
[2025-12-16 00:30:29.438] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 00:30:29.443] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:29.445] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 00:30:29.455] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 00:30:29.488] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 00:30:29.516] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 00:30:29.520] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 00:30:29.523] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:30:29.530] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 71.8574ms
[2025-12-16 00:30:29.532] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 00:30:29.534] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 96.2378ms
[2025-12-16 00:30:30.929] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=c14b7bc6-a42f-4aa6-821e-694beb05a2eb&pageSize=1000 - null null
[2025-12-16 00:30:30.934] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:30.934] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=c14b7bc6-a42f-4aa6-821e-694beb05a2eb&pageSize=1000 - 204 null null 4.941ms
[2025-12-16 00:30:30.951] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=c14b7bc6-a42f-4aa6-821e-694beb05a2eb&pageSize=1000 - null null
[2025-12-16 00:30:30.954] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:30.955] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 00:30:30.959] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishIngredients", controller = "DishIngredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishIngredients(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishIngredientsController (RestaurantApi).
[2025-12-16 00:30:30.987] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DishIngredients] AS [d]
INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
[2025-12-16 00:30:31.023] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[DishId], [s].[Name] AS [DishName], [s].[IngredientId], [i].[Name] AS [IngredientName], [s].[Quantity]
FROM (
    SELECT [d].[Id], [d].[DishId], [d].[IngredientId], [d].[Quantity], [d0].[Name]
    FROM [DishIngredients] AS [d]
    INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
    ORDER BY [d0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Ingredients] AS [i] ON [s].[IngredientId] = [i].[Id]
ORDER BY [s].[Name]
[2025-12-16 00:30:31.028] [INF] [RestaurantAPI.Controllers.DishIngredientsController] Получен список ингредиентов блюд. Количество: 7, Всего: 7, Страница: 1
[2025-12-16 00:30:31.032] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishIngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:30:31.040] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi) in 79.5571ms
[2025-12-16 00:30:31.042] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 00:30:31.043] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=c14b7bc6-a42f-4aa6-821e-694beb05a2eb&pageSize=1000 - 200 null application/json; charset=utf-8 91.9658ms
[2025-12-16 00:30:38.942] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 00:30:38.944] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 00:30:38.945] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:30:38.945] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:38.948] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:38.951] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:38.952] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 9.9ms
[2025-12-16 00:30:38.952] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 8.3628ms
[2025-12-16 00:30:38.954] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 9.2848ms
[2025-12-16 00:30:38.956] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 00:30:38.956] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 00:30:38.956] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:30:38.965] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:38.968] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:38.969] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:38.970] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 00:30:38.971] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:30:38.972] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:30:38.974] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 00:30:38.975] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 00:30:38.976] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 00:30:38.979] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:30:38.980] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:30:38.981] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:30:38.983] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:30:38.984] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:30:38.985] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 00:30:38.986] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 00:30:38.988] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 00:30:38.990] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 12, Всего: 12, Страница: 1, Размер страницы: 1000
[2025-12-16 00:30:38.991] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:30:38.992] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:30:38.993] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:30:38.995] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 17.6512ms
[2025-12-16 00:30:38.996] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 17.3221ms
[2025-12-16 00:30:38.997] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 17.7211ms
[2025-12-16 00:30:39.000] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 00:30:39.002] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:30:39.003] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:30:39.004] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 47.6517ms
[2025-12-16 00:30:39.005] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 48.2973ms
[2025-12-16 00:30:39.006] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 49.1579ms
[2025-12-16 00:30:39.007] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 00:30:39.016] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:39.017] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 10.4626ms
[2025-12-16 00:30:39.020] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 00:30:39.023] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:39.024] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 00:30:39.025] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 00:30:39.029] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 00:30:39.035] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 00:30:39.038] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 00:30:39.039] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:30:39.040] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 12.921ms
[2025-12-16 00:30:39.041] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 00:30:39.042] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 22.3552ms
[2025-12-16 00:30:46.932] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 00:30:46.935] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:30:46.935] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 00:30:46.938] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:46.941] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:46.945] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:46.946] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 13.3939ms
[2025-12-16 00:30:46.946] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 11.4805ms
[2025-12-16 00:30:46.947] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 12.3632ms
[2025-12-16 00:30:46.949] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 00:30:46.949] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:30:46.951] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 00:30:46.963] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:46.967] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:46.970] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:46.973] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 00:30:46.974] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:30:46.975] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:30:46.976] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 00:30:46.978] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 00:30:46.980] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 00:30:46.996] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:30:46.996] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:30:46.996] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:30:47.009] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:30:47.010] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 00:30:47.013] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 00:30:47.015] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:30:47.016] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 12, Всего: 12, Страница: 1, Размер страницы: 1000
[2025-12-16 00:30:47.018] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:30:47.022] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 00:30:47.023] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:30:47.025] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 38.7937ms
[2025-12-16 00:30:47.031] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:30:47.029] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 44.9583ms
[2025-12-16 00:30:47.027] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:30:47.033] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 82.8285ms
[2025-12-16 00:30:47.035] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:30:47.037] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 54.8267ms
[2025-12-16 00:30:47.043] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 94.0555ms
[2025-12-16 00:30:47.045] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 00:30:47.052] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 103.0269ms
[2025-12-16 00:30:47.056] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 00:30:47.063] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:47.066] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 9.9431ms
[2025-12-16 00:30:47.068] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 00:30:47.074] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:47.075] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 00:30:47.077] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 00:30:47.096] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (13ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 00:30:47.107] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 00:30:47.112] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 00:30:47.115] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:30:47.117] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 36.0399ms
[2025-12-16 00:30:47.120] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 00:30:47.122] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 53.4664ms
[2025-12-16 00:30:47.519] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - null null
[2025-12-16 00:30:47.523] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:47.524] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - 204 null null 4.9482ms
[2025-12-16 00:30:47.526] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - null null
[2025-12-16 00:30:47.530] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:30:47.532] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 00:30:47.534] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishIngredients", controller = "DishIngredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishIngredients(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishIngredientsController (RestaurantApi).
[2025-12-16 00:30:47.568] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (30ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DishIngredients] AS [d]
INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
[2025-12-16 00:30:47.584] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (11ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[DishId], [s].[Name] AS [DishName], [s].[IngredientId], [i].[Name] AS [IngredientName], [s].[Quantity]
FROM (
    SELECT [d].[Id], [d].[DishId], [d].[IngredientId], [d].[Quantity], [d0].[Name]
    FROM [DishIngredients] AS [d]
    INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
    ORDER BY [d0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Ingredients] AS [i] ON [s].[IngredientId] = [i].[Id]
ORDER BY [s].[Name]
[2025-12-16 00:30:47.589] [INF] [RestaurantAPI.Controllers.DishIngredientsController] Получен список ингредиентов блюд. Количество: 5, Всего: 5, Страница: 1
[2025-12-16 00:30:47.592] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishIngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:30:47.594] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi) in 58.1912ms
[2025-12-16 00:30:47.596] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 00:30:47.597] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - 200 null application/json; charset=utf-8 70.5777ms
[2025-12-16 00:31:00.329] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:31:00.332] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:00.333] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 3.8398ms
[2025-12-16 00:31:00.336] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:31:00.340] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:00.341] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:31:00.343] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:31:00.368] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:31:00.372] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:31:00.378] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:31:00.384] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:31:00.388] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:31:00.390] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 9450.00, Заказов: 6
[2025-12-16 00:31:00.391] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:31:00.393] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 47.875ms
[2025-12-16 00:31:00.393] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:31:00.394] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 58.5275ms
[2025-12-16 00:31:00.397] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:31:00.400] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:00.400] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 3.1778ms
[2025-12-16 00:31:00.403] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:31:00.406] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:00.407] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:31:00.408] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:31:00.431] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:31:00.434] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:31:00.435] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:31:00.436] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 26.5169ms
[2025-12-16 00:31:00.437] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:31:00.437] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 34.7248ms
[2025-12-16 00:31:00.440] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:31:00.442] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:00.442] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.4206ms
[2025-12-16 00:31:00.444] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:31:00.447] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:00.448] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:31:00.449] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:31:00.458] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:31:00.460] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:31:00.461] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 11.0236ms
[2025-12-16 00:31:00.462] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:31:00.463] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 19.5739ms
[2025-12-16 00:31:00.469] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:31:00.471] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:00.472] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 2.4384ms
[2025-12-16 00:31:00.473] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:31:00.476] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:00.477] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:31:00.478] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:31:00.484] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:31:00.486] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:31:00.488] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 8.6388ms
[2025-12-16 00:31:00.489] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:31:00.490] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 16.6686ms
[2025-12-16 00:31:00.494] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:31:00.495] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:00.496] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.5037ms
[2025-12-16 00:31:00.498] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:31:00.502] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:00.504] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:31:00.505] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:31:00.509] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-16 00:31:00.511] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:31:00.512] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 6.0996ms
[2025-12-16 00:31:00.513] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:31:00.514] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 16.3561ms
[2025-12-16 00:31:03.251] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 00:31:03.254] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:03.256] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:31:03.255] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 00:31:03.256] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 4.7188ms
[2025-12-16 00:31:03.259] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:03.259] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 00:31:03.261] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:03.265] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 9.36ms
[2025-12-16 00:31:03.267] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:31:03.268] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:03.269] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 14.3964ms
[2025-12-16 00:31:03.271] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 00:31:03.274] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:03.275] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 00:31:03.279] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:03.279] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:31:03.280] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 00:31:03.283] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:31:03.283] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 00:31:03.286] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 00:31:03.290] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:31:03.295] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 00:31:03.298] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 12, Всего: 12, Страница: 1, Размер страницы: 1000
[2025-12-16 00:31:03.300] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:31:03.301] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:31:03.302] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:31:03.302] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 14.6244ms
[2025-12-16 00:31:03.306] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:31:03.307] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 39.9483ms
[2025-12-16 00:31:03.308] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:31:03.309] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:31:03.312] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 00:31:03.313] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 00:31:03.315] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:31:03.316] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:31:03.317] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 26.1805ms
[2025-12-16 00:31:03.318] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 33.1013ms
[2025-12-16 00:31:03.319] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:31:03.320] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 00:31:03.321] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 50.5395ms
[2025-12-16 00:31:03.322] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 62.6857ms
[2025-12-16 00:31:03.324] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 00:31:03.328] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:03.329] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 4.9802ms
[2025-12-16 00:31:03.331] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 00:31:03.335] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:03.336] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 00:31:03.337] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 00:31:03.342] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 00:31:03.349] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 00:31:03.351] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 00:31:03.352] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:31:03.354] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 15.0354ms
[2025-12-16 00:31:03.355] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 00:31:03.356] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 24.7788ms
[2025-12-16 00:31:07.182] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 00:31:07.184] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 00:31:07.185] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:31:07.186] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:07.188] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:07.190] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:07.191] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 00:31:07.192] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:31:07.193] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:31:07.193] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 00:31:07.194] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 00:31:07.195] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 00:31:07.200] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:31:07.200] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:31:07.202] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:31:07.204] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:31:07.206] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:31:07.208] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 00:31:07.209] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 00:31:07.210] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 00:31:07.212] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 12, Всего: 12, Страница: 1, Размер страницы: 1000
[2025-12-16 00:31:07.213] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:31:07.214] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:31:07.216] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:31:07.218] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 21.1647ms
[2025-12-16 00:31:07.220] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 21.7565ms
[2025-12-16 00:31:07.221] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 21.4693ms
[2025-12-16 00:31:07.222] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 00:31:07.223] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:31:07.224] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:31:07.224] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 42.4234ms
[2025-12-16 00:31:07.225] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 41.3673ms
[2025-12-16 00:31:07.226] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 41.6896ms
[2025-12-16 00:31:07.229] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 00:31:07.238] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:07.239] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 00:31:07.240] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 00:31:07.243] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 00:31:07.247] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 00:31:07.250] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 00:31:07.252] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:31:07.254] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 11.6661ms
[2025-12-16 00:31:07.256] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 00:31:07.257] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 27.5527ms
[2025-12-16 00:31:18.547] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-16 00:31:18.550] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:18.551] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 4.0263ms
[2025-12-16 00:31:18.553] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 376
[2025-12-16 00:31:18.556] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:18.556] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-16 00:31:18.561] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 00:31:18.658] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:31:18.725] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "601d547d-42ee-4d95-abc0-42bf30f4d94b", Notes: null, ItemsCount: 4
[2025-12-16 00:31:18.932] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-16 00:31:18.976] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:31:19.005] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e8b4009a-2de3-4f24-9484-408e7d813d61", Quantity: 1, Notes: null
[2025-12-16 00:31:19.033] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:31:19.037] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e95fdeb0-af57-44bd-91ab-29e79dbad536", Quantity: 3, Notes: null
[2025-12-16 00:31:19.040] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:31:19.042] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e3b024ce-9139-4b59-a73b-9dfa81d65721", Quantity: 1, Notes: null
[2025-12-16 00:31:19.044] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:31:19.046] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "5a0ab935-6754-4bcb-b1ad-3b0d1aed65fc", Quantity: 3, Notes: null
[2025-12-16 00:31:19.099] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p12='?' (DbType = DateTime), @p13='?' (Size = 100), @p14='?' (DbType = DateTime), @p15='?' (Size = 100), @p16='?' (DbType = Guid), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (DbType = Guid), @p20='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (Size = 100), @p24='?' (DbType = DateTime), @p25='?' (Size = 100), @p26='?' (DbType = DateTime), @p27='?' (Size = 100), @p28='?' (DbType = Guid), @p29='?' (DbType = Boolean), @p30='?' (Size = 4000), @p31='?' (DbType = Guid), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = DateTime), @p35='?' (Size = 100), @p36='?' (DbType = DateTime), @p37='?' (Size = 100), @p38='?' (DbType = DateTime), @p39='?' (Size = 100), @p40='?' (DbType = Guid), @p41='?' (DbType = Boolean), @p42='?' (Size = 4000), @p43='?' (DbType = Guid), @p44='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p45='?' (DbType = Int32), @p46='?' (DbType = DateTime), @p47='?' (Size = 100), @p49='?' (DbType = Guid), @p48='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, 0),
(@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, 1),
(@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 2),
(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 3)) AS i ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
VALUES (i.[CreatedAt], i.[CreatedBy], i.[DeletedAt], i.[DeletedBy], i.[DishId], i.[IsDeleted], i.[Notes], i.[OrderId], i.[Price], i.[Quantity], i.[UpdatedAt], i.[UpdatedBy])
OUTPUT INSERTED.[Id], i._Position;
UPDATE [Orders] SET [Total] = @p48
OUTPUT 1
WHERE [Id] = @p49;
[2025-12-16 00:31:19.114] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "a96bf1ce-7356-4001-bd4d-c7183080365b" создан пользователем "601d547d-42ee-4d95-abc0-42bf30f4d94b". Сумма: 5540.00, Блюд: 4
[2025-12-16 00:31:19.117] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-16 00:31:19.140] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 576.8712ms
[2025-12-16 00:31:19.142] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-16 00:31:19.143] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 589.9827ms
[2025-12-16 00:31:22.198] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:31:22.201] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:22.202] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 4.7021ms
[2025-12-16 00:31:22.204] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:31:22.207] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:22.208] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:31:22.209] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:31:22.214] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:31:22.216] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:31:22.220] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:31:22.224] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:31:22.227] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:31:22.231] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 14990.00, Заказов: 7
[2025-12-16 00:31:22.233] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:31:22.235] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 23.1563ms
[2025-12-16 00:31:22.237] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:31:22.238] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 34.0714ms
[2025-12-16 00:31:22.244] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:31:22.249] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:22.250] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 5.6563ms
[2025-12-16 00:31:22.252] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:31:22.257] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:22.258] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:31:22.259] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:31:22.267] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:31:22.270] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:31:22.271] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:31:22.272] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 11.2438ms
[2025-12-16 00:31:22.274] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:31:22.274] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 22.5334ms
[2025-12-16 00:31:22.277] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:31:22.280] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:22.281] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 3.8263ms
[2025-12-16 00:31:22.283] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:31:22.287] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:22.288] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:31:22.289] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:31:22.294] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:31:22.298] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:31:22.299] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 7.4057ms
[2025-12-16 00:31:22.301] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:31:22.302] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 18.9791ms
[2025-12-16 00:31:22.305] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:31:22.308] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:22.309] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 4.1728ms
[2025-12-16 00:31:22.311] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:31:22.317] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:22.318] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:31:22.319] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:31:22.324] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:31:22.327] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:31:22.329] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 6.9224ms
[2025-12-16 00:31:22.331] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:31:22.332] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 20.7058ms
[2025-12-16 00:31:22.337] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:31:22.340] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:22.341] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 3.9768ms
[2025-12-16 00:31:22.342] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:31:22.347] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:31:22.349] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:31:22.350] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:31:22.354] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-16 00:31:22.356] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:31:22.358] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.971ms
[2025-12-16 00:31:22.359] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:31:22.361] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 18.2278ms
[2025-12-16 00:32:17.945] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 00:32:17.946] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Roles - null null
[2025-12-16 00:32:17.949] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:17.951] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:17.952] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 7.3386ms
[2025-12-16 00:32:17.953] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Roles - 204 null null 6.5818ms
[2025-12-16 00:32:17.956] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 00:32:17.956] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Roles - null null
[2025-12-16 00:32:17.969] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:17.971] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:17.974] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 00:32:17.974] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi)'
[2025-12-16 00:32:17.983] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 00:32:17.983] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRoles", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRoles(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.RolesController (RestaurantApi).
[2025-12-16 00:32:18.007] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:32:18.009] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Roles] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:32:18.022] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
ORDER BY [r].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:32:18.022] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[Username], [r].[Name] AS [RoleName]
FROM (
    SELECT [u].[Id], [u].[RoleId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-16 00:32:18.026] [INF] [RestaurantAPI.Controllers.RolesController] Получен список ролей. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 00:32:18.030] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 00:32:18.031] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.RoleReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:32:18.033] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:32:18.038] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi) in 49.3182ms
[2025-12-16 00:32:18.039] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 52.2505ms
[2025-12-16 00:32:18.040] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi)'
[2025-12-16 00:32:18.041] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 00:32:18.042] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Roles - 200 null application/json; charset=utf-8 85.9235ms
[2025-12-16 00:32:18.043] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 87.3517ms
[2025-12-16 00:32:18.473] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 00:32:18.475] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:18.476] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 00:32:18.476] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 00:32:18.481] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:18.482] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 00:32:18.483] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 6.9378ms
[2025-12-16 00:32:18.486] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 00:32:18.489] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:32:18.498] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:18.504] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[Username], [r].[Name] AS [RoleName]
FROM (
    SELECT [u].[Id], [u].[RoleId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-16 00:32:18.504] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 00:32:18.510] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 00:32:18.515] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:32:18.517] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 29.9648ms
[2025-12-16 00:32:18.519] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 00:32:18.519] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 00:32:18.523] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 50.5417ms
[2025-12-16 00:32:18.538] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:32:18.556] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [u].[Username], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[Notes]
FROM (
    SELECT [o].[Id], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:32:18.560] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 7, Всего: 7, Страница: 1
[2025-12-16 00:32:18.563] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:32:18.566] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 44.2949ms
[2025-12-16 00:32:18.568] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 00:32:18.570] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 83.954ms
[2025-12-16 00:32:19.210] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=1000 - null null
[2025-12-16 00:32:19.220] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:19.222] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=1000 - 204 null null 11.487ms
[2025-12-16 00:32:19.224] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=1000 - null null
[2025-12-16 00:32:19.229] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:19.231] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:32:19.232] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 00:32:19.241] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:32:19.249] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:32:19.255] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 00:32:19.259] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:32:19.263] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 27.1013ms
[2025-12-16 00:32:19.264] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:32:19.265] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=1000 - 200 null application/json; charset=utf-8 41.1768ms
[2025-12-16 00:32:19.978] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Ingredients?pageSize=1000 - null null
[2025-12-16 00:32:19.982] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:19.984] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Ingredients?pageSize=1000 - 204 null null 5.6475ms
[2025-12-16 00:32:19.986] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - null null
[2025-12-16 00:32:19.992] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:19.993] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-16 00:32:20.000] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetIngredients", controller = "Ingredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetIngredients(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.IngredientsController (RestaurantApi).
[2025-12-16 00:32:20.020] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:32:20.031] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[Name]
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
ORDER BY [i].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:32:20.034] [INF] [RestaurantAPI.Controllers.IngredientsController] Получен список ингредиентов. Количество: 24, Всего: 24, Страница: 1
[2025-12-16 00:32:20.036] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.IngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:32:20.039] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi) in 35.6073ms
[2025-12-16 00:32:20.040] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-16 00:32:20.041] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - 200 null application/json; charset=utf-8 55.6273ms
[2025-12-16 00:32:20.806] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=1000 - null null
[2025-12-16 00:32:20.809] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:20.811] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=1000 - 204 null null 4.8161ms
[2025-12-16 00:32:20.813] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=1000 - null null
[2025-12-16 00:32:20.819] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:20.821] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 00:32:20.823] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 00:32:20.834] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:32:20.843] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:32:20.847] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 00:32:20.849] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:32:20.851] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 23.7319ms
[2025-12-16 00:32:20.853] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 00:32:20.855] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=1000 - 200 null application/json; charset=utf-8 41.7347ms
[2025-12-16 00:32:22.094] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:32:22.099] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories - null null
[2025-12-16 00:32:22.105] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:22.108] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:22.109] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 14.4068ms
[2025-12-16 00:32:22.110] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories - 204 null null 11.0473ms
[2025-12-16 00:32:22.111] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:32:22.113] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories - null null
[2025-12-16 00:32:22.122] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:22.126] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:22.127] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:32:22.132] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:32:22.133] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 00:32:22.133] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 00:32:22.140] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:32:22.142] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:32:22.143] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:32:22.152] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 00:32:22.154] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 00:32:22.154] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:32:22.157] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 12, Всего: 12, Страница: 1, Размер страницы: 1000
[2025-12-16 00:32:22.160] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 22.6747ms
[2025-12-16 00:32:22.167] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:32:22.169] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:32:22.171] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 35.2019ms
[2025-12-16 00:32:22.173] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories - 200 null application/json; charset=utf-8 60.4063ms
[2025-12-16 00:32:22.175] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:32:22.183] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 71.643ms
[2025-12-16 00:32:24.269] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:32:24.272] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:24.273] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 3.798ms
[2025-12-16 00:32:24.275] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:32:24.277] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:24.279] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:32:24.281] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:32:24.286] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:32:24.289] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:32:24.291] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:32:24.294] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:32:24.301] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:32:24.305] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 14990.00, Заказов: 7
[2025-12-16 00:32:24.307] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:32:24.308] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 25.5429ms
[2025-12-16 00:32:24.309] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:32:24.311] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 35.9667ms
[2025-12-16 00:32:24.320] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:32:24.322] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:24.323] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 3.0121ms
[2025-12-16 00:32:24.325] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:32:24.332] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:24.335] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:32:24.337] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:32:24.374] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (33ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:32:24.377] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:32:24.378] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:32:24.380] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 39.7287ms
[2025-12-16 00:32:24.381] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:32:24.382] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 56.7324ms
[2025-12-16 00:32:24.385] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:32:24.388] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:24.389] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 3.8578ms
[2025-12-16 00:32:24.390] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:32:24.395] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:24.396] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:32:24.397] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:32:24.412] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:32:24.414] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:32:24.416] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 16.1804ms
[2025-12-16 00:32:24.417] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:32:24.418] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 28.1758ms
[2025-12-16 00:32:24.421] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:32:24.424] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:24.425] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 3.6413ms
[2025-12-16 00:32:24.427] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:32:24.432] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:24.434] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:32:24.435] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:32:24.444] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:32:24.447] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:32:24.448] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 10.2829ms
[2025-12-16 00:32:24.450] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:32:24.451] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 24.4613ms
[2025-12-16 00:32:24.460] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:32:24.462] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:24.463] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 3.3351ms
[2025-12-16 00:32:24.467] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:32:24.470] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:32:24.472] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:32:24.473] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:32:24.481] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-16 00:32:24.484] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:32:24.486] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 9.4868ms
[2025-12-16 00:32:24.487] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:32:24.490] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 23.1667ms
[2025-12-16 00:41:27.720] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 00:41:27.720] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:41:27.720] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 00:41:27.723] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:41:27.725] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:41:27.726] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:41:27.727] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 7.1157ms
[2025-12-16 00:41:27.728] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 7.9109ms
[2025-12-16 00:41:27.729] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 8.74ms
[2025-12-16 00:41:27.730] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 00:41:27.730] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:41:27.730] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 00:41:27.738] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:41:27.740] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:41:27.742] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:41:27.743] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 00:41:27.743] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:41:27.744] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:41:27.745] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 00:41:27.746] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 00:41:27.746] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 00:41:27.815] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:41:27.816] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:41:27.816] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:41:27.821] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 00:41:27.822] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:41:27.823] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 12, Всего: 12, Страница: 1, Размер страницы: 1000
[2025-12-16 00:41:27.823] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:41:27.824] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 00:41:27.826] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:41:27.827] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 00:41:27.828] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:41:27.830] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 80.5073ms
[2025-12-16 00:41:27.831] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:41:27.832] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 83.7931ms
[2025-12-16 00:41:27.832] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:41:27.833] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 81.6266ms
[2025-12-16 00:41:27.835] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 00:41:27.835] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 104.9467ms
[2025-12-16 00:41:27.836] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:41:27.837] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 107.2859ms
[2025-12-16 00:41:27.839] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 00:41:27.840] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 109.571ms
[2025-12-16 00:41:27.844] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:41:27.847] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 8.0851ms
[2025-12-16 00:41:27.848] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 00:41:27.851] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:41:27.852] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 00:41:27.853] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 00:41:27.859] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 00:41:27.865] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 00:41:27.866] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 00:41:27.868] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:41:27.869] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 14.4286ms
[2025-12-16 00:41:27.870] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 00:41:27.871] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 22.1729ms
[2025-12-16 00:41:35.917] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - null null
[2025-12-16 00:41:35.919] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:41:35.920] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - 204 null null 3.1807ms
[2025-12-16 00:41:35.921] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - null null
[2025-12-16 00:41:35.924] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:41:35.925] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 00:41:35.926] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 00:41:35.929] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 00:41:35.931] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 00:41:35.933] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 00:41:35.934] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:41:35.936] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 8.2281ms
[2025-12-16 00:41:35.937] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 00:41:35.937] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - 200 null application/json; charset=utf-8 16.0411ms
[2025-12-16 00:41:42.278] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-16 00:41:42.280] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:41:42.280] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 2.6535ms
[2025-12-16 00:41:42.282] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 604
[2025-12-16 00:41:42.285] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:41:42.286] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-16 00:41:42.287] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 00:41:42.307] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (17ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:41:42.309] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "601d547d-42ee-4d95-abc0-42bf30f4d94b", Notes: null, ItemsCount: 7
[2025-12-16 00:41:42.315] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-16 00:41:42.320] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:41:42.322] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "c14b7bc6-a42f-4aa6-821e-694beb05a2eb", Quantity: 1, Notes: null
[2025-12-16 00:41:42.325] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:41:42.326] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "bc75836d-c978-460e-b72a-7ad8d898f4db", Quantity: 1, Notes: null
[2025-12-16 00:41:42.328] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:41:42.330] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e8b4009a-2de3-4f24-9484-408e7d813d61", Quantity: 1, Notes: null
[2025-12-16 00:41:42.331] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:41:42.334] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "5a0ab935-6754-4bcb-b1ad-3b0d1aed65fc", Quantity: 5, Notes: null
[2025-12-16 00:41:42.336] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:41:42.338] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e50cda14-92f5-44fc-b8f2-f4240ac9e0a9", Quantity: 2, Notes: null
[2025-12-16 00:41:42.340] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:41:42.341] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "6df9d371-ed3e-43fc-a2f9-05f35cc8b457", Quantity: 1, Notes: null
[2025-12-16 00:41:42.343] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:41:42.345] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "adb0a8a2-a8c3-40bd-8f5b-26b9847ed9e7", Quantity: 3, Notes: null
[2025-12-16 00:41:42.360] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p12='?' (DbType = DateTime), @p13='?' (Size = 100), @p14='?' (DbType = DateTime), @p15='?' (Size = 100), @p16='?' (DbType = Guid), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (DbType = Guid), @p20='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (Size = 100), @p24='?' (DbType = DateTime), @p25='?' (Size = 100), @p26='?' (DbType = DateTime), @p27='?' (Size = 100), @p28='?' (DbType = Guid), @p29='?' (DbType = Boolean), @p30='?' (Size = 4000), @p31='?' (DbType = Guid), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = DateTime), @p35='?' (Size = 100), @p36='?' (DbType = DateTime), @p37='?' (Size = 100), @p38='?' (DbType = DateTime), @p39='?' (Size = 100), @p40='?' (DbType = Guid), @p41='?' (DbType = Boolean), @p42='?' (Size = 4000), @p43='?' (DbType = Guid), @p44='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p45='?' (DbType = Int32), @p46='?' (DbType = DateTime), @p47='?' (Size = 100), @p48='?' (DbType = DateTime), @p49='?' (Size = 100), @p50='?' (DbType = DateTime), @p51='?' (Size = 100), @p52='?' (DbType = Guid), @p53='?' (DbType = Boolean), @p54='?' (Size = 4000), @p55='?' (DbType = Guid), @p56='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p57='?' (DbType = Int32), @p58='?' (DbType = DateTime), @p59='?' (Size = 100), @p60='?' (DbType = DateTime), @p61='?' (Size = 100), @p62='?' (DbType = DateTime), @p63='?' (Size = 100), @p64='?' (DbType = Guid), @p65='?' (DbType = Boolean), @p66='?' (Size = 4000), @p67='?' (DbType = Guid), @p68='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p69='?' (DbType = Int32), @p70='?' (DbType = DateTime), @p71='?' (Size = 100), @p72='?' (DbType = DateTime), @p73='?' (Size = 100), @p74='?' (DbType = DateTime), @p75='?' (Size = 100), @p76='?' (DbType = Guid), @p77='?' (DbType = Boolean), @p78='?' (Size = 4000), @p79='?' (DbType = Guid), @p80='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p81='?' (DbType = Int32), @p82='?' (DbType = DateTime), @p83='?' (Size = 100), @p85='?' (DbType = Guid), @p84='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, 0),
(@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, 1),
(@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 2),
(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 3),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 4),
(@p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, 5),
(@p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, 6)) AS i ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
VALUES (i.[CreatedAt], i.[CreatedBy], i.[DeletedAt], i.[DeletedBy], i.[DishId], i.[IsDeleted], i.[Notes], i.[OrderId], i.[Price], i.[Quantity], i.[UpdatedAt], i.[UpdatedBy])
OUTPUT INSERTED.[Id], i._Position;
UPDATE [Orders] SET [Total] = @p84
OUTPUT 1
WHERE [Id] = @p85;
[2025-12-16 00:41:42.364] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "e72b04d4-0a81-4dde-a7d4-8a2e4b77b013" создан пользователем "601d547d-42ee-4d95-abc0-42bf30f4d94b". Сумма: 9200.00, Блюд: 7
[2025-12-16 00:41:42.365] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-16 00:41:42.367] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 78.5207ms
[2025-12-16 00:41:42.368] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-16 00:41:42.369] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 87.4054ms
[2025-12-16 00:41:44.403] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:41:44.405] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:41:44.406] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 3.1712ms
[2025-12-16 00:41:44.408] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:41:44.411] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:41:44.412] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:41:44.413] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:41:44.434] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:41:44.438] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:41:44.445] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:41:44.448] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:41:44.453] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:41:44.455] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 24190.00, Заказов: 8
[2025-12-16 00:41:44.456] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:41:44.458] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 42.9236ms
[2025-12-16 00:41:44.459] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:41:44.459] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 51.6934ms
[2025-12-16 00:41:44.462] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:41:44.464] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:41:44.465] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 2.4126ms
[2025-12-16 00:41:44.466] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:41:44.470] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:41:44.470] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:41:44.472] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:41:44.481] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:41:44.482] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:41:44.484] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:41:44.486] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 12.2227ms
[2025-12-16 00:41:44.487] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:41:44.488] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 21.6571ms
[2025-12-16 00:41:44.490] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:41:44.492] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:41:44.493] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.2817ms
[2025-12-16 00:41:44.494] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:41:44.497] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:41:44.497] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:41:44.498] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:41:44.509] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:41:44.511] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:41:44.512] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 11.8716ms
[2025-12-16 00:41:44.513] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:41:44.514] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 19.8451ms
[2025-12-16 00:41:44.517] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:41:44.519] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:41:44.520] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 3.0198ms
[2025-12-16 00:41:44.522] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:41:44.525] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:41:44.525] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:41:44.526] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:41:44.531] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:41:44.534] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:41:44.536] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 8.1556ms
[2025-12-16 00:41:44.537] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:41:44.538] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 16.5431ms
[2025-12-16 00:41:44.543] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:41:44.545] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:41:44.546] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.8066ms
[2025-12-16 00:41:44.548] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:41:44.551] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:41:44.552] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:41:44.553] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:41:44.562] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-16 00:41:44.564] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:41:44.565] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 9.7205ms
[2025-12-16 00:41:44.566] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:41:44.568] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 19.7039ms
[2025-12-16 00:41:57.310] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 00:41:57.313] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:41:57.314] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - 204 null null 4.6356ms
[2025-12-16 00:41:57.318] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 00:41:57.323] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:41:57.324] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 00:41:57.328] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMyOrders() on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 00:41:57.347] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [u].[Username], [o].[OrderDate], [o].[Status], [o].[Total], [o].[Notes]
FROM [Orders] AS [o]
INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[UserId] = @__userId_0
ORDER BY [o].[OrderDate] DESC
[2025-12-16 00:41:57.352] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b". Количество: 3
[2025-12-16 00:41:57.354] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:41:57.356] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 25.8433ms
[2025-12-16 00:41:57.356] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 00:41:57.357] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - 200 null application/json; charset=utf-8 39.4951ms
[2025-12-16 00:42:03.953] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/e72b04d4-0a81-4dde-a7d4-8a2e4b77b013 - null null
[2025-12-16 00:42:03.955] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:03.956] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/e72b04d4-0a81-4dde-a7d4-8a2e4b77b013 - 204 null null 2.6171ms
[2025-12-16 00:42:03.958] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/e72b04d4-0a81-4dde-a7d4-8a2e4b77b013 - null null
[2025-12-16 00:42:03.961] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:03.962] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 00:42:03.966] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-16 00:42:03.985] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:42:03.996] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-16 00:42:03.999] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:42:04.001] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 33.231ms
[2025-12-16 00:42:04.002] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 00:42:04.003] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/e72b04d4-0a81-4dde-a7d4-8a2e4b77b013 - 200 null application/json; charset=utf-8 45.1081ms
[2025-12-16 00:42:24.304] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 00:42:24.306] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:24.307] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 00:42:24.307] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:42:24.307] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 3.1538ms
[2025-12-16 00:42:24.309] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 00:42:24.310] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:24.312] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:24.316] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:24.317] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 10.0609ms
[2025-12-16 00:42:24.317] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 10.4301ms
[2025-12-16 00:42:24.318] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 00:42:24.319] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 00:42:24.320] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:42:24.326] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 00:42:24.328] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:24.330] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:24.334] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:42:24.335] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:42:24.335] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 00:42:24.336] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 00:42:24.336] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:42:24.342] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:42:24.342] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:42:24.344] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:42:24.345] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 00:42:24.346] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:42:24.347] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 15.4585ms
[2025-12-16 00:42:24.347] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:42:24.347] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 00:42:24.349] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 00:42:24.353] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 00:42:24.354] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 12, Всего: 12, Страница: 1, Размер страницы: 1000
[2025-12-16 00:42:24.355] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 45.6061ms
[2025-12-16 00:42:24.357] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:42:24.358] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:42:24.358] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 00:42:24.363] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 24.5443ms
[2025-12-16 00:42:24.365] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 25.3677ms
[2025-12-16 00:42:24.367] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:24.368] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:42:24.369] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:42:24.370] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 11.8162ms
[2025-12-16 00:42:24.371] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 51.4723ms
[2025-12-16 00:42:24.372] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 00:42:24.372] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 52.251ms
[2025-12-16 00:42:24.379] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:24.381] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 00:42:24.382] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 00:42:24.388] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 00:42:24.393] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 00:42:24.395] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 00:42:24.396] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:42:24.398] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 13.8081ms
[2025-12-16 00:42:24.400] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 00:42:24.401] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 29.4322ms
[2025-12-16 00:42:25.955] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:42:25.957] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:25.958] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 3.2526ms
[2025-12-16 00:42:25.960] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:42:25.963] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:25.964] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:42:25.965] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:42:25.969] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:42:25.972] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:42:25.976] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:42:25.978] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:42:25.984] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:42:25.986] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 24190.00, Заказов: 8
[2025-12-16 00:42:25.987] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:42:25.989] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 22.3862ms
[2025-12-16 00:42:25.991] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:42:25.991] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 31.1813ms
[2025-12-16 00:42:25.998] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:42:26.001] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:26.002] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 3.486ms
[2025-12-16 00:42:26.003] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:42:26.006] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:26.007] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:42:26.009] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:42:26.031] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:42:26.034] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:42:26.034] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:42:26.035] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 25.1059ms
[2025-12-16 00:42:26.036] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:42:26.037] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 33.6514ms
[2025-12-16 00:42:26.040] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:42:26.042] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:26.042] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.5757ms
[2025-12-16 00:42:26.044] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:42:26.046] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:26.047] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:42:26.048] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:42:26.056] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:42:26.058] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:42:26.059] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 9.463ms
[2025-12-16 00:42:26.060] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:42:26.061] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 16.7182ms
[2025-12-16 00:42:26.063] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:42:26.065] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:26.066] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 2.2198ms
[2025-12-16 00:42:26.068] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:42:26.070] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:26.071] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:42:26.072] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:42:26.076] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:42:26.078] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:42:26.079] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 5.7031ms
[2025-12-16 00:42:26.080] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:42:26.081] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 12.8478ms
[2025-12-16 00:42:26.086] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:42:26.088] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:26.088] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.7137ms
[2025-12-16 00:42:26.091] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:42:26.094] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:26.094] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:42:26.095] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:42:26.099] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-16 00:42:26.101] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:42:26.103] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.8635ms
[2025-12-16 00:42:26.104] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:42:26.104] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 13.83ms
[2025-12-16 00:42:26.525] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 00:42:26.527] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:26.529] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - 204 null null 3.7809ms
[2025-12-16 00:42:26.531] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 00:42:26.535] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:26.536] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 00:42:26.537] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMyOrders() on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 00:42:26.540] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [u].[Username], [o].[OrderDate], [o].[Status], [o].[Total], [o].[Notes]
FROM [Orders] AS [o]
INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[UserId] = @__userId_0
ORDER BY [o].[OrderDate] DESC
[2025-12-16 00:42:26.541] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b". Количество: 3
[2025-12-16 00:42:26.542] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:42:26.544] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 5.1465ms
[2025-12-16 00:42:26.545] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 00:42:26.546] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - 200 null application/json; charset=utf-8 15.1132ms
[2025-12-16 00:42:27.015] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:42:27.018] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:27.020] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:42:27.021] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:42:27.024] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:42:27.027] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:42:27.029] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:42:27.032] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:42:27.036] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:42:27.039] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 24190.00, Заказов: 8
[2025-12-16 00:42:27.040] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:42:27.041] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 17.9364ms
[2025-12-16 00:42:27.043] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:42:27.044] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 29.2916ms
[2025-12-16 00:42:27.048] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:42:27.050] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:27.051] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:42:27.052] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:42:27.056] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:42:27.058] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:42:27.060] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:42:27.061] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 7.784ms
[2025-12-16 00:42:27.062] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:42:27.063] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 15.5877ms
[2025-12-16 00:42:27.067] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:42:27.070] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:27.070] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:42:27.071] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:42:27.075] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:42:27.076] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:42:27.077] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 4.2598ms
[2025-12-16 00:42:27.078] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:42:27.079] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 11.8025ms
[2025-12-16 00:42:27.082] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:42:27.084] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:27.085] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:42:27.086] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:42:27.088] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:42:27.090] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:42:27.091] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 4.0227ms
[2025-12-16 00:42:27.092] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:42:27.093] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 11.018ms
[2025-12-16 00:42:27.097] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:42:27.099] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:42:27.100] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:42:27.101] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:42:27.104] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-16 00:42:27.106] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:42:27.107] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 4.3574ms
[2025-12-16 00:42:27.108] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:42:27.109] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 11.7777ms
[2025-12-16 00:45:50.766] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:45:50.771] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:45:50.771] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 5.0124ms
[2025-12-16 00:45:50.774] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:45:50.780] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:45:50.781] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:45:50.782] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:45:50.786] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:45:50.789] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:45:50.795] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:45:50.801] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:45:50.805] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:45:50.807] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 24190.00, Заказов: 8
[2025-12-16 00:45:50.808] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:45:50.809] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 25.1251ms
[2025-12-16 00:45:50.810] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:45:50.811] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 36.4444ms
[2025-12-16 00:45:50.816] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:45:50.818] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:45:50.819] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 2.9645ms
[2025-12-16 00:45:50.821] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:45:50.823] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:45:50.824] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:45:50.825] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:45:50.834] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:45:50.835] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:45:50.836] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:45:50.837] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 10.6984ms
[2025-12-16 00:45:50.838] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:45:50.840] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 19.0892ms
[2025-12-16 00:45:50.844] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:45:50.846] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:45:50.847] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 3.2239ms
[2025-12-16 00:45:50.849] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:45:50.852] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:45:50.852] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:45:50.853] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:45:50.861] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:45:50.863] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:45:50.864] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 10.2115ms
[2025-12-16 00:45:50.865] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:45:50.866] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 16.983ms
[2025-12-16 00:45:50.870] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:45:50.872] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:45:50.873] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 2.7096ms
[2025-12-16 00:45:50.875] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:45:50.877] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:45:50.878] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:45:50.879] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:45:50.884] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:45:50.885] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:45:50.887] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 6.112ms
[2025-12-16 00:45:50.888] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:45:50.889] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 13.9492ms
[2025-12-16 00:45:50.897] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:45:50.899] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:45:50.900] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.5654ms
[2025-12-16 00:45:50.902] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:45:50.905] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:45:50.905] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:45:50.906] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:45:50.910] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-16 00:45:50.912] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:45:50.913] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.3947ms
[2025-12-16 00:45:50.914] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:45:50.915] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 13.0414ms
[2025-12-16 00:45:57.558] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:45:57.714] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:45:57.715] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 157.5351ms
[2025-12-16 00:45:57.717] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:45:57.726] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:45:57.727] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:45:57.728] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:45:57.730] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:45:57.733] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:45:57.735] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:45:57.737] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:45:57.740] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:45:57.742] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 24190.00, Заказов: 8
[2025-12-16 00:45:57.743] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:45:57.744] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 15.1202ms
[2025-12-16 00:45:57.745] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:45:57.746] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 28.9771ms
[2025-12-16 00:45:57.750] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:45:57.752] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:45:57.753] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 2.997ms
[2025-12-16 00:45:57.755] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:45:57.759] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:45:57.759] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:45:57.760] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:45:57.765] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:45:57.768] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:45:57.769] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:45:57.770] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 7.5327ms
[2025-12-16 00:45:57.771] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:45:57.772] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 16.5345ms
[2025-12-16 00:45:57.775] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:45:57.776] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:45:57.776] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 1.5593ms
[2025-12-16 00:45:57.781] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:45:57.784] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:45:57.785] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:45:57.785] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:45:57.795] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:45:57.803] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:45:57.804] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 12.2096ms
[2025-12-16 00:45:57.806] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:45:57.807] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 26.0824ms
[2025-12-16 00:45:57.813] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:45:57.821] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:45:57.822] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 9.0656ms
[2025-12-16 00:45:57.824] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:45:57.827] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:45:57.828] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:45:57.829] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:45:57.832] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:45:57.834] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:45:57.835] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 4.864ms
[2025-12-16 00:45:57.836] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:45:57.837] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 12.5027ms
[2025-12-16 00:45:57.843] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:45:57.845] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:45:57.846] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 3.2712ms
[2025-12-16 00:45:57.849] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:45:57.851] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:45:57.852] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:45:57.853] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:45:57.856] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-16 00:45:57.858] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:45:57.859] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 4.4337ms
[2025-12-16 00:45:57.860] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:45:57.862] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 12.9799ms
[2025-12-16 00:46:26.307] [INF] [] Запуск приложения Restaurant API
[2025-12-16 00:46:26.780] [INF] [] Приложение Restaurant API успешно запущено
[2025-12-16 00:46:26.829] [INF] [Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager] User profile is available. Using 'C:\Users\motya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-12-16 00:46:26.998] [INF] [Microsoft.Hosting.Lifetime] Now listening on: https://localhost:7188
[2025-12-16 00:46:27.000] [INF] [Microsoft.Hosting.Lifetime] Now listening on: http://localhost:5143
[2025-12-16 00:46:27.142] [INF] [Microsoft.Hosting.Lifetime] Application started. Press Ctrl+C to shut down.
[2025-12-16 00:46:27.145] [INF] [Microsoft.Hosting.Lifetime] Hosting environment: Development
[2025-12-16 00:46:27.147] [INF] [Microsoft.Hosting.Lifetime] Content root path: D:\restaurant-project\RestaurantAPI\RestaurantApi
[2025-12-16 00:46:27.147] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/index.html - null null
[2025-12-16 00:46:27.375] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/index.html - 200 null text/html;charset=utf-8 228.9133ms
[2025-12-16 00:46:27.417] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - null null
[2025-12-16 00:46:27.434] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 16.737ms
[2025-12-16 00:46:27.447] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_vs/browserLink - null null
[2025-12-16 00:46:27.490] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.4339ms
[2025-12-16 00:46:27.627] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - null null
[2025-12-16 00:46:27.679] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 51.8411ms
[2025-12-16 00:46:28.455] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:46:28.465] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:46:28.469] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 14.7485ms
[2025-12-16 00:46:28.472] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:46:28.482] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:46:28.598] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:46:28.641] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:46:30.170] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:46:30.242] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:46:30.264] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:46:30.274] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:46:30.308] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:46:30.314] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 24190.00, Заказов: 8
[2025-12-16 00:46:30.320] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:46:30.338] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 1688.6819ms
[2025-12-16 00:46:30.341] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:46:30.347] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:46:30.348] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 1875.3525ms
[2025-12-16 00:46:30.350] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:46:30.353] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 5.5469ms
[2025-12-16 00:46:30.355] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:46:30.358] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:46:30.362] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:46:30.369] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:46:30.487] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (37ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:46:30.492] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:46:30.493] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:46:30.499] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 129.1288ms
[2025-12-16 00:46:30.501] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:46:30.502] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 146.9114ms
[2025-12-16 00:46:30.505] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:46:30.507] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:46:30.507] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.5865ms
[2025-12-16 00:46:30.509] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:46:30.513] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:46:30.516] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:46:30.520] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:46:30.600] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:46:30.605] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:46:30.609] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 87.4072ms
[2025-12-16 00:46:30.611] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:46:30.612] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 103.1039ms
[2025-12-16 00:46:30.632] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:46:30.634] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:46:30.635] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 3.733ms
[2025-12-16 00:46:30.637] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:46:30.640] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:46:30.641] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:46:30.646] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:46:30.665] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:46:30.668] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:46:30.674] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 26.3329ms
[2025-12-16 00:46:30.675] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:46:30.676] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 39.1541ms
[2025-12-16 00:46:30.682] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:46:30.685] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:46:30.686] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 4.068ms
[2025-12-16 00:46:30.688] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:46:30.690] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:46:30.691] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:46:30.697] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:46:30.714] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-16 00:46:30.721] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:46:30.724] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 25.1633ms
[2025-12-16 00:46:30.725] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:46:30.726] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 38.5704ms
[2025-12-16 00:51:28.420] [INF] [] Запуск приложения Restaurant API
[2025-12-16 00:51:28.736] [INF] [] Приложение Restaurant API успешно запущено
[2025-12-16 00:51:28.761] [INF] [Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager] User profile is available. Using 'C:\Users\motya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-12-16 00:51:28.873] [INF] [Microsoft.Hosting.Lifetime] Now listening on: https://localhost:7188
[2025-12-16 00:51:28.874] [INF] [Microsoft.Hosting.Lifetime] Now listening on: http://localhost:5143
[2025-12-16 00:51:28.966] [INF] [Microsoft.Hosting.Lifetime] Application started. Press Ctrl+C to shut down.
[2025-12-16 00:51:28.968] [INF] [Microsoft.Hosting.Lifetime] Hosting environment: Development
[2025-12-16 00:51:28.969] [INF] [Microsoft.Hosting.Lifetime] Content root path: D:\restaurant-project\RestaurantAPI\RestaurantApi
[2025-12-16 00:51:29.391] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/index.html - null null
[2025-12-16 00:51:29.587] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/index.html - 200 null text/html;charset=utf-8 197.8597ms
[2025-12-16 00:51:29.696] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - null null
[2025-12-16 00:51:29.697] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_vs/browserLink - null null
[2025-12-16 00:51:29.721] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 25.2878ms
[2025-12-16 00:51:29.757] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_vs/browserLink - 200 null text/javascript; charset=UTF-8 60.14ms
[2025-12-16 00:51:29.884] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - null null
[2025-12-16 00:51:29.956] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 71.4822ms
[2025-12-16 00:52:00.817] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 00:52:00.817] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:52:00.817] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 00:52:00.827] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:52:00.827] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:52:00.827] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:52:00.831] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 13.3068ms
[2025-12-16 00:52:00.831] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 13.3069ms
[2025-12-16 00:52:00.831] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 13.3069ms
[2025-12-16 00:52:00.835] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 00:52:00.835] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 00:52:00.835] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 00:52:00.847] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:52:00.847] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:52:00.851] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:52:00.919] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:52:00.919] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 00:52:00.919] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:52:00.942] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 00:52:00.942] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 00:52:00.942] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 00:52:02.166] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:52:02.166] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:52:02.166] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:52:02.231] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:52:02.231] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 00:52:02.236] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 00:52:02.236] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 00:52:02.241] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 00:52:02.245] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:52:02.245] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:52:02.245] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 12, Всего: 12, Страница: 1, Размер страницы: 1000
[2025-12-16 00:52:02.249] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:52:02.258] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 1312.3259ms
[2025-12-16 00:52:02.258] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 1310.0797ms
[2025-12-16 00:52:02.259] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 1311.7339ms
[2025-12-16 00:52:02.260] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 00:52:02.261] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 00:52:02.262] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 00:52:02.267] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 00:52:02.269] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 1434.1548ms
[2025-12-16 00:52:02.269] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 1433.868ms
[2025-12-16 00:52:02.269] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 1434.1548ms
[2025-12-16 00:52:02.270] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:52:02.277] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 9.7259ms
[2025-12-16 00:52:02.279] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 00:52:02.282] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:52:02.285] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 00:52:02.291] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 00:52:02.373] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 00:52:02.387] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 00:52:02.389] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 00:52:02.391] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:52:02.394] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 101.804ms
[2025-12-16 00:52:02.395] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 00:52:02.396] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 117.0689ms
[2025-12-16 00:52:05.664] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:52:05.668] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:52:05.671] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 6.3718ms
[2025-12-16 00:52:05.673] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 00:52:05.679] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:52:05.682] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:52:05.688] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:52:05.713] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:52:05.723] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:52:05.733] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:52:05.740] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 00:52:05.769] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 00:52:05.772] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 24190.00, Заказов: 8
[2025-12-16 00:52:05.775] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 00:52:05.781] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 89.6024ms
[2025-12-16 00:52:05.782] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 00:52:05.783] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 110.3064ms
[2025-12-16 00:52:05.786] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:52:05.788] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:52:05.789] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 2.854ms
[2025-12-16 00:52:05.792] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 00:52:05.794] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:52:05.796] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:52:05.800] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:52:05.836] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 00:52:05.838] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 00:52:05.839] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:52:05.843] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 40.6261ms
[2025-12-16 00:52:05.844] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 00:52:05.845] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 53.6935ms
[2025-12-16 00:52:05.850] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:52:05.852] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:52:05.853] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.497ms
[2025-12-16 00:52:05.854] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 00:52:05.858] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:52:05.860] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:52:05.865] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:52:05.885] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 00:52:05.888] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:52:05.891] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 23.8474ms
[2025-12-16 00:52:05.892] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 00:52:05.893] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 38.5829ms
[2025-12-16 00:52:05.898] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:52:05.900] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:52:05.901] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 2.8761ms
[2025-12-16 00:52:05.902] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 00:52:05.905] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:52:05.906] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:52:05.910] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:52:05.925] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 00:52:05.929] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:52:05.935] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 23.4305ms
[2025-12-16 00:52:05.937] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 00:52:05.938] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 35.4071ms
[2025-12-16 00:52:05.945] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:52:05.948] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:52:05.948] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 3.0339ms
[2025-12-16 00:52:05.950] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 00:52:05.953] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 00:52:05.954] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:52:05.959] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 00:52:05.975] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-16 00:52:05.983] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 00:52:05.986] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 24.9783ms
[2025-12-16 00:52:05.987] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 00:52:05.988] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 37.8499ms
[2025-12-16 10:08:39.365] [INF] [] Запуск приложения Restaurant API
[2025-12-16 10:08:42.020] [INF] [] Приложение Restaurant API успешно запущено
[2025-12-16 10:08:42.065] [INF] [Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager] User profile is available. Using 'C:\Users\motya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-12-16 10:08:42.341] [INF] [Microsoft.Hosting.Lifetime] Now listening on: https://localhost:7188
[2025-12-16 10:08:42.344] [INF] [Microsoft.Hosting.Lifetime] Now listening on: http://localhost:5143
[2025-12-16 10:08:42.550] [INF] [Microsoft.Hosting.Lifetime] Application started. Press Ctrl+C to shut down.
[2025-12-16 10:08:42.553] [INF] [Microsoft.Hosting.Lifetime] Hosting environment: Development
[2025-12-16 10:08:42.556] [INF] [Microsoft.Hosting.Lifetime] Content root path: D:\restaurant-project\RestaurantAPI\RestaurantApi
[2025-12-16 10:08:45.560] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/index.html - null null
[2025-12-16 10:08:45.862] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/index.html - 200 null text/html;charset=utf-8 304.2922ms
[2025-12-16 10:08:46.704] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - null null
[2025-12-16 10:08:46.714] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 10.1514ms
[2025-12-16 10:08:46.717] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_vs/browserLink - null null
[2025-12-16 10:08:46.809] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_vs/browserLink - 200 null text/javascript; charset=UTF-8 91.9124ms
[2025-12-16 10:08:47.921] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - null null
[2025-12-16 10:08:48.115] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 194.2047ms
[2025-12-16 10:08:55.525] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - null null
[2025-12-16 10:08:55.546] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:08:55.553] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - 204 null null 27.9918ms
[2025-12-16 10:08:55.556] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Auth/login - application/json 44
[2025-12-16 10:08:55.575] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:08:58.437] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 10:08:58.521] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.AuthResponseDto]] Login(RestaurantAPI.DTOs.UserLoginDto) on controller RestaurantAPI.Controllers.AuthController (RestaurantApi).
[2025-12-16 10:09:05.890] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (300ms) [Parameters=[@__dto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Username] = @__dto_Username_0
[2025-12-16 10:09:07.731] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (51ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [JwtTokens] ([CreatedAt], [ExpiresAt], [Revoked], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
[2025-12-16 10:09:07.791] [INF] [RestaurantAPI.Controllers.AuthController] Пользователь admin успешно вошел в систему
[2025-12-16 10:09:07.812] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'RestaurantAPI.DTOs.AuthResponseDto'.
[2025-12-16 10:09:07.845] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.AuthController.Login (RestaurantApi) in 9310.1136ms
[2025-12-16 10:09:07.850] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 10:09:07.870] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Auth/login - 499 null application/json; charset=utf-8 12313.7897ms
[2025-12-16 10:09:10.541] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - null null
[2025-12-16 10:09:10.552] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:10.557] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - 204 null null 15.9889ms
[2025-12-16 10:09:10.564] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Auth/login - application/json 44
[2025-12-16 10:09:10.574] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:10.577] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 10:09:10.583] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.AuthResponseDto]] Login(RestaurantAPI.DTOs.UserLoginDto) on controller RestaurantAPI.Controllers.AuthController (RestaurantApi).
[2025-12-16 10:09:10.634] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__dto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Username] = @__dto_Username_0
[2025-12-16 10:09:11.146] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [JwtTokens] ([CreatedAt], [ExpiresAt], [Revoked], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
[2025-12-16 10:09:11.157] [INF] [RestaurantAPI.Controllers.AuthController] Пользователь admin успешно вошел в систему
[2025-12-16 10:09:11.160] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'RestaurantAPI.DTOs.AuthResponseDto'.
[2025-12-16 10:09:11.165] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.AuthController.Login (RestaurantApi) in 578.8436ms
[2025-12-16 10:09:11.169] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 10:09:11.172] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Auth/login - 200 null application/json; charset=utf-8 608.7033ms
[2025-12-16 10:09:11.595] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:09:11.598] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:09:11.598] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:09:11.603] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:11.608] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:11.613] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:11.616] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 20.36ms
[2025-12-16 10:09:11.618] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 19.9721ms
[2025-12-16 10:09:11.618] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:09:11.619] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 21.2897ms
[2025-12-16 10:09:11.622] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:09:11.623] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:09:11.643] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:11.655] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:11.659] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:11.736] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:09:11.737] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:09:11.737] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:09:11.745] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:09:11.750] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 10:09:11.750] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:09:12.049] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:09:12.049] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:09:12.049] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:09:12.102] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:09:12.102] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:09:12.111] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 10:09:12.111] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:09:12.116] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:09:12.117] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:09:12.123] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:09:12.132] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 12, Всего: 12, Страница: 1, Размер страницы: 1000
[2025-12-16 10:09:12.138] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:09:12.141] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 384.9623ms
[2025-12-16 10:09:12.142] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 379.7568ms
[2025-12-16 10:09:12.143] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:09:12.146] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:09:12.148] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 529.2876ms
[2025-12-16 10:09:12.149] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 526.2711ms
[2025-12-16 10:09:12.152] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:09:12.154] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 401.924ms
[2025-12-16 10:09:12.163] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:12.167] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:09:12.169] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 17.6159ms
[2025-12-16 10:09:12.170] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 548.3848ms
[2025-12-16 10:09:12.172] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:09:12.185] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:12.191] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:09:12.201] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:09:12.245] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:09:12.278] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:09:12.284] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 10:09:12.288] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:09:12.296] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 89.3649ms
[2025-12-16 10:09:12.298] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:09:12.302] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 129.0116ms
[2025-12-16 10:09:14.800] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=c14b7bc6-a42f-4aa6-821e-694beb05a2eb&pageSize=1000 - null null
[2025-12-16 10:09:14.807] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:14.809] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=c14b7bc6-a42f-4aa6-821e-694beb05a2eb&pageSize=1000 - 204 null null 8.4047ms
[2025-12-16 10:09:14.811] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=c14b7bc6-a42f-4aa6-821e-694beb05a2eb&pageSize=1000 - null null
[2025-12-16 10:09:14.826] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:14.828] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 10:09:14.836] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishIngredients", controller = "DishIngredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishIngredients(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishIngredientsController (RestaurantApi).
[2025-12-16 10:09:14.866] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DishIngredients] AS [d]
INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
[2025-12-16 10:09:14.892] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[DishId], [s].[Name] AS [DishName], [s].[IngredientId], [i].[Name] AS [IngredientName], [s].[Quantity]
FROM (
    SELECT [d].[Id], [d].[DishId], [d].[IngredientId], [d].[Quantity], [d0].[Name]
    FROM [DishIngredients] AS [d]
    INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
    ORDER BY [d0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Ingredients] AS [i] ON [s].[IngredientId] = [i].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:09:14.897] [INF] [RestaurantAPI.Controllers.DishIngredientsController] Получен список ингредиентов блюд. Количество: 7, Всего: 7, Страница: 1
[2025-12-16 10:09:14.900] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishIngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:09:14.907] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi) in 67.1229ms
[2025-12-16 10:09:14.910] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 10:09:14.912] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=c14b7bc6-a42f-4aa6-821e-694beb05a2eb&pageSize=1000 - 200 null application/json; charset=utf-8 100.2347ms
[2025-12-16 10:09:19.285] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - null null
[2025-12-16 10:09:19.288] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:19.291] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - 204 null null 5.7681ms
[2025-12-16 10:09:19.294] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - null null
[2025-12-16 10:09:19.303] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:19.308] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 10:09:19.313] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishIngredients", controller = "DishIngredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishIngredients(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishIngredientsController (RestaurantApi).
[2025-12-16 10:09:19.323] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DishIngredients] AS [d]
INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
[2025-12-16 10:09:19.339] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[DishId], [s].[Name] AS [DishName], [s].[IngredientId], [i].[Name] AS [IngredientName], [s].[Quantity]
FROM (
    SELECT [d].[Id], [d].[DishId], [d].[IngredientId], [d].[Quantity], [d0].[Name]
    FROM [DishIngredients] AS [d]
    INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
    ORDER BY [d0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Ingredients] AS [i] ON [s].[IngredientId] = [i].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:09:19.348] [INF] [RestaurantAPI.Controllers.DishIngredientsController] Получен список ингредиентов блюд. Количество: 5, Всего: 5, Страница: 1
[2025-12-16 10:09:19.352] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishIngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:09:19.357] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi) in 38.6305ms
[2025-12-16 10:09:19.359] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 10:09:19.365] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - 200 null application/json; charset=utf-8 71.1114ms
[2025-12-16 10:09:32.215] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-16 10:09:32.223] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:32.228] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 12.6706ms
[2025-12-16 10:09:32.230] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 208
[2025-12-16 10:09:32.244] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:32.246] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-16 10:09:32.263] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 10:09:32.367] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:09:32.375] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "601d547d-42ee-4d95-abc0-42bf30f4d94b", Notes: null, ItemsCount: 1
[2025-12-16 10:09:32.510] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-16 10:09:32.540] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:09:32.610] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "506c83ad-20ac-42f9-a32e-16f2701bad37", Quantity: 1, Notes: Удалено: Лист салата, Куриное филе
[2025-12-16 10:09:32.748] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p13='?' (DbType = Guid), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Orders] SET [Total] = @p12
OUTPUT 1
WHERE [Id] = @p13;
[2025-12-16 10:09:32.782] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "3d8eb0c2-3b63-499c-8f2e-0c84fdf02140" создан пользователем "601d547d-42ee-4d95-abc0-42bf30f4d94b". Сумма: 750.00, Блюд: 1
[2025-12-16 10:09:32.795] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-16 10:09:32.840] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 571.1657ms
[2025-12-16 10:09:32.843] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-16 10:09:32.846] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 615.5457ms
[2025-12-16 10:09:34.217] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 10:09:34.220] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:34.221] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - 204 null null 3.7819ms
[2025-12-16 10:09:34.224] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 10:09:34.228] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:34.231] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 10:09:34.240] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMyOrders() on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 10:09:34.273] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [u].[Username], [o].[OrderDate], [o].[Status], [o].[Total], [o].[Notes]
FROM [Orders] AS [o]
INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[UserId] = @__userId_0
ORDER BY [o].[OrderDate] DESC
[2025-12-16 10:09:34.282] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b". Количество: 4
[2025-12-16 10:09:34.284] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:09:34.287] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 42.6757ms
[2025-12-16 10:09:34.288] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 10:09:34.290] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - 200 null application/json; charset=utf-8 65.8568ms
[2025-12-16 10:09:35.071] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/3d8eb0c2-3b63-499c-8f2e-0c84fdf02140 - null null
[2025-12-16 10:09:35.080] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:35.083] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/3d8eb0c2-3b63-499c-8f2e-0c84fdf02140 - 204 null null 12.336ms
[2025-12-16 10:09:35.086] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/3d8eb0c2-3b63-499c-8f2e-0c84fdf02140 - null null
[2025-12-16 10:09:35.101] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:35.103] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 10:09:35.113] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-16 10:09:35.147] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:09:35.175] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-16 10:09:35.184] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:09:35.195] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 74.4183ms
[2025-12-16 10:09:35.200] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 10:09:35.205] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/3d8eb0c2-3b63-499c-8f2e-0c84fdf02140 - 200 null application/json; charset=utf-8 118.8306ms
[2025-12-16 10:09:36.396] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 10:09:36.404] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:36.405] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 8.5304ms
[2025-12-16 10:09:36.407] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 10:09:36.423] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:36.426] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 10:09:36.432] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:09:36.463] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:09:36.477] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:09:36.491] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:09:36.545] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:09:36.598] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 10:09:36.605] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 24940.00, Заказов: 9
[2025-12-16 10:09:36.609] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:09:36.622] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 187.296ms
[2025-12-16 10:09:36.624] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 10:09:36.626] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 218.2768ms
[2025-12-16 10:09:36.631] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 10:09:36.636] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:36.638] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 7.3614ms
[2025-12-16 10:09:36.651] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 10:09:36.656] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:36.658] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 10:09:36.669] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:09:36.744] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (27ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 10:09:36.749] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 10:09:36.752] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:09:36.762] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 89.3359ms
[2025-12-16 10:09:36.764] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 10:09:36.767] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 116.0867ms
[2025-12-16 10:09:36.771] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 10:09:36.776] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:36.778] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 6.5945ms
[2025-12-16 10:09:36.780] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 10:09:36.789] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:36.792] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 10:09:36.804] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:09:36.846] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 10:09:36.853] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:09:36.863] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 54.9234ms
[2025-12-16 10:09:36.865] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 10:09:36.868] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 87.5094ms
[2025-12-16 10:09:36.908] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 10:09:36.912] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:36.913] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 4.8432ms
[2025-12-16 10:09:36.915] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 10:09:36.920] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:36.924] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 10:09:36.932] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:09:36.959] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 10:09:36.964] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:09:36.971] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 34.8396ms
[2025-12-16 10:09:36.973] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 10:09:36.975] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 59.7618ms
[2025-12-16 10:09:36.983] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 10:09:36.986] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:36.988] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 5.2543ms
[2025-12-16 10:09:36.990] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 10:09:36.996] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:36.999] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 10:09:37.005] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:09:37.039] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-16 10:09:37.056] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:09:37.063] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 55.5442ms
[2025-12-16 10:09:37.066] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 10:09:37.068] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 77.6741ms
[2025-12-16 10:09:42.466] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:09:42.467] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories - null null
[2025-12-16 10:09:42.479] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:42.475] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:42.480] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories - 204 null null 12.8995ms
[2025-12-16 10:09:42.483] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories - null null
[2025-12-16 10:09:42.483] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 17.1011ms
[2025-12-16 10:09:42.486] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:09:42.492] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:42.507] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:42.510] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:09:42.512] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:09:42.514] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:09:42.515] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:09:42.522] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:09:42.524] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:09:42.528] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:09:42.532] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:09:42.535] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:09:42.538] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 12, Всего: 12, Страница: 1, Размер страницы: 1000
[2025-12-16 10:09:42.539] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:09:42.541] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:09:42.543] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 24.6857ms
[2025-12-16 10:09:42.544] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 23.1022ms
[2025-12-16 10:09:42.546] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:09:42.548] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories - 200 null application/json; charset=utf-8 65.7893ms
[2025-12-16 10:09:42.546] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:09:42.556] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 69.7723ms
[2025-12-16 10:09:44.136] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=1000 - null null
[2025-12-16 10:09:44.140] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:44.141] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=1000 - 204 null null 5.5336ms
[2025-12-16 10:09:44.144] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=1000 - null null
[2025-12-16 10:09:44.149] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:44.151] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:09:44.152] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 10:09:44.160] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:09:44.167] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:09:44.171] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 10:09:44.174] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:09:44.176] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 19.4472ms
[2025-12-16 10:09:44.178] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:09:44.180] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=1000 - 200 null application/json; charset=utf-8 36.0002ms
[2025-12-16 10:09:45.233] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Ingredients?pageSize=1000 - null null
[2025-12-16 10:09:45.236] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:45.237] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Ingredients?pageSize=1000 - 204 null null 3.488ms
[2025-12-16 10:09:45.239] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - null null
[2025-12-16 10:09:45.244] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:45.246] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-16 10:09:45.257] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetIngredients", controller = "Ingredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetIngredients(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.IngredientsController (RestaurantApi).
[2025-12-16 10:09:45.275] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:09:45.295] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[Name]
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
ORDER BY [i].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:09:45.299] [INF] [RestaurantAPI.Controllers.IngredientsController] Получен список ингредиентов. Количество: 24, Всего: 24, Страница: 1
[2025-12-16 10:09:45.302] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.IngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:09:45.308] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi) in 48.7818ms
[2025-12-16 10:09:45.310] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-16 10:09:45.312] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - 200 null application/json; charset=utf-8 73.0568ms
[2025-12-16 10:09:46.997] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=1000 - null null
[2025-12-16 10:09:47.000] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:47.001] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=1000 - 204 null null 3.2471ms
[2025-12-16 10:09:47.003] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=1000 - null null
[2025-12-16 10:09:47.008] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:47.010] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:09:47.013] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:09:47.022] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:09:47.028] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:09:47.034] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:09:47.038] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:09:47.042] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 22.7289ms
[2025-12-16 10:09:47.044] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:09:47.046] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=1000 - 200 null application/json; charset=utf-8 42.7261ms
[2025-12-16 10:09:48.004] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 10:09:48.007] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Roles - null null
[2025-12-16 10:09:48.007] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:48.011] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:48.011] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 7.4548ms
[2025-12-16 10:09:48.012] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Roles - 204 null null 5.621ms
[2025-12-16 10:09:48.015] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 10:09:48.015] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Roles - null null
[2025-12-16 10:09:48.033] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:48.038] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:48.040] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 10:09:48.042] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi)'
[2025-12-16 10:09:48.052] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRoles", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRoles(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.RolesController (RestaurantApi).
[2025-12-16 10:09:48.054] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 10:09:48.072] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:09:48.086] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Roles] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:09:48.091] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[Username], [r].[Name] AS [RoleName]
FROM (
    SELECT [u].[Id], [u].[RoleId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-16 10:09:48.096] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 10:09:48.098] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:09:48.101] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
ORDER BY [r].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:09:48.106] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 49.4058ms
[2025-12-16 10:09:48.109] [INF] [RestaurantAPI.Controllers.RolesController] Получен список ролей. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 10:09:48.110] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 10:09:48.113] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.RoleReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:09:48.114] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 99.4642ms
[2025-12-16 10:09:48.120] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi) in 66.8475ms
[2025-12-16 10:09:48.126] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi)'
[2025-12-16 10:09:48.129] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Roles - 200 null application/json; charset=utf-8 113.9168ms
[2025-12-16 10:09:49.081] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 10:09:49.083] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 10:09:49.085] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:49.090] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:49.094] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 10:09:49.095] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 11.8623ms
[2025-12-16 10:09:49.097] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 10:09:49.098] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 10:09:49.116] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:09:49.119] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:49.125] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[Username], [r].[Name] AS [RoleName]
FROM (
    SELECT [u].[Id], [u].[RoleId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-16 10:09:49.126] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 10:09:49.129] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 10:09:49.133] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:09:49.136] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 10:09:49.139] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 25.0658ms
[2025-12-16 10:09:49.147] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 10:09:49.148] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 67.4412ms
[2025-12-16 10:09:49.157] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:09:49.180] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [u].[Username], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[Notes]
FROM (
    SELECT [o].[Id], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 10:09:49.186] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 10:09:49.190] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:09:49.195] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 51.4914ms
[2025-12-16 10:09:49.198] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 10:09:49.200] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 101.263ms
[2025-12-16 10:09:52.361] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/3d9aa4a5-ad47-4575-8155-1d85dd831954 - null null
[2025-12-16 10:09:52.363] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:52.364] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/3d9aa4a5-ad47-4575-8155-1d85dd831954 - 204 null null 3.4503ms
[2025-12-16 10:09:52.366] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/3d9aa4a5-ad47-4575-8155-1d85dd831954 - null null
[2025-12-16 10:09:52.378] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:52.383] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 10:09:52.388] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-16 10:09:52.395] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:09:52.406] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-16 10:09:52.414] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:09:52.421] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 29.5176ms
[2025-12-16 10:09:52.426] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 10:09:52.429] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/3d9aa4a5-ad47-4575-8155-1d85dd831954 - 200 null application/json; charset=utf-8 62.3727ms
[2025-12-16 10:09:54.560] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/048cacce-26b2-4ea3-971f-7d086212a131 - null null
[2025-12-16 10:09:54.564] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:54.566] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/048cacce-26b2-4ea3-971f-7d086212a131 - 204 null null 5.7943ms
[2025-12-16 10:09:54.568] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/048cacce-26b2-4ea3-971f-7d086212a131 - null null
[2025-12-16 10:09:54.573] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:54.576] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 10:09:54.581] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-16 10:09:54.590] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:09:54.600] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-16 10:09:54.604] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:09:54.608] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 21.4244ms
[2025-12-16 10:09:54.610] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 10:09:54.614] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/048cacce-26b2-4ea3-971f-7d086212a131 - 200 null application/json; charset=utf-8 45.9336ms
[2025-12-16 10:09:56.200] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/5d9639f0-c2b4-49eb-b6fa-4544a7361466 - null null
[2025-12-16 10:09:56.206] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:56.212] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/5d9639f0-c2b4-49eb-b6fa-4544a7361466 - 204 null null 12.0552ms
[2025-12-16 10:09:56.228] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/5d9639f0-c2b4-49eb-b6fa-4544a7361466 - null null
[2025-12-16 10:09:56.235] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:56.237] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 10:09:56.239] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-16 10:09:56.251] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:09:56.267] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-16 10:09:56.276] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:09:56.279] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 31.4409ms
[2025-12-16 10:09:56.281] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 10:09:56.284] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/5d9639f0-c2b4-49eb-b6fa-4544a7361466 - 200 null application/json; charset=utf-8 56.1775ms
[2025-12-16 10:09:57.394] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/a96bf1ce-7356-4001-bd4d-c7183080365b - null null
[2025-12-16 10:09:57.397] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:57.398] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/a96bf1ce-7356-4001-bd4d-c7183080365b - 204 null null 3.5301ms
[2025-12-16 10:09:57.400] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/a96bf1ce-7356-4001-bd4d-c7183080365b - null null
[2025-12-16 10:09:57.405] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:09:57.407] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 10:09:57.411] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-16 10:09:57.422] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:09:57.437] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-16 10:09:57.452] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:09:57.459] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 40.6285ms
[2025-12-16 10:09:57.462] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 10:09:57.467] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/a96bf1ce-7356-4001-bd4d-c7183080365b - 200 null application/json; charset=utf-8 66.9081ms
[2025-12-16 10:15:22.302] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - null null
[2025-12-16 10:15:22.305] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:15:22.307] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - 204 null null 5.1185ms
[2025-12-16 10:15:22.309] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Auth/login - application/json 44
[2025-12-16 10:15:22.316] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:15:22.317] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 10:15:22.318] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.AuthResponseDto]] Login(RestaurantAPI.DTOs.UserLoginDto) on controller RestaurantAPI.Controllers.AuthController (RestaurantApi).
[2025-12-16 10:15:22.344] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (12ms) [Parameters=[@__dto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Username] = @__dto_Username_0
[2025-12-16 10:15:22.856] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [JwtTokens] ([CreatedAt], [ExpiresAt], [Revoked], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
[2025-12-16 10:15:22.862] [INF] [RestaurantAPI.Controllers.AuthController] Пользователь admin успешно вошел в систему
[2025-12-16 10:15:22.863] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'RestaurantAPI.DTOs.AuthResponseDto'.
[2025-12-16 10:15:22.868] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.AuthController.Login (RestaurantApi) in 540.1572ms
[2025-12-16 10:15:22.870] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 10:15:22.872] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Auth/login - 200 null application/json; charset=utf-8 562.9533ms
[2025-12-16 10:15:22.980] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:15:22.982] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:15:22.982] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:15:22.981] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:15:22.990] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:15:22.985] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:15:22.990] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 10.6266ms
[2025-12-16 10:15:22.992] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 10.0714ms
[2025-12-16 10:15:22.996] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 13.873ms
[2025-12-16 10:15:22.996] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:15:22.998] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:15:22.999] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:15:23.018] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:15:23.031] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:15:23.036] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:15:23.039] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:15:23.040] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:15:23.043] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:15:23.046] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 10:15:23.049] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:15:23.052] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:15:23.065] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:15:23.071] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:15:23.073] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:15:23.076] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:15:23.080] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:15:23.081] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 10:15:23.081] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:15:23.083] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 12, Всего: 12, Страница: 1, Размер страницы: 1000
[2025-12-16 10:15:23.084] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:15:23.087] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:15:23.089] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:15:23.091] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 32.0387ms
[2025-12-16 10:15:23.092] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:15:23.093] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 30.5906ms
[2025-12-16 10:15:23.095] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:15:23.098] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 30.8776ms
[2025-12-16 10:15:23.100] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:15:23.103] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 106.9115ms
[2025-12-16 10:15:23.105] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:15:23.106] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 108.7809ms
[2025-12-16 10:15:23.108] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:15:23.113] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 114.2031ms
[2025-12-16 10:15:23.121] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:15:23.126] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 17.6612ms
[2025-12-16 10:15:23.129] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:15:23.137] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:15:23.140] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:15:23.143] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:15:23.153] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:15:23.162] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:15:23.168] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 10:15:23.172] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:15:23.177] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 29.915ms
[2025-12-16 10:15:23.179] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:15:23.181] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 51.6828ms
[2025-12-16 10:15:36.802] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - null null
[2025-12-16 10:15:36.805] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:15:36.806] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - 204 null null 3.7424ms
[2025-12-16 10:15:36.809] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - null null
[2025-12-16 10:15:36.825] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:15:36.827] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:15:36.829] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:15:36.844] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:15:36.861] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:15:36.870] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 10:15:36.876] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:15:36.885] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 45.5439ms
[2025-12-16 10:15:36.887] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:15:36.892] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - 200 null application/json; charset=utf-8 83.5259ms
[2025-12-16 10:15:39.629] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:15:39.634] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:15:39.635] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 5.5703ms
[2025-12-16 10:15:39.638] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:15:39.642] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:15:39.645] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:15:39.648] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:15:39.656] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:15:39.662] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:15:39.666] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 10:15:39.673] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:15:39.676] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 22.5703ms
[2025-12-16 10:15:39.678] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:15:39.683] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 45.1808ms
[2025-12-16 10:15:40.071] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - null null
[2025-12-16 10:15:40.075] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:15:40.078] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:15:40.081] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:15:40.093] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:15:40.107] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:15:40.111] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 10:15:40.114] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:15:40.124] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 34.5469ms
[2025-12-16 10:15:40.127] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:15:40.133] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - 200 null application/json; charset=utf-8 61.8348ms
[2025-12-16 10:15:40.738] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:15:40.742] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:15:40.744] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:15:40.750] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:15:40.760] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:15:40.766] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:15:40.776] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 10:15:40.780] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:15:40.783] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 24.6432ms
[2025-12-16 10:15:40.786] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:15:40.789] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 51.2677ms
[2025-12-16 10:15:41.399] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - null null
[2025-12-16 10:15:41.403] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:15:41.404] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:15:41.406] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:15:41.412] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:15:41.427] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:15:41.431] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 10:15:41.438] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:15:41.443] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 33.2684ms
[2025-12-16 10:15:41.445] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:15:41.449] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - 200 null application/json; charset=utf-8 49.8817ms
[2025-12-16 10:15:52.778] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=6df9d371-ed3e-43fc-a2f9-05f35cc8b457&pageSize=1000 - null null
[2025-12-16 10:15:52.782] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:15:52.783] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=6df9d371-ed3e-43fc-a2f9-05f35cc8b457&pageSize=1000 - 204 null null 4.2287ms
[2025-12-16 10:15:52.786] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=6df9d371-ed3e-43fc-a2f9-05f35cc8b457&pageSize=1000 - null null
[2025-12-16 10:15:52.793] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:15:52.794] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 10:15:52.795] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishIngredients", controller = "DishIngredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishIngredients(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishIngredientsController (RestaurantApi).
[2025-12-16 10:15:52.805] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DishIngredients] AS [d]
INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
[2025-12-16 10:15:52.817] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[DishId], [s].[Name] AS [DishName], [s].[IngredientId], [i].[Name] AS [IngredientName], [s].[Quantity]
FROM (
    SELECT [d].[Id], [d].[DishId], [d].[IngredientId], [d].[Quantity], [d0].[Name]
    FROM [DishIngredients] AS [d]
    INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
    ORDER BY [d0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Ingredients] AS [i] ON [s].[IngredientId] = [i].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:15:52.826] [INF] [RestaurantAPI.Controllers.DishIngredientsController] Получен список ингредиентов блюд. Количество: 4, Всего: 4, Страница: 1
[2025-12-16 10:15:52.829] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishIngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:15:52.838] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi) in 40.3761ms
[2025-12-16 10:15:52.840] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 10:15:52.842] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=6df9d371-ed3e-43fc-a2f9-05f35cc8b457&pageSize=1000 - 200 null application/json; charset=utf-8 56.3244ms
[2025-12-16 10:16:13.433] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=6df9d371-ed3e-43fc-a2f9-05f35cc8b457&pageSize=1000 - null null
[2025-12-16 10:16:13.437] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:13.438] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=6df9d371-ed3e-43fc-a2f9-05f35cc8b457&pageSize=1000 - 204 null null 4.4615ms
[2025-12-16 10:16:13.441] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=6df9d371-ed3e-43fc-a2f9-05f35cc8b457&pageSize=1000 - null null
[2025-12-16 10:16:13.445] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:13.446] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 10:16:13.449] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishIngredients", controller = "DishIngredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishIngredients(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishIngredientsController (RestaurantApi).
[2025-12-16 10:16:13.463] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DishIngredients] AS [d]
INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
[2025-12-16 10:16:13.477] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[DishId], [s].[Name] AS [DishName], [s].[IngredientId], [i].[Name] AS [IngredientName], [s].[Quantity]
FROM (
    SELECT [d].[Id], [d].[DishId], [d].[IngredientId], [d].[Quantity], [d0].[Name]
    FROM [DishIngredients] AS [d]
    INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
    ORDER BY [d0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Ingredients] AS [i] ON [s].[IngredientId] = [i].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:16:13.483] [INF] [RestaurantAPI.Controllers.DishIngredientsController] Получен список ингредиентов блюд. Количество: 4, Всего: 4, Страница: 1
[2025-12-16 10:16:13.487] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishIngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:16:13.491] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi) in 39.3795ms
[2025-12-16 10:16:13.494] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 10:16:13.497] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=6df9d371-ed3e-43fc-a2f9-05f35cc8b457&pageSize=1000 - 200 null application/json; charset=utf-8 56.0013ms
[2025-12-16 10:16:33.990] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:16:33.994] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:16:33.995] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:16:34.000] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:34.012] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 22.0964ms
[2025-12-16 10:16:34.010] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:34.006] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:34.016] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:16:34.017] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 22.4862ms
[2025-12-16 10:16:34.019] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 24.7558ms
[2025-12-16 10:16:34.020] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:16:34.021] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:16:34.023] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:34.034] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:34.040] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:34.041] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:16:34.043] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:16:34.046] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:16:34.047] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 10:16:34.049] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:16:34.051] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:16:34.061] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:16:34.063] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:16:34.071] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:16:34.078] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:16:34.081] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:16:34.085] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:16:34.086] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 12, Всего: 12, Страница: 1, Размер страницы: 1000
[2025-12-16 10:16:34.088] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 10:16:34.090] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:16:34.092] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:16:34.094] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:16:34.095] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:16:34.099] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 40.8803ms
[2025-12-16 10:16:34.101] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 45.1048ms
[2025-12-16 10:16:34.103] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 38.7795ms
[2025-12-16 10:16:34.105] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:16:34.107] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:16:34.110] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:16:34.113] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 92.8641ms
[2025-12-16 10:16:34.114] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 98.3495ms
[2025-12-16 10:16:34.116] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 95.5386ms
[2025-12-16 10:16:34.119] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:16:34.139] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:34.140] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 21.6707ms
[2025-12-16 10:16:34.143] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:16:34.149] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:34.168] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:16:34.170] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:16:34.181] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:16:34.198] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:16:34.205] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 10:16:34.208] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:16:34.211] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 37.032ms
[2025-12-16 10:16:34.213] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:16:34.215] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 71.6986ms
[2025-12-16 10:16:35.729] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - null null
[2025-12-16 10:16:35.733] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:35.735] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - 204 null null 6.3543ms
[2025-12-16 10:16:35.738] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - null null
[2025-12-16 10:16:35.742] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:35.745] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 10:16:35.746] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishIngredients", controller = "DishIngredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishIngredients(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishIngredientsController (RestaurantApi).
[2025-12-16 10:16:35.754] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DishIngredients] AS [d]
INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
[2025-12-16 10:16:35.757] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[DishId], [s].[Name] AS [DishName], [s].[IngredientId], [i].[Name] AS [IngredientName], [s].[Quantity]
FROM (
    SELECT [d].[Id], [d].[DishId], [d].[IngredientId], [d].[Quantity], [d0].[Name]
    FROM [DishIngredients] AS [d]
    INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
    ORDER BY [d0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Ingredients] AS [i] ON [s].[IngredientId] = [i].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:16:35.761] [INF] [RestaurantAPI.Controllers.DishIngredientsController] Получен список ингредиентов блюд. Количество: 5, Всего: 5, Страница: 1
[2025-12-16 10:16:35.763] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishIngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:16:35.764] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi) in 13.5423ms
[2025-12-16 10:16:35.766] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 10:16:35.767] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - 200 null application/json; charset=utf-8 28.8943ms
[2025-12-16 10:16:50.356] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:16:50.357] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:16:50.357] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:16:50.360] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:50.362] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:50.366] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:50.367] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 11.2781ms
[2025-12-16 10:16:50.368] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 11.6537ms
[2025-12-16 10:16:50.370] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 12.731ms
[2025-12-16 10:16:50.370] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:16:50.371] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:16:50.390] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:50.388] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:50.392] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:16:50.391] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:16:50.372] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:16:50.399] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:50.398] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:16:50.395] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 10:16:50.400] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:16:50.407] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:16:50.407] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:16:50.408] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:16:50.409] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:16:50.414] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:16:50.416] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:16:50.420] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:16:50.438] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 12, Всего: 12, Страница: 1, Размер страницы: 1000
[2025-12-16 10:16:50.427] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 10:16:50.422] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:16:50.446] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:16:50.450] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:16:50.457] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:16:50.461] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 52.727ms
[2025-12-16 10:16:50.464] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 58.9339ms
[2025-12-16 10:16:50.466] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 62.5192ms
[2025-12-16 10:16:50.467] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:16:50.469] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:16:50.470] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:16:50.472] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 99.8716ms
[2025-12-16 10:16:50.473] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 102.6688ms
[2025-12-16 10:16:50.474] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 103.5588ms
[2025-12-16 10:16:50.478] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:16:50.497] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:50.498] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 19.615ms
[2025-12-16 10:16:50.501] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:16:50.513] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:50.516] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:16:50.520] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:16:50.528] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:16:50.533] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:16:50.535] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 10:16:50.536] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:16:50.539] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 13.5651ms
[2025-12-16 10:16:50.540] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:16:50.542] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 41.4655ms
[2025-12-16 10:16:51.568] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - null null
[2025-12-16 10:16:51.573] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:51.575] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - 204 null null 6.5927ms
[2025-12-16 10:16:51.577] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - null null
[2025-12-16 10:16:51.583] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:51.584] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:16:51.586] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:16:51.592] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:16:51.596] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:16:51.599] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 10:16:51.602] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:16:51.603] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 14.1707ms
[2025-12-16 10:16:51.605] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:16:51.607] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - 200 null application/json; charset=utf-8 29.3777ms
[2025-12-16 10:16:54.898] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 10:16:54.904] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:54.906] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 8.4103ms
[2025-12-16 10:16:54.908] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 10:16:54.914] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:54.915] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 10:16:54.916] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:16:54.923] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:16:54.930] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:16:54.937] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:16:54.943] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:16:54.954] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 10:16:54.958] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 24940.00, Заказов: 9
[2025-12-16 10:16:54.959] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:16:54.960] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 43.0298ms
[2025-12-16 10:16:54.964] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 10:16:54.965] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 56.7867ms
[2025-12-16 10:16:54.970] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 10:16:54.973] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:54.974] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 3.3484ms
[2025-12-16 10:16:54.977] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 10:16:55.003] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:55.006] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 10:16:55.009] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:16:55.066] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (50ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 10:16:55.071] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 10:16:55.073] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:16:55.075] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 61.1961ms
[2025-12-16 10:16:55.077] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 10:16:55.079] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 102.1845ms
[2025-12-16 10:16:55.085] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 10:16:55.088] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:55.089] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 4.2381ms
[2025-12-16 10:16:55.091] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 10:16:55.097] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:55.099] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 10:16:55.100] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:16:55.114] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 10:16:55.116] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:16:55.118] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 16.4376ms
[2025-12-16 10:16:55.120] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 10:16:55.122] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 30.3159ms
[2025-12-16 10:16:55.128] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 10:16:55.133] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:55.134] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 5.8017ms
[2025-12-16 10:16:55.136] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 10:16:55.143] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:55.145] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 10:16:55.147] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:16:55.158] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 10:16:55.163] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:16:55.165] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 13.6347ms
[2025-12-16 10:16:55.167] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 10:16:55.168] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 32.37ms
[2025-12-16 10:16:55.181] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 10:16:55.184] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:55.185] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 4.7911ms
[2025-12-16 10:16:55.188] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 10:16:55.192] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:16:55.194] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 10:16:55.197] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:16:55.211] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-16 10:16:55.215] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:16:55.217] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 12.3662ms
[2025-12-16 10:16:55.218] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 10:16:55.220] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 32.1459ms
[2025-12-16 10:17:05.985] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:17:05.985] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories - null null
[2025-12-16 10:17:05.997] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:17:05.994] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:17:05.999] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories - 204 null null 13.1709ms
[2025-12-16 10:17:06.000] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 14.8366ms
[2025-12-16 10:17:06.001] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories - null null
[2025-12-16 10:17:06.002] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:17:06.015] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:17:06.025] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:17:06.029] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:17:06.031] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:17:06.033] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:17:06.035] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:17:06.041] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:17:06.047] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:17:06.049] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:17:06.054] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:17:06.056] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:17:06.060] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 12, Всего: 12, Страница: 1, Размер страницы: 1000
[2025-12-16 10:17:06.066] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:17:06.071] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:17:06.073] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 33.7105ms
[2025-12-16 10:17:06.075] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 31.8174ms
[2025-12-16 10:17:06.077] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:17:06.078] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:17:06.080] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories - 200 null application/json; charset=utf-8 79.1966ms
[2025-12-16 10:17:06.081] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 78.9039ms
[2025-12-16 10:17:10.222] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=1000 - null null
[2025-12-16 10:17:10.226] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:17:10.227] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=1000 - 204 null null 4.9659ms
[2025-12-16 10:17:10.229] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=1000 - null null
[2025-12-16 10:17:10.236] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:17:10.237] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:17:10.240] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 10:17:10.251] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:17:10.258] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:17:10.261] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 10:17:10.262] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:17:10.266] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 22.5119ms
[2025-12-16 10:17:10.268] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:17:10.270] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=1000 - 200 null application/json; charset=utf-8 40.8091ms
[2025-12-16 10:17:10.830] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:17:10.834] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories - null null
[2025-12-16 10:17:10.835] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:17:10.841] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:17:10.843] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:17:10.844] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:17:10.845] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:17:10.846] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:17:10.857] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:17:10.861] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:17:10.872] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:17:10.878] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:17:10.882] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:17:10.884] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:17:10.886] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 31.8732ms
[2025-12-16 10:17:10.889] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 12, Всего: 12, Страница: 1, Размер страницы: 1000
[2025-12-16 10:17:10.891] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:17:10.895] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:17:10.897] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories - 200 null application/json; charset=utf-8 63.2637ms
[2025-12-16 10:17:10.900] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 50.6402ms
[2025-12-16 10:17:10.911] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:17:10.914] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 84.1157ms
[2025-12-16 10:17:13.037] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?search=U&pageSize=1000 - null null
[2025-12-16 10:17:13.045] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:17:13.051] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?search=U&pageSize=1000 - 204 null null 13.9576ms
[2025-12-16 10:17:13.053] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?search=U&pageSize=1000 - null null
[2025-12-16 10:17:13.074] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:17:13.078] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:17:13.085] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:17:13.160] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (33ms) [Parameters=[@__search_0_contains='?' (Size = 200), @__search_0_contains_1='?' (Size = 500)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND ([d].[Name] LIKE @__search_0_contains ESCAPE N'\' OR ([d].[Description] IS NOT NULL AND [d].[Description] LIKE @__search_0_contains_1 ESCAPE N'\'))
[2025-12-16 10:17:13.194] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (12ms) [Parameters=[@__search_0_contains='?' (Size = 200), @__search_0_contains_1='?' (Size = 500), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND ([d].[Name] LIKE @__search_0_contains ESCAPE N'\' OR ([d].[Description] IS NOT NULL AND [d].[Description] LIKE @__search_0_contains_1 ESCAPE N'\'))
    ORDER BY [d].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:17:13.203] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 5, Всего: 5, Страница: 1, Размер страницы: 1000
[2025-12-16 10:17:13.208] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:17:13.211] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 118.0386ms
[2025-12-16 10:17:13.213] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:17:13.217] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?search=U&pageSize=1000 - 200 null application/json; charset=utf-8 163.4484ms
[2025-12-16 10:17:14.833] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:17:14.839] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:17:14.842] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 8.9415ms
[2025-12-16 10:17:14.844] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:17:14.853] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:17:14.855] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:17:14.860] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:17:14.874] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:17:14.894] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:17:14.904] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 12, Всего: 12, Страница: 1, Размер страницы: 1000
[2025-12-16 10:17:14.911] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:17:14.915] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 46.8334ms
[2025-12-16 10:17:14.918] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:17:14.921] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 76.4887ms
[2025-12-16 10:18:00.759] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes - null null
[2025-12-16 10:18:00.762] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:00.763] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes - 204 null null 4.842ms
[2025-12-16 10:18:00.766] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Dishes - application/json 121
[2025-12-16 10:18:00.772] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:00.774] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.CreateDish (RestaurantApi)'
[2025-12-16 10:18:00.781] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateDish", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.DishReadDto]] CreateDish(RestaurantAPI.DTOs.DishCreateDto) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:18:00.842] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__createDto_Name_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Dishes] AS [d]
        WHERE [d].[Name] = @__createDto_Name_0 AND [d].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[2025-12-16 10:18:00.868] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__createDto_CategoryId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[CreatedBy], [c].[DeletedAt], [c].[DeletedBy], [c].[IsDeleted], [c].[Name], [c].[Notes], [c].[UpdatedAt], [c].[UpdatedBy]
FROM [Categories] AS [c]
WHERE [c].[Id] = @__createDto_CategoryId_0 AND [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:18:00.976] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 100), @p3='?' (DbType = DateTime), @p4='?' (Size = 100), @p5='?' (Size = 500), @p6='?' (DbType = Boolean), @p7='?' (Size = 200), @p8='?' (Size = 4000), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = DateTime), @p11='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Dishes] ([CategoryId], [CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [Description], [IsDeleted], [Name], [Notes], [Price], [UpdatedAt], [UpdatedBy])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-16 10:18:00.992] [INF] [RestaurantAPI.Controllers.DishesController] Блюдо Mexican Shawerma создано администратором admin
[2025-12-16 10:18:00.999] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.DishReadDto'.
[2025-12-16 10:18:01.006] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.CreateDish (RestaurantApi) in 221.4291ms
[2025-12-16 10:18:01.008] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.CreateDish (RestaurantApi)'
[2025-12-16 10:18:01.011] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Dishes - 201 null application/json; charset=utf-8 244.427ms
[2025-12-16 10:18:01.016] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:18:01.020] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:01.021] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 5.4926ms
[2025-12-16 10:18:01.025] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:18:01.044] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:01.049] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:18:01.055] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:18:01.067] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:18:01.083] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:18:01.093] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-16 10:18:01.101] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:18:01.112] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 46.6035ms
[2025-12-16 10:18:01.114] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:18:01.117] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 91.6195ms
[2025-12-16 10:18:02.869] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=1000 - null null
[2025-12-16 10:18:02.875] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:02.878] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=1000 - 204 null null 9.7729ms
[2025-12-16 10:18:02.880] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=1000 - null null
[2025-12-16 10:18:02.887] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:02.901] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:18:02.906] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:18:02.916] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:18:02.926] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:18:02.930] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:18:02.933] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:18:02.936] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 27.194ms
[2025-12-16 10:18:02.939] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:18:02.940] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=1000 - 200 null application/json; charset=utf-8 59.452ms
[2025-12-16 10:18:09.090] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 10:18:09.094] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Roles - null null
[2025-12-16 10:18:09.095] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:09.097] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:09.098] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 7.6758ms
[2025-12-16 10:18:09.099] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Roles - 204 null null 4.0879ms
[2025-12-16 10:18:09.101] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 10:18:09.102] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Roles - null null
[2025-12-16 10:18:09.113] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:09.116] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:09.118] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 10:18:09.119] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi)'
[2025-12-16 10:18:09.120] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 10:18:09.122] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRoles", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRoles(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.RolesController (RestaurantApi).
[2025-12-16 10:18:09.128] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:18:09.134] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Roles] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:18:09.135] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[Username], [r].[Name] AS [RoleName]
FROM (
    SELECT [u].[Id], [u].[RoleId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-16 10:18:09.142] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
ORDER BY [r].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:18:09.143] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 10:18:09.147] [INF] [RestaurantAPI.Controllers.RolesController] Получен список ролей. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 10:18:09.150] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:18:09.153] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.RoleReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:18:09.156] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 31.6202ms
[2025-12-16 10:18:09.158] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi) in 31.1984ms
[2025-12-16 10:18:09.160] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 10:18:09.164] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi)'
[2025-12-16 10:18:09.168] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 67.2899ms
[2025-12-16 10:18:09.170] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Roles - 200 null application/json; charset=utf-8 68.3479ms
[2025-12-16 10:18:17.692] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users - null null
[2025-12-16 10:18:17.695] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:17.696] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users - 204 null null 3.9412ms
[2025-12-16 10:18:17.698] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Users - application/json 92
[2025-12-16 10:18:17.714] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:17.719] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.CreateUser (RestaurantApi)'
[2025-12-16 10:18:17.731] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.UserReadDto]] CreateUser(RestaurantAPI.DTOs.UserCreateDto) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 10:18:17.770] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__createDto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__createDto_Username_0 AND [u].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[2025-12-16 10:18:17.774] [WRN] [RestaurantAPI.Controllers.UsersController] Попытка создания пользователя с существующим именем: admin
[2025-12-16 10:18:17.776] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing BadRequestObjectResult, writing value of type 'System.String'.
[2025-12-16 10:18:17.783] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.CreateUser (RestaurantApi) in 45.9742ms
[2025-12-16 10:18:17.785] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.CreateUser (RestaurantApi)'
[2025-12-16 10:18:17.788] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Users - 400 null text/plain; charset=utf-8 89.8681ms
[2025-12-16 10:18:25.273] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users - null null
[2025-12-16 10:18:25.284] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:25.285] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users - 204 null null 11.4656ms
[2025-12-16 10:18:25.287] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Users - application/json 92
[2025-12-16 10:18:25.301] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:25.303] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.CreateUser (RestaurantApi)'
[2025-12-16 10:18:25.311] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.UserReadDto]] CreateUser(RestaurantAPI.DTOs.UserCreateDto) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 10:18:25.324] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__createDto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__createDto_Username_0 AND [u].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[2025-12-16 10:18:25.333] [WRN] [RestaurantAPI.Controllers.UsersController] Попытка создания пользователя с существующим именем: admin
[2025-12-16 10:18:25.335] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing BadRequestObjectResult, writing value of type 'System.String'.
[2025-12-16 10:18:25.340] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.CreateUser (RestaurantApi) in 19.6884ms
[2025-12-16 10:18:25.343] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.CreateUser (RestaurantApi)'
[2025-12-16 10:18:25.348] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Users - 400 null text/plain; charset=utf-8 61.3623ms
[2025-12-16 10:18:27.381] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Users - application/json 92
[2025-12-16 10:18:27.393] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:27.397] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.CreateUser (RestaurantApi)'
[2025-12-16 10:18:27.399] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.UserReadDto]] CreateUser(RestaurantAPI.DTOs.UserCreateDto) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 10:18:27.407] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__createDto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__createDto_Username_0 AND [u].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[2025-12-16 10:18:27.416] [WRN] [RestaurantAPI.Controllers.UsersController] Попытка создания пользователя с существующим именем: admin
[2025-12-16 10:18:27.417] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing BadRequestObjectResult, writing value of type 'System.String'.
[2025-12-16 10:18:27.419] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.CreateUser (RestaurantApi) in 15.5073ms
[2025-12-16 10:18:27.424] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.CreateUser (RestaurantApi)'
[2025-12-16 10:18:27.430] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Users - 400 null text/plain; charset=utf-8 48.8751ms
[2025-12-16 10:18:31.108] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users - null null
[2025-12-16 10:18:31.112] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:31.118] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users - 204 null null 9.9712ms
[2025-12-16 10:18:31.121] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Users - application/json 93
[2025-12-16 10:18:31.131] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:31.134] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.CreateUser (RestaurantApi)'
[2025-12-16 10:18:31.139] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.UserReadDto]] CreateUser(RestaurantAPI.DTOs.UserCreateDto) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 10:18:31.148] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__createDto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Username] = @__createDto_Username_0 AND [u].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[2025-12-16 10:18:31.175] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__createDto_RoleId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__createDto_RoleId_0 AND [r].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:18:31.686] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 255), @p7='?' (DbType = Guid), @p8='?' (DbType = DateTime), @p9='?' (Size = 100), @p10='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [PasswordHash], [RoleId], [UpdatedAt], [UpdatedBy], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
[2025-12-16 10:18:31.699] [INF] [RestaurantAPI.Controllers.UsersController] Пользователь admin1 создан администратором admin
[2025-12-16 10:18:31.703] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.UserReadDto'.
[2025-12-16 10:18:31.705] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.CreateUser (RestaurantApi) in 559.9317ms
[2025-12-16 10:18:31.707] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.CreateUser (RestaurantApi)'
[2025-12-16 10:18:31.710] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Users - 201 null application/json; charset=utf-8 588.9248ms
[2025-12-16 10:18:31.714] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 10:18:31.717] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:31.719] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 5.3461ms
[2025-12-16 10:18:31.721] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 10:18:31.733] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:31.735] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 10:18:31.740] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 10:18:31.750] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:18:31.763] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[Username], [r].[Name] AS [RoleName]
FROM (
    SELECT [u].[Id], [u].[RoleId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-16 10:18:31.768] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 4, Всего: 4, Страница: 1
[2025-12-16 10:18:31.773] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:18:31.777] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 31.6551ms
[2025-12-16 10:18:31.779] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 10:18:31.781] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 59.5092ms
[2025-12-16 10:18:34.306] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 10:18:34.307] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 10:18:34.311] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:34.313] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:34.315] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 10:18:34.316] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 8.9464ms
[2025-12-16 10:18:34.318] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 10:18:34.319] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 10:18:34.327] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:18:34.327] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:34.331] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[Username], [r].[Name] AS [RoleName]
FROM (
    SELECT [u].[Id], [u].[RoleId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-16 10:18:34.333] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 10:18:34.336] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 4, Всего: 4, Страница: 1
[2025-12-16 10:18:34.338] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 10:18:34.340] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:18:34.346] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 22.4163ms
[2025-12-16 10:18:34.349] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:18:34.349] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 10:18:34.356] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 50.0528ms
[2025-12-16 10:18:34.363] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [u].[Username], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[Notes]
FROM (
    SELECT [o].[Id], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 10:18:34.368] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 10:18:34.372] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:18:34.374] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 31.3649ms
[2025-12-16 10:18:34.376] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 10:18:34.378] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 59.3966ms
[2025-12-16 10:18:38.580] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/3d8eb0c2-3b63-499c-8f2e-0c84fdf02140 - null null
[2025-12-16 10:18:38.583] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:38.584] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/3d8eb0c2-3b63-499c-8f2e-0c84fdf02140 - 204 null null 3.9985ms
[2025-12-16 10:18:38.587] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/3d8eb0c2-3b63-499c-8f2e-0c84fdf02140 - null null
[2025-12-16 10:18:38.597] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:38.600] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 10:18:38.608] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-16 10:18:38.620] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:18:38.637] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-16 10:18:38.647] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:18:38.650] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 35.3778ms
[2025-12-16 10:18:38.652] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 10:18:38.655] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/3d8eb0c2-3b63-499c-8f2e-0c84fdf02140 - 200 null application/json; charset=utf-8 68.2074ms
[2025-12-16 10:18:53.274] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:18:53.275] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:18:53.275] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:18:53.284] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:53.282] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:53.280] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:53.284] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 9.107ms
[2025-12-16 10:18:53.285] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 10.1311ms
[2025-12-16 10:18:53.287] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 12.6996ms
[2025-12-16 10:18:53.288] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:18:53.305] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:53.290] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:18:53.289] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:18:53.306] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:18:53.309] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:53.312] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:53.314] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:18:53.315] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:18:53.317] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:18:53.323] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 10:18:53.325] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:18:53.326] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:18:53.331] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:18:53.334] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:18:53.360] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (22ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:18:53.367] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:18:53.367] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 10:18:53.367] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (34ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:18:53.372] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:18:53.374] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:18:53.377] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-16 10:18:53.381] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:18:53.385] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 58.1147ms
[2025-12-16 10:18:53.388] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:18:53.391] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 61.6635ms
[2025-12-16 10:18:53.393] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:18:53.394] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 73.8647ms
[2025-12-16 10:18:53.397] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:18:53.399] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 109.5648ms
[2025-12-16 10:18:53.402] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:18:53.403] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 113.9337ms
[2025-12-16 10:18:53.406] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:18:53.411] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 123.4043ms
[2025-12-16 10:18:53.422] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:53.428] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 22.0179ms
[2025-12-16 10:18:53.431] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:18:53.439] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:53.442] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:18:53.445] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:18:53.460] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:18:53.469] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:18:53.474] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 10:18:53.476] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:18:53.478] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 28.3688ms
[2025-12-16 10:18:53.480] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:18:53.481] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 49.9064ms
[2025-12-16 10:18:55.622] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 10:18:55.626] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:55.627] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 4.9014ms
[2025-12-16 10:18:55.629] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 10:18:55.635] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:55.638] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 10:18:55.640] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:18:55.649] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:18:55.654] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:18:55.659] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:18:55.661] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:18:55.671] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 10:18:55.676] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 24940.00, Заказов: 9
[2025-12-16 10:18:55.679] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:18:55.682] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 38.4694ms
[2025-12-16 10:18:55.684] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 10:18:55.688] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 58.7345ms
[2025-12-16 10:18:55.714] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 10:18:55.720] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:55.722] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 7.7927ms
[2025-12-16 10:18:55.725] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 10:18:55.731] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:55.734] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 10:18:55.737] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:18:55.768] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (26ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 10:18:55.773] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 10:18:55.774] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:18:55.777] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 35.9791ms
[2025-12-16 10:18:55.778] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 10:18:55.780] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 55.059ms
[2025-12-16 10:18:55.785] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 10:18:55.788] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:55.790] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 5.3086ms
[2025-12-16 10:18:55.792] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 10:18:55.798] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:55.800] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 10:18:55.802] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:18:55.821] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 10:18:55.825] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:18:55.828] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 23.7195ms
[2025-12-16 10:18:55.830] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 10:18:55.831] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 39.185ms
[2025-12-16 10:18:55.836] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 10:18:55.840] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:55.842] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 5.9463ms
[2025-12-16 10:18:55.844] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 10:18:55.853] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:55.855] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 10:18:55.858] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:18:55.871] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 10:18:55.875] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:18:55.878] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 15.1479ms
[2025-12-16 10:18:55.880] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 10:18:55.882] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 37.392ms
[2025-12-16 10:18:55.911] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 10:18:55.915] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:55.917] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 5.6323ms
[2025-12-16 10:18:55.920] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 10:18:55.928] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:55.930] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 10:18:55.933] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:18:55.940] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-16 10:18:55.943] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:18:55.950] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 14.5493ms
[2025-12-16 10:18:55.954] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 10:18:55.957] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 37.4638ms
[2025-12-16 10:18:57.060] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=1000 - null null
[2025-12-16 10:18:57.066] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:57.067] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=1000 - 204 null null 6.8002ms
[2025-12-16 10:18:57.069] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=1000 - null null
[2025-12-16 10:18:57.075] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:18:57.076] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:18:57.078] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 10:18:57.084] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:18:57.090] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:18:57.094] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 10:18:57.096] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:18:57.099] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 16.77ms
[2025-12-16 10:18:57.101] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:18:57.103] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=1000 - 200 null application/json; charset=utf-8 33.7536ms
[2025-12-16 10:19:01.153] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - null null
[2025-12-16 10:19:01.160] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:01.165] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - 204 null null 12.0145ms
[2025-12-16 10:19:01.167] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - null null
[2025-12-16 10:19:01.176] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:01.178] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:19:01.180] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:19:01.190] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:19:01.201] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:19:01.209] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 10:19:01.219] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:19:01.226] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 39.2439ms
[2025-12-16 10:19:01.228] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:19:01.231] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - 200 null application/json; charset=utf-8 63.9597ms
[2025-12-16 10:19:01.236] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes - null null
[2025-12-16 10:19:01.242] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:01.243] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes - 204 null null 7.5681ms
[2025-12-16 10:19:01.246] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes - null null
[2025-12-16 10:19:01.256] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:01.257] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:19:01.260] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:19:01.266] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:19:01.271] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - null null
[2025-12-16 10:19:01.272] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:19:01.275] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:01.278] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 20
[2025-12-16 10:19:01.279] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:19:01.281] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:19:01.282] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:19:01.285] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 21.399ms
[2025-12-16 10:19:01.300] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:19:01.303] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:19:01.304] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes - 200 null application/json; charset=utf-8 57.6637ms
[2025-12-16 10:19:01.308] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:19:01.314] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 10:19:01.323] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:19:01.327] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 27.8707ms
[2025-12-16 10:19:01.329] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:19:01.334] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - 200 null application/json; charset=utf-8 63.2177ms
[2025-12-16 10:19:01.338] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes - null null
[2025-12-16 10:19:01.346] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:01.348] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:19:01.350] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:19:01.355] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:19:01.363] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:19:01.369] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 20
[2025-12-16 10:19:01.374] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:19:01.378] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 24.3275ms
[2025-12-16 10:19:01.380] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:19:01.382] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes - 200 null application/json; charset=utf-8 43.6847ms
[2025-12-16 10:19:08.929] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes - null null
[2025-12-16 10:19:08.936] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:08.937] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes - 204 null null 7.8659ms
[2025-12-16 10:19:08.939] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/MenuDishes - application/json 97
[2025-12-16 10:19:08.957] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:08.962] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.CreateMenuDish (RestaurantApi)'
[2025-12-16 10:19:08.975] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateMenuDish", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.MenuDishReadDto]] CreateMenuDish(RestaurantAPI.DTOs.MenuDishCreateDto) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:19:09.013] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__createDto_MenuId_0='?' (DbType = Guid), @__createDto_DishId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MenuDishes] AS [m]
        WHERE [m].[MenuId] = @__createDto_MenuId_0 AND [m].[DishId] = @__createDto_DishId_1 AND [m].[IsDeleted] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
[2025-12-16 10:19:09.044] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__createDto_MenuId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CreatedBy], [m].[DeletedAt], [m].[DeletedBy], [m].[IsDeleted], [m].[Name], [m].[Notes], [m].[UpdatedAt], [m].[UpdatedBy]
FROM [Menus] AS [m]
WHERE [m].[Id] = @__createDto_MenuId_0 AND [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:19:09.129] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__createDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__createDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:19:09.226] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (DbType = Guid), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime), @p9='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [MenuDishes] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [MenuId], [Notes], [UpdatedAt], [UpdatedBy])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
[2025-12-16 10:19:09.238] [INF] [RestaurantAPI.Controllers.MenuDishesController] Блюдо Mexican Shawerma добавлено в меню Сезонное меню администратором admin
[2025-12-16 10:19:09.244] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.MenuDishReadDto'.
[2025-12-16 10:19:09.249] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.CreateMenuDish (RestaurantApi) in 262.5464ms
[2025-12-16 10:19:09.251] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.CreateMenuDish (RestaurantApi)'
[2025-12-16 10:19:09.254] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/MenuDishes - 201 null application/json; charset=utf-8 314.5499ms
[2025-12-16 10:19:09.258] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - null null
[2025-12-16 10:19:09.269] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:09.272] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - 204 null null 14.6988ms
[2025-12-16 10:19:09.275] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - null null
[2025-12-16 10:19:09.288] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:09.292] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:19:09.297] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:19:09.306] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:19:09.316] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:19:09.322] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 4, Всего: 4, Страница: 1
[2025-12-16 10:19:09.328] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:19:09.333] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 29.3314ms
[2025-12-16 10:19:09.335] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:19:09.339] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - 200 null application/json; charset=utf-8 64.4653ms
[2025-12-16 10:19:12.369] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:19:12.371] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:12.372] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 3.7405ms
[2025-12-16 10:19:12.373] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:19:12.377] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:19:12.378] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:19:12.384] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:12.387] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:12.390] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:12.393] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 19.6911ms
[2025-12-16 10:19:12.394] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 16.5643ms
[2025-12-16 10:19:12.395] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:19:12.396] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:19:12.396] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:19:12.414] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:12.410] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:12.406] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 10:19:12.414] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:19:12.415] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:19:12.420] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:19:12.420] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:19:12.419] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:19:12.427] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:19:12.424] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:19:12.428] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:19:12.433] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:19:12.435] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:19:12.438] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 10:19:12.442] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-16 10:19:12.468] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:19:12.473] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:19:12.472] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:19:12.470] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:19:12.475] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 54.1594ms
[2025-12-16 10:19:12.477] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 51.3179ms
[2025-12-16 10:19:12.481] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 64.3105ms
[2025-12-16 10:19:12.482] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:19:12.484] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:19:12.487] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:19:12.489] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 93.353ms
[2025-12-16 10:19:12.491] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 95.4691ms
[2025-12-16 10:19:12.493] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 114.65ms
[2025-12-16 10:19:12.498] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:19:12.521] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:12.523] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 24.8102ms
[2025-12-16 10:19:12.526] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:19:12.535] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:12.537] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:19:12.539] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:19:12.547] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:19:12.555] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:19:12.558] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 10:19:12.561] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:19:12.564] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 19.5446ms
[2025-12-16 10:19:12.566] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:19:12.568] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 42.0636ms
[2025-12-16 10:19:14.383] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - null null
[2025-12-16 10:19:14.387] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:14.389] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - 204 null null 5.8063ms
[2025-12-16 10:19:14.391] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - null null
[2025-12-16 10:19:14.395] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:14.396] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:19:14.396] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:19:14.402] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:19:14.405] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:19:14.408] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 4, Всего: 4, Страница: 1
[2025-12-16 10:19:14.411] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:19:14.414] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 14.8049ms
[2025-12-16 10:19:14.416] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:19:14.417] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - 200 null application/json; charset=utf-8 25.94ms
[2025-12-16 10:19:19.768] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:19:19.772] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:19.773] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 5.0277ms
[2025-12-16 10:19:19.775] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:19:19.782] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:19.783] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:19:19.784] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:19:19.798] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:19:19.818] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (15ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:19:19.838] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 10:19:19.841] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:19:19.844] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 57.497ms
[2025-12-16 10:19:19.846] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:19:19.847] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 72.1069ms
[2025-12-16 10:19:23.175] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 10:19:23.178] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:23.180] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - 204 null null 4.2677ms
[2025-12-16 10:19:23.182] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 10:19:23.186] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:23.187] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 10:19:23.190] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMyOrders() on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 10:19:23.205] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [u].[Username], [o].[OrderDate], [o].[Status], [o].[Total], [o].[Notes]
FROM [Orders] AS [o]
INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[UserId] = @__userId_0
ORDER BY [o].[OrderDate] DESC
[2025-12-16 10:19:23.210] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b". Количество: 4
[2025-12-16 10:19:23.214] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:19:23.219] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 25.8447ms
[2025-12-16 10:19:23.222] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 10:19:23.225] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - 200 null application/json; charset=utf-8 42.8948ms
[2025-12-16 10:19:33.193] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - null null
[2025-12-16 10:19:33.197] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:33.202] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - 204 null null 9.2472ms
[2025-12-16 10:19:33.205] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Auth/login - application/json 47
[2025-12-16 10:19:33.220] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:33.225] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 10:19:33.232] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.AuthResponseDto]] Login(RestaurantAPI.DTOs.UserLoginDto) on controller RestaurantAPI.Controllers.AuthController (RestaurantApi).
[2025-12-16 10:19:33.250] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[@__dto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Username] = @__dto_Username_0
[2025-12-16 10:19:33.750] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [JwtTokens] ([CreatedAt], [ExpiresAt], [Revoked], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
[2025-12-16 10:19:33.755] [INF] [RestaurantAPI.Controllers.AuthController] Пользователь Jefowus1 успешно вошел в систему
[2025-12-16 10:19:33.758] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'RestaurantAPI.DTOs.AuthResponseDto'.
[2025-12-16 10:19:33.762] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.AuthController.Login (RestaurantApi) in 524.7488ms
[2025-12-16 10:19:33.765] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 10:19:33.767] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Auth/login - 200 null application/json; charset=utf-8 561.9045ms
[2025-12-16 10:19:36.969] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:19:36.973] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:19:36.973] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:19:36.976] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:36.982] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 12.9753ms
[2025-12-16 10:19:36.981] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:36.978] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:36.988] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 15.4212ms
[2025-12-16 10:19:36.987] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 14.5151ms
[2025-12-16 10:19:36.985] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:19:36.991] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:19:36.999] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:36.997] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:36.999] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:19:37.000] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:19:37.000] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:19:37.003] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 10:19:36.992] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:19:37.013] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:37.014] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:19:37.014] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:19:37.010] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:19:37.016] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:19:37.021] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:19:37.026] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 10:19:37.027] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:19:37.027] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:19:37.029] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 21.2997ms
[2025-12-16 10:19:37.030] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:19:37.033] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-16 10:19:37.035] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:19:37.039] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 54.3027ms
[2025-12-16 10:19:37.038] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:19:37.041] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:19:37.043] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:19:37.043] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 41.0872ms
[2025-12-16 10:19:37.068] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:19:37.074] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:37.078] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:19:37.080] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:19:37.081] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 37.4036ms
[2025-12-16 10:19:37.082] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 91.5209ms
[2025-12-16 10:19:37.085] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 60.4546ms
[2025-12-16 10:19:37.095] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:19:37.096] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:19:37.098] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 105.9482ms
[2025-12-16 10:19:37.104] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:19:37.111] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:19:37.112] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:19:37.125] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:19:37.138] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:19:37.145] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 10:19:37.146] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:19:37.150] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 34.1674ms
[2025-12-16 10:19:37.153] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:19:37.156] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 60.1443ms
[2025-12-16 10:20:08.931] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-16 10:20:08.936] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:08.937] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 6.1978ms
[2025-12-16 10:20:08.940] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 757
[2025-12-16 10:20:08.945] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:08.947] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-16 10:20:08.949] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 10:20:08.981] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:20:08.984] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "29c99229-dbfc-4762-822d-ccd1587bb848", Notes: null, ItemsCount: 6
[2025-12-16 10:20:08.994] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-16 10:20:09.001] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:20:09.006] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "6df9d371-ed3e-43fc-a2f9-05f35cc8b457", Quantity: 4, Notes: null
[2025-12-16 10:20:09.009] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:20:09.018] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "6df9d371-ed3e-43fc-a2f9-05f35cc8b457", Quantity: 1, Notes: Удалено: Соль
[2025-12-16 10:20:09.023] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:20:09.027] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "506c83ad-20ac-42f9-a32e-16f2701bad37", Quantity: 1, Notes: null
[2025-12-16 10:20:09.029] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:20:09.032] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "506c83ad-20ac-42f9-a32e-16f2701bad37", Quantity: 1, Notes: Удалено: Куриное филе
[2025-12-16 10:20:09.035] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:20:09.040] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "506c83ad-20ac-42f9-a32e-16f2701bad37", Quantity: 1, Notes: Удалено: Лист салата, Тортилья, Куриное филе
[2025-12-16 10:20:09.062] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:20:09.070] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "506c83ad-20ac-42f9-a32e-16f2701bad37", Quantity: 1, Notes: Удалено: Лист салата, Тортилья, Томаты, Куриное филе
[2025-12-16 10:20:09.116] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (33ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p12='?' (DbType = DateTime), @p13='?' (Size = 100), @p14='?' (DbType = DateTime), @p15='?' (Size = 100), @p16='?' (DbType = Guid), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (DbType = Guid), @p20='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (Size = 100), @p24='?' (DbType = DateTime), @p25='?' (Size = 100), @p26='?' (DbType = DateTime), @p27='?' (Size = 100), @p28='?' (DbType = Guid), @p29='?' (DbType = Boolean), @p30='?' (Size = 4000), @p31='?' (DbType = Guid), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = DateTime), @p35='?' (Size = 100), @p36='?' (DbType = DateTime), @p37='?' (Size = 100), @p38='?' (DbType = DateTime), @p39='?' (Size = 100), @p40='?' (DbType = Guid), @p41='?' (DbType = Boolean), @p42='?' (Size = 4000), @p43='?' (DbType = Guid), @p44='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p45='?' (DbType = Int32), @p46='?' (DbType = DateTime), @p47='?' (Size = 100), @p48='?' (DbType = DateTime), @p49='?' (Size = 100), @p50='?' (DbType = DateTime), @p51='?' (Size = 100), @p52='?' (DbType = Guid), @p53='?' (DbType = Boolean), @p54='?' (Size = 4000), @p55='?' (DbType = Guid), @p56='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p57='?' (DbType = Int32), @p58='?' (DbType = DateTime), @p59='?' (Size = 100), @p60='?' (DbType = DateTime), @p61='?' (Size = 100), @p62='?' (DbType = DateTime), @p63='?' (Size = 100), @p64='?' (DbType = Guid), @p65='?' (DbType = Boolean), @p66='?' (Size = 4000), @p67='?' (DbType = Guid), @p68='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p69='?' (DbType = Int32), @p70='?' (DbType = DateTime), @p71='?' (Size = 100), @p73='?' (DbType = Guid), @p72='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, 0),
(@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, 1),
(@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 2),
(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 3),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 4),
(@p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, 5)) AS i ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
VALUES (i.[CreatedAt], i.[CreatedBy], i.[DeletedAt], i.[DeletedBy], i.[DishId], i.[IsDeleted], i.[Notes], i.[OrderId], i.[Price], i.[Quantity], i.[UpdatedAt], i.[UpdatedBy])
OUTPUT INSERTED.[Id], i._Position;
UPDATE [Orders] SET [Total] = @p72
OUTPUT 1
WHERE [Id] = @p73;
[2025-12-16 10:20:09.124] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "6151b050-8594-4d64-9fb1-e49eac94f05e" создан пользователем "29c99229-dbfc-4762-822d-ccd1587bb848". Сумма: 7000.00, Блюд: 6
[2025-12-16 10:20:09.128] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-16 10:20:09.132] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 179.8453ms
[2025-12-16 10:20:09.135] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-16 10:20:09.138] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 198.0902ms
[2025-12-16 10:20:14.368] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:20:14.371] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:14.372] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:20:14.376] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:14.372] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 4.3531ms
[2025-12-16 10:20:14.376] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:20:14.372] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:20:14.387] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:14.388] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 16.2694ms
[2025-12-16 10:20:14.383] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:14.395] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:20:14.381] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:20:14.393] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:20:14.378] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 6.3749ms
[2025-12-16 10:20:14.396] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 10:20:14.399] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:14.412] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:20:14.401] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:14.412] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:20:14.435] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:20:14.437] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:20:14.441] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:20:14.444] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:20:14.444] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:20:14.451] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 10:20:14.458] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:20:14.461] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:20:14.462] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:20:14.466] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:20:14.468] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:20:14.469] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 58.4449ms
[2025-12-16 10:20:14.472] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-16 10:20:14.474] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:20:14.475] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:20:14.477] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:20:14.479] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 36.198ms
[2025-12-16 10:20:14.480] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 103.7707ms
[2025-12-16 10:20:14.482] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 25.4956ms
[2025-12-16 10:20:14.484] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:20:14.487] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:20:14.493] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:20:14.497] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 116.0452ms
[2025-12-16 10:20:14.503] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:14.506] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 113.8329ms
[2025-12-16 10:20:14.514] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 27.3591ms
[2025-12-16 10:20:14.516] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:20:14.530] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:14.532] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:20:14.534] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:20:14.541] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:20:14.548] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:20:14.554] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 10:20:14.556] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:20:14.558] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 19.826ms
[2025-12-16 10:20:14.560] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:20:14.562] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 45.4834ms
[2025-12-16 10:20:16.413] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 10:20:16.416] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:16.417] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - 204 null null 3.8354ms
[2025-12-16 10:20:16.419] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 10:20:16.427] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:16.428] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 10:20:16.430] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMyOrders() on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 10:20:16.435] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [u].[Username], [o].[OrderDate], [o].[Status], [o].[Total], [o].[Notes]
FROM [Orders] AS [o]
INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[UserId] = @__userId_0
ORDER BY [o].[OrderDate] DESC
[2025-12-16 10:20:16.439] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "29c99229-dbfc-4762-822d-ccd1587bb848". Количество: 6
[2025-12-16 10:20:16.441] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:20:16.444] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 12.0178ms
[2025-12-16 10:20:16.447] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 10:20:16.448] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - 200 null application/json; charset=utf-8 29.1092ms
[2025-12-16 10:20:17.901] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/6151b050-8594-4d64-9fb1-e49eac94f05e - null null
[2025-12-16 10:20:17.904] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:17.906] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/6151b050-8594-4d64-9fb1-e49eac94f05e - 204 null null 5.3272ms
[2025-12-16 10:20:17.908] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/6151b050-8594-4d64-9fb1-e49eac94f05e - null null
[2025-12-16 10:20:17.922] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:17.928] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 10:20:17.934] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-16 10:20:17.940] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:20:17.961] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-16 10:20:17.969] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:20:17.974] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 37.5675ms
[2025-12-16 10:20:17.976] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 10:20:17.980] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/6151b050-8594-4d64-9fb1-e49eac94f05e - 200 null application/json; charset=utf-8 71.3244ms
[2025-12-16 10:20:28.895] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - null null
[2025-12-16 10:20:28.909] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:28.912] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - 204 null null 16.5827ms
[2025-12-16 10:20:28.914] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Auth/login - application/json 44
[2025-12-16 10:20:28.924] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:28.929] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 10:20:28.935] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.AuthResponseDto]] Login(RestaurantAPI.DTOs.UserLoginDto) on controller RestaurantAPI.Controllers.AuthController (RestaurantApi).
[2025-12-16 10:20:28.952] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__dto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Username] = @__dto_Username_0
[2025-12-16 10:20:29.457] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [JwtTokens] ([CreatedAt], [ExpiresAt], [Revoked], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
[2025-12-16 10:20:29.470] [INF] [RestaurantAPI.Controllers.AuthController] Пользователь admin успешно вошел в систему
[2025-12-16 10:20:29.477] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'RestaurantAPI.DTOs.AuthResponseDto'.
[2025-12-16 10:20:29.480] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.AuthController.Login (RestaurantApi) in 538.5097ms
[2025-12-16 10:20:29.482] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 10:20:29.486] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Auth/login - 200 null application/json; charset=utf-8 571.6188ms
[2025-12-16 10:20:32.257] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 10:20:32.262] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:32.263] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 5.8185ms
[2025-12-16 10:20:32.267] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 10:20:32.275] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:32.276] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 10:20:32.278] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:20:32.288] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:20:32.296] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:20:32.323] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:20:32.331] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:20:32.339] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 10:20:32.344] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 31940.00, Заказов: 10
[2025-12-16 10:20:32.348] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:20:32.351] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 70.4696ms
[2025-12-16 10:20:32.353] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 10:20:32.357] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 90.5811ms
[2025-12-16 10:20:32.369] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 10:20:32.373] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:32.374] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 4.529ms
[2025-12-16 10:20:32.376] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 10:20:32.382] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:32.383] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 10:20:32.384] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:20:32.413] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (22ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 10:20:32.417] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 10:20:32.419] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:20:32.435] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 46.0517ms
[2025-12-16 10:20:32.437] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 10:20:32.439] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 62.7619ms
[2025-12-16 10:20:32.444] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 10:20:32.447] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:32.448] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 3.6723ms
[2025-12-16 10:20:32.453] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 10:20:32.458] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:32.459] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 10:20:32.460] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:20:32.477] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 10:20:32.482] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:20:32.483] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 19.5684ms
[2025-12-16 10:20:32.485] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 10:20:32.486] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 33.1726ms
[2025-12-16 10:20:32.491] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 10:20:32.495] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:32.496] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 4.9436ms
[2025-12-16 10:20:32.500] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 10:20:32.505] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:32.507] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 10:20:32.509] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:20:32.520] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 10:20:32.524] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:20:32.527] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 13.82ms
[2025-12-16 10:20:32.530] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 10:20:32.531] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 31.2623ms
[2025-12-16 10:20:32.541] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 10:20:32.545] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:32.546] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 5.194ms
[2025-12-16 10:20:32.549] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 10:20:32.556] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:32.557] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 10:20:32.559] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:20:32.573] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-16 10:20:32.579] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:20:32.584] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 21.8843ms
[2025-12-16 10:20:32.586] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 10:20:32.587] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 38.162ms
[2025-12-16 10:20:33.915] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 10:20:33.918] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 10:20:33.919] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:33.921] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:33.923] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 7.7808ms
[2025-12-16 10:20:33.924] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 6.0805ms
[2025-12-16 10:20:33.927] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 10:20:33.927] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 10:20:33.934] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:33.940] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:33.941] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 10:20:33.942] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 10:20:33.944] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 10:20:33.946] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 10:20:33.951] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:20:33.954] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:20:33.961] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[Username], [r].[Name] AS [RoleName]
FROM (
    SELECT [u].[Id], [u].[RoleId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-16 10:20:33.967] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 4, Всего: 4, Страница: 1
[2025-12-16 10:20:33.971] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [u].[Username], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[Notes]
FROM (
    SELECT [o].[Id], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 10:20:33.971] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:20:33.976] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 10, Всего: 10, Страница: 1
[2025-12-16 10:20:33.979] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 29.7916ms
[2025-12-16 10:20:33.980] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:20:33.982] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 10:20:33.984] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 32.3439ms
[2025-12-16 10:20:33.987] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 59.9946ms
[2025-12-16 10:20:33.988] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 10:20:33.992] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 65.5266ms
[2025-12-16 10:20:41.857] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 10:20:41.860] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:41.861] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - 204 null null 4.1159ms
[2025-12-16 10:20:41.864] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 10:20:41.868] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:41.870] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 10:20:41.873] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMyOrders() on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 10:20:41.883] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [u].[Username], [o].[OrderDate], [o].[Status], [o].[Total], [o].[Notes]
FROM [Orders] AS [o]
INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[UserId] = @__userId_0
ORDER BY [o].[OrderDate] DESC
[2025-12-16 10:20:41.888] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b". Количество: 4
[2025-12-16 10:20:41.891] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:20:41.893] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 16.5072ms
[2025-12-16 10:20:41.894] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 10:20:41.896] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - 200 null application/json; charset=utf-8 32.5142ms
[2025-12-16 10:20:46.729] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - null null
[2025-12-16 10:20:46.732] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:46.733] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - 204 null null 4.0349ms
[2025-12-16 10:20:46.736] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Auth/login - application/json 43
[2025-12-16 10:20:46.753] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:46.755] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 10:20:46.761] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.AuthResponseDto]] Login(RestaurantAPI.DTOs.UserLoginDto) on controller RestaurantAPI.Controllers.AuthController (RestaurantApi).
[2025-12-16 10:20:46.773] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__dto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Username] = @__dto_Username_0
[2025-12-16 10:20:47.233] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [JwtTokens] ([CreatedAt], [ExpiresAt], [Revoked], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
[2025-12-16 10:20:47.242] [INF] [RestaurantAPI.Controllers.AuthController] Пользователь sotr успешно вошел в систему
[2025-12-16 10:20:47.248] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'RestaurantAPI.DTOs.AuthResponseDto'.
[2025-12-16 10:20:47.251] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.AuthController.Login (RestaurantApi) in 481.8947ms
[2025-12-16 10:20:47.253] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 10:20:47.257] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Auth/login - 200 null application/json; charset=utf-8 520.4659ms
[2025-12-16 10:20:49.452] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 10:20:49.456] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:49.457] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 4.5145ms
[2025-12-16 10:20:49.459] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 10:20:49.463] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:49.464] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 10:20:49.466] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 10:20:49.471] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:20:49.478] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [u].[Username], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[Notes]
FROM (
    SELECT [o].[Id], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 10:20:49.482] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 10, Всего: 10, Страница: 1
[2025-12-16 10:20:49.484] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:20:49.486] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 17.8356ms
[2025-12-16 10:20:49.488] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 10:20:49.489] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 30.5528ms
[2025-12-16 10:20:51.190] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc&status=Pending - null null
[2025-12-16 10:20:51.201] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:51.204] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc&status=Pending - 204 null null 13.7936ms
[2025-12-16 10:20:51.206] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc&status=Pending - null null
[2025-12-16 10:20:51.225] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:51.230] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 10:20:51.236] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 10:20:51.260] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__status_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Status] = @__status_0
[2025-12-16 10:20:51.288] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__status_0='?' (Size = 50), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [u].[Username], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[Notes]
FROM (
    SELECT [o].[Id], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Status] = @__status_0
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 10:20:51.292] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 7, Всего: 7, Страница: 1
[2025-12-16 10:20:51.296] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:20:51.301] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 55.5179ms
[2025-12-16 10:20:51.303] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 10:20:51.305] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc&status=Pending - 200 null application/json; charset=utf-8 99.2228ms
[2025-12-16 10:20:52.442] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 10:20:52.446] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:20:52.448] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 10:20:52.452] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 10:20:52.463] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:20:52.475] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [u].[Username], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[Notes]
FROM (
    SELECT [o].[Id], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 10:20:52.489] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 10, Всего: 10, Страница: 1
[2025-12-16 10:20:52.495] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:20:52.506] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 46.4718ms
[2025-12-16 10:20:52.507] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 10:20:52.512] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 69.2923ms
[2025-12-16 10:25:53.263] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:25:53.262] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:25:53.262] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:25:53.265] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:25:53.273] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:25:53.276] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:25:53.277] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 14.1579ms
[2025-12-16 10:25:53.279] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:25:53.281] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 17.4697ms
[2025-12-16 10:25:53.283] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 20.0217ms
[2025-12-16 10:25:53.286] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:25:53.286] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:25:53.288] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:25:53.327] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:25:53.331] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:25:53.332] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:25:53.333] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:25:53.334] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:25:53.336] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:25:53.338] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 10:25:53.341] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:25:53.494] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:25:53.494] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:25:53.501] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:25:53.505] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:25:53.507] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:25:53.509] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 10:25:53.512] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:25:53.514] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:25:53.517] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:25:53.522] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-16 10:25:53.524] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:25:53.527] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 177.1403ms
[2025-12-16 10:25:53.529] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:25:53.532] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 185.7045ms
[2025-12-16 10:25:53.533] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:25:53.536] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 183.6016ms
[2025-12-16 10:25:53.538] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:25:53.539] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 253.4449ms
[2025-12-16 10:25:53.541] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:25:53.542] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 263.0899ms
[2025-12-16 10:25:53.544] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:25:53.548] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 261.9321ms
[2025-12-16 10:25:53.555] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:25:53.561] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 16.5979ms
[2025-12-16 10:25:53.564] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:25:53.570] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:25:53.572] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:25:53.573] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:25:53.583] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:25:53.594] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:25:53.599] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 10:25:53.602] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:25:53.605] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 30.1362ms
[2025-12-16 10:25:53.607] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:25:53.608] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 44.2833ms
[2025-12-16 10:25:59.417] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - null null
[2025-12-16 10:25:59.419] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:25:59.420] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - 204 null null 2.9414ms
[2025-12-16 10:25:59.422] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Auth/login - application/json 47
[2025-12-16 10:25:59.435] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:25:59.439] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 10:25:59.440] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.AuthResponseDto]] Login(RestaurantAPI.DTOs.UserLoginDto) on controller RestaurantAPI.Controllers.AuthController (RestaurantApi).
[2025-12-16 10:25:59.462] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (15ms) [Parameters=[@__dto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Username] = @__dto_Username_0
[2025-12-16 10:25:59.958] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (26ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [JwtTokens] ([CreatedAt], [ExpiresAt], [Revoked], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
[2025-12-16 10:25:59.961] [INF] [RestaurantAPI.Controllers.AuthController] Пользователь Jefowus1 успешно вошел в систему
[2025-12-16 10:25:59.963] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'RestaurantAPI.DTOs.AuthResponseDto'.
[2025-12-16 10:25:59.967] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.AuthController.Login (RestaurantApi) in 522.1572ms
[2025-12-16 10:25:59.970] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 10:25:59.974] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Auth/login - 200 null application/json; charset=utf-8 551.0087ms
[2025-12-16 10:26:50.638] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:26:50.642] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:26:50.643] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:26:50.644] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:26:50.646] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:26:50.650] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:26:50.651] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 12.7625ms
[2025-12-16 10:26:50.653] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 10.9696ms
[2025-12-16 10:26:50.654] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 11.2716ms
[2025-12-16 10:26:50.655] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:26:50.656] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:26:50.656] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:26:50.683] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:26:50.689] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:26:50.693] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:26:50.696] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:26:50.697] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:26:50.699] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:26:50.702] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 10:26:50.705] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:26:50.707] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:26:50.720] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:26:50.726] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:26:50.727] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:26:50.732] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:26:50.735] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:26:50.736] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 10:26:50.738] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:26:50.741] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-16 10:26:50.742] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:26:50.743] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:26:50.746] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:26:50.748] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 36.5851ms
[2025-12-16 10:26:50.750] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:26:50.753] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 32.7508ms
[2025-12-16 10:26:50.754] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:26:50.769] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 52.924ms
[2025-12-16 10:26:50.769] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:26:50.769] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 114.3709ms
[2025-12-16 10:26:50.772] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:26:50.774] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 117.278ms
[2025-12-16 10:26:50.774] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:26:50.782] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 126.4462ms
[2025-12-16 10:26:50.793] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:26:50.801] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 26.7746ms
[2025-12-16 10:26:50.803] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:26:50.811] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:26:50.814] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:26:50.816] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:26:50.830] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:26:50.842] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:26:50.848] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 10:26:50.852] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:26:50.856] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 34.449ms
[2025-12-16 10:26:50.858] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:26:50.861] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 58.2264ms
[2025-12-16 10:29:00.463] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 10:29:00.465] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:29:00.466] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - 204 null null 3.5873ms
[2025-12-16 10:29:00.470] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 10:29:00.473] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:29:00.475] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 10:29:00.476] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMyOrders() on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 10:29:00.499] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [u].[Username], [o].[OrderDate], [o].[Status], [o].[Total], [o].[Notes]
FROM [Orders] AS [o]
INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[UserId] = @__userId_0
ORDER BY [o].[OrderDate] DESC
[2025-12-16 10:29:00.503] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "29c99229-dbfc-4762-822d-ccd1587bb848". Количество: 6
[2025-12-16 10:29:00.505] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:29:00.508] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 28.3332ms
[2025-12-16 10:29:00.509] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 10:29:00.512] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - 200 null application/json; charset=utf-8 41.2919ms
[2025-12-16 10:35:24.005] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - null null
[2025-12-16 10:35:24.010] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:35:24.015] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - 204 null null 9.8584ms
[2025-12-16 10:35:24.017] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Auth/login - application/json 47
[2025-12-16 10:35:24.027] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:35:24.031] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 10:35:24.036] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.AuthResponseDto]] Login(RestaurantAPI.DTOs.UserLoginDto) on controller RestaurantAPI.Controllers.AuthController (RestaurantApi).
[2025-12-16 10:35:24.210] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (22ms) [Parameters=[@__dto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Username] = @__dto_Username_0
[2025-12-16 10:35:24.719] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [JwtTokens] ([CreatedAt], [ExpiresAt], [Revoked], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
[2025-12-16 10:35:24.728] [INF] [RestaurantAPI.Controllers.AuthController] Пользователь Jefowus1 успешно вошел в систему
[2025-12-16 10:35:24.732] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'RestaurantAPI.DTOs.AuthResponseDto'.
[2025-12-16 10:35:24.738] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.AuthController.Login (RestaurantApi) in 695.1374ms
[2025-12-16 10:35:24.740] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 10:35:24.742] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Auth/login - 200 null application/json; charset=utf-8 724.6819ms
[2025-12-16 10:35:25.020] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:35:25.021] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:35:25.021] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:35:25.025] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:35:25.028] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:35:25.031] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:35:25.033] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 12.1853ms
[2025-12-16 10:35:25.033] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 12.5959ms
[2025-12-16 10:35:25.035] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 13.5094ms
[2025-12-16 10:35:25.035] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:35:25.037] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:35:25.038] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:35:25.054] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:35:25.058] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:35:25.062] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:35:25.064] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:35:25.065] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:35:25.066] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:35:25.067] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 10:35:25.069] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:35:25.071] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:35:25.095] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:35:25.096] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:35:25.097] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:35:25.103] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:35:25.106] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:35:25.110] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 10:35:25.112] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:35:25.112] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:35:25.115] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:35:25.119] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-16 10:35:25.121] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:35:25.124] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 49.2239ms
[2025-12-16 10:35:25.127] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:35:25.129] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 49.598ms
[2025-12-16 10:35:25.131] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:35:25.133] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 50.8362ms
[2025-12-16 10:35:25.135] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:35:25.136] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 101.037ms
[2025-12-16 10:35:25.139] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:35:25.140] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 103.1224ms
[2025-12-16 10:35:25.142] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:35:25.146] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 107.5928ms
[2025-12-16 10:35:25.154] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:35:25.163] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 20.0087ms
[2025-12-16 10:35:25.165] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:35:25.176] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:35:25.179] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:35:25.181] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:35:25.198] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (11ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:35:25.211] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:35:25.216] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 10:35:25.220] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:35:25.223] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 37.5128ms
[2025-12-16 10:35:25.226] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:35:25.227] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 62.2644ms
[2025-12-16 10:37:07.231] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:37:07.231] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:37:07.231] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:37:07.240] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:37:07.247] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:37:07.255] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:37:07.257] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 26.2864ms
[2025-12-16 10:37:07.259] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 28.5505ms
[2025-12-16 10:37:07.265] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 34.5321ms
[2025-12-16 10:37:07.265] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:37:07.267] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:37:07.270] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:37:07.295] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:37:07.300] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:37:07.308] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:37:07.310] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:37:07.311] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:37:07.313] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:37:07.315] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:37:07.318] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:37:07.321] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 10:37:07.335] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:37:07.337] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:37:07.340] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:37:07.348] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:37:07.352] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-16 10:37:07.351] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:37:07.353] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:37:07.356] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:37:07.368] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 41.0925ms
[2025-12-16 10:37:07.366] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 10:37:07.363] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:37:07.372] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:37:07.375] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:37:07.382] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:37:07.383] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 117.9764ms
[2025-12-16 10:37:07.388] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 54.5259ms
[2025-12-16 10:37:07.394] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 62.8899ms
[2025-12-16 10:37:07.406] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:37:07.402] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:37:07.408] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 141.4637ms
[2025-12-16 10:37:07.411] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 140.8404ms
[2025-12-16 10:37:07.419] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:37:07.436] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:37:07.438] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 18.5232ms
[2025-12-16 10:37:07.443] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:37:07.450] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:37:07.451] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:37:07.454] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:37:07.468] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:37:07.484] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:37:07.490] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 10:37:07.494] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:37:07.498] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 40.2096ms
[2025-12-16 10:37:07.502] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:37:07.505] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 62.7916ms
[2025-12-16 10:38:07.463] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:38:07.468] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:38:07.469] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 5.7947ms
[2025-12-16 10:38:07.470] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:38:07.473] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:38:07.476] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:38:07.485] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:38:07.493] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 22.8163ms
[2025-12-16 10:38:07.492] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:38:07.488] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:38:07.497] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:38:07.502] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:38:07.503] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 30.0266ms
[2025-12-16 10:38:07.507] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:38:07.508] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:38:07.511] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 10:38:07.525] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:38:07.526] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:38:07.532] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:38:07.536] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:38:07.537] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:38:07.538] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:38:07.545] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:38:07.549] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:38:07.549] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:38:07.552] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:38:07.556] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 10:38:07.559] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:38:07.560] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:38:07.563] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:38:07.567] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:38:07.570] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-16 10:38:07.572] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 40.7331ms
[2025-12-16 10:38:07.574] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 33.8004ms
[2025-12-16 10:38:07.578] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:38:07.581] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:38:07.582] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:38:07.585] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 42.864ms
[2025-12-16 10:38:07.586] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 109.714ms
[2025-12-16 10:38:07.587] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 89.8412ms
[2025-12-16 10:38:07.589] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:38:07.596] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:38:07.596] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 89.1953ms
[2025-12-16 10:38:07.600] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:38:07.607] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 10.7359ms
[2025-12-16 10:38:07.611] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:38:07.617] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:38:07.619] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:38:07.622] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:38:07.634] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:38:07.647] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:38:07.651] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 10:38:07.654] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:38:07.656] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 29.5465ms
[2025-12-16 10:38:07.659] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:38:07.660] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 49.2187ms
[2025-12-16 10:42:41.653] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - null null
[2025-12-16 10:42:41.658] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:42:41.661] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - 204 null null 7.81ms
[2025-12-16 10:42:41.663] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Auth/login - application/json 44
[2025-12-16 10:42:41.677] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:42:41.678] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 10:42:41.685] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.AuthResponseDto]] Login(RestaurantAPI.DTOs.UserLoginDto) on controller RestaurantAPI.Controllers.AuthController (RestaurantApi).
[2025-12-16 10:42:41.852] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (28ms) [Parameters=[@__dto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Username] = @__dto_Username_0
[2025-12-16 10:42:42.306] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [JwtTokens] ([CreatedAt], [ExpiresAt], [Revoked], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
[2025-12-16 10:42:42.312] [INF] [RestaurantAPI.Controllers.AuthController] Пользователь admin успешно вошел в систему
[2025-12-16 10:42:42.316] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'RestaurantAPI.DTOs.AuthResponseDto'.
[2025-12-16 10:42:42.322] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.AuthController.Login (RestaurantApi) in 630.759ms
[2025-12-16 10:42:42.324] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 10:42:42.329] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Auth/login - 200 null application/json; charset=utf-8 665.5803ms
[2025-12-16 10:42:49.254] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:42:49.257] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:42:49.258] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:42:49.258] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:42:49.261] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:42:49.267] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 9.2235ms
[2025-12-16 10:42:49.265] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 10.7277ms
[2025-12-16 10:42:49.264] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:42:49.269] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:42:49.270] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:42:49.281] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 22.6826ms
[2025-12-16 10:42:49.283] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:42:49.297] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:42:49.290] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:42:49.284] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:42:49.299] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:42:49.300] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:42:49.302] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:42:49.304] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:42:49.305] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:42:49.308] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 10:42:49.321] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:42:49.327] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:42:49.334] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:42:49.334] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:42:49.335] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:42:49.338] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:42:49.344] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-16 10:42:49.347] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:42:49.348] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 37.6365ms
[2025-12-16 10:42:49.346] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:42:49.346] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:42:49.350] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:42:49.352] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 38.3991ms
[2025-12-16 10:42:49.356] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 10:42:49.357] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 74.3894ms
[2025-12-16 10:42:49.359] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:42:49.360] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:42:49.367] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 97.1501ms
[2025-12-16 10:42:49.369] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 50.5867ms
[2025-12-16 10:42:49.377] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:42:49.379] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 110.6441ms
[2025-12-16 10:42:49.383] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:42:49.393] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:42:49.395] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 11.9034ms
[2025-12-16 10:42:49.397] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:42:49.407] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:42:49.409] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:42:49.412] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:42:49.423] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:42:49.433] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:42:49.438] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 10:42:49.441] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:42:49.443] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 26.8055ms
[2025-12-16 10:42:49.445] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:42:49.446] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 48.6398ms
[2025-12-16 10:44:27.341] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=bc75836d-c978-460e-b72a-7ad8d898f4db&pageSize=1000 - null null
[2025-12-16 10:44:27.346] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:44:27.347] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=bc75836d-c978-460e-b72a-7ad8d898f4db&pageSize=1000 - 204 null null 6.5477ms
[2025-12-16 10:44:27.351] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=bc75836d-c978-460e-b72a-7ad8d898f4db&pageSize=1000 - null null
[2025-12-16 10:44:27.359] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:44:27.363] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 10:44:27.366] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishIngredients", controller = "DishIngredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishIngredients(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishIngredientsController (RestaurantApi).
[2025-12-16 10:44:27.384] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (13ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DishIngredients] AS [d]
INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
[2025-12-16 10:44:27.401] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (11ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[DishId], [s].[Name] AS [DishName], [s].[IngredientId], [i].[Name] AS [IngredientName], [s].[Quantity]
FROM (
    SELECT [d].[Id], [d].[DishId], [d].[IngredientId], [d].[Quantity], [d0].[Name]
    FROM [DishIngredients] AS [d]
    INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
    ORDER BY [d0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Ingredients] AS [i] ON [s].[IngredientId] = [i].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:44:27.408] [INF] [RestaurantAPI.Controllers.DishIngredientsController] Получен список ингредиентов блюд. Количество: 4, Всего: 4, Страница: 1
[2025-12-16 10:44:27.411] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishIngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:44:27.414] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi) in 45.0623ms
[2025-12-16 10:44:27.416] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 10:44:27.419] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=bc75836d-c978-460e-b72a-7ad8d898f4db&pageSize=1000 - 200 null application/json; charset=utf-8 68.3663ms
[2025-12-16 10:52:01.734] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:52:01.734] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:52:01.734] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:52:01.738] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:52:01.741] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:52:01.748] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:52:01.751] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 17.2438ms
[2025-12-16 10:52:01.753] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 19.2139ms
[2025-12-16 10:52:01.755] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 20.7538ms
[2025-12-16 10:52:01.756] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:52:01.757] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:52:01.761] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:52:01.786] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:52:01.791] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:52:01.798] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:52:01.800] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:52:01.802] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:52:01.805] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:52:01.807] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:52:01.810] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 10:52:01.812] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:52:01.951] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:52:01.951] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:52:01.959] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:52:01.961] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:52:01.964] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:52:01.966] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:52:01.973] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 10:52:01.979] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:52:01.977] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:52:01.974] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:52:01.981] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 160.406ms
[2025-12-16 10:52:01.983] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 166.6905ms
[2025-12-16 10:52:01.989] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-16 10:52:01.991] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:52:01.993] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:52:01.995] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:52:02.001] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 177.7344ms
[2025-12-16 10:52:01.997] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 241.4244ms
[2025-12-16 10:52:01.996] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 238.5257ms
[2025-12-16 10:52:02.006] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:52:02.007] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:52:02.020] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 259.2631ms
[2025-12-16 10:52:02.025] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:52:02.033] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 25.7046ms
[2025-12-16 10:52:02.037] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:52:02.045] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:52:02.047] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:52:02.049] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:52:02.063] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:52:02.074] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:52:02.079] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 10:52:02.082] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:52:02.086] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 33.5625ms
[2025-12-16 10:52:02.088] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:52:02.090] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 53.677ms
[2025-12-16 10:52:03.048] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:52:03.049] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:52:03.062] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:52:03.057] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:52:03.050] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:52:03.064] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:52:03.065] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:52:03.070] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:52:03.074] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:52:03.076] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 10:52:03.078] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:52:03.087] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:52:03.093] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:52:03.094] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:52:03.102] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:52:03.108] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:52:03.112] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:52:03.112] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:52:03.115] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 10:52:03.123] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:52:03.124] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:52:03.134] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 50.9684ms
[2025-12-16 10:52:03.136] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:52:03.127] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:52:03.131] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-16 10:52:03.139] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 89.9956ms
[2025-12-16 10:52:03.141] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 51.3266ms
[2025-12-16 10:52:03.144] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:52:03.150] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:52:03.152] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 42.6574ms
[2025-12-16 10:52:03.154] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 106.5683ms
[2025-12-16 10:52:03.156] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:52:03.164] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 114.0792ms
[2025-12-16 10:52:03.168] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:52:03.176] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:52:03.179] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:52:03.180] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:52:03.185] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:52:03.190] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:52:03.193] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 10:52:03.195] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:52:03.198] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 15.4368ms
[2025-12-16 10:52:03.200] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:52:03.203] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 34.9893ms
[2025-12-16 10:54:56.546] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:54:56.546] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:54:56.546] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:54:56.552] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:54:56.561] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:54:56.564] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:54:56.565] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 18.7527ms
[2025-12-16 10:54:56.566] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 20.0585ms
[2025-12-16 10:54:56.567] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 20.8675ms
[2025-12-16 10:54:56.567] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:54:56.570] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:54:56.570] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:54:56.588] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:54:56.591] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:54:56.595] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:54:56.596] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:54:56.597] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:54:56.598] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:54:56.599] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:54:56.600] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:54:56.602] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 10:54:56.613] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:54:56.613] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:54:56.615] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:54:56.625] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:54:56.626] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:54:56.629] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:54:56.630] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-16 10:54:56.635] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:54:56.637] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 10:54:56.640] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:54:56.642] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:54:56.643] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:54:56.645] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 38.5675ms
[2025-12-16 10:54:56.647] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 38.0138ms
[2025-12-16 10:54:56.649] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 38.0333ms
[2025-12-16 10:54:56.650] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:54:56.652] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:54:56.653] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:54:56.655] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 87.2959ms
[2025-12-16 10:54:56.657] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 87.3712ms
[2025-12-16 10:54:56.659] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 88.8239ms
[2025-12-16 10:54:56.662] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:54:56.675] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:54:56.675] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 14.0076ms
[2025-12-16 10:54:56.678] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:54:56.682] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:54:56.683] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:54:56.684] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:54:56.691] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:54:56.698] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:54:56.701] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 10:54:56.702] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:54:56.704] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 17.8965ms
[2025-12-16 10:54:56.706] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:54:56.708] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 29.9197ms
[2025-12-16 10:54:57.863] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - null null
[2025-12-16 10:54:57.868] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:54:57.869] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - 204 null null 6.2259ms
[2025-12-16 10:54:57.872] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - null null
[2025-12-16 10:54:57.877] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:54:57.879] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 10:54:57.880] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishIngredients", controller = "DishIngredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishIngredients(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishIngredientsController (RestaurantApi).
[2025-12-16 10:54:57.887] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DishIngredients] AS [d]
INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
[2025-12-16 10:54:57.896] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[DishId], [s].[Name] AS [DishName], [s].[IngredientId], [i].[Name] AS [IngredientName], [s].[Quantity]
FROM (
    SELECT [d].[Id], [d].[DishId], [d].[IngredientId], [d].[Quantity], [d0].[Name]
    FROM [DishIngredients] AS [d]
    INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
    ORDER BY [d0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Ingredients] AS [i] ON [s].[IngredientId] = [i].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:54:57.899] [INF] [RestaurantAPI.Controllers.DishIngredientsController] Получен список ингредиентов блюд. Количество: 5, Всего: 5, Страница: 1
[2025-12-16 10:54:57.901] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishIngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:54:57.903] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi) in 20.5101ms
[2025-12-16 10:54:57.905] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 10:54:57.906] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - 200 null application/json; charset=utf-8 34.4738ms
[2025-12-16 10:55:10.474] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=e95fdeb0-af57-44bd-91ab-29e79dbad536&pageSize=1000 - null null
[2025-12-16 10:55:10.477] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:10.478] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=e95fdeb0-af57-44bd-91ab-29e79dbad536&pageSize=1000 - 204 null null 3.6085ms
[2025-12-16 10:55:10.479] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=e95fdeb0-af57-44bd-91ab-29e79dbad536&pageSize=1000 - null null
[2025-12-16 10:55:10.482] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:10.482] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 10:55:10.483] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishIngredients", controller = "DishIngredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishIngredients(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishIngredientsController (RestaurantApi).
[2025-12-16 10:55:10.485] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DishIngredients] AS [d]
INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
[2025-12-16 10:55:10.488] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[DishId], [s].[Name] AS [DishName], [s].[IngredientId], [i].[Name] AS [IngredientName], [s].[Quantity]
FROM (
    SELECT [d].[Id], [d].[DishId], [d].[IngredientId], [d].[Quantity], [d0].[Name]
    FROM [DishIngredients] AS [d]
    INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
    ORDER BY [d0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Ingredients] AS [i] ON [s].[IngredientId] = [i].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:55:10.490] [INF] [RestaurantAPI.Controllers.DishIngredientsController] Получен список ингредиентов блюд. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:55:10.491] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishIngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:55:10.492] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi) in 7.9405ms
[2025-12-16 10:55:10.493] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 10:55:10.494] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=e95fdeb0-af57-44bd-91ab-29e79dbad536&pageSize=1000 - 200 null application/json; charset=utf-8 14.8095ms
[2025-12-16 10:55:14.122] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - null null
[2025-12-16 10:55:14.159] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:14.160] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - 204 null null 37.6292ms
[2025-12-16 10:55:14.162] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - null null
[2025-12-16 10:55:14.165] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:14.167] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:55:14.168] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:55:14.179] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:55:14.184] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:55:14.187] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 4, Всего: 4, Страница: 1
[2025-12-16 10:55:14.188] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:55:14.190] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 12.707ms
[2025-12-16 10:55:14.191] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:55:14.192] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - 200 null application/json; charset=utf-8 29.9999ms
[2025-12-16 10:55:18.712] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 10:55:18.715] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:18.716] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 3.9497ms
[2025-12-16 10:55:18.719] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 10:55:18.723] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:18.724] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 10:55:18.725] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:55:18.731] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:55:18.734] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:55:18.740] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:55:18.744] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:55:18.748] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 10:55:18.750] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 31940.00, Заказов: 10
[2025-12-16 10:55:18.752] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:55:18.754] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 27.9012ms
[2025-12-16 10:55:18.755] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 10:55:18.756] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 37.3464ms
[2025-12-16 10:55:18.760] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 10:55:18.762] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:18.763] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 3.2552ms
[2025-12-16 10:55:18.765] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 10:55:18.767] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:18.768] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 10:55:18.769] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:55:18.780] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 10:55:18.782] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 10:55:18.783] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:55:18.784] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 13.3701ms
[2025-12-16 10:55:18.786] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 10:55:18.787] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 22.4343ms
[2025-12-16 10:55:18.791] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 10:55:18.793] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:18.793] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.325ms
[2025-12-16 10:55:18.795] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 10:55:18.797] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:18.798] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 10:55:18.799] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:55:18.807] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 10:55:18.809] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:55:18.810] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 10.2592ms
[2025-12-16 10:55:18.811] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 10:55:18.812] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 17.3444ms
[2025-12-16 10:55:18.815] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 10:55:18.817] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:18.818] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 2.674ms
[2025-12-16 10:55:18.821] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 10:55:18.825] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:18.826] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 10:55:18.827] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:55:18.831] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 10:55:18.833] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:55:18.834] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 6.3859ms
[2025-12-16 10:55:18.836] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 10:55:18.837] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 15.7016ms
[2025-12-16 10:55:18.844] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 10:55:18.847] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:18.848] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 3.2125ms
[2025-12-16 10:55:18.850] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 10:55:18.853] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:18.854] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 10:55:18.855] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:55:18.860] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-16 10:55:18.862] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:55:18.864] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 7.8599ms
[2025-12-16 10:55:18.865] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 10:55:18.866] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 16.5828ms
[2025-12-16 10:55:22.717] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:55:22.720] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:55:22.720] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:22.720] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:55:22.722] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:22.723] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 5.8788ms
[2025-12-16 10:55:22.725] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:55:22.725] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:22.726] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 6.0756ms
[2025-12-16 10:55:22.727] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:55:22.731] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:22.732] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 11.2236ms
[2025-12-16 10:55:22.733] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:55:22.737] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:22.737] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:55:22.741] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:22.742] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:55:22.743] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 10:55:22.744] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:55:22.745] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:55:22.747] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:55:22.748] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:55:22.750] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:55:22.753] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:55:22.753] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:55:22.755] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:55:22.756] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:55:22.757] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 10:55:22.759] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:55:22.761] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-16 10:55:22.762] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:55:22.763] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:55:22.764] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:55:22.765] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 18.6114ms
[2025-12-16 10:55:22.766] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 16.6934ms
[2025-12-16 10:55:22.767] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 16.1381ms
[2025-12-16 10:55:22.769] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:55:22.770] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:55:22.771] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:55:22.771] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 46.9521ms
[2025-12-16 10:55:22.772] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 44.8955ms
[2025-12-16 10:55:22.773] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 40.258ms
[2025-12-16 10:55:22.774] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:55:22.781] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:22.782] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 7.8088ms
[2025-12-16 10:55:22.783] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:55:22.787] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:22.788] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:55:22.788] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:55:22.791] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:55:22.793] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:55:22.795] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 10:55:22.796] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:55:22.797] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 7.2572ms
[2025-12-16 10:55:22.798] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:55:22.799] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 15.2884ms
[2025-12-16 10:55:28.071] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-16 10:55:28.073] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:28.073] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 2.5812ms
[2025-12-16 10:55:28.074] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 148
[2025-12-16 10:55:28.077] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:28.078] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-16 10:55:28.079] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 10:55:28.092] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:55:28.094] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "601d547d-42ee-4d95-abc0-42bf30f4d94b", Notes: null, ItemsCount: 1
[2025-12-16 10:55:28.099] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-16 10:55:28.102] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:55:28.104] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "506c83ad-20ac-42f9-a32e-16f2701bad37", Quantity: 1, Notes: null
[2025-12-16 10:55:28.110] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p13='?' (DbType = Guid), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Orders] SET [Total] = @p12
OUTPUT 1
WHERE [Id] = @p13;
[2025-12-16 10:55:28.125] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "d0caecfc-95d0-4cfb-a310-9f4b281954cd" создан пользователем "601d547d-42ee-4d95-abc0-42bf30f4d94b". Сумма: 750.00, Блюд: 1
[2025-12-16 10:55:28.127] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-16 10:55:28.128] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 48.1476ms
[2025-12-16 10:55:28.129] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-16 10:55:28.130] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 55.6159ms
[2025-12-16 10:55:29.146] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:55:29.148] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:55:29.148] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:55:29.148] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:29.151] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:29.153] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:29.154] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 8.1154ms
[2025-12-16 10:55:29.155] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 6.8384ms
[2025-12-16 10:55:29.155] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 7.1044ms
[2025-12-16 10:55:29.156] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 10:55:29.156] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 10:55:29.157] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:55:29.165] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:29.168] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:29.170] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:29.171] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:55:29.172] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:55:29.172] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:55:29.173] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 10:55:29.174] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:55:29.175] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:55:29.178] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:55:29.179] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:55:29.181] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:55:29.182] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:55:29.184] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:55:29.185] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:55:29.186] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 10:55:29.188] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:55:29.189] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-16 10:55:29.190] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:55:29.191] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:55:29.193] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:55:29.194] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 17.0224ms
[2025-12-16 10:55:29.195] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 16.6788ms
[2025-12-16 10:55:29.196] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 16.0021ms
[2025-12-16 10:55:29.197] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 10:55:29.198] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:55:29.198] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:55:29.199] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 42.976ms
[2025-12-16 10:55:29.200] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 43.7342ms
[2025-12-16 10:55:29.201] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 44.5176ms
[2025-12-16 10:55:29.203] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:55:29.209] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:29.210] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 7.4942ms
[2025-12-16 10:55:29.212] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 10:55:29.214] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:29.215] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:55:29.216] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 10:55:29.219] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 10:55:29.221] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 10:55:29.223] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 10:55:29.224] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:55:29.225] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 7.4354ms
[2025-12-16 10:55:29.226] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 10:55:29.226] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 14.6009ms
[2025-12-16 10:55:29.909] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 10:55:29.915] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:29.916] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - 204 null null 7.0453ms
[2025-12-16 10:55:29.918] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 10:55:29.925] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:29.927] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 10:55:29.929] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMyOrders() on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 10:55:29.934] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [u].[Username], [o].[OrderDate], [o].[Status], [o].[Total], [o].[Notes]
FROM [Orders] AS [o]
INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[UserId] = @__userId_0
ORDER BY [o].[OrderDate] DESC
[2025-12-16 10:55:29.937] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b". Количество: 5
[2025-12-16 10:55:29.938] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:55:29.939] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 8.6552ms
[2025-12-16 10:55:29.940] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 10:55:29.942] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - 200 null application/json; charset=utf-8 23.6889ms
[2025-12-16 10:55:30.922] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/d0caecfc-95d0-4cfb-a310-9f4b281954cd - null null
[2025-12-16 10:55:30.924] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:30.925] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/d0caecfc-95d0-4cfb-a310-9f4b281954cd - 204 null null 3.3971ms
[2025-12-16 10:55:30.927] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/d0caecfc-95d0-4cfb-a310-9f4b281954cd - null null
[2025-12-16 10:55:30.929] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:30.930] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 10:55:30.931] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-16 10:55:30.934] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:55:30.938] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-16 10:55:30.940] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:55:30.941] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 8.29ms
[2025-12-16 10:55:30.942] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 10:55:30.943] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/d0caecfc-95d0-4cfb-a310-9f4b281954cd - 200 null application/json; charset=utf-8 15.5771ms
[2025-12-16 10:55:40.453] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 10:55:40.456] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:40.456] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 3.6405ms
[2025-12-16 10:55:40.459] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 10:55:40.462] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:40.463] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 10:55:40.464] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:55:40.470] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:55:40.474] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:55:40.478] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:55:40.481] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:55:40.486] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 10:55:40.488] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 32690.00, Заказов: 11
[2025-12-16 10:55:40.489] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:55:40.490] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 23.5964ms
[2025-12-16 10:55:40.491] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 10:55:40.492] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 32.8512ms
[2025-12-16 10:55:40.498] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 10:55:40.500] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:40.501] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 3.2358ms
[2025-12-16 10:55:40.504] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 10:55:40.506] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:40.508] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 10:55:40.509] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:55:40.518] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 10:55:40.521] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 10:55:40.522] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:55:40.523] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 13.1262ms
[2025-12-16 10:55:40.524] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 10:55:40.525] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 21.0138ms
[2025-12-16 10:55:40.527] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 10:55:40.529] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:40.529] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.1638ms
[2025-12-16 10:55:40.531] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 10:55:40.533] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:40.534] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 10:55:40.535] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:55:40.543] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 10:55:40.545] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:55:40.546] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 9.6594ms
[2025-12-16 10:55:40.547] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 10:55:40.548] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 17.5094ms
[2025-12-16 10:55:40.552] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 10:55:40.554] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:40.554] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 2.8649ms
[2025-12-16 10:55:40.557] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 10:55:40.559] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:40.560] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 10:55:40.561] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:55:40.566] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 10:55:40.568] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:55:40.570] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 7.6538ms
[2025-12-16 10:55:40.571] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 10:55:40.572] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 15.3226ms
[2025-12-16 10:55:40.576] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 10:55:40.578] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:40.579] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.3976ms
[2025-12-16 10:55:40.580] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 10:55:40.583] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:40.583] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 10:55:40.584] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:55:40.588] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-16 10:55:40.590] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:55:40.591] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.0713ms
[2025-12-16 10:55:40.592] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 10:55:40.592] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 12.509ms
[2025-12-16 10:55:41.505] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 10:55:41.507] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 10:55:41.508] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:41.510] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:41.512] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 6.562ms
[2025-12-16 10:55:41.513] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 5.5233ms
[2025-12-16 10:55:41.514] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 10:55:41.515] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 10:55:41.521] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:41.523] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:41.524] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 10:55:41.525] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 10:55:41.526] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 10:55:41.527] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 10:55:41.530] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:55:41.531] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:55:41.537] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[Username], [r].[Name] AS [RoleName]
FROM (
    SELECT [u].[Id], [u].[RoleId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-16 10:55:41.538] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [u].[Username], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[Notes]
FROM (
    SELECT [o].[Id], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 10:55:41.539] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 4, Всего: 4, Страница: 1
[2025-12-16 10:55:41.540] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 11, Всего: 11, Страница: 1
[2025-12-16 10:55:41.542] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:55:41.543] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:55:41.544] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 15.8544ms
[2025-12-16 10:55:41.545] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 15.3744ms
[2025-12-16 10:55:41.546] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 10:55:41.547] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 10:55:41.548] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 33.8425ms
[2025-12-16 10:55:41.549] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 34.0304ms
[2025-12-16 10:55:44.355] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/d0caecfc-95d0-4cfb-a310-9f4b281954cd - null null
[2025-12-16 10:55:44.362] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:44.364] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/d0caecfc-95d0-4cfb-a310-9f4b281954cd - 204 null null 8.7178ms
[2025-12-16 10:55:44.366] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/d0caecfc-95d0-4cfb-a310-9f4b281954cd - null null
[2025-12-16 10:55:44.369] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:44.370] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 10:55:44.371] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-16 10:55:44.375] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:55:44.379] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-16 10:55:44.381] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:55:44.381] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 9.1884ms
[2025-12-16 10:55:44.382] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 10:55:44.383] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/d0caecfc-95d0-4cfb-a310-9f4b281954cd - 200 null application/json; charset=utf-8 16.9738ms
[2025-12-16 10:55:45.810] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/6151b050-8594-4d64-9fb1-e49eac94f05e - null null
[2025-12-16 10:55:45.812] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:45.813] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/6151b050-8594-4d64-9fb1-e49eac94f05e - 204 null null 2.903ms
[2025-12-16 10:55:45.814] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/6151b050-8594-4d64-9fb1-e49eac94f05e - null null
[2025-12-16 10:55:45.817] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:55:45.818] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 10:55:45.819] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-16 10:55:45.822] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:55:45.824] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-16 10:55:45.826] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:55:45.827] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 6.4605ms
[2025-12-16 10:55:45.828] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 10:55:45.829] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/6151b050-8594-4d64-9fb1-e49eac94f05e - 200 null application/json; charset=utf-8 14.2762ms
[2025-12-16 10:59:54.043] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 10:59:54.046] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:59:54.047] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 3.1201ms
[2025-12-16 10:59:54.048] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 10:59:54.052] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:59:54.053] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 10:59:54.054] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:59:54.125] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:59:54.128] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:59:54.132] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:59:54.135] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:59:54.139] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 10:59:54.141] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 32690.00, Заказов: 11
[2025-12-16 10:59:54.142] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:59:54.143] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 86.9678ms
[2025-12-16 10:59:54.144] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 10:59:54.144] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 95.9597ms
[2025-12-16 10:59:54.147] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 10:59:54.149] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:59:54.149] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 2.2856ms
[2025-12-16 10:59:54.151] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 10:59:54.154] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:59:54.155] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 10:59:54.156] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:59:54.167] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 10:59:54.169] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 10:59:54.170] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:59:54.171] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 13.8388ms
[2025-12-16 10:59:54.172] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 10:59:54.173] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 22.2436ms
[2025-12-16 10:59:54.176] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 10:59:54.177] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:59:54.178] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.3241ms
[2025-12-16 10:59:54.179] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 10:59:54.182] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:59:54.183] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 10:59:54.184] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:59:54.191] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 10:59:54.194] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:59:54.195] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 9.9649ms
[2025-12-16 10:59:54.196] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 10:59:54.196] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 17.1257ms
[2025-12-16 10:59:54.199] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 10:59:54.200] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:59:54.201] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 2.0461ms
[2025-12-16 10:59:54.202] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 10:59:54.205] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:59:54.206] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 10:59:54.207] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:59:54.212] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 10:59:54.214] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:59:54.215] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 6.4456ms
[2025-12-16 10:59:54.216] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 10:59:54.217] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 14.3506ms
[2025-12-16 10:59:54.222] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 10:59:54.224] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:59:54.225] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.79ms
[2025-12-16 10:59:54.227] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 10:59:54.230] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:59:54.230] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 10:59:54.231] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 10:59:54.235] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-16 10:59:54.237] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 10:59:54.238] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.395ms
[2025-12-16 10:59:54.239] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 10:59:54.240] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 13.5169ms
[2025-12-16 10:59:58.644] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:59:58.647] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories - null null
[2025-12-16 10:59:58.647] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:59:58.649] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:59:58.650] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 5.7463ms
[2025-12-16 10:59:58.651] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories - 204 null null 3.6816ms
[2025-12-16 10:59:58.653] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 10:59:58.653] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories - null null
[2025-12-16 10:59:58.659] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:59:58.661] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 10:59:58.662] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:59:58.662] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:59:58.663] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 10:59:58.665] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 10:59:58.669] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:59:58.674] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 10:59:58.674] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 10:59:58.677] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-16 10:59:58.678] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 10:59:58.678] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:59:58.680] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 10:59:58.681] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 15.326ms
[2025-12-16 10:59:58.682] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 10:59:58.683] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 10:59:58.684] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 16.8311ms
[2025-12-16 10:59:58.685] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 32.1602ms
[2025-12-16 10:59:58.685] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 10:59:58.689] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories - 200 null application/json; charset=utf-8 35.936ms
[2025-12-16 11:00:00.405] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=1000 - null null
[2025-12-16 11:00:00.407] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:00:00.407] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=1000 - 204 null null 2.5815ms
[2025-12-16 11:00:00.409] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=1000 - null null
[2025-12-16 11:00:00.413] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:00:00.414] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 11:00:00.416] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 11:00:00.422] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:00:00.429] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 11:00:00.431] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 11:00:00.433] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:00:00.434] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 16.637ms
[2025-12-16 11:00:00.435] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 11:00:00.437] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=1000 - 200 null application/json; charset=utf-8 27.8933ms
[2025-12-16 11:00:00.924] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Ingredients?pageSize=1000 - null null
[2025-12-16 11:00:00.926] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:00:00.927] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Ingredients?pageSize=1000 - 204 null null 2.9676ms
[2025-12-16 11:00:00.929] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - null null
[2025-12-16 11:00:00.932] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:00:00.933] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-16 11:00:00.934] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetIngredients", controller = "Ingredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetIngredients(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.IngredientsController (RestaurantApi).
[2025-12-16 11:00:00.940] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:00:00.945] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[Name]
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
ORDER BY [i].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 11:00:00.947] [INF] [RestaurantAPI.Controllers.IngredientsController] Получен список ингредиентов. Количество: 24, Всего: 24, Страница: 1
[2025-12-16 11:00:00.949] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.IngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:00:00.950] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi) in 13.5267ms
[2025-12-16 11:00:00.952] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-16 11:00:00.953] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - 200 null application/json; charset=utf-8 24.7553ms
[2025-12-16 11:00:01.389] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=1000 - null null
[2025-12-16 11:00:01.391] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:00:01.392] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=1000 - 204 null null 3.8683ms
[2025-12-16 11:00:01.395] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=1000 - null null
[2025-12-16 11:00:01.402] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:00:01.403] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 11:00:01.404] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 11:00:01.409] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:00:01.414] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 11:00:01.416] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 11:00:01.418] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:00:01.420] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 14.1585ms
[2025-12-16 11:00:01.424] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 11:00:01.425] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=1000 - 200 null application/json; charset=utf-8 29.9885ms
[2025-12-16 11:00:01.997] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 11:00:01.999] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Roles - null null
[2025-12-16 11:00:02.000] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:00:02.002] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:00:02.003] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 5.6678ms
[2025-12-16 11:00:02.004] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Roles - 204 null null 4.2375ms
[2025-12-16 11:00:02.006] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Roles - null null
[2025-12-16 11:00:02.006] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 11:00:02.012] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:00:02.014] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:00:02.015] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi)'
[2025-12-16 11:00:02.016] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 11:00:02.017] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRoles", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRoles(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.RolesController (RestaurantApi).
[2025-12-16 11:00:02.018] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 11:00:02.023] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Roles] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:00:02.023] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:00:02.028] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
ORDER BY [r].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 11:00:02.030] [INF] [RestaurantAPI.Controllers.RolesController] Получен список ролей. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 11:00:02.030] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[Username], [r].[Name] AS [RoleName]
FROM (
    SELECT [u].[Id], [u].[RoleId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-16 11:00:02.031] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.RoleReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:00:02.033] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 4, Всего: 4, Страница: 1
[2025-12-16 11:00:02.034] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi) in 14.7235ms
[2025-12-16 11:00:02.035] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:00:02.036] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi)'
[2025-12-16 11:00:02.037] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 15.9801ms
[2025-12-16 11:00:02.038] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Roles - 200 null application/json; charset=utf-8 32.1916ms
[2025-12-16 11:00:02.038] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 11:00:02.042] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 36.5213ms
[2025-12-16 11:00:02.371] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=1000 - null null
[2025-12-16 11:00:02.374] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:00:02.375] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 11:00:02.376] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 11:00:02.381] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:00:02.386] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 11:00:02.388] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 11:00:02.389] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:00:02.390] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 12.8909ms
[2025-12-16 11:00:02.392] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 11:00:02.393] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=1000 - 200 null application/json; charset=utf-8 22.1752ms
[2025-12-16 11:00:02.946] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - null null
[2025-12-16 11:00:02.949] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:00:02.950] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-16 11:00:02.951] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetIngredients", controller = "Ingredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetIngredients(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.IngredientsController (RestaurantApi).
[2025-12-16 11:00:02.956] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:00:02.961] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[Name]
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
ORDER BY [i].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 11:00:02.963] [INF] [RestaurantAPI.Controllers.IngredientsController] Получен список ингредиентов. Количество: 24, Всего: 24, Страница: 1
[2025-12-16 11:00:02.965] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.IngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:00:02.966] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi) in 12.5363ms
[2025-12-16 11:00:02.968] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-16 11:00:02.969] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - 200 null application/json; charset=utf-8 22.5477ms
[2025-12-16 11:00:03.752] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 11:00:03.755] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:00:03.755] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories - null null
[2025-12-16 11:00:03.755] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 3.3977ms
[2025-12-16 11:00:03.758] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:00:03.759] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 11:00:03.762] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories - 204 null null 7.0214ms
[2025-12-16 11:00:03.764] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories - null null
[2025-12-16 11:00:03.764] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:00:03.768] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:00:03.769] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 11:00:03.770] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 11:00:03.771] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 11:00:03.772] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 11:00:03.776] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:00:03.777] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:00:03.781] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 11:00:03.781] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 11:00:03.783] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 11:00:03.785] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-16 11:00:03.786] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:00:03.787] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:00:03.788] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 13.3337ms
[2025-12-16 11:00:03.789] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 15.9524ms
[2025-12-16 11:00:03.790] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 11:00:03.791] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 11:00:03.792] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories - 200 null application/json; charset=utf-8 28.1648ms
[2025-12-16 11:00:03.792] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 33.7986ms
[2025-12-16 11:00:12.069] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 11:00:12.072] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:00:12.072] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 11:00:12.072] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 11:00:12.072] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 3.1693ms
[2025-12-16 11:00:12.074] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:00:12.076] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 11:00:12.076] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:00:12.080] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 8.8429ms
[2025-12-16 11:00:12.082] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 11:00:12.083] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:00:12.084] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 11.6272ms
[2025-12-16 11:00:12.086] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 11:00:12.089] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:00:12.090] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 11:00:12.095] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:00:12.096] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 11:00:12.097] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 11:00:12.097] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 11:00:12.098] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 11:00:12.100] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 11:00:12.103] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:00:12.103] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:00:12.107] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 11:00:12.107] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 11:00:12.109] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 11:00:12.110] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:00:12.112] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 11:00:12.113] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:00:12.116] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 11:00:12.116] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:00:12.116] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 17.389ms
[2025-12-16 11:00:12.120] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-16 11:00:12.121] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 19.3137ms
[2025-12-16 11:00:12.122] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 11:00:12.123] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:00:12.124] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 11:00:12.125] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 49.0588ms
[2025-12-16 11:00:12.126] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 22.6523ms
[2025-12-16 11:00:12.127] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 44.4429ms
[2025-12-16 11:00:12.127] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 11:00:12.129] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 11:00:12.133] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:00:12.134] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 48.2181ms
[2025-12-16 11:00:12.135] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 8.0306ms
[2025-12-16 11:00:12.137] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 11:00:12.141] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:00:12.142] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 11:00:12.143] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 11:00:12.148] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 11:00:12.153] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 11:00:12.155] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 11:00:12.156] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:00:12.157] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 12.6207ms
[2025-12-16 11:00:12.158] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 11:00:12.158] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 21.4994ms
[2025-12-16 11:12:29.056] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - null null
[2025-12-16 11:12:29.058] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:29.059] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - 204 null null 2.8643ms
[2025-12-16 11:12:29.061] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Auth/login - application/json 44
[2025-12-16 11:12:29.063] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:29.064] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 11:12:29.064] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.AuthResponseDto]] Login(RestaurantAPI.DTOs.UserLoginDto) on controller RestaurantAPI.Controllers.AuthController (RestaurantApi).
[2025-12-16 11:12:29.121] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__dto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Username] = @__dto_Username_0
[2025-12-16 11:12:29.327] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [JwtTokens] ([CreatedAt], [ExpiresAt], [Revoked], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
[2025-12-16 11:12:29.330] [INF] [RestaurantAPI.Controllers.AuthController] Пользователь admin успешно вошел в систему
[2025-12-16 11:12:29.330] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'RestaurantAPI.DTOs.AuthResponseDto'.
[2025-12-16 11:12:29.332] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.AuthController.Login (RestaurantApi) in 266.0249ms
[2025-12-16 11:12:29.333] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 11:12:29.333] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Auth/login - 200 null application/json; charset=utf-8 272.5608ms
[2025-12-16 11:12:30.844] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 11:12:30.846] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:30.847] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 11:12:30.847] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 2.5928ms
[2025-12-16 11:12:30.847] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 11:12:30.849] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 11:12:30.852] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:30.858] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:30.860] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:30.861] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 14.0268ms
[2025-12-16 11:12:30.861] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 14.3887ms
[2025-12-16 11:12:30.862] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 11:12:30.863] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 11:12:30.863] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 11:12:30.869] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 11:12:30.871] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:30.874] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:30.876] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 11:12:30.877] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 11:12:30.878] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 11:12:30.879] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 11:12:30.879] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:30.887] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 11:12:30.888] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:30.889] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 11:12:30.891] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:12:30.892] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:30.893] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 17.3296ms
[2025-12-16 11:12:30.894] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 11:12:30.895] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 11:12:30.897] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 11:12:30.898] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 11:12:30.898] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 48.3379ms
[2025-12-16 11:12:30.899] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:12:30.900] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-16 11:12:30.902] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 11:12:30.904] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 23.7672ms
[2025-12-16 11:12:30.905] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:12:30.907] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:30.908] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 11:12:30.909] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 27.2457ms
[2025-12-16 11:12:30.910] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 7.6224ms
[2025-12-16 11:12:30.910] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 47.7014ms
[2025-12-16 11:12:30.911] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 11:12:30.912] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 11:12:30.919] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:30.920] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 56.8589ms
[2025-12-16 11:12:30.921] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 11:12:30.923] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 11:12:30.929] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 11:12:30.933] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 11:12:30.935] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 11:12:30.936] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:12:30.937] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 12.6415ms
[2025-12-16 11:12:30.938] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 11:12:30.939] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 27.3643ms
[2025-12-16 11:12:32.531] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - null null
[2025-12-16 11:12:32.533] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:32.534] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - 204 null null 3.0443ms
[2025-12-16 11:12:32.536] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - null null
[2025-12-16 11:12:32.539] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:32.540] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 11:12:32.541] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishIngredients", controller = "DishIngredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishIngredients(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishIngredientsController (RestaurantApi).
[2025-12-16 11:12:32.559] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (16ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DishIngredients] AS [d]
INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
[2025-12-16 11:12:32.565] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[DishId], [s].[Name] AS [DishName], [s].[IngredientId], [i].[Name] AS [IngredientName], [s].[Quantity]
FROM (
    SELECT [d].[Id], [d].[DishId], [d].[IngredientId], [d].[Quantity], [d0].[Name]
    FROM [DishIngredients] AS [d]
    INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
    ORDER BY [d0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Ingredients] AS [i] ON [s].[IngredientId] = [i].[Id]
ORDER BY [s].[Name]
[2025-12-16 11:12:32.567] [INF] [RestaurantAPI.Controllers.DishIngredientsController] Получен список ингредиентов блюд. Количество: 5, Всего: 5, Страница: 1
[2025-12-16 11:12:32.568] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishIngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:12:32.570] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi) in 27.7809ms
[2025-12-16 11:12:32.571] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 11:12:32.572] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=506c83ad-20ac-42f9-a32e-16f2701bad37&pageSize=1000 - 200 null application/json; charset=utf-8 36.1982ms
[2025-12-16 11:12:39.768] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-16 11:12:39.770] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:39.770] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 2.5193ms
[2025-12-16 11:12:39.772] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 183
[2025-12-16 11:12:39.775] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:39.775] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-16 11:12:39.776] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 11:12:39.781] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:39.783] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "601d547d-42ee-4d95-abc0-42bf30f4d94b", Notes: null, ItemsCount: 1
[2025-12-16 11:12:39.798] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-16 11:12:39.801] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:39.803] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "506c83ad-20ac-42f9-a32e-16f2701bad37", Quantity: 1, Notes: Удалено: Лист салата
[2025-12-16 11:12:39.810] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p13='?' (DbType = Guid), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Orders] SET [Total] = @p12
OUTPUT 1
WHERE [Id] = @p13;
[2025-12-16 11:12:39.813] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "3d91e79f-2386-47a9-a627-de62129279bd" создан пользователем "601d547d-42ee-4d95-abc0-42bf30f4d94b". Сумма: 750.00, Блюд: 1
[2025-12-16 11:12:39.815] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-16 11:12:39.816] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 38.5318ms
[2025-12-16 11:12:39.818] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-16 11:12:39.819] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 46.7268ms
[2025-12-16 11:12:42.233] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 11:12:42.236] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:42.237] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 3.8967ms
[2025-12-16 11:12:42.239] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 11:12:42.242] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:42.243] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 11:12:42.244] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 11:12:42.249] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:42.252] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:42.256] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:42.259] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:42.263] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 11:12:42.266] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 33440.00, Заказов: 12
[2025-12-16 11:12:42.267] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:12:42.268] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 22.3458ms
[2025-12-16 11:12:42.269] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 11:12:42.270] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 31.0528ms
[2025-12-16 11:12:42.276] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 11:12:42.278] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:42.278] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 2.6842ms
[2025-12-16 11:12:42.280] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 11:12:42.283] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:42.284] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 11:12:42.285] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 11:12:42.295] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 11:12:42.297] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 11:12:42.298] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 11:12:42.299] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 12.6015ms
[2025-12-16 11:12:42.300] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 11:12:42.301] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 20.7515ms
[2025-12-16 11:12:42.304] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 11:12:42.306] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:42.307] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 3.1036ms
[2025-12-16 11:12:42.308] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 11:12:42.311] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:42.312] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 11:12:42.313] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 11:12:42.320] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 11:12:42.322] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 11:12:42.323] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 9.459ms
[2025-12-16 11:12:42.325] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 11:12:42.326] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 17.1584ms
[2025-12-16 11:12:42.329] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 11:12:42.330] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:42.331] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 2.4141ms
[2025-12-16 11:12:42.332] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 11:12:42.335] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:42.336] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 11:12:42.337] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 11:12:42.342] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 11:12:42.344] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 11:12:42.345] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 6.703ms
[2025-12-16 11:12:42.346] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 11:12:42.346] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 13.9976ms
[2025-12-16 11:12:42.352] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 11:12:42.354] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:42.355] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.4757ms
[2025-12-16 11:12:42.356] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 11:12:42.359] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:42.359] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 11:12:42.360] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 11:12:42.364] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-16 11:12:42.366] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 11:12:42.367] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.7832ms
[2025-12-16 11:12:42.368] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 11:12:42.369] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 12.2655ms
[2025-12-16 11:12:44.243] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 11:12:44.245] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories - null null
[2025-12-16 11:12:44.245] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:44.247] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:44.248] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 4.945ms
[2025-12-16 11:12:44.248] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories - 204 null null 3.4031ms
[2025-12-16 11:12:44.250] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 11:12:44.251] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories - null null
[2025-12-16 11:12:44.256] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:44.259] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:44.260] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 11:12:44.260] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 11:12:44.261] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 11:12:44.262] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 11:12:44.265] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:44.266] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:44.268] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 11:12:44.269] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 11:12:44.270] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-16 11:12:44.272] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 11:12:44.274] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:12:44.275] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:12:44.276] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 12.3286ms
[2025-12-16 11:12:44.277] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 12.1197ms
[2025-12-16 11:12:44.278] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 11:12:44.279] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 11:12:44.279] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 29.5029ms
[2025-12-16 11:12:44.280] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories - 200 null application/json; charset=utf-8 29.478ms
[2025-12-16 11:12:45.057] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=1000 - null null
[2025-12-16 11:12:45.059] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:45.060] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=1000 - 204 null null 3.2597ms
[2025-12-16 11:12:45.063] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=1000 - null null
[2025-12-16 11:12:45.065] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:45.066] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 11:12:45.067] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 11:12:45.069] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:45.071] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 11:12:45.073] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 11:12:45.075] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:12:45.076] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 7.8944ms
[2025-12-16 11:12:45.077] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 11:12:45.078] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=1000 - 200 null application/json; charset=utf-8 15.2959ms
[2025-12-16 11:12:45.587] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Ingredients?pageSize=1000 - null null
[2025-12-16 11:12:45.589] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:45.590] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Ingredients?pageSize=1000 - 204 null null 3.572ms
[2025-12-16 11:12:45.592] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - null null
[2025-12-16 11:12:45.595] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:45.596] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-16 11:12:45.596] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetIngredients", controller = "Ingredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetIngredients(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.IngredientsController (RestaurantApi).
[2025-12-16 11:12:45.600] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:45.605] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[Name]
FROM [Ingredients] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit)
ORDER BY [i].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 11:12:45.607] [INF] [RestaurantAPI.Controllers.IngredientsController] Получен список ингредиентов. Количество: 24, Всего: 24, Страница: 1
[2025-12-16 11:12:45.608] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.IngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:12:45.610] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi) in 12.0257ms
[2025-12-16 11:12:45.611] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.IngredientsController.GetIngredients (RestaurantApi)'
[2025-12-16 11:12:45.612] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Ingredients?pageSize=1000 - 200 null application/json; charset=utf-8 19.6084ms
[2025-12-16 11:12:46.339] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=1000 - null null
[2025-12-16 11:12:46.342] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:46.343] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=1000 - 204 null null 3.134ms
[2025-12-16 11:12:46.346] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=1000 - null null
[2025-12-16 11:12:46.347] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:46.348] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 11:12:46.349] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 11:12:46.352] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:46.354] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 11:12:46.356] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 11:12:46.358] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:12:46.359] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 8.6069ms
[2025-12-16 11:12:46.360] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 11:12:46.361] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=1000 - 200 null application/json; charset=utf-8 15.1726ms
[2025-12-16 11:12:47.161] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 11:12:47.163] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Roles - null null
[2025-12-16 11:12:47.163] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:47.165] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:47.166] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 5.0942ms
[2025-12-16 11:12:47.167] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Roles - 204 null null 4.1475ms
[2025-12-16 11:12:47.170] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 11:12:47.170] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Roles - null null
[2025-12-16 11:12:47.175] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:47.177] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:47.178] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 11:12:47.178] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi)'
[2025-12-16 11:12:47.179] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 11:12:47.180] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRoles", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRoles(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.RolesController (RestaurantApi).
[2025-12-16 11:12:47.184] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:47.185] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Roles] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:47.191] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[Username], [r].[Name] AS [RoleName]
FROM (
    SELECT [u].[Id], [u].[RoleId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-16 11:12:47.192] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
ORDER BY [r].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 11:12:47.193] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 4, Всего: 4, Страница: 1
[2025-12-16 11:12:47.195] [INF] [RestaurantAPI.Controllers.RolesController] Получен список ролей. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 11:12:47.196] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:12:47.196] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.RoleReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:12:47.198] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 17.0889ms
[2025-12-16 11:12:47.199] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi) in 16.5542ms
[2025-12-16 11:12:47.201] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 11:12:47.202] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi)'
[2025-12-16 11:12:47.202] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 32.8967ms
[2025-12-16 11:12:47.203] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Roles - 200 null application/json; charset=utf-8 33.3201ms
[2025-12-16 11:12:47.875] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 11:12:47.878] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:47.879] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 3.9256ms
[2025-12-16 11:12:47.881] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 11:12:47.884] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:47.885] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 11:12:47.886] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 11:12:47.892] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:47.896] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:47.901] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:47.906] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:47.910] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 11:12:47.913] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 33440.00, Заказов: 12
[2025-12-16 11:12:47.914] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:12:47.915] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 27.5944ms
[2025-12-16 11:12:47.917] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 11:12:47.918] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 37.8253ms
[2025-12-16 11:12:47.925] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 11:12:47.927] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:47.928] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 2.935ms
[2025-12-16 11:12:47.930] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 11:12:47.932] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:47.933] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 11:12:47.934] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 11:12:47.943] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 11:12:47.945] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 11:12:47.946] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 11:12:47.947] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 11.8242ms
[2025-12-16 11:12:47.948] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 11:12:47.949] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 19.112ms
[2025-12-16 11:12:47.951] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 11:12:47.953] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:47.954] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.1153ms
[2025-12-16 11:12:47.956] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 11:12:47.958] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:47.959] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 11:12:47.960] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 11:12:47.968] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 11:12:47.969] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 11:12:47.970] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 9.2058ms
[2025-12-16 11:12:47.972] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 11:12:47.973] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 16.9789ms
[2025-12-16 11:12:47.976] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 11:12:47.978] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:47.978] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 2.5432ms
[2025-12-16 11:12:47.980] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 11:12:47.983] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:47.983] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 11:12:47.984] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 11:12:47.989] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 11:12:47.991] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 11:12:47.992] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 7.1002ms
[2025-12-16 11:12:47.993] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 11:12:47.994] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 14.648ms
[2025-12-16 11:12:47.999] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 11:12:48.002] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:48.003] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 3.0993ms
[2025-12-16 11:12:48.004] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 11:12:48.008] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:48.009] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 11:12:48.010] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 11:12:48.015] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-16 11:12:48.017] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 11:12:48.018] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 6.9103ms
[2025-12-16 11:12:48.020] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 11:12:48.021] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 16.3536ms
[2025-12-16 11:12:57.268] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 11:12:57.270] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Roles - null null
[2025-12-16 11:12:57.271] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:57.273] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:57.274] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 6.0364ms
[2025-12-16 11:12:57.275] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Roles - 204 null null 4.681ms
[2025-12-16 11:12:57.277] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 11:12:57.278] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Roles - null null
[2025-12-16 11:12:57.282] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:57.284] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:57.285] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 11:12:57.285] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi)'
[2025-12-16 11:12:57.286] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 11:12:57.287] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRoles", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRoles(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.RolesController (RestaurantApi).
[2025-12-16 11:12:57.293] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:57.295] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Roles] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:57.297] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[Username], [r].[Name] AS [RoleName]
FROM (
    SELECT [u].[Id], [u].[RoleId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-16 11:12:57.298] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
ORDER BY [r].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 11:12:57.299] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 4, Всего: 4, Страница: 1
[2025-12-16 11:12:57.301] [INF] [RestaurantAPI.Controllers.RolesController] Получен список ролей. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 11:12:57.302] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:12:57.304] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.RoleReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:12:57.306] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 17.1809ms
[2025-12-16 11:12:57.307] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi) in 15.6712ms
[2025-12-16 11:12:57.308] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 11:12:57.309] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi)'
[2025-12-16 11:12:57.310] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 33.0369ms
[2025-12-16 11:12:57.310] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Roles - 200 null application/json; charset=utf-8 32.8543ms
[2025-12-16 11:12:58.245] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 11:12:58.246] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 11:12:58.249] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:58.252] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:58.253] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 7.3352ms
[2025-12-16 11:12:58.254] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 11:12:58.254] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 11:12:58.260] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 11:12:58.263] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:58.265] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 11:12:58.266] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:58.266] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 11:12:58.269] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[Username], [r].[Name] AS [RoleName]
FROM (
    SELECT [u].[Id], [u].[RoleId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-16 11:12:58.272] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 4, Всего: 4, Страница: 1
[2025-12-16 11:12:58.273] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:58.274] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:12:58.277] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 12.6033ms
[2025-12-16 11:12:58.279] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 11:12:58.279] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [u].[Username], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[Notes]
FROM (
    SELECT [o].[Id], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 11:12:58.280] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 34.1913ms
[2025-12-16 11:12:58.282] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 12, Всего: 12, Страница: 1
[2025-12-16 11:12:58.285] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:12:58.286] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 15.9046ms
[2025-12-16 11:12:58.287] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 11:12:58.288] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 33.7592ms
[2025-12-16 11:12:59.638] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 11:12:59.640] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Roles - null null
[2025-12-16 11:12:59.640] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:59.643] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:12:59.644] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 11:12:59.644] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi)'
[2025-12-16 11:12:59.645] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 11:12:59.646] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRoles", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRoles(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.RolesController (RestaurantApi).
[2025-12-16 11:12:59.649] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:59.650] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Roles] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:12:59.652] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[Username], [r].[Name] AS [RoleName]
FROM (
    SELECT [u].[Id], [u].[RoleId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-16 11:12:59.653] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
ORDER BY [r].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 11:12:59.654] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 4, Всего: 4, Страница: 1
[2025-12-16 11:12:59.656] [INF] [RestaurantAPI.Controllers.RolesController] Получен список ролей. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 11:12:59.658] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:12:59.659] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.RoleReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:12:59.660] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 12.1582ms
[2025-12-16 11:12:59.661] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi) in 12.1031ms
[2025-12-16 11:12:59.662] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 11:12:59.663] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.RolesController.GetRoles (RestaurantApi)'
[2025-12-16 11:12:59.664] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 26.6333ms
[2025-12-16 11:12:59.665] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Roles - 200 null application/json; charset=utf-8 25.0298ms
[2025-12-16 11:23:49.018] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - null null
[2025-12-16 11:23:49.020] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:23:49.022] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - 204 null null 3.7792ms
[2025-12-16 11:23:49.024] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Auth/login - application/json 44
[2025-12-16 11:23:49.028] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:23:49.029] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 11:23:49.030] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.AuthResponseDto]] Login(RestaurantAPI.DTOs.UserLoginDto) on controller RestaurantAPI.Controllers.AuthController (RestaurantApi).
[2025-12-16 11:23:49.086] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[@__dto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Username] = @__dto_Username_0
[2025-12-16 11:23:49.248] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [JwtTokens] ([CreatedAt], [ExpiresAt], [Revoked], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
[2025-12-16 11:23:49.250] [INF] [RestaurantAPI.Controllers.AuthController] Пользователь admin успешно вошел в систему
[2025-12-16 11:23:49.251] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'RestaurantAPI.DTOs.AuthResponseDto'.
[2025-12-16 11:23:49.252] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.AuthController.Login (RestaurantApi) in 220.5106ms
[2025-12-16 11:23:49.253] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 11:23:49.254] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Auth/login - 200 null application/json; charset=utf-8 230.6169ms
[2025-12-16 11:23:49.301] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 11:23:49.303] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 11:23:49.304] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 11:23:49.304] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:23:49.306] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:23:49.309] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:23:49.311] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 9.8521ms
[2025-12-16 11:23:49.311] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 8.6382ms
[2025-12-16 11:23:49.312] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 8.2636ms
[2025-12-16 11:23:49.313] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 11:23:49.313] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 11:23:49.314] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 11:23:49.321] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:23:49.324] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:23:49.326] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:23:49.326] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 11:23:49.327] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 11:23:49.327] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 11:23:49.328] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 11:23:49.329] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 11:23:49.330] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 11:23:49.336] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:23:49.342] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:23:49.342] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:23:49.345] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 11:23:49.347] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 11:23:49.347] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 11:23:49.348] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 11:23:49.348] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:23:49.350] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-16 11:23:49.351] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 11:23:49.353] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 20.7304ms
[2025-12-16 11:23:49.354] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:23:49.355] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:23:49.355] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 11:23:49.357] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 21.4789ms
[2025-12-16 11:23:49.358] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 24.0965ms
[2025-12-16 11:23:49.358] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 45.1683ms
[2025-12-16 11:23:49.360] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 11:23:49.360] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 11:23:49.361] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 11:23:49.363] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 49.3795ms
[2025-12-16 11:23:49.364] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 50.5603ms
[2025-12-16 11:23:49.366] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:23:49.371] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 10.2603ms
[2025-12-16 11:23:49.373] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 11:23:49.375] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:23:49.376] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 11:23:49.377] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 11:23:49.383] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 11:23:49.389] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 11:23:49.391] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 11:23:49.392] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:23:49.393] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 15.1432ms
[2025-12-16 11:23:49.394] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 11:23:49.395] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 22.4321ms
[2025-12-16 11:23:58.011] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=e8b4009a-2de3-4f24-9484-408e7d813d61&pageSize=1000 - null null
[2025-12-16 11:23:58.013] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:23:58.014] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=e8b4009a-2de3-4f24-9484-408e7d813d61&pageSize=1000 - 204 null null 2.4487ms
[2025-12-16 11:23:58.015] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=e8b4009a-2de3-4f24-9484-408e7d813d61&pageSize=1000 - null null
[2025-12-16 11:23:58.018] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:23:58.019] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 11:23:58.020] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishIngredients", controller = "DishIngredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishIngredients(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishIngredientsController (RestaurantApi).
[2025-12-16 11:23:58.039] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (17ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DishIngredients] AS [d]
INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
[2025-12-16 11:23:58.045] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[DishId], [s].[Name] AS [DishName], [s].[IngredientId], [i].[Name] AS [IngredientName], [s].[Quantity]
FROM (
    SELECT [d].[Id], [d].[DishId], [d].[IngredientId], [d].[Quantity], [d0].[Name]
    FROM [DishIngredients] AS [d]
    INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
    ORDER BY [d0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Ingredients] AS [i] ON [s].[IngredientId] = [i].[Id]
ORDER BY [s].[Name]
[2025-12-16 11:23:58.047] [INF] [RestaurantAPI.Controllers.DishIngredientsController] Получен список ингредиентов блюд. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 11:23:58.048] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishIngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:23:58.049] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi) in 28.1948ms
[2025-12-16 11:23:58.050] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 11:23:58.051] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=e8b4009a-2de3-4f24-9484-408e7d813d61&pageSize=1000 - 200 null application/json; charset=utf-8 35.8007ms
[2025-12-16 11:24:32.889] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-16 11:24:32.891] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:24:32.892] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 2.7364ms
[2025-12-16 11:24:32.893] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 298
[2025-12-16 11:24:32.896] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:24:32.896] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-16 11:24:32.897] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 11:24:32.901] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[2025-12-16 11:24:32.932] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 33.1688ms
[2025-12-16 11:24:32.933] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-16 11:24:32.934] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 400 null application/problem+json; charset=utf-8 41.0532ms
[2025-12-16 11:24:47.954] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-16 11:24:47.956] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:24:47.957] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 2.6273ms
[2025-12-16 11:24:47.958] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 298
[2025-12-16 11:24:47.961] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:24:47.962] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-16 11:24:47.962] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 11:24:47.964] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[2025-12-16 11:24:47.966] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 1.8468ms
[2025-12-16 11:24:47.967] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-16 11:24:47.967] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 400 null application/problem+json; charset=utf-8 9.1817ms
[2025-12-16 11:25:06.314] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-16 11:25:06.316] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:06.317] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 2.2875ms
[2025-12-16 11:25:06.318] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 316
[2025-12-16 11:25:06.321] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:06.321] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-16 11:25:06.322] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 11:25:06.327] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:25:06.329] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "601d547d-42ee-4d95-abc0-42bf30f4d94b", Notes: ВСЁ УБЕРИТЕ, ItemsCount: 2
[2025-12-16 11:25:06.335] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-16 11:25:06.338] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:25:06.340] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "0ca719ed-5bb4-4e18-a5f2-85f0957cb01c", Quantity: 13, Notes: null
[2025-12-16 11:25:06.342] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:25:06.344] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e8b4009a-2de3-4f24-9484-408e7d813d61", Quantity: 86, Notes: Удалено: Растительное масло, Сахар, Мука
[2025-12-16 11:25:06.357] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p12='?' (DbType = DateTime), @p13='?' (Size = 100), @p14='?' (DbType = DateTime), @p15='?' (Size = 100), @p16='?' (DbType = Guid), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (DbType = Guid), @p20='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (Size = 100), @p25='?' (DbType = Guid), @p24='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, 0),
(@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, 1)) AS i ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
VALUES (i.[CreatedAt], i.[CreatedBy], i.[DeletedAt], i.[DeletedBy], i.[DishId], i.[IsDeleted], i.[Notes], i.[OrderId], i.[Price], i.[Quantity], i.[UpdatedAt], i.[UpdatedBy])
OUTPUT INSERTED.[Id], i._Position;
UPDATE [Orders] SET [Total] = @p24
OUTPUT 1
WHERE [Id] = @p25;
[2025-12-16 11:25:06.359] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "4c79bfdc-1d09-42c2-87dd-2f1cd1b6d97c" создан пользователем "601d547d-42ee-4d95-abc0-42bf30f4d94b". Сумма: 38560.00, Блюд: 2
[2025-12-16 11:25:06.361] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-16 11:25:06.362] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 38.0024ms
[2025-12-16 11:25:06.363] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-16 11:25:06.364] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 45.4737ms
[2025-12-16 11:25:09.527] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 11:25:09.529] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:09.530] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 11:25:09.530] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 3.5211ms
[2025-12-16 11:25:09.530] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 11:25:09.532] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:09.535] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 11:25:09.537] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:09.538] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 8.3019ms
[2025-12-16 11:25:09.539] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 11:25:09.540] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:09.541] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 10.6062ms
[2025-12-16 11:25:09.542] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 11:25:09.546] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:09.547] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 11:25:09.552] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:09.553] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 11:25:09.554] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 11:25:09.555] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 11:25:09.555] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 11:25:09.558] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 11:25:09.560] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:25:09.563] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:25:09.563] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:25:09.565] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 11:25:09.567] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 11:25:09.569] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 11:25:09.568] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 11:25:09.570] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 11:25:09.571] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-16 11:25:09.572] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:25:09.573] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:25:09.574] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:25:09.576] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 18.6886ms
[2025-12-16 11:25:09.577] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 17.395ms
[2025-12-16 11:25:09.579] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 17.7344ms
[2025-12-16 11:25:09.580] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 11:25:09.580] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 11:25:09.581] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 11:25:09.582] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 47.3144ms
[2025-12-16 11:25:09.583] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 43.1738ms
[2025-12-16 11:25:09.584] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 41.1825ms
[2025-12-16 11:25:09.584] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 11:25:09.591] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:09.592] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 8.0306ms
[2025-12-16 11:25:09.594] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 11:25:09.596] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:09.597] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 11:25:09.598] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 11:25:09.602] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 11:25:09.606] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 11:25:09.608] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 11:25:09.609] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:25:09.611] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 11.5129ms
[2025-12-16 11:25:09.612] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 11:25:09.613] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 19.1098ms
[2025-12-16 11:25:11.987] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 11:25:11.990] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:11.990] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - 204 null null 3.3907ms
[2025-12-16 11:25:11.993] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 11:25:11.996] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:11.996] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 11:25:11.998] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMyOrders() on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 11:25:12.003] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [u].[Username], [o].[OrderDate], [o].[Status], [o].[Total], [o].[Notes]
FROM [Orders] AS [o]
INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[UserId] = @__userId_0
ORDER BY [o].[OrderDate] DESC
[2025-12-16 11:25:12.006] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b". Количество: 7
[2025-12-16 11:25:12.007] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 11:25:12.009] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 9.0399ms
[2025-12-16 11:25:12.010] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 11:25:12.011] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - 200 null application/json; charset=utf-8 18.2353ms
[2025-12-16 11:25:14.049] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/4c79bfdc-1d09-42c2-87dd-2f1cd1b6d97c - null null
[2025-12-16 11:25:14.051] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:14.052] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/4c79bfdc-1d09-42c2-87dd-2f1cd1b6d97c - 204 null null 3.64ms
[2025-12-16 11:25:14.054] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/4c79bfdc-1d09-42c2-87dd-2f1cd1b6d97c - null null
[2025-12-16 11:25:14.057] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:14.057] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 11:25:14.058] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-16 11:25:14.061] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:25:14.065] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-16 11:25:14.067] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 11:25:14.068] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 8.388ms
[2025-12-16 11:25:14.069] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 11:25:14.069] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/4c79bfdc-1d09-42c2-87dd-2f1cd1b6d97c - 200 null application/json; charset=utf-8 15.5919ms
[2025-12-16 11:25:18.526] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 11:25:18.529] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:18.530] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 3.2685ms
[2025-12-16 11:25:18.531] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 11:25:18.535] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:18.536] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 11:25:18.537] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 11:25:18.541] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:25:18.546] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:25:18.550] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:25:18.553] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:25:18.557] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 11:25:18.559] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 72000.00, Заказов: 13
[2025-12-16 11:25:18.559] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:25:18.561] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 22.0125ms
[2025-12-16 11:25:18.562] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 11:25:18.563] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 31.6984ms
[2025-12-16 11:25:18.569] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 11:25:18.571] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:18.572] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 3.1782ms
[2025-12-16 11:25:18.574] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 11:25:18.577] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:18.578] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 11:25:18.579] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 11:25:18.588] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 11:25:18.590] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 11:25:18.591] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 11:25:18.592] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 11.4591ms
[2025-12-16 11:25:18.593] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 11:25:18.594] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 20.1631ms
[2025-12-16 11:25:18.598] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 11:25:18.600] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:18.601] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.9468ms
[2025-12-16 11:25:18.608] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 11:25:18.609] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:18.611] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 11:25:18.613] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 11:25:18.624] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 11:25:18.626] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 11:25:18.627] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 10.0111ms
[2025-12-16 11:25:18.629] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 11:25:18.630] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 22.1427ms
[2025-12-16 11:25:18.633] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 11:25:18.635] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:18.636] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 2.6497ms
[2025-12-16 11:25:18.637] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 11:25:18.640] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:18.641] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 11:25:18.642] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 11:25:18.647] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 11:25:18.649] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 11:25:18.650] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 7.1288ms
[2025-12-16 11:25:18.652] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 11:25:18.652] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 15.0204ms
[2025-12-16 11:25:18.657] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 11:25:18.659] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:18.659] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.3796ms
[2025-12-16 11:25:18.661] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 11:25:18.664] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:18.664] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 11:25:18.665] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 11:25:18.669] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-16 11:25:18.671] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 11:25:18.672] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.2377ms
[2025-12-16 11:25:18.673] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 11:25:18.673] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 12.5291ms
[2025-12-16 11:25:20.069] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 11:25:20.071] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 11:25:20.071] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:20.073] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:20.074] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 5.2062ms
[2025-12-16 11:25:20.075] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 3.8709ms
[2025-12-16 11:25:20.076] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 11:25:20.077] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 11:25:20.083] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:20.085] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:20.086] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 11:25:20.086] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 11:25:20.087] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 11:25:20.088] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 11:25:20.090] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:25:20.092] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:25:20.097] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[Username], [r].[Name] AS [RoleName]
FROM (
    SELECT [u].[Id], [u].[RoleId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-16 11:25:20.098] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [u].[Username], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[Notes]
FROM (
    SELECT [o].[Id], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 11:25:20.099] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 4, Всего: 4, Страница: 1
[2025-12-16 11:25:20.101] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 13, Всего: 13, Страница: 1
[2025-12-16 11:25:20.101] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:25:20.102] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:25:20.104] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 14.2579ms
[2025-12-16 11:25:20.105] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 13.8664ms
[2025-12-16 11:25:20.106] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 11:25:20.106] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 11:25:20.107] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 30.836ms
[2025-12-16 11:25:20.108] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 31.2419ms
[2025-12-16 11:25:21.820] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/4c79bfdc-1d09-42c2-87dd-2f1cd1b6d97c - null null
[2025-12-16 11:25:21.823] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:21.823] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/4c79bfdc-1d09-42c2-87dd-2f1cd1b6d97c - 204 null null 3.4937ms
[2025-12-16 11:25:21.825] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/4c79bfdc-1d09-42c2-87dd-2f1cd1b6d97c - null null
[2025-12-16 11:25:21.828] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:21.828] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 11:25:21.829] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-16 11:25:21.833] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:25:21.838] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-16 11:25:21.840] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 11:25:21.841] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 10.427ms
[2025-12-16 11:25:21.842] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 11:25:21.843] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/4c79bfdc-1d09-42c2-87dd-2f1cd1b6d97c - 200 null application/json; charset=utf-8 17.679ms
[2025-12-16 11:25:25.502] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/4c79bfdc-1d09-42c2-87dd-2f1cd1b6d97c - null null
[2025-12-16 11:25:25.504] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:25.505] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/4c79bfdc-1d09-42c2-87dd-2f1cd1b6d97c - 204 null null 2.9784ms
[2025-12-16 11:25:25.507] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 PUT https://localhost:7188/api/Orders/4c79bfdc-1d09-42c2-87dd-2f1cd1b6d97c - application/json 23
[2025-12-16 11:25:25.509] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:25.510] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.UpdateOrder (RestaurantApi)'
[2025-12-16 11:25:25.515] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "UpdateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateOrder(System.Guid, RestaurantAPI.DTOs.OrderUpdateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 11:25:25.526] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__id_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:25:25.543] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (15ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (Size = 50), @p1='?' (DbType = DateTime), @p2='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [Status] = @p0, [UpdatedAt] = @p1, [UpdatedBy] = @p2
OUTPUT 1
WHERE [Id] = @p3;
[2025-12-16 11:25:25.545] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "4c79bfdc-1d09-42c2-87dd-2f1cd1b6d97c" обновлен. Статус изменен с Pending на Processing пользователем admin
[2025-12-16 11:25:25.548] [INF] [Microsoft.AspNetCore.Mvc.StatusCodeResult] Executing StatusCodeResult, setting HTTP status code 204
[2025-12-16 11:25:25.549] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.UpdateOrder (RestaurantApi) in 32.8072ms
[2025-12-16 11:25:25.550] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.UpdateOrder (RestaurantApi)'
[2025-12-16 11:25:25.551] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 PUT https://localhost:7188/api/Orders/4c79bfdc-1d09-42c2-87dd-2f1cd1b6d97c - 204 null null 43.5324ms
[2025-12-16 11:25:27.772] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/3d91e79f-2386-47a9-a627-de62129279bd - null null
[2025-12-16 11:25:27.774] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:27.775] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/3d91e79f-2386-47a9-a627-de62129279bd - 204 null null 2.657ms
[2025-12-16 11:25:27.777] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/3d91e79f-2386-47a9-a627-de62129279bd - null null
[2025-12-16 11:25:27.779] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:27.780] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 11:25:27.782] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-16 11:25:27.786] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:25:27.791] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-16 11:25:27.793] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 11:25:27.794] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 10.6722ms
[2025-12-16 11:25:27.795] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 11:25:27.797] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/3d91e79f-2386-47a9-a627-de62129279bd - 200 null application/json; charset=utf-8 19.9266ms
[2025-12-16 11:25:29.081] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/d0caecfc-95d0-4cfb-a310-9f4b281954cd - null null
[2025-12-16 11:25:29.084] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:29.085] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/d0caecfc-95d0-4cfb-a310-9f4b281954cd - 204 null null 3.7955ms
[2025-12-16 11:25:29.087] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/d0caecfc-95d0-4cfb-a310-9f4b281954cd - null null
[2025-12-16 11:25:29.090] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:29.091] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 11:25:29.091] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-16 11:25:29.094] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:25:29.097] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-16 11:25:29.099] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 11:25:29.100] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 7.5677ms
[2025-12-16 11:25:29.102] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 11:25:29.102] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/d0caecfc-95d0-4cfb-a310-9f4b281954cd - 200 null application/json; charset=utf-8 15.111ms
[2025-12-16 11:25:30.099] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/6151b050-8594-4d64-9fb1-e49eac94f05e - null null
[2025-12-16 11:25:30.101] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:30.101] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/6151b050-8594-4d64-9fb1-e49eac94f05e - 204 null null 2.2651ms
[2025-12-16 11:25:30.103] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/6151b050-8594-4d64-9fb1-e49eac94f05e - null null
[2025-12-16 11:25:30.105] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:30.106] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 11:25:30.106] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-16 11:25:30.109] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:25:30.112] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (0ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-16 11:25:30.113] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 11:25:30.114] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 6.2902ms
[2025-12-16 11:25:30.115] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 11:25:30.116] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/6151b050-8594-4d64-9fb1-e49eac94f05e - 200 null application/json; charset=utf-8 13.3812ms
[2025-12-16 11:25:39.781] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 11:25:39.784] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:39.785] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 3.8236ms
[2025-12-16 11:25:39.788] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 11:25:39.790] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:39.791] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 11:25:39.792] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 11:25:39.796] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:25:39.799] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:25:39.803] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:25:39.807] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 11:25:39.811] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 11:25:39.812] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 72000.00, Заказов: 13
[2025-12-16 11:25:39.813] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 11:25:39.815] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 21.1093ms
[2025-12-16 11:25:39.816] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 11:25:39.817] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 29.2226ms
[2025-12-16 11:25:39.824] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 11:25:39.826] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:39.827] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 2.9569ms
[2025-12-16 11:25:39.829] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 11:25:39.832] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:39.833] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 11:25:39.834] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 11:25:39.844] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 11:25:39.846] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 11:25:39.846] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 11:25:39.847] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 12.1285ms
[2025-12-16 11:25:39.848] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 11:25:39.849] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 20.4369ms
[2025-12-16 11:25:39.851] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 11:25:39.853] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:39.854] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 2.2299ms
[2025-12-16 11:25:39.856] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 11:25:39.858] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:39.859] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 11:25:39.860] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 11:25:39.867] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 11:25:39.869] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 11:25:39.870] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 8.7166ms
[2025-12-16 11:25:39.872] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 11:25:39.873] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 17.0222ms
[2025-12-16 11:25:39.876] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 11:25:39.877] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:39.878] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 2.2001ms
[2025-12-16 11:25:39.879] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 11:25:39.882] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:39.882] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 11:25:39.883] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 11:25:39.887] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 11:25:39.889] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 11:25:39.890] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 5.9935ms
[2025-12-16 11:25:39.891] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 11:25:39.892] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 12.9794ms
[2025-12-16 11:25:39.898] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 11:25:39.899] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:39.900] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 2.2835ms
[2025-12-16 11:25:39.901] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 11:25:39.904] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 11:25:39.905] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 11:25:39.906] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 11:25:39.910] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-16 11:25:39.912] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 11:25:39.913] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 5.5251ms
[2025-12-16 11:25:39.914] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 11:25:39.914] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 13.1909ms
[2025-12-16 16:18:01.450] [INF] [] Запуск приложения Restaurant API
[2025-12-16 16:18:03.944] [INF] [] Приложение Restaurant API успешно запущено
[2025-12-16 16:18:04.011] [INF] [Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager] User profile is available. Using 'C:\Users\motya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-12-16 16:18:04.439] [INF] [Microsoft.Hosting.Lifetime] Now listening on: https://localhost:7188
[2025-12-16 16:18:04.442] [INF] [Microsoft.Hosting.Lifetime] Now listening on: http://localhost:5143
[2025-12-16 16:18:04.686] [INF] [Microsoft.Hosting.Lifetime] Application started. Press Ctrl+C to shut down.
[2025-12-16 16:18:04.688] [INF] [Microsoft.Hosting.Lifetime] Hosting environment: Development
[2025-12-16 16:18:04.690] [INF] [Microsoft.Hosting.Lifetime] Content root path: D:\restaurant-project\RestaurantAPI\RestaurantApi
[2025-12-16 16:18:05.167] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/index.html - null null
[2025-12-16 16:18:05.699] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/index.html - 200 null text/html;charset=utf-8 537.1362ms
[2025-12-16 16:18:05.765] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - null null
[2025-12-16 16:18:05.775] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 8.9311ms
[2025-12-16 16:18:06.334] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/_vs/browserLink - null null
[2025-12-16 16:18:06.438] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/_vs/browserLink - 200 null text/javascript; charset=UTF-8 104.4255ms
[2025-12-16 16:18:06.637] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - null null
[2025-12-16 16:18:06.711] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 73.8479ms
[2025-12-16 16:18:19.902] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - null null
[2025-12-16 16:18:19.915] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:18:19.922] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - 204 null null 20.4901ms
[2025-12-16 16:18:19.926] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Auth/login - application/json 44
[2025-12-16 16:18:19.951] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:18:23.136] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 16:18:23.213] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.AuthResponseDto]] Login(RestaurantAPI.DTOs.UserLoginDto) on controller RestaurantAPI.Controllers.AuthController (RestaurantApi).
[2025-12-16 16:18:30.934] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (273ms) [Parameters=[@__dto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Username] = @__dto_Username_0
[2025-12-16 16:18:32.962] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [JwtTokens] ([CreatedAt], [ExpiresAt], [Revoked], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
[2025-12-16 16:18:33.030] [INF] [RestaurantAPI.Controllers.AuthController] Пользователь admin успешно вошел в систему
[2025-12-16 16:18:33.049] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'RestaurantAPI.DTOs.AuthResponseDto'.
[2025-12-16 16:18:33.104] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.AuthController.Login (RestaurantApi) in 9874.4564ms
[2025-12-16 16:18:33.110] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 16:18:33.129] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Auth/login - 499 null application/json; charset=utf-8 13203.7729ms
[2025-12-16 16:18:35.560] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - null null
[2025-12-16 16:18:35.568] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:18:35.572] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Auth/login - 204 null null 11.9705ms
[2025-12-16 16:18:35.575] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Auth/login - application/json 44
[2025-12-16 16:18:35.587] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:18:35.594] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 16:18:35.598] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.AuthResponseDto]] Login(RestaurantAPI.DTOs.UserLoginDto) on controller RestaurantAPI.Controllers.AuthController (RestaurantApi).
[2025-12-16 16:18:35.667] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[@__dto_Username_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username], [r].[Id], [r].[CreatedAt], [r].[CreatedBy], [r].[DeletedAt], [r].[DeletedBy], [r].[IsDeleted], [r].[Name], [r].[Notes], [r].[UpdatedAt], [r].[UpdatedBy]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Username] = @__dto_Username_0
[2025-12-16 16:18:36.161] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [JwtTokens] ([CreatedAt], [ExpiresAt], [Revoked], [RevokedAt], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
[2025-12-16 16:18:36.169] [INF] [RestaurantAPI.Controllers.AuthController] Пользователь admin успешно вошел в систему
[2025-12-16 16:18:36.172] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing ObjectResult, writing value of type 'RestaurantAPI.DTOs.AuthResponseDto'.
[2025-12-16 16:18:36.177] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.AuthController.Login (RestaurantApi) in 572.6468ms
[2025-12-16 16:18:36.180] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.AuthController.Login (RestaurantApi)'
[2025-12-16 16:18:36.185] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Auth/login - 200 null application/json; charset=utf-8 609.2722ms
[2025-12-16 16:18:36.629] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 16:18:36.629] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 16:18:36.631] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 16:18:36.641] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:18:36.646] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:18:36.651] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:18:36.653] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Menus?pageSize=100 - 204 null null 24.173ms
[2025-12-16 16:18:36.654] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Categories?pageSize=100 - 204 null null 25.3706ms
[2025-12-16 16:18:36.656] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Dishes?pageSize=1000 - 204 null null 25.1496ms
[2025-12-16 16:18:36.657] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - null null
[2025-12-16 16:18:36.658] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - null null
[2025-12-16 16:18:36.658] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - null null
[2025-12-16 16:18:36.690] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:18:36.697] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:18:36.705] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:18:36.806] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 16:18:36.806] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 16:18:36.806] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 16:18:36.825] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenus", controller = "Menus"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenus(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenusController (RestaurantApi).
[2025-12-16 16:18:36.826] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishes", controller = "Dishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishesController (RestaurantApi).
[2025-12-16 16:18:36.829] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetCategories(System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.CategoriesController (RestaurantApi).
[2025-12-16 16:18:37.111] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 16:18:37.112] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 16:18:37.114] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 16:18:37.168] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [c].[Notes]
FROM [Categories] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit)
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 16:18:37.168] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Name]
FROM [Menus] AS [m]
WHERE [m].[IsDeleted] = CAST(0 AS bit)
ORDER BY [m].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
[2025-12-16 16:18:37.177] [INF] [RestaurantAPI.Controllers.CategoriesController] Получен список категорий. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 16:18:37.181] [INF] [RestaurantAPI.Controllers.MenusController] Получен список меню. Количество: 2, Всего: 2, Страница: 1
[2025-12-16 16:18:37.186] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.CategoryReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 16:18:37.188] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 16:18:37.189] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d0].[Id], [d0].[Name], [d0].[Description], [d0].[Price], [c].[Name] AS [CategoryName]
FROM (
    SELECT [d].[Id], [d].[CategoryId], [d].[Description], [d].[Name], [d].[Price]
    FROM [Dishes] AS [d]
    WHERE [d].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [d].[Name]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [d0]
INNER JOIN [Categories] AS [c] ON [d0].[CategoryId] = [c].[Id]
ORDER BY [d0].[Name]
[2025-12-16 16:18:37.209] [INF] [RestaurantAPI.Controllers.DishesController] Получен список блюд. Количество: 13, Всего: 13, Страница: 1, Размер страницы: 1000
[2025-12-16 16:18:37.215] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi) in 383.0461ms
[2025-12-16 16:18:37.215] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 16:18:37.215] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi) in 374.0662ms
[2025-12-16 16:18:37.217] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenusController.GetMenus (RestaurantApi)'
[2025-12-16 16:18:37.223] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.CategoriesController.GetCategories (RestaurantApi)'
[2025-12-16 16:18:37.229] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Menus?pageSize=100 - 200 null application/json; charset=utf-8 572.1818ms
[2025-12-16 16:18:37.231] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Categories?pageSize=100 - 200 null application/json; charset=utf-8 573.3961ms
[2025-12-16 16:18:37.234] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 16:18:37.238] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi) in 400.459ms
[2025-12-16 16:18:37.255] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:18:37.259] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishesController.GetDishes (RestaurantApi)'
[2025-12-16 16:18:37.262] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 204 null null 27.9381ms
[2025-12-16 16:18:37.263] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Dishes?pageSize=1000 - 200 null application/json; charset=utf-8 604.9922ms
[2025-12-16 16:18:37.265] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - null null
[2025-12-16 16:18:37.282] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:18:37.289] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 16:18:37.304] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 16:18:37.356] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 16:18:37.400] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 16:18:37.409] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 9, Всего: 9, Страница: 1
[2025-12-16 16:18:37.413] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 16:18:37.426] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 117.9255ms
[2025-12-16 16:18:37.431] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 16:18:37.434] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=b7126bb9-2192-4a2c-a076-283d39c30d68&pageSize=1000 - 200 null application/json; charset=utf-8 168.9061ms
[2025-12-16 16:18:48.447] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=0ca719ed-5bb4-4e18-a5f2-85f0957cb01c&pageSize=1000 - null null
[2025-12-16 16:18:48.453] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:18:48.455] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=0ca719ed-5bb4-4e18-a5f2-85f0957cb01c&pageSize=1000 - 204 null null 8.4029ms
[2025-12-16 16:18:48.458] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=0ca719ed-5bb4-4e18-a5f2-85f0957cb01c&pageSize=1000 - null null
[2025-12-16 16:18:48.465] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:18:48.467] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 16:18:48.479] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishIngredients", controller = "DishIngredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishIngredients(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishIngredientsController (RestaurantApi).
[2025-12-16 16:18:48.524] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (10ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DishIngredients] AS [d]
INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
[2025-12-16 16:18:48.566] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (12ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[DishId], [s].[Name] AS [DishName], [s].[IngredientId], [i].[Name] AS [IngredientName], [s].[Quantity]
FROM (
    SELECT [d].[Id], [d].[DishId], [d].[IngredientId], [d].[Quantity], [d0].[Name]
    FROM [DishIngredients] AS [d]
    INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
    ORDER BY [d0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Ingredients] AS [i] ON [s].[IngredientId] = [i].[Id]
ORDER BY [s].[Name]
[2025-12-16 16:18:48.572] [INF] [RestaurantAPI.Controllers.DishIngredientsController] Получен список ингредиентов блюд. Количество: 3, Всего: 3, Страница: 1
[2025-12-16 16:18:48.577] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishIngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 16:18:48.592] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi) in 107.2275ms
[2025-12-16 16:18:48.594] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 16:18:48.598] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=0ca719ed-5bb4-4e18-a5f2-85f0957cb01c&pageSize=1000 - 200 null application/json; charset=utf-8 140.3293ms
[2025-12-16 16:19:10.889] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=e95fdeb0-af57-44bd-91ab-29e79dbad536&pageSize=1000 - null null
[2025-12-16 16:19:10.893] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:19:10.894] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/DishIngredients?dishId=e95fdeb0-af57-44bd-91ab-29e79dbad536&pageSize=1000 - 204 null null 4.7399ms
[2025-12-16 16:19:10.911] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=e95fdeb0-af57-44bd-91ab-29e79dbad536&pageSize=1000 - null null
[2025-12-16 16:19:10.920] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:19:10.923] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 16:19:10.926] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetDishIngredients", controller = "DishIngredients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetDishIngredients(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.DishIngredientsController (RestaurantApi).
[2025-12-16 16:19:10.958] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (23ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DishIngredients] AS [d]
INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
[2025-12-16 16:19:10.987] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (15ms) [Parameters=[@__dishId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[DishId], [s].[Name] AS [DishName], [s].[IngredientId], [i].[Name] AS [IngredientName], [s].[Quantity]
FROM (
    SELECT [d].[Id], [d].[DishId], [d].[IngredientId], [d].[Quantity], [d0].[Name]
    FROM [DishIngredients] AS [d]
    INNER JOIN [Dishes] AS [d0] ON [d].[DishId] = [d0].[Id]
    WHERE [d].[IsDeleted] = CAST(0 AS bit) AND [d].[DishId] = @__dishId_Value_0
    ORDER BY [d0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Ingredients] AS [i] ON [s].[IngredientId] = [i].[Id]
ORDER BY [s].[Name]
[2025-12-16 16:19:10.994] [INF] [RestaurantAPI.Controllers.DishIngredientsController] Получен список ингредиентов блюд. Количество: 6, Всего: 6, Страница: 1
[2025-12-16 16:19:10.999] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.DishIngredientReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 16:19:11.005] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi) in 75.0814ms
[2025-12-16 16:19:11.009] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.DishIngredientsController.GetDishIngredients (RestaurantApi)'
[2025-12-16 16:19:11.013] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/DishIngredients?dishId=e95fdeb0-af57-44bd-91ab-29e79dbad536&pageSize=1000 - 200 null application/json; charset=utf-8 102.3836ms
[2025-12-16 16:19:30.739] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - null null
[2025-12-16 16:19:30.746] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:19:30.749] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - 204 null null 10.1322ms
[2025-12-16 16:19:30.765] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - null null
[2025-12-16 16:19:30.772] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:19:30.776] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 16:19:30.779] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMenuDishes", controller = "MenuDishes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMenuDishes(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.MenuDishesController (RestaurantApi).
[2025-12-16 16:19:30.809] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (21ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [MenuDishes] AS [m]
INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
[2025-12-16 16:19:30.832] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (14ms) [Parameters=[@__menuId_Value_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[MenuId], [s].[Name] AS [MenuName], [s].[DishId], [d].[Name] AS [DishName]
FROM (
    SELECT [m].[Id], [m].[DishId], [m].[MenuId], [m0].[Name]
    FROM [MenuDishes] AS [m]
    INNER JOIN [Menus] AS [m0] ON [m].[MenuId] = [m0].[Id]
    WHERE [m].[IsDeleted] = CAST(0 AS bit) AND [m].[MenuId] = @__menuId_Value_0
    ORDER BY [m0].[Name]
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [s]
INNER JOIN [Dishes] AS [d] ON [s].[DishId] = [d].[Id]
ORDER BY [s].[Name]
[2025-12-16 16:19:30.839] [INF] [RestaurantAPI.Controllers.MenuDishesController] Получен список блюд в меню. Количество: 4, Всего: 4, Страница: 1
[2025-12-16 16:19:30.843] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.MenuDishReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 16:19:30.846] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi) in 62.3493ms
[2025-12-16 16:19:30.850] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.MenuDishesController.GetMenuDishes (RestaurantApi)'
[2025-12-16 16:19:30.852] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/MenuDishes?menuId=d924f034-6328-41f0-8171-8cd320874a7f&pageSize=1000 - 200 null application/json; charset=utf-8 87.0329ms
[2025-12-16 16:20:04.927] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders - null null
[2025-12-16 16:20:04.933] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:20:04.937] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders - 204 null null 10.2185ms
[2025-12-16 16:20:04.940] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 POST https://localhost:7188/api/Orders - application/json 300
[2025-12-16 16:20:04.951] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:20:04.954] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-16 16:20:04.968] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestaurantAPI.DTOs.OrderReadDto]] CreateOrder(RestaurantAPI.DTOs.OrderCreateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 16:20:05.077] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@__createDto_UserId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[CreatedBy], [u].[DeletedAt], [u].[DeletedBy], [u].[IsDeleted], [u].[Notes], [u].[PasswordHash], [u].[RoleId], [u].[UpdatedAt], [u].[UpdatedBy], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__createDto_UserId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 16:20:05.085] [INF] [RestaurantAPI.Controllers.OrdersController] Создание заказа. UserId: "601d547d-42ee-4d95-abc0-42bf30f4d94b", Notes: null, ItemsCount: 3
[2025-12-16 16:20:05.259] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime), @p7='?' (Size = 50), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (Size = 100), @p11='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [IsDeleted], [Notes], [OrderDate], [Status], [Total], [UpdatedAt], [UpdatedBy], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
[2025-12-16 16:20:05.301] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 16:20:05.374] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "0ca719ed-5bb4-4e18-a5f2-85f0957cb01c", Quantity: 1, Notes: null
[2025-12-16 16:20:05.468] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 16:20:05.474] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e8b4009a-2de3-4f24-9484-408e7d813d61", Quantity: 1, Notes: null
[2025-12-16 16:20:05.479] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[@__itemDto_DishId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[CategoryId], [d].[CreatedAt], [d].[CreatedBy], [d].[DeletedAt], [d].[DeletedBy], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Notes], [d].[Price], [d].[UpdatedAt], [d].[UpdatedBy]
FROM [Dishes] AS [d]
WHERE [d].[Id] = @__itemDto_DishId_0 AND [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 16:20:05.485] [INF] [RestaurantAPI.Controllers.OrdersController] Добавление элемента заказа. DishId: "e95fdeb0-af57-44bd-91ab-29e79dbad536", Quantity: 1, Notes: null
[2025-12-16 16:20:05.611] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (46ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 100), @p2='?' (DbType = DateTime), @p3='?' (Size = 100), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (Size = 100), @p12='?' (DbType = DateTime), @p13='?' (Size = 100), @p14='?' (DbType = DateTime), @p15='?' (Size = 100), @p16='?' (DbType = Guid), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (DbType = Guid), @p20='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (Size = 100), @p24='?' (DbType = DateTime), @p25='?' (Size = 100), @p26='?' (DbType = DateTime), @p27='?' (Size = 100), @p28='?' (DbType = Guid), @p29='?' (DbType = Boolean), @p30='?' (Size = 4000), @p31='?' (DbType = Guid), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = DateTime), @p35='?' (Size = 100), @p37='?' (DbType = Guid), @p36='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [OrderItems] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, 0),
(@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, 1),
(@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 2)) AS i ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [CreatedBy], [DeletedAt], [DeletedBy], [DishId], [IsDeleted], [Notes], [OrderId], [Price], [Quantity], [UpdatedAt], [UpdatedBy])
VALUES (i.[CreatedAt], i.[CreatedBy], i.[DeletedAt], i.[DeletedBy], i.[DishId], i.[IsDeleted], i.[Notes], i.[OrderId], i.[Price], i.[Quantity], i.[UpdatedAt], i.[UpdatedBy])
OUTPUT INSERTED.[Id], i._Position;
UPDATE [Orders] SET [Total] = @p36
OUTPUT 1
WHERE [Id] = @p37;
[2025-12-16 16:20:05.649] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "d7e6d5e2-c0ce-432f-a177-934a3e745239" создан пользователем "601d547d-42ee-4d95-abc0-42bf30f4d94b". Сумма: 1610.00, Блюд: 3
[2025-12-16 16:20:05.662] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing CreatedAtActionResult, writing value of type 'RestaurantAPI.DTOs.OrderReadDto'.
[2025-12-16 16:20:05.714] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi) in 733.3638ms
[2025-12-16 16:20:05.717] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.CreateOrder (RestaurantApi)'
[2025-12-16 16:20:05.719] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 POST https://localhost:7188/api/Orders - 201 null application/json; charset=utf-8 779.3466ms
[2025-12-16 16:20:11.825] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 16:20:11.830] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:20:11.832] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/MyOrders - 204 null null 7.5632ms
[2025-12-16 16:20:11.835] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - null null
[2025-12-16 16:20:11.848] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:20:11.851] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 16:20:11.861] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetMyOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetMyOrders() on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 16:20:11.890] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [u].[Username], [o].[OrderDate], [o].[Status], [o].[Total], [o].[Notes]
FROM [Orders] AS [o]
INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[UserId] = @__userId_0
ORDER BY [o].[OrderDate] DESC
[2025-12-16 16:20:11.899] [INF] [RestaurantAPI.Controllers.OrdersController] Получены заказы пользователя "601d547d-42ee-4d95-abc0-42bf30f4d94b". Количество: 8
[2025-12-16 16:20:11.902] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 16:20:11.905] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi) in 39.2533ms
[2025-12-16 16:20:11.906] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetMyOrders (RestaurantApi)'
[2025-12-16 16:20:11.908] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders/MyOrders - 200 null application/json; charset=utf-8 73.0677ms
[2025-12-16 16:20:22.723] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 16:20:22.728] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:20:22.732] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/overview - 204 null null 8.8968ms
[2025-12-16 16:20:22.734] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/overview - null null
[2025-12-16 16:20:22.746] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:20:22.749] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 16:20:22.758] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOverview", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOverview(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 16:20:22.791] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 16:20:22.809] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 16:20:22.827] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 16:20:22.843] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Dishes] AS [d]
WHERE [d].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 16:20:22.904] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], COUNT(*) AS [Count]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[Status]
[2025-12-16 16:20:22.910] [INF] [RestaurantAPI.Controllers.StatisticsController] Получена общая статистика. Выручка: 73610.00, Заказов: 14
[2025-12-16 16:20:22.938] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`6[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 16:20:22.951] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi) in 190.4631ms
[2025-12-16 16:20:22.955] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetOverview (RestaurantApi)'
[2025-12-16 16:20:22.960] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/overview - 200 null application/json; charset=utf-8 225.4969ms
[2025-12-16 16:20:22.965] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 16:20:22.970] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:20:22.972] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/top-dishes?top=10 - 204 null null 6.7543ms
[2025-12-16 16:20:22.974] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - null null
[2025-12-16 16:20:22.980] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:20:22.984] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 16:20:22.995] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetTopDishes", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetTopDishes(Int32, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 16:20:23.074] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (28ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [o].[DishId], [d].[Name] AS [DishName], [c].[Name] AS [CategoryName], [c].[Id] AS [CategoryId], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COUNT(DISTINCT ([o].[OrderId])) AS [OrderCount]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [o].[DishId], [d].[Name], [c].[Name], [c].[Id]
ORDER BY COALESCE(SUM([o].[Quantity]), 0) DESC
[2025-12-16 16:20:23.081] [INF] [RestaurantAPI.Controllers.StatisticsController] Получен топ 10 блюд
[2025-12-16 16:20:23.084] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType8`7[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 16:20:23.092] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi) in 92.4515ms
[2025-12-16 16:20:23.095] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetTopDishes (RestaurantApi)'
[2025-12-16 16:20:23.097] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/top-dishes?top=10 - 200 null application/json; charset=utf-8 123.9039ms
[2025-12-16 16:20:23.102] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 16:20:23.107] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:20:23.109] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-category - 204 null null 6.37ms
[2025-12-16 16:20:23.111] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - null null
[2025-12-16 16:20:23.118] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:20:23.121] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 16:20:23.131] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByCategory", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByCategory(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 16:20:23.175] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id] AS [CategoryId], [c].[Name] AS [CategoryName], COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) AS [TotalRevenue], COALESCE(SUM([o].[Quantity]), 0) AS [TotalQuantity]
FROM [OrderItems] AS [o]
INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
INNER JOIN [Categories] AS [c] ON [d].[CategoryId] = [c].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o0].[IsDeleted] = CAST(0 AS bit)
GROUP BY [c].[Id], [c].[Name]
ORDER BY COALESCE(SUM([o].[Price] * CAST([o].[Quantity] AS decimal(10,2))), 0.0) DESC
[2025-12-16 16:20:23.182] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType10`4[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 16:20:23.194] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi) in 58.6651ms
[2025-12-16 16:20:23.197] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByCategory (RestaurantApi)'
[2025-12-16 16:20:23.201] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-category - 200 null application/json; charset=utf-8 90.0146ms
[2025-12-16 16:20:23.243] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 16:20:23.247] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:20:23.249] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/recent-orders?count=10 - 204 null null 5.9129ms
[2025-12-16 16:20:23.251] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - null null
[2025-12-16 16:20:23.263] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:20:23.266] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 16:20:23.276] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRecentOrders", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRecentOrders(Int32) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 16:20:23.305] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[OrderDate], [o0].[Status], [o0].[Total], [u].[Username]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 16:20:23.319] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType11`5[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 16:20:23.328] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi) in 47.1858ms
[2025-12-16 16:20:23.330] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRecentOrders (RestaurantApi)'
[2025-12-16 16:20:23.333] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/recent-orders?count=10 - 200 null application/json; charset=utf-8 81.7172ms
[2025-12-16 16:20:23.343] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 16:20:23.348] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:20:23.349] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Statistics/revenue-by-date?period=day - 204 null null 6.1054ms
[2025-12-16 16:20:23.352] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - null null
[2025-12-16 16:20:23.358] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:20:23.359] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 16:20:23.370] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetRevenueByDate", controller = "Statistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetRevenueByDate(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller RestaurantAPI.Controllers.StatisticsController (RestaurantApi).
[2025-12-16 16:20:23.404] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__startDate_Value_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(date, [o].[OrderDate]) AS [OrderDate], [o].[Total]
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderDate] >= @__startDate_Value_0
[2025-12-16 16:20:23.426] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 16:20:23.435] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi) in 60.2372ms
[2025-12-16 16:20:23.438] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.StatisticsController.GetRevenueByDate (RestaurantApi)'
[2025-12-16 16:20:23.441] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Statistics/revenue-by-date?period=day - 200 null application/json; charset=utf-8 88.8216ms
[2025-12-16 16:21:11.874] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 16:21:11.875] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 16:21:11.881] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:21:11.883] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:21:11.885] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 10.985ms
[2025-12-16 16:21:11.885] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 9.9617ms
[2025-12-16 16:21:11.889] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 16:21:11.890] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 16:21:11.901] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:21:11.906] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:21:11.909] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 16:21:11.911] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 16:21:11.922] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 16:21:11.922] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 16:21:11.950] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 16:21:11.952] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 16:21:11.968] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [u].[Username], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[Notes]
FROM (
    SELECT [o].[Id], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 16:21:11.976] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[Username], [r].[Name] AS [RoleName]
FROM (
    SELECT [u].[Id], [u].[RoleId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-16 16:21:11.976] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 14, Всего: 14, Страница: 1
[2025-12-16 16:21:11.983] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 4, Всего: 4, Страница: 1
[2025-12-16 16:21:11.985] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 16:21:11.987] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 16:21:11.991] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 63.2241ms
[2025-12-16 16:21:11.993] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 16:21:11.994] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 64.2159ms
[2025-12-16 16:21:11.996] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 106.797ms
[2025-12-16 16:21:12.000] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 16:21:12.006] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 116.7135ms
[2025-12-16 16:21:19.382] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/d7e6d5e2-c0ce-432f-a177-934a3e745239 - null null
[2025-12-16 16:21:19.395] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:21:19.397] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/d7e6d5e2-c0ce-432f-a177-934a3e745239 - 204 null null 14.3573ms
[2025-12-16 16:21:19.401] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/d7e6d5e2-c0ce-432f-a177-934a3e745239 - null null
[2025-12-16 16:21:19.405] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:21:19.409] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 16:21:19.420] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-16 16:21:19.452] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (3ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 16:21:19.484] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-16 16:21:19.495] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 16:21:19.504] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 76.8362ms
[2025-12-16 16:21:19.507] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 16:21:19.512] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/d7e6d5e2-c0ce-432f-a177-934a3e745239 - 200 null application/json; charset=utf-8 110.8179ms
[2025-12-16 16:21:22.985] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders/d7e6d5e2-c0ce-432f-a177-934a3e745239 - null null
[2025-12-16 16:21:22.991] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:21:22.994] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders/d7e6d5e2-c0ce-432f-a177-934a3e745239 - 204 null null 8.3349ms
[2025-12-16 16:21:22.996] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 PUT https://localhost:7188/api/Orders/d7e6d5e2-c0ce-432f-a177-934a3e745239 - application/json 22
[2025-12-16 16:21:23.003] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:21:23.005] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.UpdateOrder (RestaurantApi)'
[2025-12-16 16:21:23.015] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "UpdateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateOrder(System.Guid, RestaurantAPI.DTOs.OrderUpdateDto) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 16:21:23.054] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__id_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 16:21:23.070] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (Size = 50), @p1='?' (DbType = DateTime), @p2='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [Status] = @p0, [UpdatedAt] = @p1, [UpdatedBy] = @p2
OUTPUT 1
WHERE [Id] = @p3;
[2025-12-16 16:21:23.080] [INF] [RestaurantAPI.Controllers.OrdersController] Заказ "d7e6d5e2-c0ce-432f-a177-934a3e745239" обновлен. Статус изменен с Pending на Completed пользователем admin
[2025-12-16 16:21:23.090] [INF] [Microsoft.AspNetCore.Mvc.StatusCodeResult] Executing StatusCodeResult, setting HTTP status code 204
[2025-12-16 16:21:23.094] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.UpdateOrder (RestaurantApi) in 74.8618ms
[2025-12-16 16:21:23.098] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.UpdateOrder (RestaurantApi)'
[2025-12-16 16:21:23.102] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 PUT https://localhost:7188/api/Orders/d7e6d5e2-c0ce-432f-a177-934a3e745239 - 204 null null 106.1131ms
[2025-12-16 16:21:24.206] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/4c79bfdc-1d09-42c2-87dd-2f1cd1b6d97c - null null
[2025-12-16 16:21:24.212] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:21:24.213] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/OrderItems/ByOrder/4c79bfdc-1d09-42c2-87dd-2f1cd1b6d97c - 204 null null 7.4105ms
[2025-12-16 16:21:24.230] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/4c79bfdc-1d09-42c2-87dd-2f1cd1b6d97c - null null
[2025-12-16 16:21:24.235] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:21:24.238] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 16:21:24.242] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrderItemsByOrder", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrderItemsByOrder(System.Guid) on controller RestaurantAPI.Controllers.OrderItemsController (RestaurantApi).
[2025-12-16 16:21:24.259] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Id], [o].[CreatedAt], [o].[CreatedBy], [o].[DeletedAt], [o].[DeletedBy], [o].[IsDeleted], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UpdatedAt], [o].[UpdatedBy], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0 AND [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 16:21:24.283] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (14ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[DishId], [d].[Name] AS [DishName], [o].[Quantity], [o].[Price], [o].[Notes]
FROM [OrderItems] AS [o]
INNER JOIN [Dishes] AS [d] ON [o].[DishId] = [d].[Id]
WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[OrderId] = @__orderId_0
[2025-12-16 16:21:24.289] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderItemReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-12-16 16:21:24.295] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi) in 44.5934ms
[2025-12-16 16:21:24.300] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrderItemsController.GetOrderItemsByOrder (RestaurantApi)'
[2025-12-16 16:21:24.302] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/OrderItems/ByOrder/4c79bfdc-1d09-42c2-87dd-2f1cd1b6d97c - 200 null application/json; charset=utf-8 72.4046ms
[2025-12-16 16:43:12.668] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 16:43:12.668] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 16:43:12.672] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:43:12.676] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:43:12.677] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 9.1755ms
[2025-12-16 16:43:12.678] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 9.9283ms
[2025-12-16 16:43:12.681] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 16:43:12.682] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 16:43:12.691] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:43:12.694] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 16:43:12.697] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 16:43:12.698] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 16:43:12.700] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetUsers(System.Nullable`1[System.Guid], System.String, System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.UsersController (RestaurantApi).
[2025-12-16 16:43:12.702] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with {action = "GetOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetOrders(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Decimal], System.Nullable`1[System.Decimal], System.String, System.String, Int32, Int32) on controller RestaurantAPI.Controllers.OrdersController (RestaurantApi).
[2025-12-16 16:43:12.716] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 16:43:12.718] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[IsDeleted] = CAST(0 AS bit)
[2025-12-16 16:43:12.732] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u0].[Id], [u0].[Username], [r].[Name] AS [RoleName]
FROM (
    SELECT [u].[Id], [u].[RoleId], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [u].[Username]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [u0]
INNER JOIN [Roles] AS [r] ON [u0].[RoleId] = [r].[Id]
ORDER BY [u0].[Username]
[2025-12-16 16:43:12.733] [INF] [Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [u].[Username], [o0].[OrderDate], [o0].[Status], [o0].[Total], [o0].[Notes]
FROM (
    SELECT [o].[Id], [o].[Notes], [o].[OrderDate], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [o].[OrderDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [Users] AS [u] ON [o0].[UserId] = [u].[Id]
ORDER BY [o0].[OrderDate] DESC
[2025-12-16 16:43:12.739] [INF] [RestaurantAPI.Controllers.UsersController] Получен список пользователей. Количество: 4, Всего: 4, Страница: 1
[2025-12-16 16:43:12.742] [INF] [RestaurantAPI.Controllers.OrdersController] Получен список заказов. Количество: 14, Всего: 14, Страница: 1
[2025-12-16 16:43:12.744] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.UserReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 16:43:12.747] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`5[[System.Collections.Generic.List`1[[RestaurantAPI.DTOs.OrderReadDto, RestaurantApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-12-16 16:43:12.750] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi) in 43.9767ms
[2025-12-16 16:43:12.752] [INF] [Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi) in 41.576ms
[2025-12-16 16:43:12.754] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.OrdersController.GetOrders (RestaurantApi)'
[2025-12-16 16:43:12.752] [INF] [Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint 'RestaurantAPI.Controllers.UsersController.GetUsers (RestaurantApi)'
[2025-12-16 16:43:12.755] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 200 null application/json; charset=utf-8 73.1688ms
[2025-12-16 16:43:12.757] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 200 null application/json; charset=utf-8 75.5008ms
[2025-12-16 21:42:54.472] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 21:42:54.472] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 21:42:54.500] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 21:42:54.502] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 21:42:54.502] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Users?pageSize=1000 - 204 null null 30.0862ms
[2025-12-16 21:42:54.503] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 OPTIONS https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 204 null null 30.4108ms
[2025-12-16 21:42:54.505] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - null null
[2025-12-16 21:42:54.505] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - null null
[2025-12-16 21:42:54.514] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 21:42:54.516] [INF] [Microsoft.AspNetCore.Cors.Infrastructure.CorsService] CORS policy execution successful.
[2025-12-16 21:42:54.520] [INF] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '16.12.2025 15:18:36', Current time (UTC): '16.12.2025 18:42:54'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[2025-12-16 21:42:54.519] [INF] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '16.12.2025 15:18:36', Current time (UTC): '16.12.2025 18:42:54'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[2025-12-16 21:42:54.546] [INF] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '16.12.2025 15:18:36', Current time (UTC): '16.12.2025 18:42:54'.
[2025-12-16 21:42:54.546] [INF] [Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '16.12.2025 15:18:36', Current time (UTC): '16.12.2025 18:42:54'.
[2025-12-16 21:42:54.548] [INF] [Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
[2025-12-16 21:42:54.548] [INF] [Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Waiter|Admin)
[2025-12-16 21:42:54.565] [ERR] [Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Program.<>c.<<Main>$>b__0_11(JwtBearerChallengeContext context) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Program.cs:line 156
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerEvents.Challenge(JwtBearerChallengeContext context)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.ChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
[2025-12-16 21:42:54.570] [ERR] [Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Program.<>c.<<Main>$>b__0_11(JwtBearerChallengeContext context) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Program.cs:line 156
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerEvents.Challenge(JwtBearerChallengeContext context)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.ChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
[2025-12-16 21:42:54.589] [WRN] [Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware] The response has already started, the error handler will not be executed.
[2025-12-16 21:42:54.591] [WRN] [Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware] The response has already started, the error handler will not be executed.
[2025-12-16 21:42:54.593] [ERR] [Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Program.<>c.<<Main>$>b__0_11(JwtBearerChallengeContext context) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Program.cs:line 156
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerEvents.Challenge(JwtBearerChallengeContext context)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.ChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2025-12-16 21:42:54.593] [ERR] [Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Program.<>c.<<Main>$>b__0_11(JwtBearerChallengeContext context) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Program.cs:line 156
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerEvents.Challenge(JwtBearerChallengeContext context)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.ChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2025-12-16 21:42:54.597] [WRN] [Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware] The response has already started, the error page middleware will not be executed.
[2025-12-16 21:42:54.600] [WRN] [Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware] The response has already started, the error page middleware will not be executed.
[2025-12-16 21:42:54.601] [ERR] [Microsoft.AspNetCore.Server.Kestrel] Connection id "0HNHSKM5UVI09", Request id "0HNHSKM5UVI09:00000005": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Program.<>c.<<Main>$>b__0_11(JwtBearerChallengeContext context) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Program.cs:line 156
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerEvents.Challenge(JwtBearerChallengeContext context)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.ChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
[2025-12-16 21:42:54.601] [ERR] [Microsoft.AspNetCore.Server.Kestrel] Connection id "0HNHSKM5UVI09", Request id "0HNHSKM5UVI09:00000007": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Program.<>c.<<Main>$>b__0_11(JwtBearerChallengeContext context) in D:\restaurant-project\RestaurantAPI\RestaurantApi\Program.cs:line 156
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerEvents.Challenge(JwtBearerChallengeContext context)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.ChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
[2025-12-16 21:42:54.621] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Users?pageSize=1000 - 401 null application/json 115.9485ms
[2025-12-16 21:42:54.626] [INF] [Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/2 GET https://localhost:7188/api/Orders?page=1&pageSize=20&sortBy=orderDate&order=desc - 401 null application/json 120.3461ms
